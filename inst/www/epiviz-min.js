(function(a,c){function b(a){var b=fb[a]={};p.each(a.split(Oa),function(a,d){b[d]=!0});return b}function d(a,b,d){if(d===c&&1===a.nodeType)if(d="data-"+b.replace(gb,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:hb.test(d)?p.parseJSON(d):d}catch(e){}p.data(a,b,d)}else d=c;return d}function e(a){for(var b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}
function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,d){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,c){return!!b.call(a,c,a)===d});if(b.nodeType)return p.grep(a,function(a,c){return a===b===d});if("string"===typeof b){var c=p.grep(a,function(a){return 1===a.nodeType});if(Q.test(b))return p.filter(b,c,!d);b=p.filter(b,c)}return p.grep(a,function(a,c){return 0<=p.inArray(a,b)===d})}function n(a){var b=ma.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function q(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function v(a,b){if(1===b.nodeType&&p.hasData(a)){var d,c,e;c=p._data(a);var f=p._data(b,c),h=c.events;if(h)for(d in delete f.handle,f.events={},h)for(c=0,e=h[d].length;c<e;c++)p.event.add(b,d,h[d][c]);f.data&&(f.data=p.extend({},f.data))}}function A(a,b){var d;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),
b.mergeAttributes&&b.mergeAttributes(a),d=b.nodeName.toLowerCase(),"object"===d?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===d&&Qa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===d?b.selected=a.defaultSelected:"input"===d||"textarea"===d?b.defaultValue=a.defaultValue:"script"===d&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando))}function w(a){return"undefined"!==
typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function E(a){Qa.test(a.type)&&(a.defaultChecked=a.checked)}function D(a,b){if(b in a)return b;for(var d=b.charAt(0).toUpperCase()+b.slice(1),c=b,e=Gd.length;e--;)if(b=Gd[e]+d,b in a)return b;return c}function J(a,b){a=b||a;return"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)}function I(a,b){for(var d,c,e=[],f=0,h=a.length;f<h;f++)d=a[f],d.style&&(e[f]=p._data(d,
"olddisplay"),b?(e[f]||"none"!==d.style.display||(d.style.display=""),""===d.style.display&&J(d)&&(e[f]=p._data(d,"olddisplay",F(d.nodeName)))):(c=ib(d,"display"),e[f]||"none"===c||p._data(d,"olddisplay",c)));for(f=0;f<h;f++)d=a[f],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[f]||"":"none");return a}function C(a,b,d){return(a=Hd.exec(b))?Math.max(0,a[1]-(d||0))+(a[2]||"px"):b}function t(a,b,d,c){b=d===(c?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=
2)"margin"===d&&(e+=p.css(a,d+Fb[b],!0)),c?("content"===d&&(e-=parseFloat(ib(a,"padding"+Fb[b]))||0),"margin"!==d&&(e-=parseFloat(ib(a,"border"+Fb[b]+"Width"))||0)):(e+=parseFloat(ib(a,"padding"+Fb[b]))||0,"padding"!==d&&(e+=parseFloat(ib(a,"border"+Fb[b]+"Width"))||0));return e}function z(a,b,d){var c="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&"border-box"===p.css(a,"boxSizing");if(0>=c||null==c){c=ib(a,b);if(0>c||null==c)c=a.style[b];if(vc.test(c))return c;e=f&&(p.support.boxSizingReliable||
c===a.style[b]);c=parseFloat(c)||0}return c+t(a,b,d||(f?"border":"content"),e)+"px"}function F(a){if(wc[a])return wc[a];var b=p("<"+a+">").appendTo(N.body),d=b.css("display");b.remove();if("none"===d||""===d)Kb=N.body.appendChild(Kb||p.extend(N.createElement("iframe"),{frameBorder:0,width:0,height:0})),kc&&Kb.createElement||(kc=(Kb.contentWindow||Kb.contentDocument).document,kc.write("<!doctype html><html><body>"),kc.close()),b=kc.body.appendChild(kc.createElement(a)),d=ib(b,"display"),N.body.removeChild(Kb);
return wc[a]=d}function O(a,b,d,c){var e;if(p.isArray(b))p.each(b,function(b,e){d||ge.test(a)?c(a,e):O(a+"["+("object"===typeof e?b:"")+"]",e,d,c)});else if(d||"object"!==p.type(b))c(a,b);else for(e in b)O(a+"["+e+"]",b[e],d,c)}function S(a){return function(b,d){"string"!==typeof b&&(d=b,b="*");var c,e,f=b.toLowerCase().split(Oa),h=0,g=f.length;if(p.isFunction(d))for(;h<g;h++)c=f[h],(e=/^\+/.test(c))&&(c=c.substr(1)||"*"),c=a[c]=a[c]||[],c[e?"unshift":"push"](d)}}function V(a,b,d,e,f,h){f=f||b.dataTypes[0];
h=h||{};h[f]=!0;var g;f=a[f];for(var l=0,m=f?f.length:0,B=a===od;l<m&&(B||!g);l++)g=f[l](b,d,e),"string"===typeof g&&(!B||h[g]?g=c:(b.dataTypes.unshift(g),g=V(a,b,d,e,g,h)));!B&&g||h["*"]||(g=V(a,b,d,e,"*",h));return g}function T(a,b){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in b)b[d]!==c&&((f[d]?a:e||(e={}))[d]=b[d]);e&&p.extend(!0,a,e)}function pa(){try{return new a.XMLHttpRequest}catch(b){}}function La(){setTimeout(function(){Mc=c},0);return Mc=p.now()}function Wa(a,b){p.each(b,function(b,
d){for(var c=(ad[b]||[]).concat(ad["*"]),e=0,f=c.length;e<f&&!c[e].call(a,b,d);e++);})}function va(a,b,d){var c=0,e=Yb.length,f=p.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Mc||La(),b=Math.max(0,g.startTime+g.duration-b),d=1-(b/g.duration||0),c=0,e=g.tweens.length;c<e;c++)g.tweens[c].run(d);f.notifyWith(a,[g,d,b]);if(1>d&&e)return b;f.resolveWith(a,[g]);return!1},g=f.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},d),originalProperties:b,originalOptions:d,
startTime:Mc||La(),duration:d.duration,tweens:[],createTween:function(b,d,c){b=p.Tween(a,g.opts,b,d,g.opts.specialEasing[b]||g.opts.easing);g.tweens.push(b);return b},stop:function(b){for(var d=0,c=b?g.tweens.length:0;d<c;d++)g.tweens[d].run(1);b?f.resolveWith(a,[g,b]):f.rejectWith(a,[g,b]);return this}});d=g.props;for(ha(d,g.opts.specialEasing);c<e;c++)if(b=Yb[c].call(g,a,d,g.opts))return b;Wa(g,d);p.isFunction(g.opts.start)&&g.opts.start.call(a,g);p.fx.timer(p.extend(h,{anim:g,queue:g.opts.queue,
elem:a}));return g.progress(g.opts.progress).done(g.opts.done,g.opts.complete).fail(g.opts.fail).always(g.opts.always)}function ha(a,b){var d,c,e,f,g;for(d in a)if(c=p.camelCase(d),e=b[c],f=a[d],p.isArray(f)&&(e=f[1],f=a[d]=f[0]),d!==c&&(a[c]=f,delete a[d]),(g=p.cssHooks[c])&&"expand"in g)for(d in f=g.expand(f),delete a[c],f)d in a||(a[d]=f[d],b[d]=e);else b[c]=e}function wa(a,b,d,c,e){return new wa.prototype.init(a,b,d,c,e)}function ua(a,b){var d,c={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)d=Fb[e],c["margin"+
d]=c["padding"+d]=a;b&&(c.opacity=c.width=a);return c}function ka(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var oa,sa,N=a.document,da=a.location,pb=a.navigator,jb=a.jQuery,Ga=a.$,qa=Array.prototype.push,Da=Array.prototype.slice,cb=Array.prototype.indexOf,ca=Object.prototype.toString,qb=Object.prototype.hasOwnProperty,ub=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,oa)},nb=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Lb=/\S/,Oa=/\s+/,Gb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
Ra=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,vb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,wb=/^[\],:{}\s]*$/,Mb=/(?:^|:|,)(?:\s*\[)+/g,Bb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,xb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Ia=/^-ms-/,Nb=/-([\da-z])/gi,$a=function(a,b){return(b+"").toUpperCase()},Rb=function(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",Rb,!1),p.ready()):"complete"===N.readyState&&(N.detachEvent("onreadystatechange",Rb),p.ready())},ab={};p.fn=p.prototype=
{constructor:p,init:function(a,b,d){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Ra.exec(a);if(!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1])return a=(b=b instanceof p?b[0]:b)&&b.nodeType?b.ownerDocument||b:N,a=p.parseHTML(e[1],a,!0),vb.test(e[1])&&p.isPlainObject(b)&&this.attr.call(a,b,!0),p.merge(this,a);if((b=N.getElementById(e[2]))&&
b.parentNode){if(b.id!==e[2])return d.find(a);this.length=1;this[0]=b}this.context=N;this.selector=a;return this}if(p.isFunction(a))return d.ready(a);a.selector!==c&&(this.selector=a.selector,this.context=a.context);return p.makeArray(a,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Da.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,d){a=p.merge(this.constructor(),a);a.prevObject=
this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+d:b&&(a.selector=this.selector+"."+b+"("+d+")");return a},each:function(a,b){return p.each(this,a,b)},ready:function(a){p.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Da.apply(this,arguments),"slice",Da.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:qa,sort:[].sort,splice:[].splice};p.fn.init.prototype=p.fn;p.extend=p.fn.extend=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,l=arguments.length,m=!1;"boolean"===typeof g&&(m=g,g=arguments[1]||{},h=2);"object"===typeof g||p.isFunction(g)||(g={});l===h&&(g=this,--h);for(;h<l;h++)if(null!=(a=arguments[h]))for(b in a)d=g[b],e=a[b],g!==e&&(m&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,
d=d&&p.isArray(d)?d:[]):d=d&&p.isPlainObject(d)?d:{},g[b]=p.extend(m,d,e)):e!==c&&(g[b]=e));return g};p.extend({noConflict:function(b){a.$===p&&(a.$=Ga);b&&a.jQuery===p&&(a.jQuery=jb);return p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(!0===a?!--p.readyWait:!p.isReady){if(!N.body)return setTimeout(p.ready,1);p.isReady=!0;!0!==a&&0<--p.readyWait||(sa.resolveWith(N,[p]),p.fn.trigger&&p(N).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===
p.type(a)},isArray:Array.isArray||function(a){return"array"===p.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):ab[ca.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==p.type(a)||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!qb.call(a,"constructor")&&!qb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var d in a);return d===c||
qb.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,d){var c;if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(d=b,b=0);b=b||N;if(c=vb.exec(a))return[b.createElement(c[1])];c=p.buildFragment([a],b,d?null:[]);return p.merge([],(c.cacheable?p.clone(c.fragment):c.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(wb.test(b.replace(Bb,
"@").replace(xb,"]").replace(Mb,"")))return(new Function("return "+b))();p.error("Invalid JSON: "+b)},parseXML:function(b){var d,e;if(!b||"string"!==typeof b)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=c}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+b);return d},noop:function(){},globalEval:function(b){b&&Lb.test(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(Ia,"ms-").replace(Nb,$a)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=g===c||p.isFunction(a);if(d)if(h)for(e in a){if(!1===b.apply(a[e],d))break}else for(;f<g&&!1!==b.apply(a[f++],d););else if(h)for(e in a){if(!1===b.call(a[e],e,a[e]))break}else for(;f<g&&!1!==b.call(a[f],f,a[f++]););return a},trim:ub&&!ub.call("\ufeff\u00a0")?function(a){return null==a?"":ub.call(a)}:
function(a){return null==a?"":(a+"").replace(Gb,"")},makeArray:function(a,b){var d,c=b||[];null!=a&&(d=p.type(a),null==a.length||"string"===d||"function"===d||"regexp"===d||p.isWindow(a)?qa.call(c,a):p.merge(c,a));return c},inArray:function(a,b,d){var c;if(b){if(cb)return cb.call(b,a,d);c=b.length;for(d=d?0>d?Math.max(0,c+d):d:0;d<c;d++)if(d in b&&b[d]===a)return d}return-1},merge:function(a,b){var d=b.length,e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=b[f];else for(;b[f]!==c;)a[e++]=
b[f++];a.length=e;return a},grep:function(a,b,d){var c,e=[],f=0,g=a.length;for(d=!!d;f<g;f++)c=!!b(a[f],f),d!==c&&e.push(a[f]);return e},map:function(a,b,d){var e,f,g=[],h=0,l=a.length;if(a instanceof p||l!==c&&"number"===typeof l&&(0<l&&a[0]&&a[l-1]||0===l||p.isArray(a)))for(;h<l;h++)e=b(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,b){var d,e;"string"===typeof b&&(d=a[b],b=a,a=d);if(!p.isFunction(a))return c;
e=Da.call(arguments,2);d=function(){return a.apply(b,e.concat(Da.call(arguments)))};d.guid=a.guid=a.guid||p.guid++;return d},access:function(a,b,d,e,f,g,h){var l,m=null==d,B=0,K=a.length;if(d&&"object"===typeof d){for(B in d)p.access(a,b,B,d[B],1,g,e);f=1}else if(e!==c){l=h===c&&p.isFunction(e);m&&(l?(l=b,b=function(a,b,d){return l.call(p(a),d)}):(b.call(a,e),b=null));if(b)for(;B<K;B++)b(a[B],d,l?e.call(a[B],B,b(a[B],d)):e,h);f=1}return f?a:m?b.call(a):K?b(a[0],d):g},now:function(){return(new Date).getTime()}});
p.ready.promise=function(b){if(!sa)if(sa=p.Deferred(),"complete"===N.readyState)setTimeout(p.ready,1);else if(N.addEventListener)N.addEventListener("DOMContentLoaded",Rb,!1),a.addEventListener("load",p.ready,!1);else{N.attachEvent("onreadystatechange",Rb);a.attachEvent("onload",p.ready);var d=!1;try{d=null==a.frameElement&&N.documentElement}catch(e){}d&&d.doScroll&&function $c(){if(!p.isReady){try{d.doScroll("left")}catch(a){return setTimeout($c,50)}p.ready()}}()}return sa.promise(b)};p.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){ab["[object "+b+"]"]=b.toLowerCase()});oa=p(N);var fb={};p.Callbacks=function(a){a="string"===typeof a?fb[a]||b(a):p.extend({},a);var d,e,f,g,h,l,m=[],B=!a.once&&[],K=function(b){d=a.memory&&b;e=!0;l=g||0;g=0;h=m.length;for(f=!0;m&&l<h;l++)if(!1===m[l].apply(b[0],b[1])&&a.stopOnFalse){d=!1;break}f=!1;m&&(B?B.length&&K(B.shift()):d?m=[]:n.disable())},n={add:function(){if(m){var b=m.length;(function ie(b){p.each(b,function(b,d){var e=p.type(d);"function"!==e||a.unique&&n.has(d)?d&&d.length&&
"string"!==e&&ie(d):m.push(d)})})(arguments);f?h=m.length:d&&(g=b,K(d))}return this},remove:function(){m&&p.each(arguments,function(a,b){for(var d;-1<(d=p.inArray(b,m,d));)m.splice(d,1),f&&(d<=h&&h--,d<=l&&l--)});return this},has:function(a){return-1<p.inArray(a,m)},empty:function(){m=[];return this},disable:function(){m=B=d=c;return this},disabled:function(){return!m},lock:function(){B=c;d||n.disable();return this},locked:function(){return!B},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():
b];!m||e&&!B||(f?B.push(b):K(b));return this},fire:function(){n.fireWith(this,arguments);return this},fired:function(){return!!e}};return n};p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],d="pending",e={state:function(){return d},always:function(){c.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(d){p.each(b,
function(b,e){var f=e[0],g=a[b];c[e[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);if(a&&p.isFunction(a.promise))a.promise().done(d.resolve).fail(d.reject).progress(d.notify);else d[f+"With"](this===c?d:this,[a])}:d[f])});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,e):e}},c={};e.pipe=e.then;p.each(b,function(a,f){var g=f[2],h=f[3];e[f[1]]=g.add;h&&g.add(function(){d=h},b[a^1][2].disable,b[2][2].lock);c[f[0]]=g.fire;c[f[0]+"With"]=g.fireWith});e.promise(c);a&&a.call(c,
c);return c},when:function(a){var b=0,d=Da.call(arguments),e=d.length,c=1!==e||a&&p.isFunction(a.promise)?e:0,f=1===c?a:p.Deferred(),g=function(a,b,d){return function(e){b[a]=this;d[a]=1<arguments.length?Da.call(arguments):e;d===h?f.notifyWith(b,d):--c||f.resolveWith(b,d)}},h,l,m;if(1<e)for(h=Array(e),l=Array(e),m=Array(e);b<e;b++)d[b]&&p.isFunction(d[b].promise)?d[b].promise().done(g(b,m,d)).fail(f.reject).progress(g(b,l,h)):--c;c||f.resolveWith(m,d);return f.promise()}});p.support=function(){var b,
d,e,c,f,g,h,l=N.createElement("div");l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=l.getElementsByTagName("*");e=l.getElementsByTagName("a")[0];e.style.cssText="top:1px;float:left;opacity:.5";if(!d||!d.length)return{};c=N.createElement("select");f=c.appendChild(N.createElement("option"));d=l.getElementsByTagName("input")[0];b={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,
style:/top/.test(e.getAttribute("style")),hrefNormalized:"/a"===e.getAttribute("href"),opacity:/^0.5/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:"on"===d.value,optSelected:f.selected,getSetAttribute:"t"!==l.className,enctype:!!N.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==N.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===N.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,
reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};d.checked=!0;b.noCloneChecked=d.cloneNode(!0).checked;c.disabled=!0;b.optDisabled=!f.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",e=function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"),l.detachEvent("onclick",e));d=N.createElement("input");d.value="t";d.setAttribute("type","radio");b.radioValue="t"===d.value;d.setAttribute("checked","checked");
d.setAttribute("name","t");l.appendChild(d);e=N.createDocumentFragment();e.appendChild(l.lastChild);b.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=d.checked;e.removeChild(d);e.appendChild(l);if(l.attachEvent)for(g in{submit:!0,change:!0,focusin:!0})d="on"+g,h=d in l,h||(l.setAttribute(d,"return;"),h="function"===typeof l[d]),b[g+"Bubbles"]=h;p(function(){var d,e,c,f=N.getElementsByTagName("body")[0];f&&(d=N.createElement("div"),d.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",
f.insertBefore(d,f.firstChild),e=N.createElement("div"),d.appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=e.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",b.reliableHiddenOffsets=h&&0===c[0].offsetHeight,e.innerHTML="",e.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
b.boxSizing=4===e.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(e,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(e,null)||{width:"4px"}).width,c=N.createElement("div"),c.style.cssText=e.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",c.style.marginRight=c.style.width="0",e.style.width="1px",e.appendChild(c),b.reliableMarginRight=!parseFloat((a.getComputedStyle(c,null)||{}).marginRight)),
"undefined"!==typeof e.style.zoom&&(e.innerHTML="",e.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===e.offsetWidth,e.style.display="block",e.style.overflow="visible",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==e.offsetWidth,d.style.zoom=1),f.removeChild(d))});e.removeChild(l);d=e=c=f=d=e=l=null;return b}();var hb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gb=/([A-Z])/g;p.extend({cache:{},
deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!e(a)},data:function(a,b,d,e){if(p.acceptData(a)){var f=p.expando,g="string"===typeof b,h=a.nodeType,l=h?p.cache:a,m=h?a[f]:a[f]&&f;if(m&&l[m]&&(e||l[m].data)||!g||d!==c){m||(h?a[f]=m=p.deletedIds.pop()||p.guid++:m=f);l[m]||(l[m]={},h||(l[m].toJSON=p.noop));
if("object"===typeof b||"function"===typeof b)e?l[m]=p.extend(l[m],b):l[m].data=p.extend(l[m].data,b);a=l[m];e||(a.data||(a.data={}),a=a.data);d!==c&&(a[p.camelCase(b)]=d);g?(d=a[b],null==d&&(d=a[p.camelCase(b)])):d=a;return d}}},removeData:function(a,b,d){if(p.acceptData(a)){var c,f,g,h=a.nodeType,l=h?p.cache:a,m=h?a[p.expando]:p.expando;if(l[m]){if(b&&(c=d?l[m]:l[m].data)){p.isArray(b)||(b in c?b=[b]:(b=p.camelCase(b),b=b in c?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete c[b[f]];if(!(d?
e:p.isEmptyObject)(c))return}if(!d&&(delete l[m].data,!e(l[m])))return;h?p.cleanData([a],!0):p.support.deleteExpando||l!=l.window?delete l[m]:l[m]=null}}},_data:function(a,b,d){return p.data(a,b,d,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});p.fn.extend({data:function(a,b){var e,f,g,h,l,m=this[0],B=0,K=null;if(a===c){if(this.length&&(K=p.data(m),1===m.nodeType&&!p._data(m,"parsedAttrs"))){g=m.attributes;for(l=g.length;B<
l;B++)h=g[B].name,h.indexOf("data-")||(h=p.camelCase(h.substring(5)),d(m,h,K[h]));p._data(m,"parsedAttrs",!0)}return K}if("object"===typeof a)return this.each(function(){p.data(this,a)});e=a.split(".",2);e[1]=e[1]?"."+e[1]:"";f=e[1]+"!";return p.access(this,function(b){if(b===c)return K=this.triggerHandler("getData"+f,[e[0]]),K===c&&m&&(K=p.data(m,a),K=d(m,a,K)),K===c&&e[1]?this.data(e[0]):K;e[1]=b;this.each(function(){var d=p(this);d.triggerHandler("setData"+f,e);p.data(this,a,b);d.triggerHandler("changeData"+
f,e)})},null,b,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({queue:function(a,b,d){var e;if(a)return b=(b||"fx")+"queue",e=p._data(a,b),d&&(!e||p.isArray(d)?e=p._data(a,b,p.makeArray(d)):e.push(d)),e||[]},dequeue:function(a,b){b=b||"fx";var d=p.queue(a,b),e=d.length,c=d.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};"inprogress"===c&&(c=d.shift(),e--);c&&("fx"===b&&d.unshift("inprogress"),delete f.stop,c.call(a,g,f));
!e&&f&&f.empty.fire()},_queueHooks:function(a,b){var d=b+"queueHooks";return p._data(a,d)||p._data(a,d,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0);p.removeData(a,d,!0)})})}});p.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<d?p.queue(this[0],a):b===c?this:this.each(function(){var d=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,
a)})},delay:function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,d){var e=setTimeout(b,a);d.stop=function(){clearTimeout(e)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=p.Deferred(),g=this,h=this.length,l=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(b=a,a=c);for(a=a||"fx";h--;)(d=p._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(l));l();return f.promise(b)}});var fa,Ba,rb,yb=/[\t\r\n]/g,Sb=/\r/g,ea=/^(?:button|input)$/i,
Tb=/^(?:button|input|object|select|textarea)$/i,Xa=/^a(?:rea|)$/i,bb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,db=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){a=p.propFix[a]||a;return this.each(function(){try{this[a]=
c,delete this[a]}catch(b){}})},addClass:function(a){var b,d,e,c,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(Oa),d=0,e=this.length;d<e;d++)if(c=this[d],1===c.nodeType)if(c.className||1!==b.length){f=" "+c.className+" ";g=0;for(h=b.length;g<h;g++)0>f.indexOf(" "+b[g]+" ")&&(f+=b[g]+" ");c.className=p.trim(f)}else c.className=a;return this},removeClass:function(a){var b,d,e,f,g,h,l;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===c)for(b=(a||"").split(Oa),h=0,l=this.length;h<l;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(yb," ");f=0;for(g=b.length;f<g;f++)for(;0<=d.indexOf(" "+b[f]+" ");)d=d.replace(" "+b[f]+" "," ");e.className=a?p.trim(d):""}return this},toggleClass:function(a,b){var d=typeof a,e="boolean"===typeof b;return p.isFunction(a)?this.each(function(d){p(this).toggleClass(a.call(this,d,this.className,b),b)}):this.each(function(){if("string"===
d)for(var c,f=0,g=p(this),h=b,l=a.split(Oa);c=l[f++];)h=e?h:!g.hasClass(c),g[h?"addClass":"removeClass"](c);else if("undefined"===d||"boolean"===d)this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(yb," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];if(arguments.length)return e=
p.isFunction(a),this.each(function(d){var f=p(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":p.isArray(d)&&(d=p.map(d,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&b.set(this,d,"value")!==c||(this.value=d))});if(f){if((b=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&(d=b.get(f,"value"))!==c)return d;d=f.value;return"string"===typeof d?d.replace(Sb,""):null==
d?"":d}}});p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,d,e=a.selectedIndex,c=[],f=a.options,g="select-one"===a.type;if(0>e)return null;a=g?e:0;for(d=g?e+1:f.length;a<d;a++)if(b=f[a],!(!b.selected||(p.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(g)return b;c.push(b)}return g&&!c.length&&f.length?p(f[e]).val():
c},set:function(a,b){var d=p.makeArray(b);p(a).find("option").each(function(){this.selected=0<=p.inArray(p(this).val(),d)});d.length||(a.selectedIndex=-1);return d}}},attrFn:{},attr:function(a,b,d,e){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&p.isFunction(p.fn[b]))return p(a)[b](d);if("undefined"===typeof a.getAttribute)return p.prop(a,b,d);if(e=1!==h||!p.isXMLDoc(a))b=b.toLowerCase(),g=p.attrHooks[b]||(bb.test(b)?Ba:fa);if(d!==c)if(null===d)p.removeAttr(a,b);else{if(g&&"set"in g&&e&&(f=
g.set(a,d,b))!==c)return f;a.setAttribute(b,d+"");return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,b)))return f;f=a.getAttribute(b);return null===f?c:f}}},removeAttr:function(a,b){var d,e,c,f,g=0;if(b&&1===a.nodeType)for(e=b.split(Oa);g<e.length;g++)if(c=e[g])d=p.propFix[c]||c,(f=bb.test(c))||p.attr(a,c,""),a.removeAttribute(db?c:d),f&&d in a&&(a[d]=!1)},attrHooks:{type:{set:function(a,b){if(ea.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&
"radio"===b&&p.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}}},value:{get:function(a,b){return fa&&p.nodeName(a,"button")?fa.get(a,b):b in a?a.value:null},set:function(a,b,d){if(fa&&p.nodeName(a,"button"))return fa.set(a,b,d);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",
contenteditable:"contentEditable"},prop:function(a,b,d){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!p.isXMLDoc(a))b=p.propFix[b]||b,f=p.propHooks[b];return d!==c?f&&"set"in f&&(e=f.set(a,d,b))!==c?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):Tb.test(a.nodeName)||Xa.test(a.nodeName)&&a.href?0:c}}}});Ba={get:function(a,b){var d,e=p.prop(a,b);return!0===e||
"boolean"!==typeof e&&(d=a.getAttributeNode(b))&&!1!==d.nodeValue?b.toLowerCase():c},set:function(a,b,d){!1===b?p.removeAttr(a,d):(b=p.propFix[d]||d,b in a&&(a[b]=!0),a.setAttribute(d,d.toLowerCase()));return d}};db||(rb={name:!0,id:!0,coords:!0},fa=p.valHooks.button={get:function(a,b){var d;return(d=a.getAttributeNode(b))&&(rb[b]?""!==d.value:d.specified)?d.value:c},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=N.createAttribute(d),a.setAttributeNode(e));return e.value=b+""}},p.each(["width",
"height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,d){if(""===d)return a.setAttribute(b,"auto"),d}})}),p.attrHooks.contenteditable={get:fa.get,set:function(a,b,d){""===b&&(b="false");fa.set(a,b,d)}});p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return null===a?c:a}})});p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||
c},set:function(a,b){return a.style.cssText=b+""}});p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));p.support.enctype||(p.propFix.enctype="encoding");p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],
{set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}})});var Z=/^(?:textarea|input|select)$/i,Pa=/^([^\.]*|)(?:\.(.+)|)$/,aa=/(?:^|\s)hover(\.\S+|)\b/,kb=/^key/,lb=/^(?:mouse|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,ba=function(a){return p.event.special.hover?a:a.replace(aa,"mouseenter$1 mouseleave$1")};p.event={add:function(a,b,d,e,f){var g,h,l,m,B,K,n,Y,q;if(3!==a.nodeType&&8!==a.nodeType&&b&&d&&(g=p._data(a))){d.handler&&(n=d,d=n.handler,f=n.selector);
d.guid||(d.guid=p.guid++);l=g.events;l||(g.events=l={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof p||a&&p.event.triggered===a.type?c:p.event.dispatch.apply(h.elem,arguments)},h.elem=a);b=p.trim(ba(b)).split(" ");for(g=0;g<b.length;g++)m=Pa.exec(b[g])||[],B=m[1],K=(m[2]||"").split(".").sort(),q=p.event.special[B]||{},B=(f?q.delegateType:q.bindType)||B,q=p.event.special[B]||{},m=p.extend({type:B,origType:m[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),
namespace:K.join(".")},n),Y=l[B],Y||(Y=l[B]=[],Y.delegateCount=0,q.setup&&!1!==q.setup.call(a,e,K,h)||(a.addEventListener?a.addEventListener(B,h,!1):a.attachEvent&&a.attachEvent("on"+B,h))),q.add&&(q.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?Y.splice(Y.delegateCount++,0,m):Y.push(m),p.event.global[B]=!0;a=null}},global:{},remove:function(a,b,d,e,c){var f,g,h,l,m,B,K,n,Y,q,Na=p.hasData(a)&&p._data(a);if(Na&&(K=Na.events)){b=p.trim(ba(b||"")).split(" ");for(f=0;f<b.length;f++)if(g=Pa.exec(b[f])||
[],h=l=g[1],g=g[2],h){n=p.event.special[h]||{};h=(e?n.delegateType:n.bindType)||h;Y=K[h]||[];m=Y.length;g=g?new RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(B=0;B<Y.length;B++)q=Y[B],!c&&l!==q.origType||d&&d.guid!==q.guid||g&&!g.test(q.namespace)||e&&e!==q.selector&&("**"!==e||!q.selector)||(Y.splice(B--,1),q.selector&&Y.delegateCount--,n.remove&&n.remove.call(a,q));0===Y.length&&m!==Y.length&&(n.teardown&&!1!==n.teardown.call(a,g,Na.handle)||p.removeEvent(a,h,Na.handle),
delete K[h])}else for(h in K)p.event.remove(a,h+b[f],d,e,!0);p.isEmptyObject(K)&&(delete Na.handle,p.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,l,m,B,K,n=b.type||b;l=[];if(!Ca.test(n+p.event.triggered)&&(0<=n.indexOf("!")&&(n=n.slice(0,-1),g=!0),0<=n.indexOf(".")&&(l=n.split("."),n=l.shift(),l.sort()),e&&!p.event.customEvent[n]||p.event.global[n]))if(b="object"===typeof b?b[p.expando]?b:new p.Event(n,
b):new p.Event(n),b.type=n,b.isTrigger=!0,b.exclusive=g,b.namespace=l.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0>n.indexOf(":")?"on"+n:"",e){if(b.result=c,b.target||(b.target=e),d=null!=d?p.makeArray(d):[],d.unshift(b),m=p.event.special[n]||{},!m.trigger||!1!==m.trigger.apply(e,d)){K=[[e,m.bindType||n]];if(!f&&!m.noBubble&&!p.isWindow(e)){B=m.delegateType||n;g=Ca.test(B+n)?e:e.parentNode;for(h=e;g;g=g.parentNode)K.push([g,B]),h=g;h===(e.ownerDocument||
N)&&K.push([h.defaultView||h.parentWindow||a,B])}for(h=0;h<K.length&&!b.isPropagationStopped();h++)g=K[h][0],b.type=K[h][1],(B=(p._data(g,"events")||{})[b.type]&&p._data(g,"handle"))&&B.apply(g,d),(B=l&&g[l])&&p.acceptData(g)&&B.apply&&!1===B.apply(g,d)&&b.preventDefault();b.type=n;f||b.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===n&&p.nodeName(e,"a")||!p.acceptData(e)||!l||!e[n]||("focus"===n||"blur"===n)&&0===b.target.offsetWidth||p.isWindow(e)||((h=e[l])&&
(e[l]=null),p.event.triggered=n,e[n](),p.event.triggered=c,h&&(e[l]=h));return b.result}}else for(h in e=p.cache,e)e[h].events&&e[h].events[n]&&p.event.trigger(b,d,e[h].handle.elem,!0)}},dispatch:function(b){b=p.event.fix(b||a.event);var d,e,f,g,h,l,m=(p._data(this,"events")||{})[b.type]||[],B=m.delegateCount,K=Da.call(arguments),n=!b.exclusive&&!b.namespace,Y=p.event.special[b.type]||{},q=[];K[0]=b;b.delegateTarget=this;if(!Y.preDispatch||!1!==Y.preDispatch.call(this,b)){if(B&&(!b.button||"click"!==
b.type))for(e=b.target;e!=this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==b.type){g={};h=[];for(d=0;d<B;d++)f=m[d],l=f.selector,g[l]===c&&(g[l]=f.needsContext?0<=p(l,this).index(e):p.find(l,this,null,[e]).length),g[l]&&h.push(f);h.length&&q.push({elem:e,matches:h})}m.length>B&&q.push({elem:this,matches:m.slice(B)});for(d=0;d<q.length&&!b.isPropagationStopped();d++)for(g=q[d],b.currentTarget=g.elem,e=0;e<g.matches.length&&!b.isImmediatePropagationStopped();e++)if(f=g.matches[e],n||!b.namespace&&
!f.namespace||b.namespace_re&&b.namespace_re.test(f.namespace))b.data=f.data,b.handleObj=f,f=((p.event.special[f.origType]||{}).handle||f.handler).apply(g.elem,K),f!==c&&(b.result=f,!1===f&&(b.preventDefault(),b.stopPropagation()));Y.postDispatch&&Y.postDispatch.call(this,b);return b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char",
"charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,e,f=b.button,g=b.fromElement;null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||N,e=d.documentElement,d=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=b.clientY+
(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g);a.which||f===c||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var b,d,e=a,c=p.event.fixHooks[a.type]||{},f=c.props?this.props.concat(c.props):this.props;a=p.Event(e);for(b=f.length;b;)d=f[--b],a[d]=e[d];a.target||(a.target=e.srcElement||N);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return c.filter?
c.filter(a,e):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,d){p.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,d,e){a=p.extend(new p.Event,d,{type:a,isSimulated:!0,originalEvent:{}});e?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&d.preventDefault()}};p.event.handle=p.event.dispatch;p.removeEvent=
N.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,!1)}:function(a,b,d){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,d))};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();
this[p.expando]=!0};p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};p.each({mouseenter:"mouseover",
mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var d,e=a.relatedTarget,c=a.handleObj;if(!e||e!==this&&!p.contains(this,e))a.type=c.origType,d=c.handler.apply(this,arguments),a.type=b;return d}}});p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=p.nodeName(a,"input")||p.nodeName(a,"button")?a.form:c)&&!p._data(a,"_submit_attached")&&
(p.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),p._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}});p.support.changeBubbles||(p.event.special.change={setup:function(){if(Z.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)p.event.add(this,"propertychange._change",
function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){a=a.target;Z.test(a.nodeName)&&!p._data(a,"_change_attached")&&(p.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||p.event.simulate("change",this.parentNode,a,!0)}),p._data(a,"_change_attached",
!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){p.event.remove(this,"._change");return!Z.test(this.nodeName)}});p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){0===d++&&N.addEventListener(a,e,!0)},teardown:function(){0===
--d&&N.removeEventListener(a,e,!0)}}});p.fn.extend({on:function(a,b,d,e,g){var h,l;if("object"===typeof a){"string"!==typeof b&&(d=d||b,b=c);for(l in a)this.on(l,b,d,a[l],g);return this}null==d&&null==e?(e=b,d=b=c):null==e&&("string"===typeof b?(e=d,d=c):(e=d,d=b,b=c));if(!1===e)e=f;else if(!e)return this;1===g&&(h=e,e=function(a){p().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=p.guid++));return this.each(function(){p.event.add(this,a,e,d,b)})},one:function(a,b,d,e){return this.on(a,
b,d,e,1)},off:function(a,b,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)d=b,b=c;!1===d&&(d=f);return this.each(function(){p.event.remove(this,a,d,b)})},bind:function(a,b,d){return this.on(a,null,b,d)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,d){p(this.context).on(a,
this.selector,b,d);return this},die:function(a,b){p(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,d,e){return this.on(b,a,d,e)},undelegate:function(a,b,d){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,d=a.guid||p.guid++,e=0,c=function(d){var c=(p._data(this,
"lastToggle"+a.guid)||0)%e;p._data(this,"lastToggle"+a.guid,c+1);d.preventDefault();return b[c].apply(this,arguments)||!1};for(c.guid=d;e<b.length;)b[e++].guid=d;return this.click(c)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,
d){null==d&&(d=a,a=null);return 0<arguments.length?this.on(b,null,a,d):this.trigger(b)};kb.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks);lb.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)});(function(a,b){function d(a,b,e,c){e=e||[];b=b||E;var f,g,h,l,m=b.nodeType;if(!a||"string"!==typeof a)return e;if(1!==m&&9!==m)return[];h=t(b);if(!h&&!c&&(f=kb.exec(a)))if(l=f[1])if(9===m)if((g=b.getElementById(l))&&g.parentNode){if(g.id===l)return e.push(g),e}else return e;else{if(b.ownerDocument&&(g=b.ownerDocument.getElementById(l))&&
C(b,g)&&g.id===l)return e.push(g),e}else{if(f[2])return Ea.apply(e,O.call(b.getElementsByTagName(a),0)),e;if((l=f[3])&&ba&&b.getElementsByClassName)return Ea.apply(e,O.call(b.getElementsByClassName(l),0)),e}return q(a.replace($b,"$1"),b,e,c,h)}function e(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function c(a){return function(b){var d=b.nodeName.toLowerCase();return("input"===d||"button"===d)&&b.type===a}}function f(a){return pa(function(b){b=+b;return pa(function(d,
e){for(var c,f=a([],d.length,b),g=f.length;g--;)d[c=f[g]]&&(d[c]=!(e[c]=d[c]))})})}function g(a,b,d){if(a===b)return d;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}function h(a,b){var e,c,f,g,l,m,B;if(l=S[Ka][a])return b?0:l.slice(0);l=a;m=[];for(B=ra.preFilter;l;){if(!e||(c=Ca.exec(l)))c&&(l=l.slice(c[0].length)),m.push(f=[]);e=!1;if(c=ib.exec(l))f.push(e=new J(c.shift())),l=l.slice(e.length),e.type=c[0].replace($b," ");for(g in ra.filter)!(c=lb[g].exec(l))||B[g]&&!(c=B[g](c,
E,!0))||(f.push(e=new J(c.shift())),l=l.slice(e.length),e.type=g,e.matches=c);if(!e)break}return b?l.length:l?d.error(a):S(a,m).slice(0)}function l(a,b,d){var e=b.dir,c=d&&"parentNode"===b.dir,f=Zb++;return b.first?function(b,d,f){for(;b=b[e];)if(c||1===b.nodeType)return a(b,d,f)}:function(b,d,g){if(!g)for(var h,l=T+" "+f+" ",m=l+Qa;b=b[e];){if(c||1===b.nodeType){if((h=b[Ka])===m)return b.sizset;if("string"===typeof h&&0===h.indexOf(l)){if(b.sizset)return b}else{b[Ka]=m;if(a(b,d,g))return b.sizset=
!0,b;b.sizset=!1}}}else for(;b=b[e];)if((c||1===b.nodeType)&&a(b,d,g))return b}}function m(a){return 1<a.length?function(b,d,e){for(var c=a.length;c--;)if(!a[c](b,d,e))return!1;return!0}:a[0]}function B(a,b,d,e,c){for(var f,g=[],h=0,l=a.length,m=null!=b;h<l;h++)if(f=a[h])if(!d||d(f,e,c))g.push(f),m&&b.push(h);return g}function K(a,b,e,c,f,g){c&&!c[Ka]&&(c=K(c));f&&!f[Ka]&&(f=K(f,g));return pa(function(g,h,l,m){if(!g||!f){var K,n,Y=[],q=[],Na=h.length;if(!(n=g)){n=b||"*";var p=l.nodeType?[l]:l,Qa=
[];K=0;for(var eb=p.length;K<eb;K++)d(n,p[K],Qa,g);n=Qa}p=!a||!g&&b?n:B(n,Y,a,l,m);Qa=e?f||(g?a:Na||c)?[]:h:p;e&&e(p,Qa,l,m);if(c)for(n=B(Qa,q),c(n,[],l,m),l=n.length;l--;)if(K=n[l])Qa[q[l]]=!(p[q[l]]=K);if(g)for(l=a&&Qa.length;l--;){if(K=Qa[l])g[Y[l]]=!(h[Y[l]]=K)}else Qa=B(Qa===h?Qa.splice(Na,Qa.length):Qa),f?f(null,h,Qa,m):Ea.apply(h,Qa)}})}function n(a){var b,d,e,c=a.length,f=ra.relative[a[0].type];d=f||ra.relative[" "];for(var g=f?1:0,h=l(function(a){return a===b},d,!0),B=l(function(a){return-1<
ob.call(b,a)},d,!0),Y=[function(a,d,e){return!f&&(e||d!==D)||((b=d).nodeType?h(a,d,e):B(a,d,e))}];g<c;g++)if(d=ra.relative[a[g].type])Y=[l(m(Y),d)];else{d=ra.filter[a[g].type].apply(null,a[g].matches);if(d[Ka]){for(e=++g;e<c&&!ra.relative[a[e].type];e++);return K(1<g&&m(Y),1<g&&a.slice(0,g-1).join("").replace($b,"$1"),d,g<e&&n(a.slice(g,e)),e<c&&n(a=a.slice(e)),e<c&&a.join(""))}Y.push(d)}return m(Y)}function Y(a,b){var e=0<b.length,c=0<a.length,f=function(g,h,l,m,K){var n,Y,q=[],Na=0,p="0",eb=g&&
[],v=null!=K,t=D,C=g||c&&ra.find.TAG("*",K&&h.parentNode||h),A=T+=null==t?1:Math.E;v&&(D=h!==E&&h,Qa=f.el);for(;null!=(K=C[p]);p++){if(c&&K){for(n=0;Y=a[n];n++)if(Y(K,h,l)){m.push(K);break}v&&(T=A,Qa=++f.el)}e&&((K=!Y&&K)&&Na--,g&&eb.push(K))}Na+=p;if(e&&p!==Na){for(n=0;Y=b[n];n++)Y(eb,q,h,l);if(g){if(0<Na)for(;p--;)eb[p]||q[p]||(q[p]=aa.call(m));q=B(q)}Ea.apply(m,q);v&&!g&&0<q.length&&1<Na+b.length&&d.uniqueSort(m)}v&&(T=A,D=t);return eb};f.el=0;return e?pa(f):f}function q(a,b,d,e,c){var f,g,l,m,
B=h(a);if(!e&&1===B.length){g=B[0]=B[0].slice(0);if(2<g.length&&"ID"===(l=g[0]).type&&9===b.nodeType&&!c&&ra.relative[g[1].type]){b=ra.find.ID(l.matches[0].replace(ka,""),b,c)[0];if(!b)return d;a=a.slice(g.shift().length)}for(f=lb.POS.test(a)?-1:g.length-1;0<=f;f--){l=g[f];if(ra.relative[m=l.type])break;if(m=ra.find[m])if(e=m(l.matches[0].replace(ka,""),ha.test(g[0].type)&&b.parentNode||b,c)){g.splice(f,1);a=e.length&&g.join("");if(!a)return Ea.apply(d,O.call(e,0)),d;break}}}A(a,B)(e,b,c,d,ha.test(a));
return d}function Na(){}var Qa,eb,ra,v,t,C,A,w,z,D,F=!0,Ka=("sizcache"+Math.random()).replace(".",""),J=String,E=a.document,I=E.documentElement,T=0,Zb=0,aa=[].pop,Ea=[].push,O=[].slice,ob=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(this[b]===a)return b;return-1},pa=function(a,b){a[Ka]=null==b||b;return a},La=function(){var a={},b=[];return pa(function(d,e){b.push(d)>ra.cacheLength&&delete a[b.shift()];return a[d]=e},a)},Wa=La(),S=La(),ua=La(),La="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",V=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+La+")|[^:]|\\\\.)*|.*))\\)|)",$b=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Ca=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ib=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,va=new RegExp(V),kb=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ha=/[\x20\t\r\n\f]*[+~]/,wa=/h\d/i,sa=/input|select|textarea|button/i,
ka=/\\(?!\\)/g,lb={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+La),PSEUDO:new RegExp("^"+V),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:/^:(only|nth|first|last)-child(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},N=function(a){var b=E.createElement("div");try{return a(b)}catch(d){return!1}finally{}},La=N(function(a){a.appendChild(E.createComment(""));return!a.getElementsByTagName("*").length}),Kb=N(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),oa=N(function(a){a.innerHTML=
"<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),ba=N(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),P=N(function(a){a.id=Ka+0;a.innerHTML="<a name='"+Ka+"'></a><div name='"+Ka+"'></div>";I.insertBefore(a,I.firstChild);var b=E.getElementsByName&&E.getElementsByName(Ka).length===
2+E.getElementsByName(Ka+0).length;eb=!E.getElementById(Ka);I.removeChild(a);return b});try{O.call(I.childNodes,0)[0].nodeType}catch(Q){O=function(a){for(var b,d=[];b=this[a];a++)d.push(b);return d}}d.matches=function(a,b){return d(a,null,null,b)};d.matchesSelector=function(a,b){return 0<d(b,null,null,[a]).length};v=d.getText=function(a){var b,d="",e=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=v(a)}else{if(3===
b||4===b)return a.nodeValue}else for(;b=a[e];e++)d+=v(b);return d};t=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};C=d.contains=I.contains?function(a,b){var d=9===a.nodeType?a.documentElement:a,e=b&&b.parentNode;return a===e||!!(e&&1===e.nodeType&&d.contains&&d.contains(e))}:I.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};d.attr=function(a,b){var d,
e=t(a);e||(b=b.toLowerCase());return(d=ra.attrHandle[b])?d(a):e||oa?a.getAttribute(b):(d=a.getAttributeNode(b))?"boolean"===typeof a[b]?a[b]?b:null:d.specified?d.value:null:null};ra=d.selectors={cacheLength:50,createPseudo:pa,match:lb,attrHandle:Kb?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:eb?function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,d,e){if("undefined"!==
typeof d.getElementById&&!e)return(d=d.getElementById(a))?d.id===a||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").value===a?[d]:b:[]},TAG:La?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var d=b.getElementsByTagName(a);if("*"===a){for(var e,c=[],f=0;e=d[f];f++)1===e.nodeType&&c.push(e);return c}return d},NAME:P&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},CLASS:ba&&function(a,
b,d){if("undefined"!==typeof b.getElementsByClassName&&!d)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ka,"");a[3]=(a[4]||a[5]||"").replace(ka,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||d.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),
a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&d.error(a[0]);return a},PSEUDO:function(a){var b,d;if(lb.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])va.test(b)&&(d=h(b,!0))&&(d=b.indexOf(")",b.length-d)-b.length)&&(b=b.slice(0,d),a[0]=a[0].slice(0,d)),a[2]=b;return a.slice(0,3)}},filter:{ID:eb?function(a){a=a.replace(ka,"");return function(b){return b.getAttribute("id")===a}}:function(a){a=a.replace(ka,"");return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&
b.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(ka,"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=Wa[Ka][a];b||(b=Wa(a,new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)")));return function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}},ATTR:function(a,b,e){return function(c,f){var g=d.attr(c,a);if(null==g)return"!="===b;if(!b)return!0;g+=
"";return"="===b?g===e:"!="===b?g!==e:"^="===b?e&&0===g.indexOf(e):"*="===b?e&&-1<g.indexOf(e):"$="===b?e&&g.substr(g.length-e.length)===e:"~="===b?-1<(" "+g+" ").indexOf(e):"|="===b?g===e||g.substr(0,e.length+1)===e+"-":!1}},CHILD:function(a,b,d,e){return"nth"===a?function(a){var b,c;b=a.parentNode;if(1===d&&0===e)return!0;if(b)for(c=0,b=b.firstChild;b&&(1!==b.nodeType||(c++,a!==b));b=b.nextSibling);c-=e;return c===d||0===c%d&&0<=c/d}:function(b){var d=b;switch(a){case "only":case "first":for(;d=
d.previousSibling;)if(1===d.nodeType)return!1;if("first"===a)return!0;d=b;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var e,c=ra.pseudos[a]||ra.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return c[Ka]?c(b):1<c.length?(e=[a,a,"",b],ra.setFilters.hasOwnProperty(a.toLowerCase())?pa(function(a,d){for(var e,f=c(a,b),g=f.length;g--;)e=ob.call(a,f[g]),a[e]=!(d[e]=f[g])}):function(a){return c(a,0,e)}):c}},pseudos:{not:pa(function(a){var b=
[],d=[],e=A(a.replace($b,"$1"));return e[Ka]?pa(function(a,b,d,c){c=e(a,null,c,[]);for(var f=a.length;f--;)if(d=c[f])a[f]=!(b[f]=d)}):function(a,c,f){b[0]=a;e(b,null,f,d);return!d.pop()}}),has:pa(function(a){return function(b){return 0<d(a,b).length}}),contains:pa(function(a){return function(b){return-1<(b.textContent||b.innerText||v(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!ra.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return wa.test(a.nodeName)},text:function(a){var b,d;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(d=a.getAttribute("type"))||d.toLowerCase()===b)},radio:e("radio"),
checkbox:e("checkbox"),file:e("file"),password:e("password"),image:e("image"),submit:c("submit"),reset:c("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return sa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(a,b,d){return[0]}),last:f(function(a,b,d){return[b-
1]}),eq:f(function(a,b,d){return[0>d?d+b:d]}),even:f(function(a,b,d){for(d=0;d<b;d+=2)a.push(d);return a}),odd:f(function(a,b,d){for(d=1;d<b;d+=2)a.push(d);return a}),lt:f(function(a,b,d){for(b=0>d?d+b:d;0<=--b;)a.push(b);return a}),gt:f(function(a,b,d){for(d=0>d?d+b:d;++d<b;)a.push(d);return a})}};w=I.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4:a.compareDocumentPosition)?-1:1}:function(a,b){if(a===
b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var d,e,c=[],f=[];d=a.parentNode;e=b.parentNode;var h=d;if(d===e)return g(a,b);if(!d)return-1;if(!e)return 1;for(;h;)c.unshift(h),h=h.parentNode;for(h=e;h;)f.unshift(h),h=h.parentNode;d=c.length;e=f.length;for(h=0;h<d&&h<e;h++)if(c[h]!==f[h])return g(c[h],f[h]);return h===d?g(a,f[h],-1):g(c[h],b,1)};[0,0].sort(w);F=!z;d.uniqueSort=function(a){var b,d=1;z=F;a.sort(w);if(z)for(;b=a[d];d++)b===a[d-1]&&a.splice(d--,1);
return a};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};A=d.compile=function(a,b){var d,e=[],c=[],f=ua[Ka][a];if(!f){b||(b=h(a));for(d=b.length;d--;)f=n(b[d]),f[Ka]?e.push(f):c.push(f);f=ua(a,Y(c,e))}return f};E.querySelectorAll&&function(){var a,b=q,e=/'|\\/g,c=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],l=I.matchesSelector||I.mozMatchesSelector||I.webkitMatchesSelector||I.oMatchesSelector||I.msMatchesSelector;N(function(a){a.innerHTML=
"<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||f.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||f.push(":checked")});N(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")});f=new RegExp(f.join("|"));
q=function(a,d,c,g,l){if(!(g||l||f&&f.test(a))){var m,B,K=!0,n=Ka;B=d;m=9===d.nodeType&&a;if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){m=h(a);(K=d.getAttribute("id"))?n=K.replace(e,"\\$&"):d.setAttribute("id",n);n="[id='"+n+"'] ";for(B=m.length;B--;)m[B]=n+m[B].join("");B=ha.test(a)&&d.parentNode||d;m=m.join(",")}if(m)try{return Ea.apply(c,O.call(B.querySelectorAll(m),0)),c}catch(Y){}finally{K||d.removeAttribute("id")}}return b(a,d,c,g,l)};l&&(N(function(b){a=l.call(b,"div");try{l.call(b,
"[test!='']:sizzle"),g.push("!=",V)}catch(d){}}),g=new RegExp(g.join("|")),d.matchesSelector=function(b,e){e=e.replace(c,"='$1']");if(!(t(b)||g.test(e)||f&&f.test(e)))try{var h=l.call(b,e);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(m){}return 0<d(e,null,null,[b]).length})}();ra.pseudos.nth=ra.pseudos.eq;ra.filters=Na.prototype=ra.pseudos;ra.setFilters=new Na;d.attr=p.attr;p.find=d;p.expr=d.selectors;p.expr[":"]=p.expr.pseudos;p.unique=d.uniqueSort;p.text=d.getText;p.isXMLDoc=d.isXML;
p.contains=d.contains})(a);var Db=/Until$/,Vb=/^(?:parents|prev(?:Until|All))/,Q=/^.[^:#\[\.,]*$/,P=p.expr.match.needsContext,Sa={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,d,e,c,f,g,h=this;if("string"!==typeof a)return p(a).filter(function(){b=0;for(d=h.length;b<d;b++)if(p.contains(h[b],this))return!0});g=this.pushStack("","find",a);b=0;for(d=this.length;b<d;b++)if(e=g.length,p.find(a,this[b],g),0<b)for(c=e;c<g.length;c++)for(f=0;f<e;f++)if(g[f]===g[c]){g.splice(c--,
1);break}return g},has:function(a){var b,d=p(a,this),e=d.length;return this.filter(function(){for(b=0;b<e;b++)if(p.contains(this,d[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?P.test(a)?0<=p(a,this.context).index(this[0]):0<p.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var d,e=0,c=this.length,f=[],g=P.test(a)||"string"!==typeof a?
p(a,b||this.context):0;e<c;e++)for(d=this[e];d&&d.ownerDocument&&d!==b&&11!==d.nodeType;){if(g?-1<g.index(d):p.find.matchesSelector(d,a)){f.push(d);break}d=d.parentNode}f=1<f.length?p.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){return a?"string"===typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var d="string"===typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),e=p.merge(this.get(),d);return this.pushStack(h(d[0])||
h(e[0])?e:p.unique(e))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.fn.andSelf=p.fn.addBack;p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,d){return p.dir(a,"parentNode",d)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,
"previousSibling")},nextUntil:function(a,b,d){return p.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return p.dir(a,"previousSibling",d)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(d,e){var c=p.map(this,b,d);Db.test(a)||(e=d);e&&"string"===typeof e&&(c=p.filter(e,
c));c=1<this.length&&!Sa[a]?p.unique(c):c;1<this.length&&Vb.test(a)&&(c=c.reverse());return this.pushStack(c,a,Da.call(arguments).join(","))}});p.extend({filter:function(a,b,d){d&&(a=":not("+a+")");return 1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,b,d){var e=[];for(a=a[b];a&&9!==a.nodeType&&(d===c||1!==a.nodeType||!p(a).is(d));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&d.push(a);
return d}});var ma="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ya=/ jQuery\d+="(?:null|\d+)"/g,Ma=/^\s+/,X=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ja=/<([\w:]+)/,B=/<tbody/i,K=/<|&#?\w+;/,Y=/<(?:script|style|link)/i,Na=/<(?:script|object|embed|option|style)/i,eb=new RegExp("<(?:"+ma+")[\\s/>]","i"),Qa=/^(?:checkbox|radio)$/,ra=/checked\s*(?:[^=]|=\s*.checked.)/i,
Ka=/\/(java|ecma)script/i,Zb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ea={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ob=n(N),$b=ob.appendChild(N.createElement("div"));Ea.optgroup=Ea.option;Ea.tbody=Ea.tfoot=Ea.colgroup=
Ea.caption=Ea.thead;Ea.th=Ea.td;p.support.htmlSerialize||(Ea._default=[1,"X<div>","</div>"]);p.fn.extend({text:function(a){return p.access(this,function(a){return a===c?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=
this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(d){p(this).wrapAll(b?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},
append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,
!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var d,e=0;null!=(d=this[e]);e++)if(!a||p.filter(a,[d]).length)b||1!==d.nodeType||(p.cleanData(d.getElementsByTagName("*")),p.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&p.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);
return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var b=this[0]||{},d=0,e=this.length;if(a===c)return 1===b.nodeType?b.innerHTML.replace(ya,""):c;if(!("string"!==typeof a||Y.test(a)||!p.support.htmlSerialize&&eb.test(a)||!p.support.leadingWhitespace&&Ma.test(a)||Ea[(Ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(X,"<$1></$2>");try{for(;d<e;d++)b=this[d]||{},1===b.nodeType&&(p.cleanData(b.getElementsByTagName("*")),
b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(!h(this[0])){if(p.isFunction(a))return this.each(function(b){var d=p(this),e=d.html();d.replaceWith(a.call(this,b,e))});"string"!==typeof a&&(a=p(a).detach());return this.each(function(){var b=this.nextSibling,d=this.parentNode;p(this).remove();b?p(b).before(a):p(d).append(a)})}return this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,
!0)},domManip:function(a,b,d){a=[].concat.apply([],a);var e,f,g,h=0,l=a[0],m=[],B=this.length;if(!p.support.checkClone&&1<B&&"string"===typeof l&&ra.test(l))return this.each(function(){p(this).domManip(a,b,d)});if(p.isFunction(l))return this.each(function(e){var f=p(this);a[0]=l.call(this,e,b?f.html():c);f.domManip(a,b,d)});if(this[0]){e=p.buildFragment(a,this,m);g=e.fragment;f=g.firstChild;1===g.childNodes.length&&(g=f);if(f)for(b=b&&p.nodeName(f,"tr"),e=e.cacheable||B-1;h<B;h++)d.call(b&&p.nodeName(this[h],
"table")?q(this[h],"tbody"):this[h],h===e?g:p.clone(g,!0,!0));g=f=null;m.length&&p.each(m,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Zb,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});p.buildFragment=function(a,b,d){var e,f,g,h=a[0];b=b||N;b=!b.nodeType&&b[0]||b;b=b.ownerDocument||b;!(1===a.length&&"string"===typeof h&&512>h.length&&b===N&&
"<"===h.charAt(0))||Na.test(h)||!p.support.checkClone&&ra.test(h)||!p.support.html5Clone&&eb.test(h)||(f=!0,e=p.fragments[h],g=e!==c);e||(e=b.createDocumentFragment(),p.clean(a,b,e,d),f&&(p.fragments[h]=g&&e));return{fragment:e,cacheable:f}};p.fragments={};p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(d){var e,c=0,f=[];d=p(d);var g=d.length;e=1===this.length&&this[0].parentNode;if((null==e||e&&11===
e.nodeType&&1===e.childNodes.length)&&1===g)return d[b](this[0]),this;for(;c<g;c++)e=(0<c?this.clone(!0):this).get(),p(d[c])[b](e),f=f.concat(e);return this.pushStack(f,a,d.selector)}});p.extend({clone:function(a,b,d){var e,c,f,g;p.support.html5Clone||p.isXMLDoc(a)||!eb.test("<"+a.nodeName+">")?g=a.cloneNode(!0):($b.innerHTML=a.outerHTML,$b.removeChild(g=$b.firstChild));if(!(p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(A(a,g),e=w(a),c=w(g),
f=0;e[f];++f)c[f]&&A(e[f],c[f]);if(b&&(v(a,g),d))for(e=w(a),c=w(g),f=0;e[f];++f)v(e[f],c[f]);return g},clean:function(a,b,d,e){var c,f,g,h,l,m,Y=b===N&&ob,q=[];b&&"undefined"!==typeof b.createDocumentFragment||(b=N);for(c=0;null!=(g=a[c]);c++)if("number"===typeof g&&(g+=""),g){if("string"===typeof g)if(K.test(g)){Y=Y||n(b);m=b.createElement("div");Y.appendChild(m);g=g.replace(X,"<$1></$2>");f=(Ja.exec(g)||["",""])[1].toLowerCase();h=Ea[f]||Ea._default;l=h[0];for(m.innerHTML=h[1]+g+h[2];l--;)m=m.lastChild;
if(!p.support.tbody)for(l=B.test(g),h="table"!==f||l?"<table>"!==h[1]||l?[]:m.childNodes:m.firstChild&&m.firstChild.childNodes,f=h.length-1;0<=f;--f)p.nodeName(h[f],"tbody")&&!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f]);!p.support.leadingWhitespace&&Ma.test(g)&&m.insertBefore(b.createTextNode(Ma.exec(g)[0]),m.firstChild);g=m.childNodes;m.parentNode.removeChild(m)}else g=b.createTextNode(g);g.nodeType?q.push(g):p.merge(q,g)}m&&(g=m=Y=null);if(!p.support.appendChecked)for(c=0;null!=(g=
q[c]);c++)p.nodeName(g,"input")?E(g):"undefined"!==typeof g.getElementsByTagName&&p.grep(g.getElementsByTagName("input"),E);if(d)for(a=function(a){if(!a.type||Ka.test(a.type))return e?e.push(a.parentNode?a.parentNode.removeChild(a):a):d.appendChild(a)},c=0;null!=(g=q[c]);c++)p.nodeName(g,"script")&&a(g)||(d.appendChild(g),"undefined"!==typeof g.getElementsByTagName&&(g=p.grep(p.merge([],g.getElementsByTagName("script")),a),q.splice.apply(q,[c+1,0].concat(g)),c+=g.length));return q},cleanData:function(a,
b){for(var d,e,c,f,g=0,h=p.expando,l=p.cache,m=p.support.deleteExpando,B=p.event.special;null!=(c=a[g]);g++)if(b||p.acceptData(c))if(d=(e=c[h])&&l[e]){if(d.events)for(f in d.events)B[f]?p.event.remove(c,f):p.removeEvent(c,f,d.handle);l[e]&&(delete l[e],m?delete c[h]:c.removeAttribute?c.removeAttribute(h):c[h]=null,p.deletedIds.push(e))}}});(function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||
/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=p.uaMatch(pb.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);p.browser=b;p.sub=function(){function a(b,d){return new a.fn.init(b,d)}p.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,e){e&&e instanceof p&&!(e instanceof a)&&(e=a(e));
return p.fn.init.call(this,d,e,b)};a.fn.init.prototype=a.fn;var b=a(N);return a}})();var ib,Kb,kc,Ob=/alpha\([^)]*\)/i,yc=/opacity=([^)]*)/,rd=/^(top|right|bottom|left)$/,Md=/^(none|table(?!-c[ea]).+)/,sd=/^margin/,Hd=new RegExp("^("+nb+")(.*)$","i"),vc=new RegExp("^("+nb+")(?!px)[a-z%]+$","i"),td=new RegExp("^([-+])=("+nb+")","i"),wc={},Sc={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:0,fontWeight:400},Fb=["Top","Right","Bottom","Left"],Gd=["Webkit","O","Moz","ms"],
te=p.fn.toggle;p.fn.extend({css:function(a,b){return p.access(this,function(a,b,d){return d!==c?p.style(a,b,d):p.css(a,b)},a,b,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(a,b){var d="boolean"===typeof a;return p.isFunction(a)&&p.isFunction(b)?te.apply(this,arguments):this.each(function(){(d?a:J(this))?p(this).show():p(this).hide()})}});p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=ib(a,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,
fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,l=p.camelCase(b),m=a.style;b=p.cssProps[l]||(p.cssProps[l]=D(m,l));h=p.cssHooks[b]||p.cssHooks[l];if(d!==c){if(g=typeof d,"string"===g&&(f=td.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,b)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||p.cssNumber[l]||(d+="px"),
h&&"set"in h&&(d=h.set(a,d,e))===c)))try{m[b]=d}catch(B){}}else return h&&"get"in h&&(f=h.get(a,!1,e))!==c?f:m[b]}},css:function(a,b,d,e){var f,g;g=p.camelCase(b);b=p.cssProps[g]||(p.cssProps[g]=D(a.style,g));(g=p.cssHooks[b]||p.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,e));f===c&&(f=ib(a,b));"normal"===f&&b in se&&(f=se[b]);return d||e!==c?(a=parseFloat(f),d||p.isNumeric(a)?a||0:f):f},swap:function(a,b,d){var e,c={};for(e in b)c[e]=a.style[e],a.style[e]=b[e];d=d.call(a);for(e in b)a.style[e]=c[e];return d}});
a.getComputedStyle?ib=function(b,d){var e,c,f,g,h=a.getComputedStyle(b,null),l=b.style;h&&(e=h[d],""!==e||p.contains(b.ownerDocument,b)||(e=p.style(b,d)),vc.test(e)&&sd.test(d)&&(c=l.width,f=l.minWidth,g=l.maxWidth,l.minWidth=l.maxWidth=l.width=e,e=h.width,l.width=c,l.minWidth=f,l.maxWidth=g));return e}:N.documentElement.currentStyle&&(ib=function(a,b){var d,e,c=a.currentStyle&&a.currentStyle[b],f=a.style;null==c&&f&&f[b]&&(c=f[b]);if(vc.test(c)&&!rd.test(b)){d=f.left;if(e=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=
a.currentStyle.left;f.left="fontSize"===b?"1em":c;c=f.pixelLeft+"px";f.left=d;e&&(a.runtimeStyle.left=e)}return""===c?"auto":c});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,d,e){if(d)return 0===a.offsetWidth&&Md.test(ib(a,"display"))?p.swap(a,Sc,function(){return z(a,b,e)}):z(a,b,e)},set:function(a,d,e){return C(a,d,e?t(a,b,e,p.support.boxSizing&&"border-box"===p.css(a,"boxSizing")):0)}}});p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return yc.test((b&&a.currentStyle?
a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var d=a.style,e=a.currentStyle,c=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=e&&e.filter||d.filter||"";d.zoom=1;if(1<=b&&""===p.trim(f.replace(Ob,""))&&d.removeAttribute&&(d.removeAttribute("filter"),e&&!e.filter))return;d.filter=Ob.test(f)?f.replace(Ob,c):f+" "+c}});p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return ib(a,
"marginRight")})}});!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,d){if(d){var e=ib(a,b);return vc.test(e)?p(a).position()[b]+"px":e}}}})});p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ib(a,"display"))},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)});p.each({margin:"",padding:"",border:"Width"},
function(a,b){p.cssHooks[a+b]={expand:function(d){var e="string"===typeof d?d.split(" "):[d],c={};for(d=0;4>d;d++)c[a+Fb[d]+b]=e[d]||e[d-2]||e[0];return c}};sd.test(a)||(p.cssHooks[a+b].set=C)});var Nd=/%20/g,ge=/\[\]$/,Ye=/\r?\n/g,ue=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ze=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ze.test(this.nodeName)||ue.test(this.type))}).map(function(a,b){var d=p(this).val();return null==d?null:p.isArray(d)?p.map(d,function(a,d){return{name:b.name,value:a.replace(Ye,"\r\n")}}):{name:b.name,value:d.replace(Ye,"\r\n")}}).get()}});p.param=function(a,b){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===c&&(b=p.ajaxSettings&&
p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)O(d,a[d],b,f);return e.join("&").replace(Nd,"+")};var zc,ac,ve=/#.*$/,$e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Od=/^(?:GET|HEAD)$/,Pd=/^\/\//,we=/\?/,af=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Tc=/([?&])_=[^&]*/,qc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,ed=p.fn.load,od={},fd={},bf=["*/"]+["*"];try{ac=da.href}catch(Qd){ac=N.createElement("a"),ac.href=
"",ac=ac.href}zc=qc.exec(ac.toLowerCase())||[];p.fn.load=function(a,b,d){if("string"!==typeof a&&ed)return ed.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,l=a.indexOf(" ");0<=l&&(e=a.slice(l,a.length),a=a.slice(0,l));p.isFunction(b)?(d=b,b=c):b&&"object"===typeof b&&(f="POST");p.ajax({url:a,type:f,dataType:"html",data:b,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments;h.html(e?p("<div>").append(a.replace(af,"")).find(e):a)});return this};
p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.each(["get","post"],function(a,b){p[b]=function(a,d,e,f){p.isFunction(d)&&(f=f||e,e=d,d=c);return p.ajax({type:b,url:a,data:d,success:e,dataType:f})}});p.extend({getScript:function(a,b){return p.get(a,c,b,"script")},getJSON:function(a,b,d){return p.get(a,b,d,"json")},ajaxSetup:function(a,b){b?T(a,p.ajaxSettings):(b=a,a=p.ajaxSettings);T(a,b);return a},ajaxSettings:{url:ac,
isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(zc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bf},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},
flatOptions:{context:!0,url:!0}},ajaxPrefilter:S(od),ajaxTransport:S(fd),ajax:function(a,b){function d(a,b,g,m){var K,ra,v,C,w=b;if(2!==t){t=2;l&&clearTimeout(l);h=c;f=m||"";A.readyState=0<a?4:0;if(g){C=n;m=A;var z,D,F,Ka,E=C.contents,J=C.dataTypes,I=C.responseFields;for(D in I)D in g&&(m[I[D]]=g[D]);for(;"*"===J[0];)J.shift(),z===c&&(z=C.mimeType||m.getResponseHeader("content-type"));if(z)for(D in E)if(E[D]&&E[D].test(z)){J.unshift(D);break}if(J[0]in g)F=J[0];else{for(D in g){if(!J[0]||C.converters[D+
" "+J[0]]){F=D;break}Ka||(Ka=D)}F=F||Ka}F?(F!==J[0]&&J.unshift(F),C=g[F]):C=void 0}if(200<=a&&300>a||304===a)if(n.ifModified&&((g=A.getResponseHeader("Last-Modified"))&&(p.lastModified[e]=g),(g=A.getResponseHeader("Etag"))&&(p.etag[e]=g)),304===a)w="notmodified",K=!0;else{a:{ra=n;v=C;var T,Zb,w=ra.dataTypes.slice();z=w[0];D={};F=0;ra.dataFilter&&(v=ra.dataFilter(v,ra.dataType));if(w[1])for(T in ra.converters)D[T.toLowerCase()]=ra.converters[T];for(;g=w[++F];)if("*"!==g){if("*"!==z&&z!==g){T=D[z+" "+
g]||D["* "+g];if(!T)for(Zb in D)if(K=Zb.split(" "),K[1]===g&&(T=D[z+" "+K[0]]||D["* "+K[0]])){!0===T?T=D[Zb]:!0!==D[Zb]&&(g=K[0],w.splice(F--,0,g));break}if(!0!==T)if(T&&ra["throws"])v=T(v);else try{v=T(v)}catch(Ea){K={state:"parsererror",error:T?Ea:"No conversion from "+z+" to "+g};break a}}z=g}K={state:"success",data:v}}w=K.state;ra=K.data;v=K.error;K=!v}else if(v=w,!w||a)w="error",0>a&&(a=0);A.status=a;A.statusText=(b||w)+"";K?Na.resolveWith(Y,[ra,w,A]):Na.rejectWith(Y,[A,w,v]);A.statusCode(eb);
eb=c;B&&q.trigger("ajax"+(K?"Success":"Error"),[A,n,K?ra:v]);Qa.fireWith(Y,[A,w]);B&&(q.trigger("ajaxComplete",[A,n]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=c);b=b||{};var e,f,g,h,l,m,B,K,n=p.ajaxSetup({},b),Y=n.context||n,q=Y!==n&&(Y.nodeType||Y instanceof p)?p(Y):p.event,Na=p.Deferred(),Qa=p.Callbacks("once memory"),eb=n.statusCode||{},ra={},v={},t=0,C="canceled",A={readyState:0,setRequestHeader:function(a,b){if(!t){var d=a.toLowerCase();a=v[d]=v[d]||a;ra[a]=b}return this},
getAllResponseHeaders:function(){return 2===t?f:null},getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=$e.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return b===c?null:b},overrideMimeType:function(a){t||(n.mimeType=a);return this},abort:function(a){a=a||C;h&&h.abort(a);d(0,a);return this}};Na.promise(A);A.success=A.done;A.error=A.fail;A.complete=Qa.add;A.statusCode=function(a){if(a){var b;if(2>t)for(b in a)eb[b]=[eb[b],a[b]];else b=a[A.status],A.always(b)}return this};n.url=
((a||n.url)+"").replace(ve,"").replace(Pd,zc[1]+"//");n.dataTypes=p.trim(n.dataType||"*").toLowerCase().split(Oa);null==n.crossDomain&&(m=qc.exec(n.url.toLowerCase())||!1,n.crossDomain=m&&m.join(":")+(m[3]?"":"http:"===m[1]?80:443)!==zc.join(":")+(zc[3]?"":"http:"===zc[1]?80:443));n.data&&n.processData&&"string"!==typeof n.data&&(n.data=p.param(n.data,n.traditional));V(od,n,b,A);if(2===t)return A;B=n.global;n.type=n.type.toUpperCase();n.hasContent=!Od.test(n.type);B&&0===p.active++&&p.event.trigger("ajaxStart");
if(!n.hasContent&&(n.data&&(n.url+=(we.test(n.url)?"&":"?")+n.data,delete n.data),e=n.url,!1===n.cache)){m=p.now();var w=n.url.replace(Tc,"$1_="+m);n.url=w+(w===n.url?(we.test(n.url)?"&":"?")+"_="+m:"")}(n.data&&n.hasContent&&!1!==n.contentType||b.contentType)&&A.setRequestHeader("Content-Type",n.contentType);n.ifModified&&(e=e||n.url,p.lastModified[e]&&A.setRequestHeader("If-Modified-Since",p.lastModified[e]),p.etag[e]&&A.setRequestHeader("If-None-Match",p.etag[e]));A.setRequestHeader("Accept",n.dataTypes[0]&&
n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?", "+bf+"; q=0.01":""):n.accepts["*"]);for(K in n.headers)A.setRequestHeader(K,n.headers[K]);if(n.beforeSend&&(!1===n.beforeSend.call(Y,A,n)||2===t))return A.abort();C="abort";for(K in{success:1,error:1,complete:1})A[K](n[K]);if(h=V(fd,n,b,A)){A.readyState=1;B&&q.trigger("ajaxSend",[A,n]);n.async&&0<n.timeout&&(l=setTimeout(function(){A.abort("timeout")},n.timeout));try{t=1,h.send(ra,d)}catch(z){if(2>t)d(-1,z);else throw z;
}}else d(-1,"No Transport");return A},active:0,lastModified:{},etag:{}});var ud=[],vd=/\?/,ec=/(=)\?(?=&|$)|\?\?/,bc=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ud.pop()||p.expando+"_"+bc++;this[a]=!0;return a}});p.ajaxPrefilter("json jsonp",function(b,d,e){var f,g,h,l=b.data,m=b.url,B=!1!==b.jsonp,K=B&&ec.test(m),n=B&&!K&&"string"===typeof l&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ec.test(l);if("jsonp"===b.dataTypes[0]||K||n)return f=b.jsonpCallback=
p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[f],K?b.url=m.replace(ec,"$1"+f):n?b.data=l.replace(ec,"$1"+f):B&&(b.url+=(vd.test(m)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){h||p.error(f+" was not called");return h[0]},b.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g;b[f]&&(b.jsonpCallback=d.jsonpCallback,ud.push(f));h&&p.isFunction(g)&&g(h[0]);h=g=c}),"script"});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(e,f){b=N.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,
e){if(e||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,d&&b.parentNode&&d.removeChild(b),b=c,e||f(200,"success")};d.insertBefore(b,d.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var Wb,Uc=a.ActiveXObject?function(){for(var a in Wb)Wb[a](0,1)}:!1,fc=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&pa()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}b=void 0}return b}:pa;(function(a){p.extend(p.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(p.ajaxSettings.xhr());p.support.ajax&&p.ajaxTransport(function(b){if(!b.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,l=b.xhr();b.username?l.open(b.type,b.url,b.async,b.username,b.password):l.open(b.type,b.url,b.async);if(b.xhrFields)for(h in b.xhrFields)l[h]=b.xhrFields[h];b.mimeType&&l.overrideMimeType&&l.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)l.setRequestHeader(h,
e[h])}catch(m){}l.send(b.hasContent&&b.data||null);d=function(a,e){var h,m,B,K,n;try{if(d&&(e||4===l.readyState))if(d=c,g&&(l.onreadystatechange=p.noop,Uc&&delete Wb[g]),e)4!==l.readyState&&l.abort();else{h=l.status;B=l.getAllResponseHeaders();K={};(n=l.responseXML)&&n.documentElement&&(K.xml=n);try{K.text=l.responseText}catch(Y){}try{m=l.statusText}catch(q){m=""}h||!b.isLocal||b.crossDomain?1223===h&&(h=204):h=K.text?200:404}}catch(Na){e||f(-1,Na)}K&&f(h,m,K,B)};b.async?4===l.readyState?setTimeout(d,
0):(g=++fc,Uc&&(Wb||(Wb={},p(a).unload(Uc)),Wb[g]=d),l.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Mc,Vc,Rd=/^(?:toggle|show|hide)$/,ta=new RegExp("^(?:([-+])=|)("+nb+")([a-z%]*)$","i"),Sd=/queueHooks$/,Yb=[function(a,b,d){var e,c,f,g,h,l,m=this,B=a.style,K={},n=[],Y=a.nodeType&&J(a);d.queue||(h=p._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,l=h.empty.fire,h.empty.fire=function(){h.unqueued||l()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--;p.queue(a,
"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(d.overflow=[B.overflow,B.overflowX,B.overflowY],"inline"===p.css(a,"display")&&"none"===p.css(a,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==F(a.nodeName)?B.zoom=1:B.display="inline-block"));d.overflow&&(B.overflow="hidden",p.support.shrinkWrapBlocks||m.done(function(){B.overflow=d.overflow[0];B.overflowX=d.overflow[1];B.overflowY=d.overflow[2]}));for(e in b)c=b[e],Rd.exec(c)&&(delete b[e],c!==(Y?"hide":"show")&&
n.push(e));if(c=n.length)for(f=p._data(a,"fxshow")||p._data(a,"fxshow",{}),Y?p(a).show():m.done(function(){p(a).hide()}),m.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in K)p.style(a,b,K[b])}),e=0;e<c;e++)b=n[e],g=m.createTween(b,Y?f[b]:0),K[b]=f[b]||p.style(a,b),b in f||(f[b]=g.start,Y&&(g.end=g.start,g.start="width"===b||"height"===b?1:0))}],ad={"*":[function(a,b){var d,e,c=this.createTween(a,b),f=ta.exec(b),g=c.cur(),h=+g||0,l=1,m=20;if(f){d=+f[2];e=f[3]||(p.cssNumber[a]?"":"px");if("px"!==
e&&h){h=p.css(c.elem,a,!0)||d||1;do l=l||".5",h/=l,p.style(c.elem,a,h+e);while(l!==(l=c.cur()/g)&&1!==l&&--m)}c.unit=e;c.start=h;c.end=f[1]?h+(f[1]+1)*d:d}return c}]};p.Animation=p.extend(va,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var d,e=0,c=a.length;e<c;e++)d=a[e],ad[d]=ad[d]||[],ad[d].unshift(b)},prefilter:function(a,b){b?Yb.unshift(a):Yb.push(a)}});p.Tween=wa;wa.prototype={constructor:wa,init:function(a,b,d,e,c,f){this.elem=a;this.prop=d;this.easing=c||"swing";
this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=f||(p.cssNumber[d]?"":"px")},cur:function(){var a=wa.propHooks[this.prop];return a&&a.get?a.get(this):wa.propHooks._default.get(this)},run:function(a){var b,d=wa.propHooks[this.prop];this.pos=this.options.duration?b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);d&&d.set?d.set(this):wa.propHooks._default.set(this);
return this}};wa.prototype.init.prototype=wa.prototype;wa.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=p.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(p.fx.step[a.prop])p.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};wa.propHooks.scrollTop=wa.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&
a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.each(["toggle","show","hide"],function(a,b){var d=p.fn[b];p.fn[b]=function(e,c,f){return null==e||"boolean"===typeof e||!a&&p.isFunction(e)&&p.isFunction(c)?d.apply(this,arguments):this.animate(ua(b,!0),e,c,f)}});p.fn.extend({fadeTo:function(a,b,d,e){return this.filter(J).css("opacity",0).show().end().animate({opacity:b},a,d,e)},animate:function(a,b,d,e){var c=p.isEmptyObject(a),f=p.speed(b,d,e);b=function(){var b=va(this,p.extend({},a),f);c&&b.stop(!0)};
return c||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=b,b=a,a=c);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Sd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||p.dequeue(this,a)})}});
p.each({slideDown:ua("show"),slideUp:ua("hide"),slideToggle:ua("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,d,e){return this.animate(b,a,d,e)}});p.speed=function(a,b,d){var e=a&&"object"===typeof a?p.extend({},a):{complete:d||!d&&b||p.isFunction(a)&&a,duration:a,easing:d&&b||b&&!p.isFunction(b)&&b};e.duration=p.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in p.fx.speeds?p.fx.speeds[e.duration]:p.fx.speeds._default;
if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(){p.isFunction(e.old)&&e.old.call(this);e.queue&&p.dequeue(this,e.queue)};return e};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.timers=[];p.fx=wa.prototype.init;p.fx.tick=function(){for(var a,b=p.timers,d=0;d<b.length;d++)a=b[d],a()||b[d]!==a||b.splice(d--,1);b.length||p.fx.stop()};p.fx.timer=function(a){a()&&p.timers.push(a)&&!Vc&&(Vc=setInterval(p.fx.tick,p.fx.interval))};
p.fx.interval=13;p.fx.stop=function(){clearInterval(Vc);Vc=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fx.step={};p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var Td=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,d,e,f,g,h={top:0,left:0};if(e=(f=this[0])&&f.ownerDocument){if((d=e.body)===f)return p.offset.bodyOffset(f);
b=e.documentElement;if(!p.contains(b,f))return h;"undefined"!==typeof f.getBoundingClientRect&&(h=f.getBoundingClientRect());e=ka(e);f=b.clientTop||d.clientTop||0;d=b.clientLeft||d.clientLeft||0;g=e.pageYOffset||b.scrollTop;b=e.pageXOffset||b.scrollLeft;return{top:h.top+g-f,left:h.left+b-d}}};p.offset={bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,d+=parseFloat(p.css(a,"marginLeft"))||0);return{top:b,left:d}},
setOffset:function(a,b,d){var e=p.css(a,"position");"static"===e&&(a.style.position="relative");var c=p(a),f=c.offset(),g=p.css(a,"top"),h=p.css(a,"left"),l={},m={};("absolute"===e||"fixed"===e)&&-1<p.inArray("auto",[g,h])?(m=c.position(),e=m.top,h=m.left):(e=parseFloat(g)||0,h=parseFloat(h)||0);p.isFunction(b)&&(b=b.call(a,d,f));null!=b.top&&(l.top=b.top-f.top+e);null!=b.left&&(l.left=b.left-f.left+h);"using"in b?b.using.call(a,l):c.css(l)}};p.fn.extend({position:function(){if(this[0]){var a=this[0],
b=this.offsetParent(),d=this.offset(),e=Td.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(p.css(a,"marginTop"))||0;d.left-=parseFloat(p.css(a,"marginLeft"))||0;e.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0;e.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0;return{top:d.top-e.top,left:d.left-e.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||N.body;a&&!Td.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a||N.body})}});
p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=ka(a);if(f===c)return g?b in g?g[b]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});p.each({Height:"height",Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),
h=d||(!0===e||!0===f?"margin":"border");return p.access(this,function(b,d,e){return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):e===c?p.css(b,d,e,h):p.style(b,d,e,h)},b,g?e:c,g,null)}})});a.jQuery=a.$=p;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
(function(a,c){function b(b,e){var c,f;c=b.nodeName.toLowerCase();if("area"===c){c=b.parentNode;f=c.name;if(!b.href||!f||"map"!==c.nodeName.toLowerCase())return!1;c=a("img[usemap=#"+f+"]")[0];return!!c&&d(c)}return(/input|select|textarea|button|object/.test(c)?!b.disabled:"a"===c?b.href||e:e)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,
{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,d){return"number"===typeof b?this.each(function(){var e=this;setTimeout(function(){a(e).focus();d&&d.call(e)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;
b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(b){if(b!==c)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var d;b.length&&b[0]!==document;){d=b.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(b.css("zIndex"),10),!isNaN(d)&&0!==d)return d;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width",
"Height"],function(b,d){function e(b,d,c,g){a.each(f,function(){d-=parseFloat(a.css(b,"padding"+this))||0;c&&(d-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(d-=parseFloat(a.css(b,"margin"+this))||0)});return d}var f="Width"===d?["Left","Right"]:["Top","Bottom"],n=d.toLowerCase(),q={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(b){return b===c?q["inner"+d].call(this):this.each(function(){a(this).css(n,
e(this,b)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!==typeof b?q["outer"+d].call(this,b):this.each(function(){a(this).css(n,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,b)}}):function(b,d,e){return!!a.data(b,e[3])},focusable:function(d){return b(d,!isNaN(a.attr(d,"tabindex")))},tabbable:function(d){var e=a.attr(d,"tabindex"),c=isNaN(e);return(c||0<=e)&&b(d,!c)}}),a(function(){var b=document.body,
d=b.appendChild(d=document.createElement("div"));d.offsetHeight;a.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===d.offsetHeight;a.support.selectstart="onselectstart"in d;b.removeChild(d).style.display="none"}),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1;a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,d,e){var c;b=a.ui[b].prototype;for(c in e)b.plugins[c]=b.plugins[c]||[],b.plugins[c].push([d,e[c]])},call:function(a,b,d){var e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<e.length;b++)a.options[e[b][0]]&&e[b][1].apply(a.element,d)}},contains:a.contains,hasScroll:function(b,d){if("hidden"===
a(b).css("overflow"))return!1;var e=d&&"left"===d?"scrollLeft":"scrollTop",c=!1;if(0<b[e])return!0;b[e]=1;c=0<b[e];b[e]=0;return c},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(b,d,e,c,f,q){return a.ui.isOverAxis(b,e,f)&&a.ui.isOverAxis(d,c,q)}}))})(jQuery);
(function(a,c){var b=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d=0,c;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(l){}e(b)};a.widget=function(b,d,e){var c,m,n,q,v=b.split(".")[0];b=b.split(".")[1];c=v+"-"+b;e||(e=d,d=a.Widget);a.expr[":"][c.toLowerCase()]=function(b){return!!a.data(b,c)};a[v]=a[v]||{};m=a[v][b];n=a[v][b]=function(a,b){if(!this._createWidget)return new n(a,b);arguments.length&&this._createWidget(a,b)};a.extend(n,m,{version:e.version,_proto:a.extend({},
e),_childConstructors:[]});q=new d;q.options=a.widget.extend({},q.options);a.each(e,function(b,c){a.isFunction(c)&&(e[b]=function(){var a=function(){return d.prototype[b].apply(this,arguments)},e=function(a){return d.prototype[b].apply(this,a)};return function(){var b=this._super,d=this._superApply,f;this._super=a;this._superApply=e;f=c.apply(this,arguments);this._super=b;this._superApply=d;return f}}())});n.prototype=a.widget.extend(q,{widgetEventPrefix:q.widgetEventPrefix||b},e,{constructor:n,namespace:v,
widgetName:b,widgetBaseClass:c,widgetFullName:c});m?(a.each(m._childConstructors,function(b,d){var e=d.prototype;a.widget(e.namespace+"."+e.widgetName,n,d._proto)}),delete m._childConstructors):d._childConstructors.push(n);a.widget.bridge(b,n)};a.widget.extend=function(b){for(var e=d.call(arguments,1),h=0,l=e.length,m,n;h<l;h++)for(m in e[h])n=e[h][m],e[h].hasOwnProperty(m)&&n!==c&&(a.isPlainObject(n)?b[m]=a.isPlainObject(b[m])?a.widget.extend({},b[m],n):a.widget.extend({},n):b[m]=n);return b};a.widget.bridge=
function(b,e){var h=e.prototype.widgetFullName;a.fn[b]=function(l){var m="string"===typeof l,n=d.call(arguments,1),q=this;l=!m&&n.length?a.widget.extend.apply(null,[l].concat(n)):l;m?this.each(function(){var d,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+l+"'");if(!a.isFunction(e[l])||"_"===l.charAt(0))return a.error("no such method '"+l+"' for "+b+" widget instance");d=e[l].apply(e,n);if(d!==e&&d!==c)return q=d&&d.jquery?
q.pushStack(d.get()):d,!1}):this.each(function(){var b=a.data(this,h);b?b.option(l||{})._init():new e(l,this)});return q}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(d,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),
d);this.bindings=a();this.hoverable=a();this.focusable=a();e!==this&&(a.data(e,this.widgetName,this),a.data(e,this.widgetFullName,this),this._on(this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(b,d){var e=b,l,m,n;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(e={},l=b.split("."),b=l.shift(),l.length){m=e[b]=a.widget.extend({},this.options[b]);for(n=0;n<l.length-1;n++)m[l[n]]=m[l[n]]||{},m=m[l[n]];b=l.pop();if(d===c)return m[b]===c?null:m[b];m[b]=d}else{if(d===c)return this.options[b]===c?null:this.options[b];e[b]=d}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,d){var e,c=this;d?(b=e=a(b),this.bindings=this.bindings.add(b)):(d=b,b=this.element,e=this.widget());a.each(d,function(d,g){function q(){if(!0!==
c.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof g?c[g]:g).apply(c,arguments)}"string"!==typeof g&&(q.guid=g.guid=g.guid||q.guid||a.guid++);var v=d.match(/^(\w+)\s*(.*)$/),A=v[1]+c.eventNamespace;(v=v[2])?e.delegate(v,A,q):b.bind(A,q)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var d=this;return setTimeout(function(){return("string"===typeof a?d[a]:a).apply(d,arguments)},
b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,d,e){var c,m=this.options[b];e=e||{};d=a.Event(d);
d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];if(b=d.originalEvent)for(c in b)c in d||(d[c]=b[c]);this.element.trigger(d,e);return!(a.isFunction(m)&&!1===m.apply(this.element[0],[d].concat(e))||d.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,d){a.Widget.prototype["_"+b]=function(e,c,m){"string"===typeof c&&(c={effect:c});var n,q=c?!0===c||"number"===typeof c?d:c.effect||d:b;c=c||{};"number"===typeof c&&(c={duration:c});
n=!a.isEmptyObject(c);c.complete=m;c.delay&&e.delay(c.delay);if(n&&a.effects&&(a.effects.effect[q]||!1!==a.uiBackCompat&&a.effects[q]))e[b](c);else if(q!==b&&e[q])e[q](c.duration,c.easing,m);else e.queue(function(d){a(this)[b]();m&&m.call(e[0]);d()})}});!1!==a.uiBackCompat&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(a,c){var b=!1;a(document).mouseup(function(a){b=!1});a.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(e){if(!0===a.data(e.target,b.widgetName+".preventClickEvent"))return a.removeData(e.target,b.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var e=this,c=1===d.which,g="string"===typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:!1;if(!c||g||!this._mouseCapture(d))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return e._mouseMove(a)};this._mouseUpDelegate=function(a){return e._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=!0}},_mouseMove:function(b){if(a.ui.ie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},
_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},
_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);
(function(a,c){function b(a,b,d){return[parseInt(a[0],10)*(q.test(a[0])?b/100:1),parseInt(a[1],10)*(q.test(a[1])?d/100:1)]}a.ui=a.ui||{};var d,e=Math.max,f=Math.abs,g=Math.round,h=/left|center|right/,l=/top|center|bottom/,m=/[\+\-]\d+%?/,n=/^\w+/,q=/%$/,v=a.fn.position;a.position={scrollbarWidth:function(){if(d!==c)return d;var b,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");e=f.children()[0];a("body").append(f);b=e.offsetWidth;
f.css("overflow","scroll");e=e.offsetWidth;b===e&&(e=f[0].clientWidth);f.remove();return d=b-e},getScrollInfo:function(b){var d=b.isWindow?"":b.element.css("overflow-x"),e=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===e||"auto"===e&&b.height<b.element[0].scrollHeight;return{width:"scroll"===d||"auto"===d&&b.width<b.element[0].scrollWidth?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var d=a.isWindow(b[0]);return{element:b,
isWindow:d,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:d?b.width():b.outerWidth(),height:d?b.height():b.outerHeight()}}};a.fn.position=function(d){if(!d||!d.of)return v.apply(this,arguments);d=a.extend({},d);var c,q,D,J,I,C=a(d.of),t=a.position.getWithinInfo(d.within),z=a.position.getScrollInfo(t),F=C[0],O=(d.collision||"flip").split(" "),S={};9===F.nodeType?(q=C.width(),D=C.height(),J={top:0,left:0}):a.isWindow(F)?(q=C.width(),D=C.height(),J={top:C.scrollTop(),
left:C.scrollLeft()}):F.preventDefault?(d.at="left top",q=D=0,J={top:F.pageY,left:F.pageX}):(q=C.outerWidth(),D=C.outerHeight(),J=C.offset());I=a.extend({},J);a.each(["my","at"],function(){var a=(d[this]||"").split(" "),b,e;1===a.length&&(a=h.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b=m.exec(a[0]);e=m.exec(a[1]);S[this]=[b?b[0]:0,e?e[0]:0];d[this]=[n.exec(a[0])[0],n.exec(a[1])[0]]});1===O.length&&
(O[1]=O[0]);"right"===d.at[0]?I.left+=q:"center"===d.at[0]&&(I.left+=q/2);"bottom"===d.at[1]?I.top+=D:"center"===d.at[1]&&(I.top+=D/2);c=b(S.at,q,D);I.left+=c[0];I.top+=c[1];return this.each(function(){var h,l,m=a(this),n=m.outerWidth(),v=m.outerHeight(),F=parseInt(a.css(this,"marginLeft"),10)||0,ha=parseInt(a.css(this,"marginTop"),10)||0,wa=n+F+(parseInt(a.css(this,"marginRight"),10)||0)+z.width,ua=v+ha+(parseInt(a.css(this,"marginBottom"),10)||0)+z.height,ka=a.extend({},I),oa=b(S.my,m.outerWidth(),
m.outerHeight());"right"===d.my[0]?ka.left-=n:"center"===d.my[0]&&(ka.left-=n/2);"bottom"===d.my[1]?ka.top-=v:"center"===d.my[1]&&(ka.top-=v/2);ka.left+=oa[0];ka.top+=oa[1];a.support.offsetFractions||(ka.left=g(ka.left),ka.top=g(ka.top));h={marginLeft:F,marginTop:ha};a.each(["left","top"],function(b,e){if(a.ui.position[O[b]])a.ui.position[O[b]][e](ka,{targetWidth:q,targetHeight:D,elemWidth:n,elemHeight:v,collisionPosition:h,collisionWidth:wa,collisionHeight:ua,offset:[c[0]+oa[0],c[1]+oa[1]],my:d.my,
at:d.at,within:t,elem:m})});a.fn.bgiframe&&m.bgiframe();d.using&&(l=function(a){var b=J.left-ka.left,c=b+q-n,g=J.top-ka.top,h=g+D-v,l={target:{element:C,left:J.left,top:J.top,width:q,height:D},element:{element:m,left:ka.left,top:ka.top,width:n,height:v},horizontal:0>c?"left":0<b?"right":"center",vertical:0>h?"top":0<g?"bottom":"middle"};q<n&&f(b+c)<q&&(l.horizontal="center");D<v&&f(g+h)<D&&(l.vertical="middle");e(f(b),f(c))>e(f(g),f(h))?l.important="horizontal":l.important="vertical";d.using.call(this,
a,l)});m.offset(a.extend(ka,{using:l}))})};a.ui.position={fit:{left:function(a,b){var d=b.within,c=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,g=a.left-b.collisionPosition.marginLeft,d=c-g,h=g+b.collisionWidth-f-c;b.collisionWidth>f?0<d&&0>=h?(c=a.left+d+b.collisionWidth-f-c,a.left+=d-c):a.left=0<h&&0>=d?c:d>h?c+f-b.collisionWidth:c:a.left=0<d?a.left+d:0<h?a.left-h:e(a.left-g,a.left)},top:function(a,b){var d=b.within,c=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,
d=c-g,h=g+b.collisionHeight-f-c;b.collisionHeight>f?0<d&&0>=h?(c=a.top+d+b.collisionHeight-f-c,a.top+=d-c):a.top=0<h&&0>=d?c:d>h?c+f-b.collisionHeight:c:a.top=0<d?a.top+d:0<h?a.top-h:e(a.top-g,a.top)}},flip:{left:function(a,b){var d=b.within,e=d.offset.left+d.scrollLeft,c=d.width,g=d.isWindow?d.scrollLeft:d.offset.left,h=a.left-b.collisionPosition.marginLeft,d=h-g,l=h+b.collisionWidth-c-g,h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?
-b.targetWidth:0,n=-2*b.offset[0];if(0>d){if(e=a.left+h+m+n+b.collisionWidth-c-e,0>e||e<f(d))a.left+=h+m+n}else 0<l&&(e=a.left-b.collisionPosition.marginLeft+h+m+n-g,0<e||f(e)<l)&&(a.left+=h+m+n)},top:function(a,b){var d=b.within,e=d.offset.top+d.scrollTop,c=d.height,g=d.isWindow?d.scrollTop:d.offset.top,h=a.top-b.collisionPosition.marginTop,d=h-g,l=h+b.collisionHeight-c-g,h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:
0,n=-2*b.offset[1];0>d?(e=a.top+h+m+n+b.collisionHeight-c-e,a.top+h+m+n>d&&(0>e||e<f(d))&&(a.top+=h+m+n)):0<l&&(e=a.top-b.collisionPosition.marginTop+h+m+n-g,a.top+h+m+n>l&&(0<e||f(e)<l)&&(a.top+=h+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,d,e,c,f=document.getElementsByTagName("body")[0];e=document.createElement("div");
b=document.createElement(f?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(c in d)b.style[c]=d[c];b.appendChild(e);d=f||document.documentElement;d.insertBefore(b,d.firstChild);e.style.cssText="position: absolute; left: 10.7432222px;";e=a(e).offset().left;a.support.offsetFractions=10<e&&11>e;b.innerHTML="";d.removeChild(b)})();!1!==a.uiBackCompat&&function(a){var b=a.fn.position;a.fn.position=
function(d){if(!d||!d.offset)return b.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");1===e.length&&(e[1]=e[0]);/^\d/.test(e[0])&&(e[0]="+"+e[0]);/^\d/.test(e[1])&&(e[1]="+"+e[1]);1===f.length&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center"));return b.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:c}))}}(jQuery)})(jQuery);
(function(a,c){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===
d.iframeFix?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();
this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;
d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var e=this._uiHash();if(!1===this._trigger("drag",
b,e))return this._mouseUp({}),!1;this.position=e.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=!1);for(var e=this.element[0],c=!1;e&&(e=e.parentNode);)e==
document&&(c=!0);if(!c&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var g=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==g._trigger("stop",b)&&g._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(d=!0)});return d},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],
[b])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==d.appendTo?this.element[0].parentNode:d.appendTo);b[0]==this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var b=a(b.containment),d=b[0];if(d){b.offset();var e="hidden"!=a(d).css("overflow");this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),
10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}},
_convertPositionTo:function(b,d){d||(d=this.position);var e="absolute"==b?1:-1,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(c[0].tagName);return{top:d.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:c.scrollTop())*e,left:d.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"==this.cssPosition?
-this.scrollParent.scrollLeft():g?0:c.scrollLeft())*e}},_generatePosition:function(b){var d=this.options,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(e[0].tagName),g=b.pageX,h=b.pageY;if(this.originalPosition){var l;this.containment&&(this.relative_container?(l=this.relative_container.offset(),l=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+
l.left,this.containment[3]+l.top]):l=this.containment,b.pageX-this.offset.click.left<l[0]&&(g=l[0]+this.offset.click.left),b.pageY-this.offset.click.top<l[1]&&(h=l[1]+this.offset.click.top),b.pageX-this.offset.click.left>l[2]&&(g=l[2]+this.offset.click.left),b.pageY-this.offset.click.top>l[3]&&(h=l[3]+this.offset.click.top));d.grid&&(h=d.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,h=l?h-this.offset.click.top<l[1]||h-this.offset.click.top>l[3]?
h-this.offset.click.top<l[1]?h+d.grid[1]:h-d.grid[1]:h:h,g=d.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,g=l?g-this.offset.click.left<l[0]||g-this.offset.click.left>l[2]?g-this.offset.click.left<l[0]?g+d.grid[0]:g-d.grid[0]:g:g)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():c?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():c?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,d,e){e=e||this._uiHash();a.ui.plugin.call(this,b,[d,e]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,d,e)},plugins:{},
_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var e=a(this).data("draggable"),c=e.options,g=a.extend({},d,{item:e.element});e.sortables=[];a(c.connectToSortable).each(function(){var d=a.data(this,"sortable");d&&!d.options.disabled&&(e.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",b,g))})},
stop:function(b,d){var e=a(this).data("draggable"),c=a.extend({},d,{item:e.element});a.each(e.sortables,function(){this.instance.isOver?(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==e.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",
b,c))})},drag:function(b,d){var e=a(this).data("draggable"),c=this;a.each(e.sortables,function(g){var h=!1,l=this;this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(h=!0,a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this!=l&&this.instance._intersectsWith(this.instance.containerCache)&&
a.ui.contains(l.instance.element[0],this.instance.element[0])&&(h=!1);return h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(c).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=
e.offset.click.top,this.instance.offset.click.left=e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",b),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=
!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",b),e.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,d){var e=a("body"),c=a(this).data("draggable").options;e.css("cursor")&&(c._cursor=e.css("cursor"));e.css("cursor",c.cursor)},stop:function(b,
d){var e=a(this).data("draggable").options;e._cursor&&a("body").css("cursor",e._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d){var e=a(d.helper),c=a(this).data("draggable").options;e.css("opacity")&&(c._opacity=e.css("opacity"));e.css("opacity",c.opacity)},stop:function(b,d){var e=a(this).data("draggable").options;e._opacity&&a(d.helper).css("opacity",e._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,d){var e=a(this).data("draggable");e.scrollParent[0]!=
document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(b,d){var e=a(this).data("draggable"),c=e.options,g=!1;e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName?(c.axis&&"x"==c.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-e.overflowOffset.top<c.scrollSensitivity&&(e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop-
c.scrollSpeed)),c.axis&&"y"==c.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-e.overflowOffset.left<c.scrollSensitivity&&(e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft-c.scrollSpeed))):(c.axis&&"x"==c.axis||(b.pageY-a(document).scrollTop()<c.scrollSensitivity?g=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<
c.scrollSensitivity&&(g=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed))),c.axis&&"y"==c.axis||(b.pageX-a(document).scrollLeft()<c.scrollSensitivity?g=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(g=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))));!1!==g&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(e,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,
d){var e=a(this).data("draggable"),c=e.options;e.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=a(this),d=b.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left})})},drag:function(b,d){for(var e=a(this).data("draggable"),c=e.options,g=c.snapTolerance,h=d.offset.left,l=h+e.helperProportions.width,m=d.offset.top,n=m+e.helperProportions.height,q=e.snapElements.length-
1;0<=q;q--){var v=e.snapElements[q].left,A=v+e.snapElements[q].width,w=e.snapElements[q].top,E=w+e.snapElements[q].height;if(v-g<h&&h<A+g&&w-g<m&&m<E+g||v-g<h&&h<A+g&&w-g<n&&n<E+g||v-g<l&&l<A+g&&w-g<m&&m<E+g||v-g<l&&l<A+g&&w-g<n&&n<E+g){if("inner"!=c.snapMode){var D=Math.abs(w-n)<=g,J=Math.abs(E-m)<=g,I=Math.abs(v-l)<=g,C=Math.abs(A-h)<=g;D&&(d.position.top=e._convertPositionTo("relative",{top:w-e.helperProportions.height,left:0}).top-e.margins.top);J&&(d.position.top=e._convertPositionTo("relative",
{top:E,left:0}).top-e.margins.top);I&&(d.position.left=e._convertPositionTo("relative",{top:0,left:v-e.helperProportions.width}).left-e.margins.left);C&&(d.position.left=e._convertPositionTo("relative",{top:0,left:A}).left-e.margins.left)}var t=D||J||I||C;"outer"!=c.snapMode&&(D=Math.abs(w-m)<=g,J=Math.abs(E-n)<=g,I=Math.abs(v-h)<=g,C=Math.abs(A-l)<=g,D&&(d.position.top=e._convertPositionTo("relative",{top:w,left:0}).top-e.margins.top),J&&(d.position.top=e._convertPositionTo("relative",{top:E-e.helperProportions.height,
left:0}).top-e.margins.top),I&&(d.position.left=e._convertPositionTo("relative",{top:0,left:v}).left-e.margins.left),C&&(d.position.left=e._convertPositionTo("relative",{top:0,left:A-e.helperProportions.width}).left-e.margins.left));!e.snapElements[q].snapping&&(D||J||I||C||t)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[q].item}));e.snapElements[q].snapping=D||J||I||C||t}else e.snapElements[q].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,
b,a.extend(e._uiHash(),{snapItem:e.snapElements[q].item})),e.snapElements[q].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(b,d){var e=a(this).data("draggable").options,e=a.makeArray(a(e.stack)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(d).css("zIndex"),10)||0)});if(e.length){var c=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+e.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
d){var e=a(d.helper),c=a(this).data("draggable").options;e.css("zIndex")&&(c._zIndex=e.css("zIndex"));e.css("zIndex",c.zIndex)},stop:function(b,d){var e=a(this).data("draggable").options;e._zIndex&&a(d.helper).css("zIndex",e._zIndex)}})})(jQuery);
(function(a,c){a.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,d=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(d)?d:function(a){return a.is(d)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],d=0;d<b.length;d++)b[d]==this&&b.splice(d,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,d){"accept"==b&&(this.accept=a.isFunction(d)?d:function(a){return a.is(d)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var d=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);
d&&this._trigger("activate",b,this.ui(d))},_deactivate:function(b){var d=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);d&&this._trigger("deactivate",b,this.ui(d))},_over:function(b){var d=a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!=this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(d)))},_out:function(b){var d=
a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!=this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(d)))},_drop:function(b,d){var e=d||a.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0])return!1;var c=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&
!b.options.disabled&&b.options.scope==e.options.scope&&b.accept.call(b.element[0],e.currentItem||e.element)&&a.ui.intersect(e,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return c=!0,!1});return c?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(e)),this.element):!1},ui:function(a){return{draggable:a.currentItem||
a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(b,d,e){if(!d.offset)return!1;var c=(b.positionAbs||b.position.absolute).left,g=c+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,l=h+b.helperProportions.height,m=d.offset.left,n=m+d.proportions.width,q=d.offset.top,v=q+d.proportions.height;switch(e){case "fit":return m<=c&&g<=n&&q<=h&&l<=v;case "intersect":return m<c+b.helperProportions.width/2&&g-b.helperProportions.width/2<n&&q<h+
b.helperProportions.height/2&&l-b.helperProportions.height/2<v;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,q,m,d.proportions.height,d.proportions.width);case "touch":return(h>=q&&h<=v||l>=q&&l<=v||h<q&&l>v)&&(c>=m&&c<=n||g>=m&&g<=n||c<m&&g>n);default:return!1}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,d){var e=a.ui.ddmanager.droppables[b.options.scope]||
[],c=d?d.type:null,g=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<e.length;h++)if(!(e[h].options.disabled||b&&!e[h].accept.call(e[h].element[0],b.currentItem||b.element))){for(var l=0;l<g.length;l++)if(g[l]==e[h].element[0]){e[h].proportions.height=0;continue a}e[h].visible="none"!=e[h].element.css("display");e[h].visible&&("mousedown"==c&&e[h]._activate.call(e[h],d),e[h].offset=e[h].element.offset(),e[h].proportions={width:e[h].element[0].offsetWidth,height:e[h].element[0].offsetHeight})}},
drop:function(b,d){var e=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(e=this._drop.call(this,d)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,d)))});return e},dragStart:function(b,d){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,d)})},drag:function(b,d){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,d);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e=a.ui.intersect(b,this,this.options.tolerance);if(e=e||1!=this.isover?e&&0==this.isover?"isover":null:"isout"){var c;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===
g});h.length&&(c=a.data(h[0],"droppable"),c.greedyChild="isover"==e?1:0)}c&&"isover"==e&&(c.isover=0,c.isout=1,c._out.call(c,d));this[e]=1;this["isout"==e?"isover":"isout"]=0;this["isover"==e?"_over":"_out"].call(this,d);c&&"isout"==e&&(c.isout=0,c.isover=1,c._over.call(c,d))}}})},dragStop:function(b,d){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)}}})(jQuery);
(function(a,c){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,d=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=d.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");
this.handles={};for(var h=0;h<c.length;h++){var l=a.trim(c[h]),m=a('<div class="ui-resizable-handle ui-resizable-'+l+'"></div>');m.css({zIndex:d.zIndex});"se"==l&&m.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[l]=".ui-resizable-"+l;this.element.append(m)}}this._renderAxis=function(b){b=b||this.element;for(var d in this.handles){this.handles[d].constructor==String&&(this.handles[d]=a(this.handles[d],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var e=
a(this.handles[d],this.element),c=0,c=/sw|ne|nw|se|n|s/.test(d)?e.outerHeight():e.outerWidth(),e=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join("");b.css(e,c);this._proportionallyResize()}a(this.handles[d])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});d.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){d.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){d.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var d=this.element;this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d);d.remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var d=!1,c;for(c in this.handles)a(this.handles[c])[0]==b.target&&(d=!0);return!this.options.disabled&&d},_mouseStart:function(d){var c=this.options,g=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:g.top,left:g.left});this._renderProxy();var g=b(this.helper.css("left")),l=b(this.helper.css("top"));c.containment&&(g+=a(c.containment).scrollLeft()||0,l+=a(c.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:g,top:l};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:g,top:l};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio="number"==typeof c.aspectRatio?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;c=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",
"auto"==c?this.axis+"-resize":c);h.addClass("ui-resizable-resizing");this._propagate("start",d);return!0},_mouseDrag:function(a){var b=this.helper,d=this.originalMousePosition,c=this._change[this.axis];if(!c)return!1;d=c.apply(this,[a,a.pageX-d.left||0,a.pageY-d.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)d=this._updateRatio(d,a);d=this._respectSize(d,a);this._propagate("resize",a);b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(d);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var d=this.options;if(this._helper){var c=this._proportionallyResizeElements,h=c.length&&/textarea/i.test(c[0].nodeName),c=h&&a.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-c},c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;d.animate||this.element.css(a.extend(h,{top:l,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!d.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=
this.options,c,h,l,b={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)a=b.minHeight*this.aspectRatio,h=b.minWidth/this.aspectRatio,c=b.maxHeight*this.aspectRatio,l=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),h>b.minHeight&&(b.minHeight=h),c<b.maxWidth&&(b.maxWidth=c),l<b.maxHeight&&(b.maxHeight=l);this._vBoundaries=b},_updateCache:function(a){this.offset=
this.helper.offset();d(a.left)&&(this.position.left=a.left);d(a.top)&&(this.position.top=a.top);d(a.height)&&(this.size.height=a.height);d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.position,h=this.size,l=this.axis;d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==l&&(a.left=c.left+(h.width-a.width),a.top=null);"nw"==l&&(a.top=c.top+(h.height-a.height),a.left=c.left+(h.width-a.width));return a},_respectSize:function(a,
b){var c=this._vBoundaries,h=this.axis,l=d(a.width)&&c.maxWidth&&c.maxWidth<a.width,m=d(a.height)&&c.maxHeight&&c.maxHeight<a.height,n=d(a.width)&&c.minWidth&&c.minWidth>a.width,q=d(a.height)&&c.minHeight&&c.minHeight>a.height;n&&(a.width=c.minWidth);q&&(a.height=c.minHeight);l&&(a.width=c.maxWidth);m&&(a.height=c.maxHeight);var v=this.originalPosition.left+this.originalSize.width,A=this.position.top+this.size.height,w=/sw|nw|w/.test(h),h=/nw|ne|n/.test(h);n&&w&&(a.left=v-c.minWidth);l&&w&&(a.left=
v-c.maxWidth);q&&h&&(a.top=A-c.minHeight);m&&h&&(a.top=A-c.maxHeight);(c=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:c&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var c=this._proportionallyResizeElements[d];if(!this.borderDif){var h=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],
l=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=a.map(h,function(a,b){var d=parseInt(a,10)||0,e=parseInt(l[b],10)||0;return d+e})}c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.ui.ie6?1:0,c=a.ui.ie6?
2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,d){return{width:this.originalSize.width+b}},w:function(a,b,d){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+
d,height:this.originalSize.height-d}},s:function(a,b,d){return{height:this.originalSize.height+d}},se:function(b,d,c){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,d,c]))},sw:function(b,d,c){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,d,c]))},ne:function(b,d,c){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,d,c]))},nw:function(b,d,c){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,
[b,d,c]))}},_propagate:function(b,d){a.ui.plugin.call(this,b,[d,this.ui()]);"resize"!=b&&this._trigger(b,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","alsoResize",{start:function(b,d){var c=a(this).data("resizable").options,h=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",
{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?h(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],h(c.alsoResize)):a.each(c.alsoResize,function(a){h(a)})},resize:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.originalSize,m=c.originalPosition,n={height:c.size.height-l.height||0,width:c.size.width-l.width||0,top:c.position.top-m.top||
0,left:c.position.left-m.left||0},q=function(b,e){a(b).each(function(){var b=a(this),c=a(this).data("resizable-alsoresize"),h={},g=e&&e.length?e:b.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var d=(c[b]||0)+(n[b]||0);d&&0<=d&&(h[b]=d||null)});b.css(h)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?q(h.alsoResize):a.each(h.alsoResize,function(a,b){q(a,b)})},stop:function(b,d){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable",
"animate",{stop:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c._proportionallyResizeElements,m=l.length&&/textarea/i.test(l[0].nodeName),n=m&&a.ui.hasScroll(l[0],"left")?0:c.sizeDiff.height,m={width:c.size.width-(m?0:c.sizeDiff.width),height:c.size.height-n},n=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,q=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(m,q&&n?{top:q,left:n}:{}),{duration:h.animateDuration,
easing:h.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};l&&l.length&&a(l[0]).css({width:d.width,height:d.height});c._updateCache(d);c._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(d,c){var g=a(this).data("resizable"),h=g.element,l=g.options.containment;if(h=l instanceof a?l.get(0):/parent/.test(l)?h.parent().get(0):
l)if(g.containerElement=a(h),/document/.test(l)||l==document)g.containerOffset={left:0,top:0},g.containerPosition={left:0,top:0},g.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var m=a(h),n=[];a(["Top","Right","Left","Bottom"]).each(function(a,d){n[a]=b(m.css("padding"+d))});g.containerOffset=m.offset();g.containerPosition=m.position();g.containerSize={height:m.innerHeight()-n[3],width:m.innerWidth()-
n[1]};var l=g.containerOffset,q=g.containerSize.height,v=g.containerSize.width,v=a.ui.hasScroll(h,"left")?h.scrollWidth:v,q=a.ui.hasScroll(h)?h.scrollHeight:q;g.parentData={element:h,left:l.left,top:l.top,width:v,height:q}}},resize:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.containerOffset,m=c.position,n=c._aspectRatio||b.shiftKey,q={top:0,left:0},v=c.containerElement;v[0]!=document&&/static/.test(v.css("position"))&&(q=l);m.left<(c._helper?l.left:0)&&(c.size.width+=c._helper?c.position.left-
l.left:c.position.left-q.left,n&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=h.helper?l.left:0);m.top<(c._helper?l.top:0)&&(c.size.height+=c._helper?c.position.top-l.top:c.position.top,n&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?l.top:0);c.offset.left=c.parentData.left+c.position.left;c.offset.top=c.parentData.top+c.position.top;h=Math.abs(c.offset.left-q.left+c.sizeDiff.width);l=Math.abs((c._helper?c.offset.top-q.top:c.offset.top-l.top)+c.sizeDiff.height);
q=c.containerElement.get(0)==c.element.parent().get(0);m=/relative|absolute/.test(c.containerElement.css("position"));q&&m&&(h-=c.parentData.left);h+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-h,n&&(c.size.height=c.size.width/c.aspectRatio));l+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-l,n&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.containerOffset,m=c.containerPosition,n=c.containerElement,
q=a(c.helper),v=q.offset(),A=q.outerWidth()-c.sizeDiff.width,q=q.outerHeight()-c.sizeDiff.height;c._helper&&!h.animate&&/relative/.test(n.css("position"))&&a(this).css({left:v.left-m.left-l.left,width:A,height:q});c._helper&&!h.animate&&/static/.test(n.css("position"))&&a(this).css({left:v.left-m.left-l.left,width:A,height:q})}});a.ui.plugin.add("resizable","ghost",{start:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.size;c.ghost=c.originalElement.clone();c.ghost.css({opacity:.25,
display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof h.ghost?h.ghost:"");c.ghost.appendTo(c.helper)},resize:function(b,d){var c=a(this).data("resizable");c.ghost&&c.ghost.css({position:"relative",height:c.size.height,width:c.size.width})},stop:function(b,d){var c=a(this).data("resizable");c.ghost&&c.helper&&c.helper.get(0).removeChild(c.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(b,
d){var c=a(this).data("resizable"),h=c.options,l=c.size,m=c.originalSize,n=c.originalPosition,q=c.axis;h.grid="number"==typeof h.grid?[h.grid,h.grid]:h.grid;var v=Math.round((l.width-m.width)/(h.grid[0]||1))*(h.grid[0]||1),h=Math.round((l.height-m.height)/(h.grid[1]||1))*(h.grid[1]||1);/^(se|s|e)$/.test(q)?(c.size.width=m.width+v,c.size.height=m.height+h):/^(ne)$/.test(q)?(c.size.width=m.width+v,c.size.height=m.height+h,c.position.top=n.top-h):(/^(sw)$/.test(q)?(c.size.width=m.width+v,c.size.height=
m.height+h):(c.size.width=m.width+v,c.size.height=m.height+h,c.position.top=n.top-h),c.position.left=n.left-v)}});var b=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a,c){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var d;this.refresh=function(){d=a(b.options.filter,b.element[0]);d.addClass("ui-selectee");d.each(function(){var b=a(this),d=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:d.left,top:d.top,right:d.left+b.outerWidth(),bottom:d.top+b.outerHeight(),
startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=d.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var d=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var c=this.options;this.selectees=a(c.filter,this.element[0]);this._trigger("start",b);a(c.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});c.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=a.data(this,"selectable-item");c.startselected=!0;b.metaKey||b.ctrlKey||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",
b,{unselecting:c.element}))});a(b.target).parents().andSelf().each(function(){var c=a.data(this,"selectable-item");if(c){var e=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");c.unselecting=!e;c.selecting=e;(c.selected=e)?d._trigger("selecting",b,{selecting:c.element}):d._trigger("unselecting",b,{unselecting:c.element});return!1}})}},_mouseDrag:function(b){var d=this;this.dragged=!0;if(!this.options.disabled){var c=
this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,l=b.pageY;if(f>h)var m=h,h=f,f=m;g>l&&(m=l,l=g,g=m);this.helper.css({left:f,top:g,width:h-f,height:l-g});this.selectees.each(function(){var m=a.data(this,"selectable-item");if(m&&m.element!=d.element[0]){var q=!1;"touch"==c.tolerance?q=!(m.left>h||m.right<f||m.top>l||m.bottom<g):"fit"==c.tolerance&&(q=m.left>f&&m.right<h&&m.top>g&&m.bottom<l);q?(m.selected&&(m.$element.removeClass("ui-selected"),m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),
m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,d._trigger("selecting",b,{selecting:m.element}))):(m.selecting&&((b.metaKey||b.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),d._trigger("unselecting",b,{unselecting:m.element}))),!m.selected||b.metaKey||b.ctrlKey||
m.startselected||(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,d._trigger("unselecting",b,{unselecting:m.element})))}});return!1}},_mouseStop:function(b){var d=this;this.dragged=!1;a(".ui-unselecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=!1;d._trigger("unselected",b,{unselected:c.element})});a(".ui-selecting",this.element[0]).each(function(){var c=
a.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;d._trigger("selected",b,{selected:c.element})});this._trigger("stop",b);this.helper.remove();return!1}})})(jQuery);
(function(a,c){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,d){"disabled"===b?(this.options[b]=
d,this.widget().toggleClass("ui-sortable-disabled",!!d)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,d){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var f=null;a(b.target).parents().each(function(){if(a.data(this,c.widgetName+"-item")==c)return f=a(this),!1});a.data(b.target,c.widgetName+"-item")==c&&(f=a(b.target));if(!f)return!1;if(this.options.handle&&!d){var g=!1;a(this.options.handle,f).find("*").andSelf().each(function(){this==
b.target&&(g=!0)});if(!g)return!1}this.currentItem=f;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,d,c){d=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,
top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
d.containment&&this._setContainment();d.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",d.cursor));d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity));d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var d=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(b.pageY-a(document).scrollTop()<d.scrollSensitivity?c=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(c=a(document).scrollTop(a(document).scrollTop()+
d.scrollSpeed)),b.pageX-a(document).scrollLeft()<d.scrollSensitivity?c=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(c=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)));!1!==c&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");
this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-1;0<=d;d--){var c=this.items[d],f=c.item[0],g=this._intersectsWithPointer(c);if(g&&c.instance===this.currentContainer&&f!=this.currentItem[0]&&this.placeholder[1==g?"next":"prev"]()[0]!=f&&!a.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],f):1)){this.direction=1==g?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(b,
c);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,d){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var c=this,f=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(b)})}else this._clear(b,d);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];b=b||{};a(d).each(function(){var d=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);d&&c.push((b.key||d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))});!c.length&&b.key&&c.push(b.key+"=");return c.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];b=b||{};d.each(function(){c.push(a(b.item||this).attr(b.attribute||
"id")||"")});return c},_intersectsWith:function(a){var d=this.positionAbs.left,c=d+this.helperProportions.width,f=this.positionAbs.top,g=f+this.helperProportions.height,h=a.left,l=h+a.width,m=a.top,n=m+a.height,q=this.offset.click.top,v=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?f+q>m&&f+q<n&&d+v>h&&d+v<l:h<d+this.helperProportions.width/
2&&c-this.helperProportions.width/2<l&&m<f+this.helperProportions.height/2&&g-this.helperProportions.height/2<n},_intersectsWithPointer:function(b){var d="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);d=d&&b;b=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return d?this.floating?c&&"right"==c||"down"==b?2:1:b&&("down"==
b?2:1):!1},_intersectsWithSides:function(b){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var c=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&b||"left"==f&&!b:c&&("down"==c&&d||"up"==c&&!d)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var d=[],c=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--)for(var g=a(f[b]),h=g.length-1;0<=h;h--){var l=a.data(g[h],this.widgetName);l&&
l!=this&&!l.options.disabled&&c.push([a.isFunction(l.options.items)?l.options.items.call(l.element):a(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}c.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=c.length-1;0<=b;b--)c[b][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var b=
this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]==a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var d=this.items,c=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;0<=g;g--)for(var h=a(f[g]),l=h.length-1;0<=l;l--){var m=
a.data(h[l],this.widgetName);m&&m!=this&&!m.options.disabled&&(c.push([a.isFunction(m.options.items)?m.options.items.call(m.element[0],b,{item:this.currentItem}):a(m.options.items,m.element),m]),this.containers.push(m))}for(g=c.length-1;0<=g;g--)for(b=c[g][1],f=c[g][0],l=0,h=f.length;l<h;l++)m=a(f[l]),m.data(this.widgetName+"-item",b),d.push({item:m,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
for(var d=this.items.length-1;0<=d;d--){var c=this.items[d];if(c.instance==this.currentContainer||!this.currentContainer||c.item[0]==this.currentItem[0]){var f=this.options.toleranceElement?a(this.options.toleranceElement,c.item):c.item;b||(c.width=f.outerWidth(),c.height=f.outerHeight());f=f.offset();c.left=f.left;c.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)f=this.containers[d].element.offset(),
this.containers[d].containerCache.left=f.left,this.containers[d].containerCache.top=f.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var d=b.options;if(!d.placeholder||d.placeholder.constructor==String){var c=d.placeholder;d.placeholder={element:function(){var d=a(document.createElement(b.currentItem[0].nodeName)).addClass(c||
b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];c||(d.style.visibility="hidden");return d},update:function(a,g){if(!c||d.forcePlaceholderSize)g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(d.placeholder.element.call(b.element,
b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){for(var d=null,c=null,f=this.containers.length-1;0<=f;f--)a.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?d&&a.contains(this.containers[f].element[0],d.element[0])||(d=this.containers[f],c=f):this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=
0));if(d)if(1===this.containers.length)this.containers[c]._trigger("over",b,this._uiHash(this)),this.containers[c].containerCache.over=1;else{for(var d=1E4,f=null,g=this.containers[c].floating?"left":"top",h=this.containers[c].floating?"width":"height",l=this.positionAbs[g]+this.offset.click[g],m=this.items.length-1;0<=m;m--)if(a.contains(this.containers[c].element[0],this.items[m].item[0])&&this.items[m].item[0]!=this.currentItem[0]){var n=this.items[m].item.offset()[g],q=!1;Math.abs(n-l)>Math.abs(n+
this.items[m][h]-l)&&(q=!0,n+=this.items[m][h]);Math.abs(n-l)<d&&(d=Math.abs(n-l),f=this.items[m],this.direction=q?"up":"down")}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[c],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[c].element,!0),this._trigger("change",b,this._uiHash()),this.containers[c]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",b,this._uiHash(this)),
this.containers[c].containerCache.over=1}},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b,this.currentItem])):"clone"==d.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!=d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==b[0].style.width||d.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||d.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);
"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var d=a(b.containment)[0],b=a(b.containment).offset(),c="hidden"!=a(d).css("overflow");this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||
0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,d){d||(d=this.position);var c="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:d.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*c,left:d.left+this.offset.relative.left*
c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*c}},_generatePosition:function(b){var d=this.options,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(c[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
var g=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),d.grid&&(h=this.originalPageY+Math.round((h-
this.originalPageY)/d.grid[1])*d.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+d.grid[1]:h-d.grid[1]:h:h,g=this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0],g=this.containment?g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2]?g-this.offset.click.left<this.containment[0]?g+d.grid[0]:g-d.grid[0]:g:g));return{top:h-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_rearrange:function(a,d,c,f){c?c[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?d.item[0]:d.item[0].nextSibling);var g=this.counter=this.counter?++this.counter:
1;this._delay(function(){g==this.counter&&this.refreshPositions(!f)})},_clear:function(b,d){this.reverting=!1;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!d&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||d||c.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||d||(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(f=this.containers.length-1;0<=f;f--)d||c.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<c.length;f++)c[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}d||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=
this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(f=0;f<c.length;f++)c[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(a,c){var b=0,d={},e={};d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="hide";e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="show";a.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var d=this.accordionId=
"ui-accordion-"+(this.element.attr("id")||++b),c=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();c.collapsible||!1!==c.active&&null!=c.active||(c.active=
0);0>c.active&&(c.active+=this.headers.length);this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(b){var c=a(this),e=c.attr("id"),g=c.next(),q=g.attr("id");e||(e=d+"-header-"+b,c.attr("id",e));q||(q=d+"-panel-"+b,g.attr("id",q));c.attr("aria-controls",
q);g.attr("aria-labelledby",e)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(c.event)},
_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display",
"").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),
this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var d=a.ui.keyCode,c=this.headers.length,e=this.headers.index(b.target),m=!1;switch(b.keyCode){case d.RIGHT:case d.DOWN:m=this.headers[(e+1)%c];break;case d.LEFT:case d.UP:m=this.headers[(e-1+c)%c];
break;case d.SPACE:case d.ENTER:this._eventHandler(b);break;case d.HOME:m=this.headers[0];break;case d.END:m=this.headers[c-1]}m&&(a(b.target).attr("tabIndex",-1),a(m).attr("tabIndex",0),m.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b,d,c=this.options.heightStyle,e=this.element.parent();"fill"===c?(a.support.minHeight||(d=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var d=
a(this),c=d.css("position");"absolute"!==c&&"fixed"!==c&&(b-=d.outerHeight(!0))}),d&&e.css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===c&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var d={};b&&(a.each(b.split(" "),function(a,b){d[b]="_eventHandler"}),this._on(this.headers,d))},_eventHandler:function(b){var d=this.options,c=this.active,e=a(b.currentTarget),m=e[0]===c[0],n=m&&d.collapsible,q=n?a():e.next(),v=c.next(),q={oldHeader:c,oldPanel:v,newHeader:n?a():e,newPanel:q};b.preventDefault();m&&!d.collapsible||!1===this._trigger("beforeActivate",
b,q)||(d.active=n?!1:this.headers.index(e),this.active=m?a():e,this._toggle(q),c.removeClass("ui-accordion-header-active ui-state-active"),d.icons&&c.children(".ui-accordion-header-icon").removeClass(d.icons.activeHeader).addClass(d.icons.header),m||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),d.icons&&e.children(".ui-accordion-header-icon").removeClass(d.icons.header).addClass(d.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var d=b.newPanel,c=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=c;this.options.animate?this._animate(d,c,b):(c.hide(),d.show(),this._toggleComplete(b));c.attr({"aria-expanded":"false","aria-hidden":"true"});c.prev().attr("aria-selected","false");d.length&&c.length?c.prev().attr("tabIndex",-1):d.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr({"aria-expanded":"true",
"aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,c){var l,m,n,q=this,v=0,A=a.length&&(!b.length||a.index()<b.index()),w=this.options.animate||{},A=A&&w.down||w,E=function(){q._toggleComplete(c)};"number"===typeof A&&(n=A);"string"===typeof A&&(m=A);m=m||A.easing||w.easing;n=n||A.duration||w.duration;if(!b.length)return a.animate(e,n,m,E);if(!a.length)return b.animate(d,n,m,E);l=a.show().outerHeight();b.animate(d,{duration:n,easing:m,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(e,{duration:n,easing:m,complete:E,step:function(a,d){d.now=Math.round(a);"height"!==d.prop?v+=d.now:"content"!==q.options.heightStyle&&(d.now=Math.round(l-b.outerHeight()-v),v=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});!1!==a.uiBackCompat&&(function(a,b){a.extend(b.options,
{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var d=b._create;b._create=function(){if(this.options.navigation){var b=this,c=this.element.find(this.options.header),e=c.next(),g=c.add(e).find("a").filter(this.options.navigationFilter)[0];g&&c.add(e).each(function(d){if(a.contains(this,g))return b.options.active=Math.floor(d/2),!1})}d.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{heightStyle:null,autoHeight:!0,
clearStyle:!1,fillSpace:!1});var d=b._create,c=b._setOption;a.extend(b,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();d.call(this)},_setOption:function(a){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();c.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),
function(a,b){a.extend(b.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var d=b._createIcons;b._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);d.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){b.activate=b._activate;var d=b._findActive;b._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));
return d.call(this,a)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(a,b){a.extend(b.options,{change:null,changestart:null});var d=b._trigger;b._trigger=function(a,b,c){var e=d.apply(this,arguments);if(!e)return!1;"beforeActivate"===a?e=d.call(this,"changestart",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}):"activate"===a&&(e=d.call(this,"change",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,
newHeader:c.newHeader,newContent:c.newPanel}));return e}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{animate:null,animated:"slide"});var d=b._create;b._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);d.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);
(function(a,c){var b=0;a.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,f;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off");this._on(this.element,{keydown:function(g){if(this.element.prop("readOnly"))c=f=b=!0;else{c=f=b=!1;var h=a.ui.keyCode;switch(g.keyCode){case h.PAGE_UP:b=!0;this._move("previousPage",g);break;case h.PAGE_DOWN:b=!0;this._move("nextPage",g);break;case h.UP:b=!0;this._keyEvent("previous",g);break;case h.DOWN:b=!0;this._keyEvent("next",g);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(b=!0,g.preventDefault(),this.menu.select(g));break;case h.TAB:this.menu.active&&this.menu.select(g);
break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(g),g.preventDefault());break;default:c=!0,this._searchTimeout(g)}}},keypress:function(f){if(b)b=!1,f.preventDefault();else if(!c){var h=a.ui.keyCode;switch(f.keyCode){case h.PAGE_UP:this._move("previousPage",f);break;case h.PAGE_DOWN:this._move("nextPage",f);break;case h.UP:this._keyEvent("previous",f);break;case h.DOWN:this._keyEvent("next",f)}}},input:function(a){f?(f=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});
var d=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(c){c.target===b.element[0]||c.target===d||a.contains(d,c.target)||b.close()})})},menufocus:function(b,d){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var c=d.item.data("ui-autocomplete-item")||d.item.data("item.autocomplete");
!1!==this._trigger("focus",b,{item:c})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(c.value):this.liveRegion.text(c.value)},menuselect:function(a,b){var d=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),c=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c;this.selectedItem=d}));!1!==this._trigger("select",a,{item:d})&&this._value(d.value);this.term=this._value();this.close(a);
this.selectedItem=d}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);a.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(b||"body")[0]);"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,f=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,e){e(a.ui.autocomplete.filter(b,c.term))}):"string"===typeof this.options.source?(c=this.options.source,
this.source=function(b,d){f.xhr&&f.xhr.abort();f.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",
b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(f){c===b&&a.__response(f);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):
this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},
_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var f=this;a.each(c,function(a,c){f._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,
b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var f=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return f.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})})(jQuery);
(function(a,c){var b,d,e,f,g=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var d=b.name,c=b.form,e=a([]);d&&(e=c?a(c).find("[name='"+d+"']"):a("[name='"+d+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+
this.eventNamespace,g);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var c=this,m=this.options,n="checkbox"===this.type||"radio"===this.type,q="ui-state-hover"+(n?"":" ui-state-active");null===m.label&&(m.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){m.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){m.disabled||a(this).removeClass(q)}).bind("click"+this.eventNamespace,function(a){m.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){c.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){c.buttonElement.removeClass("ui-state-focus")});
n&&(this.element.bind("change"+this.eventNamespace,function(){f||c.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){m.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){m.disabled||d===a.pageX&&e===a.pageY||(f=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).toggleClass("ui-state-active");c.buttonElement.attr("aria-pressed",c.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).addClass("ui-state-active");c.buttonElement.attr("aria-pressed","true");var b=c.element[0];h(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(m.disabled)return!1;a(this).addClass("ui-state-active");b=this;c.document.one("mouseup",function(){b=null})}).bind("mouseup"+
this.eventNamespace,function(){if(m.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(m.disabled)return!1;b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",m.disabled);
this._resetButton()},_determineButtonType:function(){var a,b;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
d=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),c=this.options.icons,e=c.primary&&c.secondary,f=[];c.primary||c.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":c.primary?"-primary":"-secondary")),c.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>"),c.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(d)))):f.push("ui-button-text-only");b.addClass(f.join(" "))}}});a.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(a,c){function b(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=d(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function d(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){a.datepicker._isDisabledDatepicker(g.inline?b.parent()[0]:g.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,d){a.extend(b,d);for(var e in d)if(null==d[e]||d[e]==c)b[e]=d[e];return b}a.extend(a.ui,{datepicker:{version:"1.9.1"}});var f=(new Date).getTime(),g;a.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachDatepicker:function(b,d){var c=null,e;for(e in this._defaults){var f=b.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(g){c[e]=f}}}e=b.nodeName.toLowerCase();f="div"==e||"span"==e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var A=this._newInst(a(b),f);A.settings=a.extend({},d||{},c||{});"input"==e?this._connectDatepicker(b,A):f&&this._inlineDatepicker(b,A)},_newInst:function(b,
c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(b,d){var c=a(b);d.append=a([]);d.trigger=a([]);c.hasClass(this.markerClassName)||(this._attachments(c,d),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,c){d.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(d,b)}),this._autoSize(d),a.data(b,"datepicker",d),d.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,d){var c=this._get(d,"appendText"),e=this._get(d,"isRTL");d.append&&d.append.remove();c&&(d.append=a('<span class="'+this._appendClass+'">'+c+"</span>"),b[e?"before":"after"](d.append));b.unbind("focus",this._showDatepicker);d.trigger&&d.trigger.remove();c=this._get(d,"showOn");"focus"!=
c&&"both"!=c||b.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(d,"buttonText"),f=this._get(d,"buttonImage");d.trigger=a(this._get(d,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:a("<img/>").attr({src:f,alt:c,title:c})));b[e?"before":"after"](d.trigger);d.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():
(a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),d=this._get(a,"dateFormat");if(d.match(/[DM]/)){var c=function(a){for(var b=0,d=0,c=0;c<a.length;c++)a[c].length>b&&(b=a[c].length,d=c);return d};b.setMonth(c(this._get(a,d.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(c(this._get(a,d.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(b,d){var c=a(b);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(d.dpDiv).bind("setData.datepicker",function(a,b,c){d.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(d,b)}),a.data(b,"datepicker",d),this._setDate(d,this._getDefaultDate(d),!0),this._updateDatepicker(d),this._updateAlternate(d),d.settings.disabled&&this._disableDatepicker(b),
d.dpDiv.css("display","block"))},_dialogDatepicker:function(b,d,c,f,g){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));e(b.settings,f||{});d=d&&d.constructor==Date?this._formatDate(b,d):d;this._dialogInput.val(d);
this._pos=g?g.length?g:[g.pageX,g.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);
a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var d=a(b),c=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||d.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var d=a(b),c=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)d=d.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,
function(a){return a==b?null:a})}},_disableDatepicker:function(b){var d=a(b),c=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)d=d.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(d){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,d,f){var g=this._getInst(b);if(2==arguments.length&&"string"==typeof d)return"defaults"==
d?a.extend({},a.datepicker._defaults):g?"all"==d?a.extend({},g.settings):this._get(g,d):null;var q=d||{};"string"==typeof d&&(q={},q[d]=f);if(g){this._curInst==g&&this._hideDatepicker();var v=this._getDateDatepicker(b,!0),A=this._getMinMaxDate(g,"min"),w=this._getMinMaxDate(g,"max");e(g.settings,q);null!==A&&q.dateFormat!==c&&q.minDate===c&&(g.settings.minDate=this._formatDate(g,A));null!==w&&q.dateFormat!==c&&q.maxDate===c&&(g.settings.maxDate=this._formatDate(g,w));this._attachments(a(b),g);this._autoSize(g);
this._setDate(g,v);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(a,b,d){this._optionDatepicker(a,b,d)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var d=this._getInst(a);d&&(this._setDate(d,b),this._updateDatepicker(d),this._updateAlternate(d))},_getDateDatepicker:function(a,b){var d=this._getInst(a);d&&!d.inline&&this._setDateFromField(d,b);return d?this._getDate(d):null},_doKeyDown:function(b){var d=
a.datepicker._getInst(b.target),c=!0,e=d.dpDiv.is(".ui-datepicker-rtl");d._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();c=!1;break;case 13:return c=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",d.dpDiv),c[0]&&a.datepicker._selectDay(b.target,d.selectedMonth,d.selectedYear,c[0]),(b=a.datepicker._get(d,"onSelect"))?(c=a.datepicker._formatDate(d),b.apply(d.input?d.input[0]:null,[c,d])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(d,"stepBigMonths"):-a.datepicker._get(d,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(d,"stepBigMonths"):+a.datepicker._get(d,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);c=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);c=b.ctrlKey||b.metaKey;
break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D");c=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(d,"stepBigMonths"):-a.datepicker._get(d,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");c=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D");c=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,
b.ctrlKey?+a.datepicker._get(d,"stepBigMonths"):+a.datepicker._get(d,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");c=b.ctrlKey||b.metaKey;break;default:c=!1}else 36==b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):c=!1;c&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var d=a.datepicker._getInst(b.target);if(a.datepicker._get(d,"constrainInput")){var d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),e=String.fromCharCode(b.charCode==
c?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(d){a.datepicker.log(d)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&
(b=a("input",b.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!=b){var d=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=d&&(a.datepicker._curInst.dpDiv.stop(!0,!0),d&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var c=a.datepicker._get(d,"beforeShow"),c=c?c.apply(b,[b,d]):{};if(!1!==c){e(d.settings,c);d.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(d);a.datepicker._inDialog&&
(b.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight);var f=!1;a(b).parents().each(function(){f|="fixed"==a(this).css("position");return!f});c={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;d.dpDiv.empty();d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(d);c=a.datepicker._checkOffset(d,c,f);d.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":
"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!d.inline){var c=a.datepicker._get(d,"showAnim"),g=a.datepicker._get(d,"duration"),v=function(){var b=d.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var c=a.datepicker._getBorders(d.dpDiv);b.css({left:-c[0],top:-c[1],width:d.dpDiv.outerWidth(),height:d.dpDiv.outerHeight()})}};d.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=!0;if(a.effects&&(a.effects.effect[c]||a.effects[c]))d.dpDiv.show(c,a.datepicker._get(d,
"showOptions"),g,v);else d.dpDiv[c||"show"](c?g:null,v);c&&g||v();d.input.is(":visible")&&!d.input.is(":disabled")&&d.input.focus();a.datepicker._curInst=d}}}},_updateDatepicker:function(b){this.maxRows=4;var d=a.datepicker._getBorders(b.dpDiv);g=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var c=b.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-d[0],top:-d[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();
d=this._getNumberOfMonths(b);c=d[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&b.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");b.dpDiv[(1!=d[0]||1!=d[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&
b.input.focus();if(b.yearshtml){var e=b.yearshtml;setTimeout(function(){e===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);e=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,d,c){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,A=b.input?b.input.outerHeight():
0,w=document.documentElement.clientWidth+(c?0:a(document).scrollLeft()),E=document.documentElement.clientHeight+(c?0:a(document).scrollTop());d.left-=this._get(b,"isRTL")?e-g:0;d.left-=c&&d.left==b.input.offset().left?a(document).scrollLeft():0;d.top-=c&&d.top==b.input.offset().top+A?a(document).scrollTop():0;d.left-=Math.min(d.left,d.left+e>w&&w>e?Math.abs(d.left+e-w):0);d.top-=Math.min(d.top,d.top+f>E&&E>f?Math.abs(f+A):0);return d},_findPos:function(b){for(var d=this._getInst(b),d=this._get(d,
"isRTL");b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b[d?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var d=this._curInst;if(d&&(!b||d==a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(d,"showAnim");var c=this._get(d,"duration"),e=function(){a.datepicker._tidyDialog(d)};if(a.effects&&(a.effects.effect[b]||a.effects[b]))d.dpDiv.hide(b,a.datepicker._get(d,"showOptions"),c,e);else d.dpDiv["slideDown"==b?"slideUp":
"fadeIn"==b?"fadeOut":"hide"](b?c:null,e);b||e();this._datepickerShowing=!1;(b=this._get(d,"onClose"))&&b.apply(d.input?d.input[0]:null,[d.input?d.input.val():"",d]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=
a(b.target);var d=a.datepicker._getInst(b[0]);(!(b[0].id==a.datepicker._mainDivId||0!=b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,d,c){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,
d+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var d=this._getInst(b[0]);if(this._get(d,"gotoCurrent")&&d.currentDay)d.selectedDay=d.currentDay,d.drawMonth=d.selectedMonth=d.currentMonth,d.drawYear=d.selectedYear=d.currentYear;else{var c=new Date;d.selectedDay=c.getDate();d.drawMonth=d.selectedMonth=c.getMonth();d.drawYear=d.selectedYear=c.getFullYear()}this._notifyChange(d);this._adjustDate(b)},_selectMonthYear:function(b,d,c){b=a(b);var e=
this._getInst(b[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(d.options[d.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,d,c,e){var f=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=d,f.selectedYear=f.currentYear=c,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,d){var c=a(b),c=this._getInst(c[0]);d=null!=d?d:this._formatDate(c);c.input&&c.input.val(d);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[d,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var d=
this._get(b,"altField");if(d){var c=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(c,e,this._getFormatConfig(b));a(d).each(function(){a(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,d,c){if(null==b||null==d)throw"Invalid arguments";
d="object"==typeof d?d.toString():d+"";if(""==d)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,g=(c?c.dayNames:null)||this._defaults.dayNames,A=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,w=(c?c.monthNames:null)||this._defaults.monthNames,E=c=-1,D=-1,J=-1,I=!1,C=function(a){(a=S+1<b.length&&b.charAt(S+1)==a)&&S++;return a},t=function(a){var b=
C(a);a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&b?4:"o"==a?3:2)+"}");a=d.substring(O).match(a);if(!a)throw"Missing number at position "+O;O+=a[0].length;return parseInt(a[0],10)},z=function(b,c,e){b=a.map(C(b)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;a.each(b,function(a,b){var c=b[1];if(d.substr(O,c.length).toLowerCase()==c.toLowerCase())return f=b[0],O+=c.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+O;},F=function(){if(d.charAt(O)!=
b.charAt(S))throw"Unexpected literal at position "+O;O++},O=0,S=0;S<b.length;S++)if(I)"'"!=b.charAt(S)||C("'")?F():I=!1;else switch(b.charAt(S)){case "d":D=t("d");break;case "D":z("D",f,g);break;case "o":J=t("o");break;case "m":E=t("m");break;case "M":E=z("M",A,w);break;case "y":c=t("y");break;case "@":var V=new Date(t("@"));c=V.getFullYear();E=V.getMonth()+1;D=V.getDate();break;case "!":V=new Date((t("!")-this._ticksTo1970)/1E4);c=V.getFullYear();E=V.getMonth()+1;D=V.getDate();break;case "'":C("'")?
F():I=!0;break;default:F()}if(O<d.length&&(f=d.substr(O),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<J){E=1;D=J;do{e=this._getDaysInMonth(c,E-1);if(D<=e)break;E++;D-=e}while(1)}V=this._daylightSavingAdjust(new Date(c,E-1,D));if(V.getFullYear()!=c||V.getMonth()+1!=E||V.getDate()!=D)throw"Invalid date";return V},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,d){if(!b)return"";var c=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,e=(d?d.dayNames:null)||this._defaults.dayNames,f=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort;d=(d?d.monthNames:null)||this._defaults.monthNames;var g=
function(b){(b=I+1<a.length&&a.charAt(I+1)==b)&&I++;return b},w=function(a,b,d){b=""+b;if(g(a))for(;b.length<d;)b="0"+b;return b},E=function(a,b,d,c){return g(a)?c[b]:d[b]},D="",J=!1;if(b)for(var I=0;I<a.length;I++)if(J)"'"!=a.charAt(I)||g("'")?D+=a.charAt(I):J=!1;else switch(a.charAt(I)){case "d":D+=w("d",b.getDate(),2);break;case "D":D+=E("D",b.getDay(),c,e);break;case "o":D+=w("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":D+=w("m",b.getMonth()+1,2);break;case "M":D+=E("M",b.getMonth(),f,d);break;case "y":D+=g("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":D+=b.getTime();break;case "!":D+=1E4*b.getTime()+this._ticksTo1970;break;case "'":g("'")?D+="'":J=!0;break;default:D+=a.charAt(I)}return D},_possibleChars:function(a){for(var b="",d=!1,c=function(b){(b=e+1<a.length&&a.charAt(e+1)==b)&&e++;return b},e=0;e<a.length;e++)if(d)"'"!=a.charAt(e)||c("'")?b+=a.charAt(e):
d=!1;else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":c("'")?b+="'":d=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==c?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var d=this._get(a,"dateFormat"),c=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(d,c,g)||f}catch(w){this.log(w),
c=b?"":c}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=c?e.getDate():0;a.currentMonth=c?e.getMonth():0;a.currentYear=c?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,d,c){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(d){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),d,a.datepicker._getFormatConfig(b))}catch(c){}for(var e=(d.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),l=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,m=l.exec(d);m;){switch(m[2]||"d"){case "d":case "D":e+=parseInt(m[1],10);break;case "w":case "W":e+=7*parseInt(m[1],10);break;case "m":case "M":g+=parseInt(m[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(m[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,
g))}m=l.exec(d)}return new Date(f,g,e)};if(d=(d=null==d||""===d?c:"string"==typeof d?f(d):"number"==typeof d?isNaN(d)?c:e(d):new Date(d.getTime()))&&"Invalid Date"==d.toString()?c:d)d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);return this._daylightSavingAdjust(d)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,d){var c=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e==a.selectedMonth&&f==a.selectedYear||d||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(c?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var d=this._get(b,
"stepMonths"),c="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+f].datepicker._adjustDate(c,-d,"M")},next:function(){window["DP_jQuery_"+f].datepicker._adjustDate(c,+d,"M")},hide:function(){window["DP_jQuery_"+f].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+f].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+f].datepicker._selectDay(c,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var d=new Date,d=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth(),d.getDate())),c=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),f=this._get(b,"hideIfNoPrevNext"),g=this._get(b,
"navigationAsDateFormat"),A=this._getNumberOfMonths(b),w=this._get(b,"showCurrentAtPos"),E=this._get(b,"stepMonths"),D=1!=A[0]||1!=A[1],J=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),I=this._getMinMaxDate(b,"min"),C=this._getMinMaxDate(b,"max"),w=b.drawMonth-w,t=b.drawYear;0>w&&(w+=12,t--);if(C)for(var z=this._daylightSavingAdjust(new Date(C.getFullYear(),C.getMonth()-A[0]*A[1]+1,C.getDate())),z=I&&z<I?I:z;this._daylightSavingAdjust(new Date(t,
w,1))>z;)w--,0>w&&(w=11,t--);b.drawMonth=w;b.drawYear=t;var z=this._get(b,"prevText"),z=g?this.formatDate(z,this._daylightSavingAdjust(new Date(t,w-E,1)),this._getFormatConfig(b)):z,z=this._canAdjustMonth(b,-1,t,w)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+z+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+z+"</span></a>",F=this._get(b,"nextText"),F=g?this.formatDate(F,this._daylightSavingAdjust(new Date(t,w+E,1)),this._getFormatConfig(b)):F,f=this._canAdjustMonth(b,1,t,w)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+F+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":
"e")+'">'+F+"</span></a>",E=this._get(b,"currentText"),F=this._get(b,"gotoCurrent")&&b.currentDay?J:d,E=g?this.formatDate(E,F,this._getFormatConfig(b)):E,g=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?g:"")+(this._isInRange(b,F)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
E+"</button>":"")+(c?"":g)+"</div>":"",g=parseInt(this._get(b,"firstDay"),10),g=isNaN(g)?0:g,E=this._get(b,"showWeek"),F=this._get(b,"dayNames");this._get(b,"dayNamesShort");var O=this._get(b,"dayNamesMin"),S=this._get(b,"monthNames"),V=this._get(b,"monthNamesShort"),T=this._get(b,"beforeShowDay"),pa=this._get(b,"showOtherMonths"),La=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var Wa=this._getDefaultDate(b),va="",ha=0;ha<A[0];ha++){var wa="";this.maxRows=4;for(var ua=0;ua<A[1];ua++){var ka=
this._daylightSavingAdjust(new Date(t,w,b.selectedDay)),oa=" ui-corner-all",sa="";if(D){sa+='<div class="ui-datepicker-group';if(1<A[1])switch(ua){case 0:sa+=" ui-datepicker-group-first";oa=" ui-corner-"+(c?"right":"left");break;case A[1]-1:sa+=" ui-datepicker-group-last";oa=" ui-corner-"+(c?"left":"right");break;default:sa+=" ui-datepicker-group-middle",oa=""}sa+='">'}for(var sa=sa+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+oa+'">'+(/all|left/.test(oa)&&0==ha?c?f:z:"")+
(/all|right/.test(oa)&&0==ha?c?z:f:"")+this._generateMonthYearHeader(b,w,t,I,C,0<ha||0<ua,S,V)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),N=E?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",oa=0;7>oa;oa++)var da=(oa+g)%7,N=N+("<th"+(5<=(oa+g+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+F[da]+'">'+O[da]+"</span></th>");sa+=N+"</tr></thead><tbody>";N=this._getDaysInMonth(t,w);t==b.selectedYear&&w==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,
N));oa=(this._getFirstDayOfMonth(t,w)-g+7)%7;N=Math.ceil((oa+N)/7);this.maxRows=N=D?this.maxRows>N?this.maxRows:N:N;for(var da=this._daylightSavingAdjust(new Date(t,w,1-oa)),pb=0;pb<N;pb++){for(var sa=sa+"<tr>",jb=E?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(da)+"</td>":"",oa=0;7>oa;oa++){var Ga=T?T.apply(b.input?b.input[0]:null,[da]):[!0,""],qa=da.getMonth()!=w,Da=qa&&!La||!Ga[0]||I&&da<I||C&&da>C,jb=jb+('<td class="'+(5<=(oa+g+6)%7?" ui-datepicker-week-end":"")+(qa?" ui-datepicker-other-month":
"")+(da.getTime()==ka.getTime()&&w==b.selectedMonth&&b._keyEvent||Wa.getTime()==da.getTime()&&Wa.getTime()==ka.getTime()?" "+this._dayOverClass:"")+(Da?" "+this._unselectableClass+" ui-state-disabled":"")+(qa&&!pa?"":" "+Ga[1]+(da.getTime()==J.getTime()?" "+this._currentClass:"")+(da.getTime()==d.getTime()?" ui-datepicker-today":""))+'"'+(qa&&!pa||!Ga[2]?"":' title="'+Ga[2]+'"')+(Da?"":' data-handler="selectDay" data-event="click" data-month="'+da.getMonth()+'" data-year="'+da.getFullYear()+'"')+
">"+(qa&&!pa?"&#xa0;":Da?'<span class="ui-state-default">'+da.getDate()+"</span>":'<a class="ui-state-default'+(da.getTime()==d.getTime()?" ui-state-highlight":"")+(da.getTime()==J.getTime()?" ui-state-active":"")+(qa?" ui-priority-secondary":"")+'" href="#">'+da.getDate()+"</a>")+"</td>");da.setDate(da.getDate()+1);da=this._daylightSavingAdjust(da)}sa+=jb+"</tr>"}w++;11<w&&(w=0,t++);sa+="</tbody></table>"+(D?"</div>"+(0<A[0]&&ua==A[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");wa+=sa}va+=
wa}va+=e+(a.ui.ie6&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return va},_generateMonthYearHeader:function(a,b,d,c,e,f,g,w){var E=this._get(a,"changeMonth"),D=this._get(a,"changeYear"),J=this._get(a,"showMonthAfterYear"),I='<div class="ui-datepicker-title">',C="";if(f||!E)C+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{g=c&&c.getFullYear()==d;for(var t=e&&e.getFullYear()==d,C=C+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
z=0;12>z;z++)(!g||z>=c.getMonth())&&(!t||z<=e.getMonth())&&(C+='<option value="'+z+'"'+(z==b?' selected="selected"':"")+">"+w[z]+"</option>");C+="</select>"}J||(I+=C+(!f&&E&&D?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",f||!D)I+='<span class="ui-datepicker-year">'+d+"</span>";else{w=this._get(a,"yearRange").split(":");var F=(new Date).getFullYear();g=function(a){a=a.match(/c[+-].*/)?d+parseInt(a.substring(1),10):a.match(/[+-].*/)?F+parseInt(a,10):parseInt(a,10);return isNaN(a)?F:a};b=g(w[0]);
w=Math.max(b,g(w[1]||""));b=c?Math.max(b,c.getFullYear()):b;w=e?Math.min(w,e.getFullYear()):w;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=w;b++)a.yearshtml+='<option value="'+b+'"'+(b==d?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";I+=a.yearshtml;a.yearshtml=null}I+=this._get(a,"yearSuffix");J&&(I+=(!f&&E&&D?"":"&#xa0;")+C);return I+"</div>"},_adjustInstDate:function(a,b,d){var c=a.drawYear+("Y"==d?b:0),e=a.drawMonth+
("M"==d?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(c,e))+("D"==d?b:0);c=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(c,e,b)));a.selectedDay=c.getDate();a.drawMonth=a.selectedMonth=c.getMonth();a.drawYear=a.selectedYear=c.getFullYear();"M"!=d&&"Y"!=d||this._notifyChange(a)},_restrictMinMax:function(a,b){var d=this._getMinMaxDate(a,"min"),c=this._getMinMaxDate(a,"max"),d=d&&b<d?d:b;return c&&d>c?c:d},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,d,c){var e=this._getNumberOfMonths(a);d=this._daylightSavingAdjust(new Date(d,
c+(0>b?b:e[0]*e[1]),1));0>b&&d.setDate(this._getDaysInMonth(d.getFullYear(),d.getMonth()));return this._isInRange(a,d)},_isInRange:function(a,b){var d=this._getMinMaxDate(a,"min"),c=this._getMinMaxDate(a,"max");return(!d||b.getTime()>=d.getTime())&&(!c||b.getTime()<=c.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,d,c){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(c,d,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;
a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find(document.body).append(a.datepicker.dpDiv),a.datepicker.initialized=!0);var d=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&("isDisabled"==b||"getDate"==b||"widget"==b)||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(d)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this].concat(d)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new b;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.9.1";window["DP_jQuery_"+f]=a})(jQuery);
(function(a,c){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var d=a(this).css(b).offset().top;0>d&&a(this).css("top",
b.top-d)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var b=this,d=this.options,c=d.title||"&#160;",h,l,m,n;h=(this.uiDialog=a("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
d.dialogClass).css({display:"none",outline:0,zIndex:d.zIndex}).attr("tabIndex",-1).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).mousedown(function(a){b.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(h);l=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",
function(){h.focus()}).prependTo(h);m=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();b.close(a)}).appendTo(l);(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(m);c=a("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(l);n=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=
a("<div>")).addClass("ui-dialog-buttonset").appendTo(n);h.attr({role:"dialog","aria-labelledby":c.attr("id")});l.find("*").add(l).disableSelection();this._hoverable(m);this._focusable(m);d.draggable&&a.fn.draggable&&this._makeDraggable();d.resizable&&a.fn.resizable&&this._makeResizable();this._createButtons(d.buttons);this._isOpen=!1;a.fn.bgiframe&&h.bgiframe();this._on(h,{keydown:function(b){if(d.modal&&b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",h),e=c.filter(":first"),c=c.filter(":last");
if(b.target===c[0]&&!b.shiftKey)return e.focus(1),!1;if(b.target===e[0]&&b.shiftKey)return c.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?
a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var d=this,c,h;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==d.uiDialog[0]&&(h=a(this).css("z-index"),
isNaN(h)||(c=Math.max(c,h)))}),a.ui.dialog.maxZ=c),this},isOpen:function(){return this._isOpen},moveToTop:function(b,d){var c=this.options;if(c.modal&&!b||!c.stack&&!c.modal)return this._trigger("focus",d);c.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=c.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ));c={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
a.ui.dialog.maxZ);this.element.attr(c);this._trigger("focus",d);return this},open:function(){if(!this._isOpen){var b;b=this.options;var d=this.uiDialog;this._size();this._position(b.position);d.show(b.show);this.overlay=b.modal?new a.ui.dialog.overlay(this):null;this.moveToTop(!0);b=this.element.find(":tabbable");b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=d));b.eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(b){var d=this,c=!1;this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();"object"===typeof b&&null!==b&&a.each(b,function(){return!(c=!0)});c?(a.each(b,function(b,c){c=a.isFunction(c)?{click:c,text:b}:c;var e=a("<button type='button'></button>").attr(c,!0).unbind("click").click(function(){c.click.apply(d.element[0],arguments)}).appendTo(d.uiButtonSet);a.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var d=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,g){a(this).addClass("ui-dialog-dragging");d._trigger("dragStart",c,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(h,l){c.position=[l.position.left-d.document.scrollLeft(),l.position.top-d.document.scrollTop()];a(this).removeClass("ui-dialog-dragging");d._trigger("dragStop",h,b(l));a.ui.dialog.overlay.resize()}})},
_makeResizable:function(b){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b=b===c?this.options.resizable:b;var g=this,h=this.options,l=this.uiDialog.css("position");b="string"===typeof b?b:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:b,start:function(b,c){a(this).addClass("ui-dialog-resizing");
g._trigger("resizeStart",b,d(c))},resize:function(a,b){g._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();g._trigger("resizeStop",b,d(c));a.ui.dialog.overlay.resize()}}).css("position",l).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var d=[],c=[0,0],h;if(b){if("string"===
typeof b||"object"===typeof b&&"0"in b)d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(c[a]=d[a],d[a]=b)}),b={my:d[0]+(0>c[0]?c[0]:"+"+c[0])+" "+d[1]+(0>c[1]?c[1]:"+"+c[1]),at:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);h||this.uiDialog.hide()},_setOptions:function(c){var f=this,g={},
h=!1;a.each(c,function(a,c){f._setOption(a,c);a in b&&(h=!0);a in d&&(g[a]=c)});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(b,d){var c,h=this.uiDialog;switch(b){case "buttons":this._createButtons(d);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+d);break;case "dialogClass":h.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+d);break;case "disabled":d?h.addClass("ui-dialog-disabled"):
h.removeClass("ui-dialog-disabled");break;case "draggable":(c=h.is(":data(draggable)"))&&!d&&h.draggable("destroy");!c&&d&&this._makeDraggable();break;case "position":this._position(d);break;case "resizable":(c=h.is(":data(resizable)"))&&!d&&h.resizable("destroy");c&&"string"===typeof d&&h.resizable("option","handles",d);c||!1===d||this._makeResizable(d);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(d||"&#160;"))}this._super(b,d)},_size:function(){var b,d,c=this.options,
h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});c.minWidth>c.width&&(c.width=c.minWidth);b=this.uiDialog.css({height:"auto",width:c.width}).outerHeight();d=Math.max(0,c.minHeight-b);"auto"===c.height?a.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),h||this.uiDialog.hide(),this.element.height(Math.max(b,d))):this.element.height(Math.max(c.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var d=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");a(document).bind("keydown.dialog-overlay",function(c){var h=a.ui.dialog.overlay.instances;0!==h.length&&h[h.length-1]===d&&b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())});
d.appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&d.bgiframe();this.instances.push(d);return d},destroy:function(b){var d=a.inArray(b,this.instances),c=0;-1!==d&&this.oldInstances.push(this.instances.splice(d,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");b.height(0).width(0).remove();a.each(this.instances,function(){c=Math.max(c,this.css("z-index"))});this.maxZ=c},height:function(){var b,d;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<d?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,d;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<d?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});
b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,c){var b=!1;a.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(d){var c=a(d.target).closest(".ui-menu-item");!b&&c.not(".ui-state-disabled").length&&(b=!0,this.select(d),c.has(".ui-menu").length?this.expand(d):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(d){a(d.target).closest(".ui-menu").length||this.collapseAll(d);b=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var f,g,h,l,m=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:m=!1,f=this.previousFilter||"",g=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),g===f?h=!0:g=f+g,l=new RegExp("^"+c(g),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(a(this).children("a").text())}),f=h&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f,f.length||(g=String.fromCharCode(b.keyCode),l=new RegExp("^"+c(g),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(a(this).children("a").text())})),
f.length?(this.focus(b,f),1<f.length?(this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}m&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,f=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"});b=f.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");f.each(function(){var b=a(this),
d=b.prev("a"),f=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(f);b.attr("aria-labelledby",d.attr("id"))});this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,b){var c;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&
this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,f,g;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||
0,f=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-f,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(f+c):c+b>g&&this.activeMenu.scrollTop(f+c-g+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var f=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
f.length||(f=this.element);this._close(f);this.blur(b);this.activeMenu=f},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var g;this.active&&(g="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+
"All"](".ui-menu-item").eq(0));g&&g.length&&this.active||(g=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,g)},nextPage:function(b){var c,f,g;this.active?this.isLastItem()||(this._hasScroll()?(f=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-f-g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,f,
g;this.active?this.isFirstItem()||(this._hasScroll()?(f=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-f+g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||
this.collapseAll(b,!0);this._trigger("select",b,c)}})})(jQuery);
(function(a,c){a.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(a){if(a===c)return this._value();this._setOption("value",a);return this},_setOption:function(a,d){"value"===a&&(this.options.value=d,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,d)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),
d=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(d.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(jQuery);
(function(a,c){a.widget("ui.slider",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b,d,c=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+
" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);c.range&&(!0===c.range&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&2!==c.values.length&&(c.values=[c.values[0],c.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:"")));d=c.values&&c.values.length||1;for(b=f.length;b<d;b++)g.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=f.add(a(g.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){c.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)});this._on(this.handles,{keydown:function(b){var d,c,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),d=this._start(b,f),!1===
d))return}e=this.options.step;d=this.options.values&&this.options.values.length?c=this.values(f):c=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:c=this._valueMin();break;case a.ui.keyCode.END:c=this._valueMax();break;case a.ui.keyCode.PAGE_UP:c=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:c=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;c=this._trimAlignValue(d+
e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;c=this._trimAlignValue(d-e)}this._slide(b,f,c)},keyup:function(b){var d=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,d),this._change(b,d),a(b.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var d,c,f,g,h,l=this;h=this.options;if(h.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d=this._normValueFromMouse({x:b.pageX,y:b.pageY});c=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var h=Math.abs(d-l.values(b));c>h&&(c=h,f=a(this),g=b)});!0===h.range&&this.values(1)===h.min&&(g+=1,f=a(this.handles[g]));if(!1===this._start(b,g))return!1;
this._mouseSliding=!0;this._handleIndex=g;f.addClass("ui-state-active").focus();h=f.offset();this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,g,d);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var d=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,d);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var d;"horizontal"===this.orientation?(d=this.elementSize.width,
a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(d=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));d=a/d;1<d&&(d=1);0>d&&(d=0);"vertical"===this.orientation&&(d=1-d);a=this._valueMax()-this._valueMin();d=this._valueMin()+d*a;return this._trimAlignValue(d)},_start:function(a,d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());
return this._trigger("start",a,c)},_slide:function(a,d,c){var f;this.options.values&&this.options.values.length?(f=this.values(d?0:1),2===this.options.values.length&&!0===this.options.range&&(0===d&&c>f||1===d&&c<f)&&(c=f),c!==this.values(d)&&(f=this.values(),f[d]=c,a=this._trigger("slide",a,{handle:this.handles[d],value:c,values:f}),this.values(d?0:1),!1!==a&&this.values(d,c,!0))):c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[d],value:c}),!1!==a&&this.value(c))},_stop:function(a,
d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),
this._change(null,0);else return this._value()},values:function(b,d){var c,f,g;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(d),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(g=0;g<c.length;g+=1)c[g]=this._trimAlignValue(f[g]),this._change(null,g);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();else return this._values()},_setOption:function(b,
d){var c,f=0;a.isArray(this.options.values)&&(f=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":d?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var d,c;if(arguments.length)return d=this.options.values[a],
d=this._trimAlignValue(d);d=this.options.values.slice();for(c=0;c<d.length;c+=1)d[c]=this._trimAlignValue(d[c]);return d},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var d=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%d;a-=c;2*Math.abs(c)>=d&&(a+=0<c?d:-d);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,
d,c,f,g,h=this.options.range,l=this.options,m=this,n=this._animateOff?!1:l.animate,q={};if(this.options.values&&this.options.values.length)this.handles.each(function(c){d=(m.values(c)-m._valueMin())/(m._valueMax()-m._valueMin())*100;q["horizontal"===m.orientation?"left":"bottom"]=d+"%";a(this).stop(1,1)[n?"animate":"css"](q,l.animate);if(!0===m.options.range)if("horizontal"===m.orientation){if(0===c)m.range.stop(1,1)[n?"animate":"css"]({left:d+"%"},l.animate);if(1===c)m.range[n?"animate":"css"]({width:d-
b+"%"},{queue:!1,duration:l.animate})}else{if(0===c)m.range.stop(1,1)[n?"animate":"css"]({bottom:d+"%"},l.animate);if(1===c)m.range[n?"animate":"css"]({height:d-b+"%"},{queue:!1,duration:l.animate})}b=d});else{c=this.value();f=this._valueMin();g=this._valueMax();d=g!==f?(c-f)/(g-f)*100:0;q["horizontal"===this.orientation?"left":"bottom"]=d+"%";this.handle.stop(1,1)[n?"animate":"css"](q,l.animate);if("min"===h&&"horizontal"===this.orientation)this.range.stop(1,1)[n?"animate":"css"]({width:d+"%"},l.animate);
if("max"===h&&"horizontal"===this.orientation)this.range[n?"animate":"css"]({width:100-d+"%"},{queue:!1,duration:l.animate});if("min"===h&&"vertical"===this.orientation)this.range.stop(1,1)[n?"animate":"css"]({height:d+"%"},l.animate);if("max"===h&&"vertical"===this.orientation)this.range[n?"animate":"css"]({height:100-d+"%"},{queue:!1,duration:l.animate})}}})})(jQuery);
(function(a){function c(a){return function(){var d=this.element.val();a.apply(this,arguments);this._refresh();d!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},d=this.element;a.each(["min","max","step"],function(a,c){var g=d.attr(c);void 0!==g&&g.length&&(b[c]=g)});return b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",
focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,d){if(d){if(!this.spinning&&!this._start(a))return!1;this._spin((0<d?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function d(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c}))}var c;c=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();d.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;d.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*a.height())&&0<a.height()&&
a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var d=this.options,c=a.ui.keyCode;switch(b.keyCode){case c.UP:return this._repeat(null,1,b),!0;case c.DOWN:return this._repeat(null,-1,b),!0;case c.PAGE_UP:return this._repeat(null,d.page,b),!0;case c.PAGE_DOWN:return this._repeat(null,-d.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,d,c){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,d,c)},a);this._spin(d*this.options.step,c)},_spin:function(a,d){var c=this.value()||0;this.counter||
(this.counter=1);c=this._adjustValue(c+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",d,{value:c})||(this._value(c),this.counter++)},_increment:function(b){var d=this.options.incremental;return d?a.isFunction(d)?d(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();var d=a.indexOf(".");
return-1===d?0:a.length-d-1},_adjustValue:function(a){var d,c=this.options;d=null!==c.min?c.min:0;a=Math.round((a-d)/c.step)*c.step;a=d+a;a=parseFloat(a.toFixed(this._precision()));return null!==c.max&&a>c.max?c.max:null!==c.min&&a<c.min?c.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,d){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());this.options[a]=
d;this.element.val(this._format(c))}else"max"!==a&&"min"!==a&&"step"!==a||"string"!==typeof d||(d=this._parse(d)),this._super(a,d),"disabled"===a&&(d?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:c(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):
+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,d){var c;""!==a&&(c=this._parse(a),null!==c&&(d||(c=this._adjustValue(c)),a=this._format(c)));this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:c(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:c(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:c(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:c(function(a){this._stepDown((a||1)*this.options.page)}),
value:function(a){if(!arguments.length)return this._parse(this.element.val());c(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a,c){function b(a){return 1<a.hash.length&&a.href.replace(e,"")===location.href.replace(e,"")}var d=0,e=/#.*$/;a.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,d=this.options,c=d.active,e=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
d.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===c&&(e&&this.tabs.each(function(b,d){if(a(d).attr("aria-controls")===e)return c=b,!1}),null===c&&(c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===c||-1===c)&&(c=this.tabs.length?0:!1);!1!==
c&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d.collapsible?!1:0));d.active=c;!d.collapsible&&!1===d.active&&this.anchors.length&&(d.active=0);a.isArray(d.disabled)&&(d.disabled=a.unique(d.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):a();this._refresh();this.active.length&&this.load(d.active)},_getCreateEventData:function(){return{tab:this.active,
panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var d=a(this.document[0].activeElement).closest("li"),c=this.tabs.index(d),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:c++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;c--;break;case a.ui.keyCode.END:c=this.anchors.length-1;break;case a.ui.keyCode.HOME:c=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(c);
return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?!1:c);return;default:return}b.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,e);b.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(c).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",c)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),
this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,d){function c(){b>e&&(b=0);0>b&&(b=e);return b}for(var e=this.tabs.length-1;-1!==a.inArray(c(),this.options.disabled);)b=d?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,
b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++d},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var b=this.options,d=this.tablist.children(":has(a[href])");b.disabled=a.map(d.filter(".ui-state-disabled"),function(a){return d.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
a();this.anchors.each(function(c,e){var l,m,n,q=a(e).uniqueId().attr("id"),v=a(e).closest("li"),A=v.attr("aria-controls");b(e)?(l=e.hash,m=d.element.find(d._sanitizeSelector(l))):(n=d._tabId(v),l="#"+n,m=d.element.find(l),m.length||(m=d._createPanel(n),m.insertAfter(d.panels[c-1]||d.tablist)),m.attr("aria-live","polite"));m.length&&(d.panels=d.panels.add(m));A&&v.data("ui-tabs-aria-controls",A);v.attr({"aria-controls":l.substring(1),"aria-labelledby":q});m.attr("aria-labelledby",q)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var d=0,c;c=this.tabs[d];d++)!0===b||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=b},_setupEvents:function(b){var d={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){d[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,d);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var d,c,e=this.element.parent();"fill"===b?(a.support.minHeight||(c=e.css("overflow"),e.css("overflow",
"hidden")),d=e.height(),this.element.siblings(":visible").each(function(){var b=a(this),c=b.css("position");"absolute"!==c&&"fixed"!==c&&(d-=b.outerHeight(!0))}),c&&e.css("overflow",c),this.element.children().not(this.panels).each(function(){d-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,d-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(d=0,this.panels.each(function(){d=Math.max(d,a(this).height("").height())}).height(d))},_eventHandler:function(b){var d=
this.options,c=this.active,e=a(b.currentTarget).closest("li"),m=e[0]===c[0],n=m&&d.collapsible,q=n?a():this._getPanelForTab(e),v=c.length?this._getPanelForTab(c):a(),c={oldTab:c,oldPanel:v,newTab:n?a():e,newPanel:q};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||m&&!d.collapsible||!1===this._trigger("beforeActivate",b,c)||(d.active=n?!1:this.tabs.index(e),this.active=m?a():e,this.xhr&&this.xhr.abort(),v.length||q.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),
q.length&&this.load(this.tabs.index(e),b),this._toggle(b,c))},_toggle:function(b,d){function c(){m.running=!1;m._trigger("activate",b,d)}function e(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active");n.length&&m.options.show?m._show(n,m.options.show,c):(n.show(),c())}var m=this,n=d.newPanel,q=d.oldPanel;this.running=!0;q.length&&this.options.hide?this._hide(q,this.options.hide,function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
q.hide(),e());q.attr({"aria-expanded":"false","aria-hidden":"true"});d.oldTab.attr("aria-selected","false");n.length&&q.length?d.oldTab.attr("tabIndex",-1):n.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);n.attr({"aria-expanded":"true","aria-hidden":"false"});d.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=a(this),d=b.data("ui-tabs-aria-controls");
d?b.attr("aria-controls",d):b.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var d=this.options.disabled;!1!==d&&(b===c?d=!1:(b=this._getIndex(b),d=a.isArray(d)?a.map(d,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,d){return d!==b?d:null})),this._setupDisabled(d))},disable:function(b){var d=this.options.disabled;if(!0!==d){if(b===c)d=!0;else{b=this._getIndex(b);if(-1!==a.inArray(b,d))return;d=a.isArray(d)?a.merge([b],
d).sort():[b]}this._setupDisabled(d)}},load:function(d,c){d=this._getIndex(d);var e=this,l=this.tabs.eq(d),m=l.find(".ui-tabs-anchor"),n=this._getPanelForTab(l),q={tab:l,panel:n};b(m[0])||(this.xhr=a.ajax(this._ajaxSettings(m,c,q)))&&"canceled"!==this.xhr.statusText&&(l.addClass("ui-tabs-loading"),n.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){n.html(a);e._trigger("load",c,q)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0);l.removeClass("ui-tabs-loading");
n.removeAttr("aria-busy");a===e.xhr&&delete e.xhr},1)}))},_ajaxSettings:function(b,d,c){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",d,a.extend({jqXHR:b,ajaxSettings:f},c))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&(a.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},a.widget("ui.tabs",a.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",
b)}}),a.widget("ui.tabs",a.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var b=this;this._on({tabsbeforeload:function(d,c){a.data(c.tab[0],"cache.tabs")?d.preventDefault():c.jqXHR.success(function(){b.options.cache&&a.data(c.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(b,d,c){var e=this.options.ajaxOptions;return a.extend({},e,{error:function(a,b){try{e.error(a,b,c.tab.closest("li").index(),c.tab[0])}catch(d){}}},this._superApply(arguments))},_setOption:function(a,
b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),a.widget("ui.tabs",a.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),a.widget("ui.tabs",a.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(a.target===this.element[0]&&this.options.spinner){var d=
b.tab.find("span"),c=d.html();d.html(this.options.spinner);b.jqXHR.complete(function(){d.html(c)})}}})}}),a.widget("ui.tabs",a.ui.tabs,{options:{enable:null,disable:null},enable:function(b){var d=this.options,c;if(b&&!0===d.disabled||a.isArray(d.disabled)&&-1!==a.inArray(b,d.disabled))c=!0;this._superApply(arguments);c&&this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(b){var d=this.options,c;if(b&&!1===d.disabled||a.isArray(d.disabled)&&-1===a.inArray(b,d.disabled))c=
!0;this._superApply(arguments);c&&this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}}),a.widget("ui.tabs",a.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(b,d,e){e===c&&(e=this.anchors.length);var l,m=this.options;d=a(m.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,d));var n=b.indexOf("#")?this._tabId(d):b.replace("#","");d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);
d.attr("aria-controls",n);b=e>=this.tabs.length;l=this.element.find("#"+n);l.length||(l=this._createPanel(n),b?0<e?l.insertAfter(this.panels.eq(-1)):l.appendTo(this.element):l.insertBefore(this.panels[e]));l.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();b?d.appendTo(this.tablist):d.insertBefore(this.tabs[e]);m.disabled=a.map(m.disabled,function(a){return a>=e?++a:a});this.refresh();1===this.tabs.length&&!1===m.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[e],
this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var d=this.options,c=this.tabs.eq(b).remove(),e=this._getPanelForTab(c).remove();c.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(b+(b+1<this.anchors.length?1:-1));d.disabled=a.map(a.grep(d.disabled,function(a){return a!==b}),function(a){return a>=b?--a:a});this.refresh();this._trigger("remove",null,this._ui(c.find("a")[0],e[0]));return this}}),a.widget("ui.tabs",a.ui.tabs,{length:function(){return this.anchors.length}}),
a.widget("ui.tabs",a.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){b=b.is("li")?b.find("a[href]"):b;b=b[0];return a(b).closest("li").attr("aria-controls")||b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++d}}),a.widget("ui.tabs",a.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(b){return a(this.options.panelTemplate).attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),
a.widget("ui.tabs",a.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==c&&(a.active=-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var d=this.options;this._super("active",-1===b?!1:b);d.selected=d.active;!1===d.selected&&(d.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&
(this.options.selected=-1)}}),a.widget("ui.tabs",a.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,d){var c=this._superApply(arguments);if(!c)return!1;"beforeActivate"===a&&d.newTab.length?c=this._super("select",b,{tab:d.newTab.find(".ui-tabs-anchor")[0],panel:d.newPanel[0],index:d.newTab.closest("li").index()}):
"activate"===a&&d.newTab.length&&(c=this._super("show",b,{tab:d.newTab.find(".ui-tabs-anchor")[0],panel:d.newPanel[0],index:d.newTab.closest("li").index()}));return c}}),a.widget("ui.tabs",a.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var b=0;a.widget("ui.tabs",a.ui.tabs,{options:{cookie:null},_create:function(){var a=
this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(d){var c=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++b)];arguments.length&&(c.push(!1===d?-1:d),c.push(this.options.cookie));return a.cookie.apply(null,c)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,
this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),a.widget("ui.tabs",a.ui.tabs,{_trigger:function(b,d,c){c=a.extend({},c);"load"===b&&(c.panel=c.panel[0],c.tab=c.tab.find(".ui-tabs-anchor")[0]);return this._super(b,d,c)}}),a.widget("ui.tabs",a.ui.tabs,{options:{fx:null},_getFx:function(){var b,d,c=this.options.fx;c&&(a.isArray(c)?(b=c[0],d=c[1]):b=d=c);return c?{show:d,hide:b}:null},_toggle:function(a,b){function d(){e.running=
!1;e._trigger("activate",a,b)}function c(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");n.length&&v.show?n.animate(v.show,v.show.duration,function(){d()}):(n.show(),d())}var e=this,n=b.newPanel,q=b.oldPanel,v=this._getFx();if(!v)return this._super(a,b);e.running=!0;q.length&&v.hide?q.animate(v.hide,v.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");c()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),q.hide(),
c())}}))})(jQuery);
(function(a){function c(b,d){var c=(b.attr("aria-describedby")||"").split(/\s+/);c.push(d);b.data("ui-tooltip-id",d).attr("aria-describedby",a.trim(c.join(" ")))}function b(b){var d=b.data("ui-tooltip-id"),c=(b.attr("aria-describedby")||"").split(/\s+/),d=a.inArray(d,c);-1!==d&&c.splice(d,1);b.removeData("ui-tooltip-id");(c=a.trim(c.join(" ")))?b.attr("aria-describedby",c):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return a(this).attr("title")},hide:!0,
items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,d){var c=this;"disabled"===b?(this[d?"_disable":"_enable"](),this.options[b]=d):(this._super(b,d),"content"===b&&a.each(this.tooltips,function(a,b){c._updateContent(b)}))},_disable:function(){var b=
this;a.each(this.tooltips,function(d,c){var h=a.Event("blur");h.target=h.currentTarget=c[0];b.close(h,!0)});this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var d=this,c=a(b?b.target:this.element).closest(this.options.items);
c.length&&(this.options.track&&c.data("ui-tooltip-id")?(this._find(c).position(a.extend({of:c},this.options.position)),this._off(this.document,"mousemove")):(c.attr("title")&&c.data("ui-tooltip-title",c.attr("title")),c.data("tooltip-open",!0),b&&"mouseover"===b.type&&c.parents().each(function(){var b;a(this).data("tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,d.close(b,!0));this.title&&(a(this).uniqueId(),d.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(c,
b)))},_updateContent:function(a,b){var d;d=this.options.content;var c=this;if("string"===typeof d)return this._open(b,a,d);(d=d.call(a[0],function(d){a.data("tooltip-open")&&c._delay(function(){this._open(b,a,d)})}))&&this._open(b,a,d)},_open:function(b,d,g){function h(a){n.of=a;l.is(":hidden")||l.position(n)}var l,m,n=a.extend({},this.options.position);g&&(l=this._find(d),l.length?l.find(".ui-tooltip-content").html(g):(d.is("[title]")&&(b&&"mouseover"===b.type?d.attr("title",""):d.removeAttr("title")),
l=this._tooltip(d),c(d,l.attr("id")),l.find(".ui-tooltip-content").html(g),this.options.track&&b&&/^mouse/.test(b.originalEvent.type)?(this._on(this.document,{mousemove:h}),h(b)):l.position(a.extend({of:d},this.options.position)),l.hide(),this._show(l,this.options.show),this.options.show&&this.options.show.delay&&(m=setInterval(function(){l.is(":visible")&&(h(n.of),clearInterval(m))},a.fx.interval)),this._trigger("open",b,{tooltip:l}),g={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),
b.currentTarget=d[0],this.close(b,!0))},remove:function(){this._removeTooltip(l)}},b&&"mouseover"!==b.type||(g.mouseleave="close"),b&&"focusin"!==b.type||(g.focusout="close"),this._on(d,g)))},close:function(d){var c=this,g=a(d?d.currentTarget:this.element),h=this._find(g);this.closing||(g.data("ui-tooltip-title")&&g.attr("title",g.data("ui-tooltip-title")),b(g),h.stop(!0),this._hide(h,this.options.hide,function(){c._removeTooltip(a(this))}),g.removeData("tooltip-open"),this._off(g,"mouseleave focusout keyup"),
g[0]!==this.element[0]&&this._off(g,"remove"),this._off(this.document,"mousemove"),d&&"mouseleave"===d.type&&a.each(this.parents,function(a,b){b.element.title=b.title;delete c.parents[a]}),this.closing=!0,this._trigger("close",d,{tooltip:h}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,g=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));a("<div>").addClass("ui-tooltip-content").appendTo(g);g.appendTo(this.document[0].body);
a.fn.bgiframe&&g.bgiframe();this.tooltips[c]=b;return g},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(d,c){var h=a.Event("blur");h.target=h.currentTarget=c[0];b.close(h,!0);a("#"+d).remove();c.data("ui-tooltip-title")&&(c.attr("title",c.data("ui-tooltip-title")),c.removeData("ui-tooltip-title"))})}})})(jQuery);
jQuery.effects||function(a,c){var b=!1!==a.uiBackCompat;a.effects={effect:{}};(function(b,c){function f(a,b,d){var c=v[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=c.floor?~~a:parseFloat(a);return isNaN(a)?b.def:c.mod?(a+c.mod)%c.mod:0>a?0:c.max<a?c.max:a}function g(a){var c=n(),e=c._rgba=[];a=a.toLowerCase();D(m,function(b,d){var f,g=d.re.exec(a);f=g&&d.parse(g);g=d.space||"rgba";if(f)return f=c[g](f),c[q[g].cache]=f[q[g].cache],e=c._rgba=f._rgba,!1});return e.length?("0,0,0,0"===e.join()&&
b.extend(e,E.transparent),c):E[a]}function h(a,b,d){d=(d+1)%1;return 1>6*d?a+(b-a)*d*6:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a}var l=/^([\-+])=\s*(\d+\.?\d*)/,m=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],n=b.Color=function(a,c,e,f){return new b.Color.fn.parse(a,c,e,f)},q={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},v={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},A=n.support={},w=b("<p>")[0],E,D=b.each;w.style.cssText="background-color:rgba(1,1,1,.5)";A.rgba=-1<w.style.backgroundColor.indexOf("rgba");D(q,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});n.fn=b.extend(n.prototype,{parse:function(h,m,l,
t){if(h===c)return this._rgba=[null,null,null,null],this;if(h.jquery||h.nodeType)h=b(h).css(m),m=c;var z=this,v=b.type(h),A=this._rgba=[];m!==c&&(h=[h,m,l,t],v="array");if("string"===v)return this.parse(g(h)||E._default);if("array"===v)return D(q.rgba.props,function(a,b){A[b.idx]=f(h[b.idx],b)}),this;if("object"===v)return h instanceof n?D(q,function(a,b){h[b.cache]&&(z[b.cache]=h[b.cache].slice())}):D(q,function(b,d){var c=d.cache;D(d.props,function(a,b){if(!z[c]&&d.to){if("alpha"===a||null==h[a])return;
z[c]=d.to(z._rgba)}z[c][b.idx]=f(h[a],b,!0)});z[c]&&0>a.inArray(null,z[c].slice(0,3))&&(z[c][3]=1,d.from&&(z._rgba=d.from(z[c])))}),this},is:function(a){var b=n(a),d=!0,c=this;D(q,function(a,e){var f,g=b[e.cache];g&&(f=c[e.cache]||e.to&&e.to(c._rgba)||[],D(e.props,function(a,b){if(null!=g[b.idx])return d=g[b.idx]===f[b.idx]}));return d});return d},_space:function(){var a=[],b=this;D(q,function(d,c){b[c.cache]&&a.push(d)});return a.pop()},transition:function(a,b){var d=n(a),c=d._space(),e=q[c],g=0===
this.alpha()?n("transparent"):this,h=g[e.cache]||e.to(g._rgba),m=h.slice(),d=d[e.cache];D(e.props,function(a,c){var e=c.idx,g=h[e],l=d[e],n=v[c.type]||{};null!==l&&(null===g?m[e]=l:(n.mod&&(l-g>n.mod/2?g+=n.mod:g-l>n.mod/2&&(g-=n.mod)),m[e]=f((l-g)*b+g,c)))});return this[c](m)},blend:function(a){if(1===this._rgba[3])return this;var c=this._rgba.slice(),e=c.pop(),f=n(a)._rgba;return n(b.map(c,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,
b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),e=c.pop();a&&c.push(~~(255*e));return"#"+b.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":
this.toRgbaString()}});n.fn.parse.prototype=n.fn;q.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,d=a[1]/255,c=a[2]/255;a=a[3];var e=Math.max(b,d,c),f=Math.min(b,d,c),g=e-f,h=e+f,m=.5*h,h=0===m||1===m?m:.5>=m?g/h:g/(2-h);return[Math.round(f===e?0:b===e?60*(d-c)/g+360:d===e?60*(c-b)/g+120:60*(b-d)/g+240)%360,h,m,null==a?1:a]};q.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,d=a[1],c=a[2];a=
a[3];d=.5>=c?c*(1+d):c+d-c*d;c=2*c-d;return[Math.round(255*h(c,d,b+1/3)),Math.round(255*h(c,d,b)),Math.round(255*h(c,d,b-1/3)),a]};D(q,function(a,g){var h=g.props,m=g.cache,q=g.to,v=g.from;n.fn[a]=function(a){q&&!this[m]&&(this[m]=q(this._rgba));if(a===c)return this[m].slice();var g,l=b.type(a),A="array"===l||"object"===l?a:arguments,w=this[m].slice();D(h,function(a,b){var d=A["object"===l?a:b.idx];null==d&&(d=w[b.idx]);w[b.idx]=f(d,b)});return v?(g=n(v(w)),g[m]=w,g):n(w)};D(h,function(c,e){n.fn[c]||
(n.fn[c]=function(f){var g=b.type(f),h="alpha"===c?this._hsla?"hsla":"rgba":a,m=this[h](),n=m[e.idx];if("undefined"===g)return n;"function"===g&&(f=f.call(this,n),g=b.type(f));if(null==f&&e.empty)return this;"string"===g&&(g=l.exec(f))&&(f=n+parseFloat(g[2])*("+"===g[1]?1:-1));m[e.idx]=f;return this[h](m)})})});D("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),function(a,c){b.cssHooks[c]=
{set:function(a,e){var f,h="";if("string"!==b.type(e)||(f=g(e))){e=n(f||e);if(!A.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===c?a.parentNode:a;(""===h||"transparent"===h)&&f&&f.style;)try{h=b.css(f,"backgroundColor"),f=f.parentNode}catch(m){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{a.style[c]=e}catch(l){}}};b.fx.step[c]=function(a){a.colorInit||(a.start=n(a.elem,c),a.end=n(a.end),a.colorInit=!0);b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}});b.cssHooks.borderColor=
{expand:function(a){var b={};D(["Top","Right","Bottom","Left"],function(d,c){b["border"+c+"Color"]=a});return b}};E=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function b(){var d=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},e,f;if(d&&d.length&&d[0]&&d[d[0]])for(f=d.length;f--;)e=d[f],"string"===typeof d[e]&&(c[a.camelCase(e)]=d[e]);else for(e in d)"string"===typeof d[e]&&(c[e]=d[e]);return c}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,d){a.fx.step[d]=
function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,d,a.end),a.setAttr=!0}});a.effects.animateClass=function(c,h,l,m){var n=a.speed(h,l,m);return this.queue(function(){var h=a(this),m=h.attr("class")||"",l,w=n.children?h.find("*").andSelf():h,w=w.map(function(){return{el:a(this),start:b.call(this)}});l=function(){a.each(e,function(a,b){if(c[b])h[b+"Class"](c[b])})};l();w=w.map(function(){this.end=b.call(this.el[0]);var c=this.start,e=this.end,g={},h,m;for(h in e)m=
e[h],c[h]===m||f[h]||!a.fx.step[h]&&isNaN(parseFloat(m))||(g[h]=m);this.diff=g;return this});h.attr("class",m);w=w.map(function(){var b=this,d=a.Deferred(),c=jQuery.extend({},n,{queue:!1,complete:function(){d.resolve(b)}});this.el.animate(this.diff,c);return d.promise()});a.when.apply(a,w.get()).done(function(){l();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});n.complete.call(h[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,d,c,e){return d?
a.effects.animateClass.call(this,{add:b},d,c,e):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,d,c,e){return d?a.effects.animateClass.call(this,{remove:b},d,c,e):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(b,d,e,f,n){return"boolean"===typeof d||d===c?e?a.effects.animateClass.call(this,d?{add:b}:{remove:b},e,f,n):this._toggleClass(b,d):a.effects.animateClass.call(this,{toggle:b},d,e,f)},switchClass:function(b,d,c,e,f){return a.effects.animateClass.call(this,
{add:d,remove:b},c,e,f)}})})();(function(){function d(b,d,c,e){a.isPlainObject(b)&&(d=b,b=b.effect);b={effect:b};null==d&&(d={});a.isFunction(d)&&(e=d,c=null,d={});if("number"===typeof d||a.fx.speeds[d])e=c,c=d,d={};a.isFunction(c)&&(e=c,c=null);d&&a.extend(b,d);c=c||d.duration;b.duration=a.fx.off?0:"number"===typeof c?c:c in a.fx.speeds?a.fx.speeds[c]:a.fx.speeds._default;b.complete=e||d.complete;return b}function e(d){return!d||"number"===typeof d||a.fx.speeds[d]?!0:"string"!==typeof d||a.effects.effect[d]?
!1:b&&a.effects[d]?!1:!0}a.extend(a.effects,{version:"1.9.1",save:function(a,b){for(var d=0;d<b.length;d++)null!==b[d]&&a.data("ui-effects-"+b[d],a[0].style[b[d]])},restore:function(a,b){var d,e;for(e=0;e<b.length;e++)null!==b[e]&&(d=a.data("ui-effects-"+b[e]),d===c&&(d=""),a.css(b[e],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var d,c;switch(a[0]){case "top":d=0;break;case "middle":d=.5;break;case "bottom":d=1;break;default:d=a[0]/
b.height}switch(a[1]){case "left":c=0;break;case "center":c=.5;break;case "right":c=1;break;default:c=a[1]/b.width}return{x:c,y:d}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},c=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},m=document.activeElement;try{m.id}catch(n){m=
document.body}b.wrap(c);(b[0]===m||a.contains(b[0],m))&&a(m).focus();c=b.parent();"static"===b.css("position")?(c.css({position:"relative"}),b.css({position:"relative"})):(a.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,c){d[c]=b.css(c);isNaN(parseInt(d[c],10))&&(d[c]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return c.css(d).show()},removeWrapper:function(b){var d=document.activeElement;
b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus());return b},setTransition:function(b,d,c,e){e=e||{};a.each(d,function(a,d){var g=b.cssUnit(d);0<g[0]&&(e[d]=g[0]*c+g[1])});return e}});a.fn.extend({effect:function(){function c(b){function d(){a.isFunction(h)&&h.call(f[0]);a.isFunction(b)&&b()}var f=a(this),h=e.complete,l=e.mode;(f.is(":hidden")?"hide"===l:"show"===l)?d():m.call(f[0],e,d)}var e=d.apply(this,arguments),h=e.mode,l=e.queue,m=
a.effects.effect[e.effect],n=!m&&b&&a.effects[e.effect];return a.fx.off||!m&&!n?h?this[h](e.duration,e.complete):this.each(function(){e.complete&&e.complete.call(this)}):m?!1===l?this.each(c):this.queue(l||"fx",c):n.call(this,{options:e,duration:e.duration,callback:e.complete,mode:e.mode})},_show:a.fn.show,show:function(a){if(e(a))return this._show.apply(this,arguments);var b=d.apply(this,arguments);b.mode="show";return this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(e(a))return this._hide.apply(this,
arguments);var b=d.apply(this,arguments);b.mode="hide";return this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(e(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=d.apply(this,arguments);c.mode="toggle";return this.effect.call(this,c)},cssUnit:function(b){var d=this.css(b),c=[];a.each(["em","px","%","pt"],function(a,b){0<d.indexOf(b)&&(c=[parseFloat(d),b])});return c}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],
function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,d=4;a<((b=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,d){a.easing["easeIn"+b]=d;a.easing["easeOut"+b]=function(a){return 1-
d(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?d(2*a)/2:1-d(-2*a+2)/2}})})()}(jQuery);
(function(a,c){var b=/up|down|vertical/,d=/up|left|vertical|horizontal/;a.effects.effect.blind=function(c,f){var g=a(this),h="position top bottom left right height width".split(" "),l=a.effects.setMode(g,c.mode||"hide"),m=c.direction||"up",n=b.test(m),q=n?"height":"width",v=n?"top":"left",m=d.test(m),A={},w="show"===l,E,D,J;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),h):a.effects.save(g,h);g.show();E=a.effects.createWrapper(g).css({overflow:"hidden"});D=E[q]();J=parseFloat(E.css(v))||
0;A[q]=w?D:0;m||(g.css(n?"bottom":"right",0).css(n?"top":"left","auto").css({position:"absolute"}),A[v]=w?J:D+J);w&&(E.css(q,0),m||E.css(v,J+D));E.animate(A,{duration:c.duration,easing:c.easing,queue:!1,complete:function(){"hide"===l&&g.hide();a.effects.restore(g,h);a.effects.removeWrapper(g);f()}})}})(jQuery);
(function(a,c){a.effects.effect.bounce=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(c,b.mode||"effect"),h="hide"===g,l="show"===g,m=b.direction||"up",g=b.distance,n=b.times||5,q=2*n+(l||h?1:0),v=b.duration/q,A=b.easing,w="up"===m||"down"===m?"top":"left",m="up"===m||"left"===m,E,D,J=c.queue(),I=J.length;(l||h)&&f.push("opacity");a.effects.save(c,f);c.show();a.effects.createWrapper(c);g||(g=c["top"===w?"outerHeight":"outerWidth"]()/3);l&&
(D={opacity:1},D[w]=0,c.css("opacity",0).css(w,m?2*-g:2*g).animate(D,v,A));h&&(g/=Math.pow(2,n-1));D={};for(l=D[w]=0;l<n;l++)E={},E[w]=(m?"-=":"+=")+g,c.animate(E,v,A).animate(D,v,A),g=h?2*g:g/2;h&&(E={opacity:0},E[w]=(m?"-=":"+=")+g,c.animate(E,v,A));c.queue(function(){h&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()});1<I&&J.splice.apply(J,[1,0].concat(J.splice(I,q+1)));c.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.clip=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g="show"===a.effects.setMode(c,b.mode||"hide"),h="vertical"===(b.direction||"vertical"),l=h?"height":"width",h=h?"top":"left",m={},n,q;a.effects.save(c,f);c.show();n=a.effects.createWrapper(c).css({overflow:"hidden"});n="IMG"===c[0].tagName?n:c;q=n[l]();g&&(n.css(l,0),n.css(h,q/2));m[l]=g?q:0;m[h]=g?0:q/2;n.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){g||
c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()}})}})(jQuery);
(function(a,c){a.effects.effect.drop=function(b,d){var c=a(this),f="position top bottom left right opacity height width".split(" "),g=a.effects.setMode(c,b.mode||"hide"),h="show"===g,l=b.direction||"left",m="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l?"pos":"neg",n={opacity:h?1:0},q;a.effects.save(c,f);c.show();a.effects.createWrapper(c);q=b.distance||c["top"===m?"outerHeight":"outerWidth"](!0)/2;h&&c.css("opacity",0).css(m,"pos"===l?-q:q);n[m]=(h?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+
q;c.animate(n,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()}})}})(jQuery);
(function(a,c){a.effects.effect.explode=function(b,d){function c(){v.push(this);v.length===f*g&&(h.css({visibility:"visible"}),a(v).remove(),l||h.hide(),d())}var f=b.pieces?Math.round(Math.sqrt(b.pieces)):3,g=f,h=a(this),l="show"===a.effects.setMode(h,b.mode||"hide"),m=h.show().css("visibility","hidden").offset(),n=Math.ceil(h.outerWidth()/g),q=Math.ceil(h.outerHeight()/f),v=[],A,w,E,D,J,I;for(A=0;A<f;A++)for(D=m.top+A*q,I=A-(f-1)/2,w=0;w<g;w++)E=m.left+w*n,J=w-(g-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-w*n,top:-A*q}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n,height:q,left:E+(l?J*n:0),top:D+(l?I*q:0),opacity:l?0:1}).animate({left:E+(l?0:J*n),top:D+(l?0:I*q),opacity:l?1:0},b.duration||500,b.easing,c)}})(jQuery);(function(a,c){a.effects.effect.fade=function(b,d){var c=a(this),f=a.effects.setMode(c,b.mode||"toggle");c.animate({opacity:f},{queue:!1,duration:b.duration,easing:b.easing,complete:d})}})(jQuery);
(function(a,c){a.effects.effect.fold=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(c,b.mode||"hide"),h="show"===g,l="hide"===g,g=b.size||15,m=/([0-9]+)%/.exec(g),n=!!b.horizFirst,q=h!==n,v=q?["width","height"]:["height","width"],A=b.duration/2,w,E={},D={};a.effects.save(c,f);c.show();w=a.effects.createWrapper(c).css({overflow:"hidden"});q=q?[w.width(),w.height()]:[w.height(),w.width()];m&&(g=parseInt(m[1],10)/100*q[l?0:1]);h&&w.css(n?{height:0,
width:g}:{height:g,width:0});E[v[0]]=h?q[0]:g;D[v[1]]=h?q[1]:0;w.animate(E,A,b.easing).animate(D,A,b.easing,function(){l&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()})}})(jQuery);
(function(a,c){a.effects.effect.highlight=function(b,d){var c=a(this),f=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(c,b.mode||"show"),h={backgroundColor:c.css("backgroundColor")};"hide"===g&&(h.opacity=0);a.effects.save(c,f);c.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&c.hide();a.effects.restore(c,f);d()}})}})(jQuery);
(function(a,c){a.effects.effect.pulsate=function(b,d){var c=a(this),f=a.effects.setMode(c,b.mode||"show"),g="show"===f,h="hide"===f,f=2*(b.times||5)+(g||"hide"===f?1:0),l=b.duration/f,m=0,n=c.queue(),q=n.length;if(g||!c.is(":visible"))c.css("opacity",0).show(),m=1;for(g=1;g<f;g++)c.animate({opacity:m},l,b.easing),m=1-m;c.animate({opacity:m},l,b.easing);c.queue(function(){h&&c.hide();d()});1<q&&n.splice.apply(n,[1,0].concat(n.splice(q,f+1)));c.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.puff=function(b,d){var c=a(this),f=a.effects.setMode(c,b.mode||"hide"),g="hide"===f,h=parseInt(b.percent,10)||150,l=h/100,m={height:c.height(),width:c.width()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:f,complete:d,percent:g?h:100,from:g?m:{height:m.height*l,width:m.width*l}});c.effect(b)};a.effects.effect.scale=function(b,d){var c=a(this),f=a.extend(!0,{},b),g=a.effects.setMode(c,b.mode||"effect"),h=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===
g?0:100),l=b.direction||"both",m=b.origin,n={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()},q="horizontal"!==l?h/100:1,h="vertical"!==l?h/100:1;f.effect="size";f.queue=!1;f.complete=d;"effect"!==g&&(f.origin=m||["middle","center"],f.restore=!0);f.from=b.from||("show"===g?{height:0,width:0}:n);f.to={height:n.height*q,width:n.width*h,outerHeight:n.outerHeight*q,outerWidth:n.outerWidth*h};f.fade&&("show"===g&&(f.from.opacity=0,f.to.opacity=1),"hide"===g&&(f.from.opacity=
1,f.to.opacity=0));c.effect(f)};a.effects.effect.size=function(b,d){var c,f,g,h,l,m,n=a(this),q="position top bottom left right width height overflow opacity".split(" ");l="position top bottom left right overflow opacity".split(" ");var v=["width","height","overflow"],A=["fontSize"],w=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],E=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],D=a.effects.setMode(n,b.mode||"effect"),J=b.restore||"effect"!==D,I=b.scale||
"both";m=b.origin||["middle","center"];var C=n.css("position"),t=J?q:l,z={height:0,width:0};"show"===D&&n.show();l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};"toggle"===b.mode&&"show"===D?(n.from=b.to||z,n.to=b.from||l):(n.from=b.from||("show"===D?z:l),n.to=b.to||("hide"===D?z:l));g=n.from.height/l.height;h=n.from.width/l.width;c=n.to.height/l.height;f=n.to.width/l.width;if("box"===I||"both"===I)g!==c&&(t=t.concat(w),n.from=a.effects.setTransition(n,
w,g,n.from),n.to=a.effects.setTransition(n,w,c,n.to)),h!==f&&(t=t.concat(E),n.from=a.effects.setTransition(n,E,h,n.from),n.to=a.effects.setTransition(n,E,f,n.to));"content"!==I&&"both"!==I||g===c||(t=t.concat(A).concat(v),n.from=a.effects.setTransition(n,A,g,n.from),n.to=a.effects.setTransition(n,A,c,n.to));a.effects.save(n,t);n.show();a.effects.createWrapper(n);n.css("overflow","hidden").css(n.from);m&&(m=a.effects.getBaseline(m,l),n.from.top=(l.outerHeight-n.outerHeight())*m.y,n.from.left=(l.outerWidth-
n.outerWidth())*m.x,n.to.top=(l.outerHeight-n.to.outerHeight)*m.y,n.to.left=(l.outerWidth-n.to.outerWidth)*m.x);n.css(n.from);if("content"===I||"both"===I)w=w.concat(["marginTop","marginBottom"]).concat(A),E=E.concat(["marginLeft","marginRight"]),v=q.concat(w).concat(E),n.find("*[width]").each(function(){var d=a(this),m=d.height(),l=d.width();J&&a.effects.save(d,v);d.from={height:m*g,width:l*h};d.to={height:m*c,width:l*f};g!==c&&(d.from=a.effects.setTransition(d,w,g,d.from),d.to=a.effects.setTransition(d,
w,c,d.to));h!==f&&(d.from=a.effects.setTransition(d,E,h,d.from),d.to=a.effects.setTransition(d,E,f,d.to));d.css(d.from);d.animate(d.to,b.duration,b.easing,function(){J&&a.effects.restore(d,v)})});n.animate(n.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===n.to.opacity&&n.css("opacity",n.from.opacity);"hide"===D&&n.hide();a.effects.restore(n,t);J||("static"===C?n.css({position:"relative",top:n.to.top,left:n.to.left}):a.each(["top","left"],function(a,b){n.css(b,function(b,d){var c=
parseInt(d,10),e=a?n.to.left:n.to.top;return"auto"===d?e+"px":c+e+"px"})}));a.effects.removeWrapper(n);d()}})}})(jQuery);
(function(a,c){a.effects.effect.shake=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(c,b.mode||"effect"),h=b.direction||"left",l=b.distance||20,m=b.times||3,n=2*m+1,q=Math.round(b.duration/n),v="up"===h||"down"===h?"top":"left",A="up"===h||"left"===h,h={},w={},E={},D=c.queue(),J=D.length;a.effects.save(c,f);c.show();a.effects.createWrapper(c);h[v]=(A?"-=":"+=")+l;w[v]=(A?"+=":"-=")+2*l;E[v]=(A?"-=":"+=")+2*l;c.animate(h,q,b.easing);for(l=
1;l<m;l++)c.animate(w,q,b.easing).animate(E,q,b.easing);c.animate(w,q,b.easing).animate(h,q/2,b.easing).queue(function(){"hide"===g&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()});1<J&&D.splice.apply(D,[1,0].concat(D.splice(J,n+1)));c.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.slide=function(b,d){var c=a(this),f="position top bottom left right width height".split(" "),g=a.effects.setMode(c,b.mode||"show"),h="show"===g,l=b.direction||"left",m="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l,n,q={};a.effects.save(c,f);c.show();n=b.distance||c["top"===m?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(c).css({overflow:"hidden"});h&&c.css(m,l?isNaN(n)?"-"+n:-n:n);q[m]=(h?l?"+=":"-=":l?"-=":"+=")+n;c.animate(q,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===g&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()}})}})(jQuery);
(function(a,c){a.effects.effect.transfer=function(b,d){var c=a(this),f=a(b.to),g="fixed"===f.css("position"),h=a("body"),l=g?h.scrollTop():0,h=g?h.scrollLeft():0,m=f.offset(),f={top:m.top-l,left:m.left-h,height:f.innerHeight(),width:f.innerWidth()},m=c.offset(),n=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.className).css({top:m.top-l,left:m.left-h,height:c.innerHeight(),width:c.innerWidth(),position:g?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){n.remove();
d()})}})(jQuery);
(function(a){a.widget("ui.multiAccordion",{options:{active:0,showAll:null,hideAll:null,_classes:{accordion:"ui-accordion ui-widget ui-helper-reset ui-accordion-icons",h3:"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all",div:"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom",divActive:"ui-accordion-content-active",span:"ui-icon ui-icon-triangle-1-e",stateDefault:"ui-state-default",stateHover:"ui-state-hover"}},_create:function(){var c=this,b=c.options,d=c.element,
e=d.children("h3");d.children("div");d.addClass(b._classes.accordion);e.each(function(d){var e=a(this);e.addClass(b._classes.h3).prepend('<span class="{class}"></span>'.replace(/\{class}/,b._classes.span));c._isActive(d)&&c._showTab(e)});d.children("div").each(function(d){a(this).addClass(b._classes.div)});e.bind("click",function(d){d.preventDefault();d=a(this);var e={tab:d,content:d.next("div")};c._trigger("click",null,e);d.hasClass(b._classes.stateDefault)?c._showTab(d):c._hideTab(d)});e.bind("mouseover",
function(){a(this).addClass(b._classes.stateHover)});e.bind("mouseout",function(){a(this).removeClass(b._classes.stateHover)});c._trigger("init",null,d)},destroy:function(){var a=this.element,b=a.children("h3"),d=a.children("div");a.children("span").remove();var e=this.options;a.children("h3").unbind("click mouseover mouseout");a.removeClass(e._classes.accordion);b.removeClass(e._classes.h3).removeClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").children("span").remove();d.removeClass(e._classes.div+
" "+e._classes.divActive).show()},_showTab:function(a){var b=a.children("span.ui-icon"),d=a.next(),e=this.options;a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top");b.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");d.slideDown("fast",function(){d.addClass(e._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabShown",null,a)},_hideTab:function(a){var b=a.children("span.ui-icon"),d=a.next(),e=this.options;a.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all");
b.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");d.slideUp("fast",function(){d.removeClass(e._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabHidden",null,a)},_isActive:function(a){var b=this.options;if("boolean"!=typeof b.active||b.active)if(void 0!=b.active.length)for(var d=0;d<b.active.length;d++){if(b.active[d]==a)return!0}else return b.active==a;return!1},_getActiveTabs:function(){var c=[];this.element.children("div").each(function(b){var d=a(this);
d.is(":visible")&&c.push({index:b,tab:d.prev("h3"),content:d})});return 0==c.length?void 0:c},getActiveTabs:function(){var c=[];this.element.children("div").each(function(b){a(this).is(":visible")&&c.push(b)});return 0==c.length?[-1]:c},_setActiveTabs:function(c){var b=this,d=this.element;"undefined"!=typeof c&&d.children("div").each(function(d){var f=a(this).prev("h3");c.hasObject(d)?b._showTab(f):b._hideTab(f)})},_generateTabsArrayFromOptions:function(c){var b=[],d=this.element,e=d.children("h3").size();
if("array"===a.type(c))return c;if("number"===a.type(c))return[c];if("string"===a.type(c))switch(c.toLowerCase()){case "all":e=d.children("h3").size();for(c=0;c<e;c++)b.push(c);return b;case "none":return b=[-1]}},_setOption:function(c,b){a.Widget.prototype._setOption.apply(this,arguments);var d=this.element;switch(c){case "active":this._setActiveTabs(this._generateTabsArrayFromOptions(b));break;case "getActiveTabs":var d=this.element,e;d.children("div").each(function(b){a(this).is(":visible")&&(e=
e?e:[],e.push(b))});return 0==e.length?[-1]:e}}});Array.prototype.hasObject=Array.indexOf?function(a){return-1!==this.indexOf(a)}:function(a){for(var b=this.length+1;b-=1;)if(this[b-1]===a)return!0;return!1}})(jQuery);
(function(a){a.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1E3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var c=this,b=this.options,d=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[d,d+"-button",d+"-menu"];this._safemouseup=!0;this.isOpen=!1;this.newelement=
a("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]});this.newelementWrap=a("<span />").append(this.newelement).insertAfter(this.element);(d=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",d);this.newelement.data("selectelement",this.element);this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement);
this.newelement.prepend('<span class="'+c.widgetBaseClass+'-status" />');this.element.bind({"click.selectmenu":function(a){c.newelement.focus();a.preventDefault()}});this.newelement.bind("mousedown.selectmenu",function(a){c._toggle(a,!0);"popup"==b.style&&(c._safemouseup=!1,setTimeout(function(){c._safemouseup=!0},300));return!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(b){var d=!1;switch(b.keyCode){case a.ui.keyCode.ENTER:d=!0;break;case a.ui.keyCode.SPACE:c._toggle(b);
break;case a.ui.keyCode.UP:b.altKey?c.open(b):c._moveSelection(-1);break;case a.ui.keyCode.DOWN:b.altKey?c.open(b):c._moveSelection(1);break;case a.ui.keyCode.LEFT:c._moveSelection(-1);break;case a.ui.keyCode.RIGHT:c._moveSelection(1);break;case a.ui.keyCode.TAB:d=!0;break;case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.HOME:c.index(0);break;case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.END:c.index(c._optionLis.length);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){0<a.which&&c._typeAhead(a.which,
"mouseup");return!0}).bind("mouseover.selectmenu",function(){b.disabled||a(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){b.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){b.disabled||a(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){b.disabled||a(this).removeClass("ui-state-focus")});a(document).bind("mousedown.selectmenu-"+this.ids[0],function(a){c.isOpen&&c.close(a)});this.element.bind("click.selectmenu",function(){c._refreshValue()}).bind("focus.selectmenu",
function(){c.newelement&&c.newelement[0].focus()});b.width||(b.width=this.element.outerWidth());this.newelement.width(b.width);this.element.hide();this.list=a("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]});this.listWrap=a("<div />",{"class":c.widgetBaseClass+"-menu"}).append(this.list).appendTo(b.appendTo);this.list.bind("keydown.selectmenu",function(b){var d=!1;switch(b.keyCode){case a.ui.keyCode.UP:b.altKey?c.close(b,
!0):c._moveFocus(-1);break;case a.ui.keyCode.DOWN:b.altKey?c.close(b,!0):c._moveFocus(1);break;case a.ui.keyCode.LEFT:c._moveFocus(-1);break;case a.ui.keyCode.RIGHT:c._moveFocus(1);break;case a.ui.keyCode.HOME:c._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:c._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:c._scrollPage("down");break;case a.ui.keyCode.END:c._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:c.close(b,!0);a(b.target).parents("li:eq(0)").trigger("mouseup");
break;case a.ui.keyCode.TAB:d=!0;c.close(b,!0);a(b.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.ESCAPE:c.close(b,!0);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){0<a.which&&c._typeAhead(a.which,"focus");return!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1});a(window).bind("resize.selectmenu-"+this.ids[0],a.proxy(c.close,this))},_init:function(){var c=this,b=this.options,d=[];this.element.find("option").each(function(){var e=
a(this);d.push({value:e.attr("value"),text:c._formatText(e.text(),e),selected:e.attr("selected"),disabled:e.attr("disabled"),classes:e.attr("class"),typeahead:e.attr("typeahead"),parentOptGroup:e.parent("optgroup"),bgImage:b.bgImage.call(e)})});var e="popup"==c.options.style?" ui-state-active":"";this.list.html("");if(d.length)for(var f=0;f<d.length;f++){var g={role:"presentation"};d[f].disabled&&(g["class"]=this.namespace+"-state-disabled");var h={html:d[f].text||"&nbsp;",href:"#nogo",tabindex:-1,
role:"option","aria-selected":!1};d[f].disabled&&(h["aria-disabled"]=d[f].disabled);d[f].typeahead&&(h.typeahead=d[f].typeahead);h=a("<a/>",h).bind("focus.selectmenu",function(){a(this).parent().mouseover()}).bind("blur.selectmenu",function(){a(this).parent().mouseout()});g=a("<li/>",g).append(h).data("index",f).addClass(d[f].classes).data("optionClasses",d[f].classes||"").bind("mouseup.selectmenu",function(b){!c._safemouseup||c._disabled(b.currentTarget)||c._disabled(a(b.currentTarget).parents("ul>li."+
c.widgetBaseClass+"-group "))||(c.index(a(this).data("index")),c.select(b),c.close(b,!0));return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu",function(){a(this).hasClass(c.namespace+"-state-disabled")||a(this).parent("ul").parent("li").hasClass(c.namespace+"-state-disabled")||(c._selectedOptionLi().addClass(e),c._focusedOptionLi().removeClass(c.widgetBaseClass+"-item-focus ui-state-hover"),a(this).removeClass("ui-state-active").addClass(c.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu",
function(){a(this).is(c._selectedOptionLi())&&a(this).addClass(e);a(this).removeClass(c.widgetBaseClass+"-item-focus ui-state-hover")});d[f].parentOptGroup.length?(h=c.widgetBaseClass+"-group-"+this.element.find("optgroup").index(d[f].parentOptGroup),this.list.find("li."+h).length?this.list.find("li."+h+":last ul").append(g):a(' <li role="presentation" class="'+c.widgetBaseClass+"-group "+h+(d[f].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+
c.widgetBaseClass+'-group-label">'+d[f].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(g)):g.appendTo(this.list);if(b.icons)for(var l in b.icons)g.is(b.icons[l].find)&&(g.data("optionClasses",d[f].classes+" "+c.widgetBaseClass+"-hasIcon").addClass(c.widgetBaseClass+"-hasIcon"),h=b.icons[l].icon||"",g.find("a:eq(0)").prepend('<span class="'+c.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),d[f].bgImage&&g.find("span").css("background-image",d[f].bgImage))}else a('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);
f="dropdown"==b.style;this.newelement.toggleClass(c.widgetBaseClass+"-dropdown",f).toggleClass(c.widgetBaseClass+"-popup",!f);this.list.toggleClass(c.widgetBaseClass+"-menu-dropdown ui-corner-bottom",f).toggleClass(c.widgetBaseClass+"-menu-popup ui-corner-all",!f).find("li:first").toggleClass("ui-corner-top",!f).end().find("li:last").addClass("ui-corner-bottom");this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",f).toggleClass("ui-icon-triangle-2-n-s",!f);"dropdown"==b.style?this.list.width(b.menuWidth?
b.menuWidth:b.width):this.list.width(b.menuWidth?b.menuWidth:b.width-b.handleWidth);this.list.css("height","auto");f=this.listWrap.height();l=a(window).height();l=b.maxHeight?Math.min(b.maxHeight,l):l/3;f>l&&this.list.height(l);this._optionLis=this.list.find("li:not(."+c.widgetBaseClass+"-group)");this.element.attr("disabled")?this.disable():this.enable();this._refreshValue();this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus");clearTimeout(this.refreshTimeout);this.refreshTimeout=
window.setTimeout(function(){c._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");a(window).unbind(".selectmenu-"+this.ids[0]);a(document).unbind(".selectmenu-"+this.ids[0]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,
b){var d=this,e=String.fromCharCode(a).toLowerCase(),f=null,g=null;d._typeAhead_timer&&(window.clearTimeout(d._typeAhead_timer),d._typeAhead_timer=void 0);d._typeAhead_chars=(void 0===d._typeAhead_chars?"":d._typeAhead_chars).concat(e);2>d._typeAhead_chars.length||d._typeAhead_chars.substr(-2,1)===e&&d._typeAhead_cycling?(d._typeAhead_cycling=!0,f=e):(d._typeAhead_cycling=!1,f=d._typeAhead_chars);for(var e=("focus"!==b?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||
0,h=0;h<this._optionLis.length;h++)if(this._optionLis.eq(h).text().substr(0,f.length).toLowerCase()===f)if(d._typeAhead_cycling){if(null===g&&(g=h),h>e){g=h;break}}else g=h;null!==g&&this._optionLis.eq(g).find("a").trigger(b);d._typeAhead_timer=window.setTimeout(function(){d._typeAhead_timer=void 0;d._typeAhead_chars=void 0;d._typeAhead_cycling=void 0},d.options.typeAhead)},_uiHash:function(){var c=this.index();return{index:c,option:a("option",this.element).get(c),value:this.element[0].value}},open:function(a){var b=
this.options;if("true"!=this.newelement.attr("aria-disabled")){this._closeOthers(a);this.newelement.addClass("ui-state-active");this.list.attr("aria-hidden",!1);this.listWrap.addClass(this.widgetBaseClass+"-open");var d=this._selectedOptionLi();"dropdown"==b.style?this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5E3).scrollTop(this.list.scrollTop()+d.position().top-this.list.outerHeight()/2+d.outerHeight()/2).css("left","auto");this._refreshPosition();b=
d.find("a");b.length&&b[0].focus();this.isOpen=!0;this._trigger("open",a,this._uiHash())}},close:function(a,b){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),b&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change");
this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(c){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",c)});a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,b){this.isOpen?this.close(a,b):this.open(a)},
_formatText:function(c,b){this.options.format?c=this.options.format(c,b):this.options.escapeHtml&&(c=a("<div />").text(c).html());return c},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,b){if(!this.options.disabled){var d=parseInt(this._selectedOptionLi().data("index")||0,10)+a;0>d&&(d=
0);d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveSelection(a,d)):this._optionLis.eq(d).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,b){var d=isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>d&&(d=0);d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;var e=this.widgetBaseClass+
"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveFocus(a,d)):this._optionLis.eq(d).find("a:eq(0)").attr("id",e).focus();this.list.attr("aria-activedescendant",e)},_scrollPage:function(a){var b=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());this._moveFocus("up"==a?-b:b)},_setOption:function(a,b){this.options[a]=b;"disabled"==a&&(b&&this.close(),
this.element.add(this.newelement).add(this.list)[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",b))},disable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!0):"optgroup"==b?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!1):"optgroup"==b?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(c){return a(c).hasClass(this.namespace+
"-state-disabled")},_disableOption:function(a){var b=this._optionLis.eq(a);b&&(b.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var b=this._optionLis.eq(a);b&&(b.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+
a);b&&(b.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+a);b&&(b.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(c){if(arguments.length){if(this._disabled(a(this._optionLis[c]))||c==this._selectedIndex())return!1;this.element[0].selectedIndex=
c;this._refreshValue();this.change()}else return this._selectedIndex()},value:function(a){if(arguments.length&&a!=this.element[0].value)this.element[0].value=a,this._refreshValue(),this.change();else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",b=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected",
"false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",b);var a=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",d=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",d).addClass(d).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",
b)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var b=this._selectedOptionLi(),b="0 "+(this.list.offset().top-b.offset().top-(this.newelement.outerHeight()+b.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||b,collision:a.positionOptions.collision||("popup"==a.style?"fit":"flip")})}})})(jQuery);
(function(a){a.widget("ui.panel",{options:{event:"click",collapsible:!0,collapseType:"default",collapsed:!1,accordion:!1,collapseSpeed:"fast",draggable:!1,trueVerticalText:!0,vHeight:"220px",stackable:!0,width:"auto",controls:!1,cookie:null,widgetClass:"ui-helper-reset ui-widget ui-panel",headerClass:"ui-helper-reset ui-widget-header ui-panel-header ui-corner-top",contentClass:"ui-helper-reset ui-widget-content ui-panel-content ui-corner-bottom",contentTextClass:"ui-panel-content-text",rightboxClass:"ui-panel-rightbox",
controlsClass:"ui-panel-controls",titleClass:"ui-panel-title",titleTextClass:"ui-panel-title-text",iconClass:"ui-icon",hoverClass:"ui-state-disabled",collapsePnlClass:"ui-panel-clps-pnl",headerIconClpsd:"ui-icon-triangle-1-e",headerIcon:"ui-icon-triangle-1-s",slideRIconClpsd:"ui-icon-arrowthickstop-1-w",slideRIcon:"ui-icon-arrowthickstop-1-e",slideLIconClpsd:"ui-icon-arrowthickstop-1-e",slideLIcon:"ui-icon-arrowthickstop-1-w"},_init:function(){this._panelize()},_panelize:function(){if(this.element.is("div")){var c=
this,b=this.options;this.panelBox=this.element;"auto"==b.width?b.width=this.panelBox.css("width"):this.panelBox.css("width",b.width);this.panelBox.attr("role","panel");b.id=this.panelBox.attr("id");this.headerBox=this.element.children(":first");this.contentBox=this.element.children().eq(1);b.content=this.contentBox.html();this.contentBox.wrapInner("<div/>");this.contentTextBox=this.contentBox.children(":first").addClass(b.contentTextClass);this.headerBox.wrapInner("<div><span/></div>");this.titleBox=
this.headerBox.children(":first");this.titleTextBox=this.titleBox.children(":first");this.titleText=this.titleTextBox.html();this.headerBox.prepend("<span/>");this.rightBox=this.headerBox.children(":first").addClass(b.rightboxClass);0!=b.controls?(this.rightBox.append("<span/>"),this.controlsBox=this.rightBox.children(":first").addClass(b.controlsClass).html(b.controls)):this.controlsBox=null;this.panelBox.addClass(b.widgetClass);this.headerBox.addClass(b.headerClass);this.titleBox.addClass(b.titleClass);
this.titleTextBox.addClass(b.titleTextClass);this.contentBox.addClass(b.contentClass);if(b.collapsible){switch(b.collapseType){case "slide-right":var d=0;b.controls&&(d=1);this.rightBox.append("<span><span/></span>");this.collapsePanel=this.rightBox.children().eq(d).addClass(b.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(b.slideRIcon);this.iconBtnClpsd=b.slideRIconClpsd;this.iconBtn=b.slideRIcon;this.ctrlBox=this.controlsBox;break;case "slide-left":this.headerBox.prepend("<span><span/></span>");
this.collapsePanel=this.headerBox.children(":first").addClass(b.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(b.slideLIcon);this.iconBtnClpsd=b.slideLIconClpsd;this.iconBtn=b.slideLIcon;this.ctrlBox=this.rightBox;break;default:this.headerBox.prepend("<span><span/></span>"),this.collapseButton=this.headerBox.children(":first").addClass(b.headerIcon),this.iconBtnClpsd=b.headerIconClpsd,this.iconBtn=b.headerIcon,this.ctrlBox=this.controlsBox}this._buttonHover(this.collapseButton);
this.collapseButton.addClass(b.iconClass);b.event&&(this.collapseButton.bind(b.event+".panel",function(a){return c._clickHandler.call(c,a,this)}),this.titleTextBox.bind(b.event+".panel",function(a){return c._clickHandler.call(c,a,this)}));b.accordion&&(b.collapsed=!0,b.trueVerticalText=!1);b.cookie&&(0==c._cookie()?b.collapsed=!1:b.collapsed=!0);this.panelBox.data("collapsed",b.collapsed);b.stackable&&-1<a.inArray(b.collapseType,["slide-right","slide-left"])&&(this.panelDock=this.panelBox.siblings("div[role=panelDock]:first"),
this.panelFrame=this.panelBox.siblings("div[role=panelFrame]:first"),0==this.panelDock.length&&(this.panelDock=this.panelBox.parent(0).prepend("<div>").children(":first"),this.panelFrame=this.panelDock.after("<div>").next(":first"),this.panelDock.attr("role","panelDock").css("float","slide-left"==b.collapseType?"left":"right"),this.panelFrame.attr("role","panelFrame").css({"float":"slide-left"==b.collapseType?"left":"right",overflow:"hidden"})),b.collapsed?this.panelDock.append(this.panelBox):this.panelFrame.append(this.panelBox));
b.collapsed&&c.toggle(0,!0)}else this.titleTextBox.css("cursor","default");!b.accordion&&b.draggable&&a.fn.draggable&&this._makeDraggable();this.panelBox.show()}},_cookie:function(){var c=this.cookie||(this.cookie=this.options.cookie.name||"ui-panel-"+this.options.id);return a.cookie.apply(null,[c].concat(a.makeArray(arguments)))},_makeDraggable:function(){this.panelBox.draggable({containment:"document",handle:".ui-panel-header",cancel:".ui-panel-content",cursor:"move"})},_clickHandler:function(a,
b){var d=this.options;if(d.disabled)return!1;this.toggle(d.collapseSpeed);return!1},toggle:function(c,b){var d=this.options,e=this.panelBox,f=this.contentBox,g=this.headerBox,h=this.titleTextBox,l=this.titleText,m=this.ctrlBox,n=this.panelDock,q="";jQuery.support.leadingWhitespace||(q="-ie");"none"==f.css("display")?this._trigger("unfold"):this._trigger("fold");m&&m.toggle(0);"default"==d.collapseType?0==c?(m&&m.hide(),f.hide()):f.slideToggle(c):(0==c?(d.collapsed=!1,m&&m.hide(),f.hide()):f.toggle(),
0==d.collapsed?(d.trueVerticalText?(g.toggleClass("ui-panel-vtitle").css("height",d.vHeight),""==q&&(f="height:"+(parseInt(d.vHeight)-50)+"px;width:100%;position:absolute;bottom:0;left:0;",h.empty().append('<div style="'+f+'z-index:3;"></div><object style="'+f+'z-index:2;" type="image/svg+xml" data="data:image/svg+xml;charset=utf-8,<svg xmlns=\'http://www.w3.org/2000/svg\'><text x=\'-'+(parseInt(d.vHeight)-60)+"px' y='16px' style='font-weight:"+h.css("font-weight")+";font-family:"+h.css("font-family").replace(/"/g,
"")+";font-size:"+h.css("font-size")+";fill:"+h.css("color")+";' transform='rotate(-90)' text-rendering='optimizeSpeed'>"+l+'</text></svg>"></object>').css("height",d.vHeight)),h.toggleClass("ui-panel-vtext"+q)):(g.attr("align","center"),h.html(h.text().replace(/(.)/g,"$1<BR>"))),d.stackable&&(b?n.append(e):n.prepend(e))):(d.stackable&&this.panelFrame.append(e),d.trueVerticalText?(g.toggleClass("ui-panel-vtitle").css("height","auto"),h.empty().append(l),h.toggleClass("ui-panel-vtext"+q)):(g.attr("align",
"left"),h.html(h.text().replace(/<BR>/g," ")))));if((0!=c||d.trueVerticalText)&&null==d.cookie||!b&&null!=d.cookie)d.collapsed=!d.collapsed;this.panelBox.data("collapsed",d.collapsed);b||(d.cookie&&this._cookie(Number(d.collapsed),d.cookie),d.accordion&&a("."+d.accordion+"[role='panel'][id!='"+d.id+"']:not(:data(collapsed))").panel("toggle",c,!0));this.collapseButton.toggleClass(this.iconBtnClpsd).toggleClass(this.iconBtn);g.toggleClass("ui-corner-all")},content:function(a){this.contentTextBox.html(a)},
destroy:function(){var c=this.options;this.headerBox.html(this.titleText).removeAttr("align").removeAttr("style").removeClass("ui-panel-vtitle ui-corner-all "+c.headerClass);this.contentBox.removeClass(c.contentClass).removeAttr("style").html(c.content);this.panelBox.removeAttr("role").removeAttr("style").removeData("collapsed").unbind(".panel").removeClass(c.widgetClass);c.stackable&&-1<a.inArray(c.collapseType,["slide-right","slide-left"])&&(this.panelDock.before(this.panelBox),0==this.panelDock.children("div[role=panel]").length&&
0==this.panelFrame.children("div[role=panel]").length&&(this.panelDock.remove(),this.panelFrame.remove()));c.cookie&&this._cookie(null,c.cookie);return this},_buttonHover:function(c){var b=this.options;c.bind({mouseover:function(){a(this).addClass(b.hoverClass)},mouseout:function(){a(this).removeClass(b.hoverClass)}})}});a.extend(a.ui.panel,{version:"0.6"})})(jQuery);
(function(a){a.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,availableFirst:!1,nodeComparator:function(a,b){var d=a.text(),e=b.text();return d==e?0:d<e?-1:1}},_create:function(){this.element.hide();this.id=this.element.attr("id");this.container=a('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element);this.count=0;this.selectedContainer=a('<div class="selected"></div>').appendTo(this.container);
this.availableContainer=a('<div class="available"></div>')[this.options.availableFirst?"prependTo":"appendTo"](this.container);this.selectedActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+a.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+a.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer);this.availableActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+
a.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer);this.selectedList=a('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer);this.availableList=a('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var c=this;this.container.width(this.element.width()+
1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));this.options.animated||(this.options.show="show",this.options.hide="hide");this._populateLists(this.element.find("option"));this.options.sortable&&
this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(b,d){c.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(c.element)})},receive:function(b,d){d.item.data("optionLink").attr("selected",!0);c.count+=1;c._updateCount();c.selectedList.children(".ui-draggable").each(function(){a(this).removeClass("ui-draggable");a(this).data("optionLink",d.item.data("optionLink"));a(this).data("idx",d.item.data("idx"));
c._applyItemState(a(this),!0)});setTimeout(function(){d.item.remove()},1)}});this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):a(".search").hide();this.container.find(".remove-all").click(function(){c._populateLists(c.element.find("option").removeAttr("selected"));return!1});this.container.find(".add-all").click(function(){var b=c.element.find("option").not(":selected");1<c.availableList.children("li:hidden").length?c.availableList.children("li").each(function(d){a(this).is(":visible")&&
a(b[d-1]).attr("selected","selected")}):b.attr("selected","selected");c._populateLists(c.element.find("option"));return!1})},destroy:function(){this.element.show();this.container.remove();a.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(c){this.selectedList.children(".ui-element").remove();this.availableList.children(".ui-element").remove();this.count=0;var b=this;a(c.map(function(a){var c=b._getOptionNode(this).appendTo(this.selected?b.selectedList:b.availableList).show();
this.selected&&(b.count+=1);b._applyItemState(c,this.selected);c.data("idx",a);return c[0]}));this._updateCount();b._filter.apply(this.availableContainer.find("input.search"),[b.availableList])},_updateCount:function(){this.element.trigger("change");this.selectedContainer.find("span.count").text(this.count+" "+a.ui.multiselect.locale.itemsCount)},_getOptionNode:function(c){c=a(c);var b=a('<li class="ui-state-default ui-element" title="'+c.text()+'"><span class="ui-icon"/>'+c.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
b.data("optionLink",c);return b},_cloneWithData:function(a){var b=a.clone(!1,!1);b.data("optionLink",a.data("optionLink"));b.data("idx",a.data("idx"));return b},_setSelected:function(c,b){c.data("optionLink").attr("selected",b);if(b){var d=this._cloneWithData(c);c[this.options.hide](this.options.animated,function(){a(this).remove()});d.appendTo(this.selectedList).hide()[this.options.show](this.options.animated);this._applyItemState(d,!0);return d}var e=this.availableList.find("li"),f=this.options.nodeComparator,
d=null,g=c.data("idx"),h=f(c,a(e[g]));if(h)for(;0<=g&&g<e.length;){if(0<h?g++:g--,h!=f(c,a(e[g]))){d=e[0<h?g:g+1];break}}else d=e[g];e=this._cloneWithData(c);d?e.insertBefore(a(d)):e.appendTo(this.availableList);c[this.options.hide](this.options.animated,function(){a(this).remove()});e.hide()[this.options.show](this.options.animated);this._applyItemState(e,!1);return e},_applyItemState:function(a,b){b?(this.options.sortable?a.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):
a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(a.find("a.action"))):(a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(a.find("a.action")));this._registerDoubleClickEvents(a);
this._registerHoverEvents(a)},_filter:function(c){var b=a(this),d=c.children("li");c=d.map(function(){return a(this).text().toLowerCase()});var e=a.trim(b.val().toLowerCase()),f=[];e?(d.hide(),c.each(function(a){-1<this.indexOf(e)&&f.push(a)}),a.each(f,function(){a(d[this]).show()})):d.show()},_registerDoubleClickEvents:function(c){this.options.doubleClickable&&c.dblclick(function(b){0===a(b.target).closest(".action").length&&c.find("a.action").click()})},_registerHoverEvents:function(c){c.removeClass("ui-state-hover");
c.mouseover(function(){a(this).addClass("ui-state-hover")});c.mouseout(function(){a(this).removeClass("ui-state-hover")})},_registerAddEvents:function(c){var b=this;c.click(function(){b._setSelected(a(this).parent(),!0);b.count+=1;b._updateCount();return!1});this.options.sortable&&c.each(function(){a(this).parent().draggable({connectToSortable:b.selectedList,helper:function(){var d=b._cloneWithData(a(this)).width(a(this).width()-50);d.width(a(this).width());return d},appendTo:b.container,containment:b.container,
revert:"invalid"})})},_registerRemoveEvents:function(c){var b=this;c.click(function(){b._setSelected(a(this).parent(),!1);b.count-=1;b._updateCount();return!1})},_registerSearchEvents:function(c){var b=this;c.focus(function(){a(this).addClass("ui-state-active")}).blur(function(){a(this).removeClass("ui-state-active")}).keypress(function(a){if(13==a.keyCode)return!1}).keyup(function(){b._filter.apply(this,[b.availableList])})},selectedValues:function(){var c=[];this.selectedList.find("li").each(function(b,
d){var e=a(d).data("optionLink");e&&c.push(e.val())});return c}});a.extend(a.ui.multiselect,{locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})})(jQuery);
(function(a,c,b){var d=/\r/g,e=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,f=["Page_ClientValidate"],g=!1,h="placeholder"in document.createElement("input");a.watermark=a.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._hide(a(this))})},_hide:function(a,b){var e=a[0],f=(e.value||"").replace(d,""),g=a.data("watermarkText")||
"",h=a.data("watermarkMaxLength")||0,w=a.data("watermarkClass"),E,D;g.length&&f==g&&(e.value="",a.data("watermarkPassword")&&"text"===(a.attr("type")||"")&&(E=a.data("watermarkPassword")||[],D=a.parent()||[],E.length&&D.length&&(D[0].removeChild(a[0]),D[0].appendChild(E[0]),a=E)),h&&(a.attr("maxLength",h),a.removeData("watermarkMaxLength")),b&&(a.attr("autocomplete","off"),c.setTimeout(function(){a.select()},1)));w&&a.removeClass(w)},show:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._show(a(this))})},
_show:function(b){var c=b[0],e=(c.value||"").replace(d,""),f=b.data("watermarkText")||"",h=b.attr("type")||"",A=b.data("watermarkClass"),w,E,D;0!=e.length&&e!=f||b.data("watermarkFocus")?a.watermark._hide(b):(g=!0,b.data("watermarkPassword")&&"password"===h&&(w=b.data("watermarkPassword")||[],E=b.parent()||[],w.length&&E.length&&(E[0].removeChild(b[0]),E[0].appendChild(w[0]),b=w,b.attr("maxLength",f.length),c=b[0])),("text"===h||"search"===h)&&(D=b.attr("maxLength")||0,0<D&&f.length>D&&(b.data("watermarkMaxLength",
D),b.attr("maxLength",f.length))),A&&b.addClass(A),c.value=f)},hideAll:function(){g&&(a.watermark.hide(":watermarkable"),g=!1)},showAll:function(){a.watermark.show(":watermarkable")}};a.fn.watermark=a.fn.watermark||function(b,e){if(!this.length)return this;var f=!1,g="string"==typeof b;return g&&(b=b.replace(d,"")),"object"==typeof e?(f="string"==typeof e.className,e=a.extend({},a.watermark.options,e)):"string"==typeof e?(f=!0,e=a.extend({},a.watermark.options,{className:e})):e=a.watermark.options,
"function"!=typeof e.useNative&&(e.useNative=e.useNative?function(){return!0}:function(){return!1}),this.each(function(){var v=a(this),A,w,E,D;if(v.is(":watermarkable")){if(v.data("watermark"))(g||f)&&(a.watermark._hide(v),g&&v.data("watermarkText",b),f&&v.data("watermarkClass",e.className));else{if(h&&e.useNative.call(this,v)&&"TEXTAREA"!==(v.attr("tagName")||"")){g&&v.attr("placeholder",b);return}v.data("watermarkText",g?b:"");v.data("watermarkClass",e.className);v.data("watermark",1);"password"===
(v.attr("type")||"")?(A=v.wrap("<span>").parent(),w=a(A.html().replace(/type=["']?password["']?/i,'type="text"')),w.data("watermarkText",v.data("watermarkText")),w.data("watermarkClass",v.data("watermarkClass")),w.data("watermark",1),w.attr("maxLength",b.length),w.focus(function(){a.watermark._hide(w,!0)}).bind("dragenter",function(){a.watermark._hide(w)}).bind("dragend",function(){c.setTimeout(function(){w.blur()},1)}),v.blur(function(){a.watermark._show(v)}).bind("dragleave",function(){a.watermark._show(v)}),
w.data("watermarkPassword",v),v.data("watermarkPassword",w)):v.focus(function(){v.data("watermarkFocus",1);a.watermark._hide(v,!0)}).blur(function(){v.data("watermarkFocus",0);a.watermark._show(v)}).bind("dragenter",function(){a.watermark._hide(v)}).bind("dragleave",function(){a.watermark._show(v)}).bind("dragend",function(){c.setTimeout(function(){a.watermark._show(v)},1)}).bind("drop",function(a){var b=v[0];a=a.originalEvent.dataTransfer.getData("Text");(b.value||"").replace(d,"").replace(a,"")===
v.data("watermarkText")&&(b.value=a);v.focus()});this.form&&(E=this.form,D=a(E),D.data("watermarkSubmit")||(D.submit(a.watermark.hideAll),E.submit?(D.data("watermarkSubmit",E.submit),E.submit=function(b,d){return function(){var c=d.data("watermarkSubmit");a.watermark.hideAll();c.apply?c.apply(b,Array.prototype.slice.call(arguments)):c()}}(E,D)):(D.data("watermarkSubmit",1),E.submit=function(b){return function(){a.watermark.hideAll();delete b.submit;b.submit()}}(E))))}a.watermark._show(v)}})};a.watermark.runOnce&&
(a.watermark.runOnce=!1,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,b)}}):function(b,d,c){return!!a.data(b,c[3])},watermarkable:function(a){var b,d=a.nodeName;return"TEXTAREA"===d?!0:"INPUT"!==d?!1:(b=a.getAttribute("type"),!b||!e.test(b))}}),function(c){a.fn.val=function(){var e=Array.prototype.slice.call(arguments),f;return this.length?e.length?(c.apply(this,e),a.watermark.show(this),this):this.data("watermark")?(f=(this[0].value||
"").replace(d,""),f===(this.data("watermarkText")||"")?"":f):c.apply(this):e.length?this:b}}(a.fn.val),f.length&&a(function(){for(var b,d,e=f.length-1;0<=e;e--)b=f[e],d=c[b],"function"==typeof d&&(c[b]=function(b){return function(){return a.watermark.hideAll(),b.apply(null,Array.prototype.slice.call(arguments))}}(d))}),a(c).bind("beforeunload",function(){a.watermark.options.hideBeforeUnload&&a.watermark.hideAll()}))})(jQuery,window);
(function(a){var c=Math.min,b=Math.max,d=Math.floor,e=function(b){return"string"===a.type(b)},f=function(b,d){if(a.isArray(d))for(var c=0,f=d.length;c<f;c++){var g=d[c];try{e(g)&&(g=eval(g)),a.isFunction(g)&&g(b)}catch(h){}}};a.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(b){b=a(b);if(b=b.data("layout")||b.data("parentLayout")){b=b.container;if(b.data("layoutPane"))return b;b=b.closest("."+a.layout.defaults.panes.paneClass);if(b.data("layoutPane"))return b}return null},getParentPaneInstance:function(b){return(b=a.layout.getParentPaneElem(b))?b.data("layoutPane"):null},getParentLayoutInstance:function(b){return(b=a.layout.getParentPaneElem(b))?
b.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(b){var d=a.layout.getEventObject(b);d&&(d.stopPropagation(),b=a(this).data("layoutEdge"));b&&!/^(west|east|north|south|center)$/.test(b)&&(a.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+b+'"'),b="error");return b},plugins:{draggable:!!a.fn.draggable,effects:{core:!!a.effects,slide:a.effects&&(a.effects.slide||a.effects.effect&&a.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||a.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||a.layout.getScrollbarSize("height")},getScrollbarSize:function(b){var d=a('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),c={width:d.css("width")-d[0].clientWidth,height:d.height()-d[0].clientHeight};
d.remove();window.scrollbarWidth=c.width;window.scrollbarHeight=c.height;return b.match(/^(width|height)$/)?c[b]:c},showInvisibly:function(a,b){if(a&&a.length&&(b||"none"===a.css("display"))){var d=a[0].style,d={display:d.display||"",visibility:d.visibility||""};a.css({display:"block",visibility:"hidden"});return d}return{}},getElementDimensions:function(d,c){var e={css:{},inset:{}},f=e.css,g={bottom:0},h=a.layout.cssNum,l=d.offset(),D,J,I;e.offsetLeft=l.left;e.offsetTop=l.top;c||(c={});a.each(["Left",
"Right","Top","Bottom"],function(b,h){D=f["border"+h]=a.layout.borderWidth(d,h);J=f["padding"+h]=a.layout.cssNum(d,"padding"+h);I=h.toLowerCase();e.inset[I]=0<=c[I]?c[I]:J;g[I]=e.inset[I]+D});f.width=d.width();f.height=d.height();f.top=h(d,"top",!0);f.bottom=h(d,"bottom",!0);f.left=h(d,"left",!0);f.right=h(d,"right",!0);e.outerWidth=d.outerWidth();e.outerHeight=d.outerHeight();e.innerWidth=b(0,e.outerWidth-g.left-g.right);e.innerHeight=b(0,e.outerHeight-g.top-g.bottom);e.layoutWidth=d.innerWidth();
e.layoutHeight=d.innerHeight();return e},getElementStyles:function(a,b){var d={},c=a[0].style,e=b.split(","),f=["Top","Bottom","Left","Right"],g=["Color","Style","Width"],h,l,I,C,t,z;for(C=0;C<e.length;C++)if(h=e[C],h.match(/(border|padding|margin)$/))for(t=0;4>t;t++)if(l=f[t],"border"===h)for(z=0;3>z;z++)I=g[z],d[h+l+I]=c[h+l+I];else d[h+l]=c[h+l];else d[h]=c[h];return d},cssWidth:function(d,c){if(0>=c)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?d.css("boxSizing"):"content-box":
"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=c;"border-box"!==e&&(h-=f(d,"Left")+f(d,"Right"));"content-box"===e&&(h-=g(d,"paddingLeft")+g(d,"paddingRight"));return b(0,h)},cssHeight:function(d,c){if(0>=c)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?d.css("boxSizing"):"content-box":"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=c;"border-box"!==e&&(h-=f(d,"Top")+f(d,"Bottom"));"content-box"===e&&(h-=g(d,"paddingTop")+g(d,"paddingBottom"));return b(0,h)},cssNum:function(b,
d,c){b.jquery||(b=a(b));var e=a.layout.showInvisibly(b);d=a.css(b[0],d,!0);c=c&&"auto"==d?d:Math.round(parseFloat(d)||0);b.css(e);return c},borderWidth:function(b,d){b.jquery&&(b=b[0]);var c="border"+d.substr(0,1).toUpperCase()+d.substr(1);return"none"===a.css(b,c+"Style",!0)?0:Math.round(parseFloat(a.css(b,c+"Width",!0))||0)},isMouseOverElem:function(b,d){var c=a(d||this),e=c.offset(),f=e.top,e=e.left,g=e+c.outerWidth(),c=f+c.outerHeight(),h=b.pageX,l=b.pageY;return a.layout.browser.msie&&0>h&&0>
l||h>=e&&h<=g&&l>=f&&l<=c},msg:function(b,d,c,e){a.isPlainObject(b)&&window.debugData?("string"===typeof d?(e=c,c=d):"object"===typeof c&&(e=c,c=null),c=c||"log( <object> )",e=a.extend({sort:!1,returnHTML:!1,display:!1},e),!0===d||e.display?debugData(b,c,e):window.console&&console.log(debugData(b,c,e))):d?alert(b):window.console?console.log(b):(d=a("#layoutLogger"),d.length||(d=a('<div id="layoutLogger" style="position: '+(a.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
d.css("left",a(window).width()-d.outerWidth()-5),a.ui.draggable&&d.draggable({handle:":first-child"})),d.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var g=navigator.userAgent.toLowerCase(),h=/(chrome)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||0>g.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||
[],g=h[1]||"",h=h[2]||0,l="msie"===g;a.layout.browser={version:h,safari:"webkit"===g,webkit:"chrome"===g,msie:l,isIE6:l&&6==h,boxModel:!l||!1!==a.support.boxModel};g&&(a.layout.browser[g]=!0);l&&a(function(){a.layout.browser.boxModel=a.support.boxModel});a.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,
onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:0,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",
noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",
buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",
slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:a.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},
fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",
size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};a.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),
center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};a.layout.transformData=function(b,d){var c=d?{panes:{},center:{}}:{},e,f,g,h,l,J,I;if("object"!==
typeof b)return c;for(f in b)for(e=c,l=b[f],g=f.split("__"),I=g.length-1,J=0;J<=I;J++)h=g[J],J===I?a.isPlainObject(l)?e[h]=a.layout.transformData(l):e[h]=l:(e[h]||(e[h]={}),e=e[h]);return c};a.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",
triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",
noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(b){function d(a,c){for(var e=a.split("."),f=e.length-1,g={branch:b,key:e[f]},h=0,l;h<f;h++)l=e[h],g.branch=void 0==g.branch[l]?c?g.branch[l]={}:{}:g.branch[l];return g}var c=a.layout.backwardCompatibility.map,e,f,g,h;for(h in c)e=d(h),g=e.branch[e.key],void 0!==g&&(f=d(c[h],!0),f.branch[f.key]=g,delete e.branch[e.key])},renameAllOptions:function(b){var d=
a.layout.backwardCompatibility.renameOptions;d(b);b.defaults&&("object"!==typeof b.panes&&(b.panes={}),a.extend(!0,b.panes,b.defaults),delete b.defaults);b.panes&&d(b.panes);a.each(a.layout.config.allPanes,function(a,c){b[c]&&d(b[c])});return b}};a.fn.layout=function(g){function h(b){if(!b)return!0;var d=b.keyCode;if(33>d)return!0;var c={38:"north",40:"south",37:"west",39:"east"},e=b.shiftKey,f=b.ctrlKey,g,B,l,m;f&&37<=d&&40>=d&&z[c[d]].enableCursorHotkey?m=c[d]:(f||e)&&a.each(w.borderPanes,function(a,
b){g=z[b];B=g.customHotkey;l=g.customHotkeyModifier;if((e&&"SHIFT"==l||f&&"CTRL"==l||f&&e)&&B&&d===(isNaN(B)||9>=B?B.toUpperCase().charCodeAt(0):B))return m=b,!1});if(!m||!P[m]||!z[m].closable||F[m].isHidden)return!0;hb(m);b.stopPropagation();return b.returnValue=!1}function l(b){if(da()){this&&this.tagName&&(b=this);var d;e(b)?d=P[b]:a(b).data("layoutRole")?d=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return d=a(this),!1});if(d&&d.length){var c=d.data("layoutEdge");b=F[c];
b.cssSaved&&v(c);if(b.isSliding||b.isResizing||b.isClosed)b.cssSaved=!1;else{var f={zIndex:z.zIndexes.resizer_normal+1},g={},h=d.css("overflow"),B=d.css("overflowX"),m=d.css("overflowY");"visible"!=h&&(g.overflow=h,f.overflow="visible");B&&!B.match(/(visible|auto)/)&&(g.overflowX=B,f.overflowX="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowY=B,f.overflowY="visible");b.cssSaved=g;d.css(f);a.each(w.allPanes,function(a,b){b!=c&&v(b)})}}}}function v(b){if(da()){this&&this.tagName&&(b=this);var d;
e(b)?d=P[b]:a(b).data("layoutRole")?d=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return d=a(this),!1});if(d&&d.length){b=d.data("layoutEdge");b=F[b];var c=b.cssSaved||{};b.isSliding||b.isResizing||d.css("zIndex",z.zIndexes.pane_normal);d.css(c);b.cssSaved=!1}}}var A=a.layout.browser,w=a.layout.config,E=a.layout.cssWidth,D=a.layout.cssHeight,J=a.layout.getElementDimensions,I=a.layout.getElementStyles,C=a.layout.getEventObject,t=a.layout.parsePaneName,z=a.extend(!0,{},a.layout.defaults);
z.effects=a.extend(!0,{},a.layout.effects);var F={id:"layout"+a.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},O={north:null,south:null,east:null,west:null,center:null},S={data:{},set:function(a,b,d){S.clear(a);S.data[a]=setTimeout(b,d)},clear:function(a){var b=S.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},
V=function(b,d,c){var e=z;(e.showErrorMessages&&!c||c&&e.showDebugMessages)&&a.layout.msg(e.name+" / "+b,!1!==d);return!1},T=function(b,d,c){var f=d&&e(d),g=f?F[d]:F,h=f?z[d]:z,l=z.name,m=b+(b.match(/_/)?"":"_end"),n=m.match(/_end$/)?m.substr(0,m.length-4):"",p=h[m]||h[n],q="NC",t=[];f||"boolean"!==a.type(d)||(c=d,d="");if(p)try{e(p)&&(p.match(/,/)?(t=p.split(","),p=eval(t[0])):p=eval(p)),a.isFunction(p)&&(q=t.length?p(t[1]):f?p(d,P[d],g,h,l):p(B,g,h,l))}catch(C){V(z.errors.callbackError.replace(/EVENT/,
a.trim((d||"")+" "+m)),!1),"string"===a.type(C)&&string.length&&V("Exception:  "+C,!1)}c||!1===q||(f?(c=P[d],h=z[d],g=F[d],c.triggerHandler("layoutpane"+m,[d,c,g,h,l]),n&&c.triggerHandler("layoutpane"+n,[d,c,g,h,l])):(Q.triggerHandler("layout"+m,[B,g,h,l]),n&&Q.triggerHandler("layout"+n,[B,g,h,l])));f&&"onresize_end"===b&&lb(d+"",!0);return q},pa=function(a){if(!A.mozilla){var b=P[a];"IFRAME"===F[a].tagName?b.css(w.hidden).css(w.visible):b.find("IFRAME").css(w.hidden).css(w.visible)}},La=function(a){var b=
P[a];a=w[a].dir;b={minWidth:1001-E(b,1E3),minHeight:1001-D(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},Wa=function(b,d,c){var f=b;e(b)?f=P[b]:b.jquery||(f=a(b));b=D(f,d);f.css({height:b,visibility:"visible"});0<b&&0<f.innerWidth()?c&&f.data("autoHidden")&&(f.show().data("autoHidden",!1),A.mozilla||f.css(w.hidden).css(w.visible)):c&&!f.data("autoHidden")&&f.hide().data("autoHidden",!0)},va=function(b,c,f){f||(f=w[b].dir);e(c)&&c.match(/%/)&&(c="100%"===
c?-1:parseInt(c,10)/100);if(0===c)return 0;if(1<=c)return parseInt(c,10);var g=z,h=0;"horz"==f?h=X.innerHeight-(P.north?g.north.spacing_open:0)-(P.south?g.south.spacing_open:0):"vert"==f&&(h=X.innerWidth-(P.west?g.west.spacing_open:0)-(P.east?g.east.spacing_open:0));if(-1===c)return h;if(0<c)return d(h*c);if("center"==b)return 0;f="horz"===f?"height":"width";g=P[b];b="height"===f?Sa[b]:!1;var h=a.layout.showInvisibly(g),B=g.css(f),l=b?b.css(f):0;g.css(f,"auto");b&&b.css(f,"auto");c="height"===f?g.outerHeight():
g.outerWidth();g.css(f,B).css(h);b&&b.css(f,l);return c},ha=function(a,b){var d=P[a],c=z[a],e=F[a],f=b?c.spacing_open:0,c=b?c.spacing_closed:0;return!d||e.isHidden?0:e.isClosed||e.isSliding&&b?c:"horz"===w[a].dir?d.outerHeight()+f:d.outerWidth()+f},wa=function(a,d){if(da()){var e=z[a],f=F[a],g=w[a],h=g.dir;g.sizeType.toLowerCase();var g=void 0!=d?d:f.isSliding,B=e.spacing_open,l=w.oppositeEdge[a],m=F[l],n=P[l],p=!n||!1===m.isVisible||m.isSliding?0:"horz"==h?n.outerHeight():n.outerWidth(),l=(!n||m.isHidden?
0:z[l][!1!==m.isClosed?"spacing_closed":"spacing_open"])||0,m="horz"==h?X.innerHeight:X.innerWidth,n=La("center"),n="horz"==h?b(z.center.minHeight,n.minHeight):b(z.center.minWidth,n.minWidth),g=m-B-(g?0:va("center",n,h)+p+l),h=f.minSize=b(va(a,e.minSize),La(a).minSize),g=f.maxSize=c(e.maxSize?va(a,e.maxSize):1E5,g),f=f.resizerPosition={},B=X.inset.top,p=X.inset.left,l=X.innerWidth,m=X.innerHeight,e=e.spacing_open;switch(a){case "north":f.min=B+h;f.max=B+g;break;case "west":f.min=p+h;f.max=p+g;break;
case "south":f.min=B+m-g-e;f.max=B+m-h-e;break;case "east":f.min=p+l-g-e,f.max=p+l-h-e}}},ua=function(b,d){var c=a(b),e=c.data("layoutRole"),f=c.data("layoutEdge"),g=z[f][e+"Class"],f="-"+f,h=c.hasClass(g+"-closed")?"-closed":"-open",B="-closed"===h?"-open":"-closed",h=g+"-hover "+(g+f+"-hover ")+(g+h+"-hover ")+(g+f+h+"-hover ");d&&(h+=g+B+"-hover "+(g+f+B+"-hover "));"resizer"==e&&c.hasClass(g+"-sliding")&&(h+=g+"-sliding-hover "+(g+f+"-sliding-hover "));return a.trim(h)},ka=function(b,d){var c=
a(d||this);b&&"toggler"===c.data("layoutRole")&&b.stopPropagation();c.addClass(ua(c))},oa=function(b,d){var c=a(d||this);c.removeClass(ua(c,!0))},sa=function(b){b=a(this).data("layoutEdge");var d=F[b];d.isClosed||d.isResizing||F.paneResizing||(a.fn.disableSelection&&a("body").disableSelection(),z.maskPanesEarly&&Bb(b,{resizing:!0}))},N=function(b,d){var c=d||this,e=a(c).data("layoutEdge"),f=e+"ResizerLeave";S.clear(e+"_openSlider");S.clear(f);d?F.paneResizing||(a.fn.enableSelection&&a("body").enableSelection(),
z.maskPanesEarly&&xb()):S.set(f,function(){N(b,c)},200)},da=function(){return F.initialized||F.creatingLayout?!0:pb()},pb=function(b){var d=z;if(!Q.is(":visible"))return!b&&A.webkit&&"BODY"===Q[0].tagName&&setTimeout(function(){pb(!0)},50),!1;if(!p("center").length)return V(d.errors.centerPaneMissing);F.creatingLayout=!0;a.extend(X,J(Q,d.inset));nb();d.scrollToBookmarkOnLoad&&(b=self.location,b.hash&&b.replace(b.hash));B.hasParentLayout?d.resizeWithWindow=!1:d.resizeWithWindow&&a(window).bind("resize."+
Ja,Da);delete F.creatingLayout;F.initialized=!0;f(B,a.layout.onReady);T("onload_end");return!0},jb=function(b,d){var c=t.call(this,b),e=P[c];if(e){var f=Sa[c],g=F[c],h=z[c],B=z.stateManagement||{},h=d?h.children=d:h.children;if(a.isPlainObject(h))h=[h];else if(!h||!a.isArray(h))return;a.each(h,function(b,d){a.isPlainObject(d)&&(d.containerSelector?e.find(d.containerSelector):f||e).each(function(){var b=a(this),e=b.data("layout");if(!e){Ga({container:b,options:d},g);if(B.includeChildren&&F.stateData[c]){var e=
(F.stateData[c].children||{})[d.instanceKey],f=d.stateManagement||(d.stateManagement={autoLoad:!0});!0===f.autoLoad&&e&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=a.extend(!0,{},e))}(e=b.layout(d))&&qa(c,e)}})})}},Ga=function(a,b){var d=a.container,c=a.options,e=c.stateManagement,f=c.instanceKey||d.data("layoutInstanceKey");f||(f=(e&&e.cookie?e.cookie.name:"")||c.name);f=f?f.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;c.instanceKey=f;d.data("layoutInstanceKey",f);return f},
qa=function(b,d){var c=P[b],e=O[b],f=F[b];a.isPlainObject(e)&&(a.each(e,function(a,b){b.destroyed&&delete e[a]}),a.isEmptyObject(e)&&(e=O[b]=null));d||e||(d=c.data("layout"));d&&(d.hasParentLayout=!0,c=d.options,Ga(d,f),e||(e=O[b]={}),e[c.instanceKey]=d.container.data("layout"));B[b].children=O[b];d||jb(b)},Da=function(){var a=z,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);S.clear("winResize");S.set("winResize",function(){S.clear("winResize");S.clear("winResizeRepeater");var b=J(Q,a.inset);b.innerWidth===
X.innerWidth&&b.innerHeight===X.innerHeight||kb()},b);S.data.winResizeRepeater||cb()},cb=function(){var a=Number(z.resizeWithWindowMaxDelay);0<a&&S.set("winResizeRepeater",function(){cb();kb()},a)},ca=function(){T("onunload_start");f(B,a.layout.onUnload);T("onunload_end")},qb=function(b){b=b?b.split(","):w.borderPanes;a.each(b,function(b,d){var c=z[d];if(c.enableCursorHotkey||c.customHotkey)return a(document).bind("keydown."+Ja,h),!1})},ub=function(){function d(b){var c=z[b],e=z.panes;c.fxSettings||
(c.fxSettings={});e.fxSettings||(e.fxSettings={});a.each(["_open","_close","_size"],function(d,f){var g="fxName"+f,h="fxSpeed"+f,B="fxSettings"+f,l=c[g]=c[g]||e[g]||c.fxName||e.fxName||"none",m=a.effects&&(a.effects[l]||a.effects.effect&&a.effects.effect[l]);"none"!==l&&z.effects[l]&&m||(l=c[g]="none");l=z.effects[l]||{};g=l.all||null;l=l[b]||null;c[h]=c[h]||e[h]||c.fxSpeed||e.fxSpeed||null;c[B]=a.extend(!0,{},g,l,e.fxSettings,c.fxSettings,e[B],c[B])});delete c.fxName;delete c.fxSpeed;delete c.fxSettings}
var c,e,f,h,B,l;g=a.layout.transformData(g,!0);g=a.layout.backwardCompatibility.renameAllOptions(g);if(!a.isEmptyObject(g.panes)){c=a.layout.optionsMap.noDefault;h=0;for(B=c.length;h<B;h++)f=c[h],delete g.panes[f];c=a.layout.optionsMap.layout;h=0;for(B=c.length;h<B;h++)f=c[h],delete g.panes[f]}c=a.layout.optionsMap.layout;var n=a.layout.config.optionRootKeys;for(f in g)h=g[f],0>a.inArray(f,n)&&0>a.inArray(f,c)&&(g.panes[f]||(g.panes[f]=a.isPlainObject(h)?a.extend(!0,{},h):h),delete g[f]);a.extend(!0,
z,g);a.each(w.allPanes,function(b,h){w[h]=a.extend(!0,{},w.panes,w[h]);e=z.panes;l=z[h];if("center"===h)for(c=a.layout.optionsMap.center,b=0,B=c.length;b<B;b++)f=c[b],g.center[f]||!g.panes[f]&&l[f]||(l[f]=e[f]);else l=z[h]=a.extend(!0,{},e,l),d(h),l.resizerClass||(l.resizerClass="ui-layout-resizer"),l.togglerClass||(l.togglerClass="ui-layout-toggler");l.paneClass||(l.paneClass="ui-layout-pane")});h=g.zIndex;n=z.zIndexes;0<h&&(n.pane_normal=h,n.content_mask=b(h+1,n.content_mask),n.resizer_normal=b(h+
2,n.resizer_normal));delete z.panes},p=function(a){a=z[a].paneSelector;if("#"===a.substr(0,1))return Q.find(a).eq(0);var b=Q.children(a).eq(0);return b.length?b:Q.children("form:first").children(a).eq(0)},nb=function(b){t(b);a.each(w.allPanes,function(a,b){Lb(b,!0)});Ra();a.each(w.borderPanes,function(a,b){P[b]&&F[b].isVisible&&(wa(b),db(b))});aa("center");a.each(w.allPanes,function(a,b){Oa(b)})},Lb=function(a,d){if(d||da()){var e=z[a],f=F[a],g=w[a],h=g.dir,m="center"===a,n={},t=P[a],C,A;t?Nb(a,!1,
!0,!1):Sa[a]=!1;t=P[a]=p(a);if(t.length){t.data("layoutCSS")||t.data("layoutCSS",I(t,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));B[a]={name:a,pane:P[a],content:Sa[a],options:z[a],state:F[a],children:O[a]};t.data({parentLayout:B,layoutPane:B[a],layoutEdge:a,layoutRole:"pane"}).css(g.cssReq).css("zIndex",z.zIndexes.pane_normal).css(e.applyDemoStyles?g.cssDemo:{}).addClass(e.paneClass+" "+e.paneClass+"-"+a).bind("mouseenter."+Ja,ka).bind("mouseleave."+
Ja,oa);g={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(A in g)t.bind("layoutpane"+A.toLowerCase()+
"."+Ja,B[g[A]||A]);vb(a,!1);m||(C=f.size=va(a,e.size),m=va(a,e.minSize)||1,A=va(a,e.maxSize)||1E5,0<C&&(C=b(c(C,A),m)),f.autoResize=e.autoResize,f.isClosed=!1,f.isSliding=!1,f.isResizing=!1,f.isHidden=!1,f.pins||(f.pins=[]));f.tagName=t[0].tagName;f.edge=a;f.noRoom=!1;f.isVisible=!0;Gb(a);"horz"===h?n.height=D(t,C):"vert"===h&&(n.width=E(t,C));t.css(n);"horz"!=h&&aa(a,!0);F.initialized&&(Ra(a),qb(a));e.initClosed&&e.closable&&!e.initHidden?fa(a,!0,!0):e.initHidden||e.initClosed?ab(a):f.noRoom||t.css("display",
"block");t.css("visibility","visible");e.showOverflowOnHover&&t.hover(l,v);F.initialized&&Oa(a)}else P[a]=!1}},Oa=function(a){var b=P[a],d=F[a],c=z[a];b&&(b.data("layout")&&qa(a,b.data("layout")),d.isVisible&&(F.initialized?kb():Ca(a),c.triggerEventsOnLoad?T("onresize_end",a):lb(a,!0)),c.initChildren&&c.children&&jb(a))},Gb=function(b){b=b?b.split(","):w.borderPanes;a.each(b,function(a,b){var d=P[b],c=ma[b],e=F[b],f=w[b].side,g={};if(d){switch(b){case "north":g.top=X.inset.top;g.left=X.inset.left;
g.right=X.inset.right;break;case "south":g.bottom=X.inset.bottom;g.left=X.inset.left;g.right=X.inset.right;break;case "west":g.left=X.inset.left;break;case "east":g.right=X.inset.right}d.css(g);c&&e.isClosed?c.css(f,X.inset[f]):c&&!e.isHidden&&c.css(f,X.inset[f]+ha(b))}})},Ra=function(b){b=b?b.split(","):w.borderPanes;a.each(b,function(b,d){var c=P[d];ma[d]=!1;ya[d]=!1;if(c){var c=z[d],e=F[d],f="#"===c.paneSelector.substr(0,1)?c.paneSelector.substr(1):"",g=c.resizerClass,h=c.togglerClass,l="-"+d,
m=B[d],K=m.resizer=ma[d]=a("<div></div>"),m=m.toggler=c.closable?ya[d]=a("<div></div>"):!1;!e.isVisible&&c.slidable&&K.attr("title",c.tips.Slide).css("cursor",c.sliderCursor);K.attr("id",f?f+"-resizer":"").data({parentLayout:B,layoutPane:B[d],layoutEdge:d,layoutRole:"resizer"}).css(w.resizers.cssReq).css("zIndex",z.zIndexes.resizer_normal).css(c.applyDemoStyles?w.resizers.cssDemo:{}).addClass(g+" "+g+l).hover(ka,oa).hover(sa,N).appendTo(Q);c.resizerDblClickToggle&&K.bind("dblclick."+Ja,hb);m&&(m.attr("id",
f?f+"-toggler":"").data({parentLayout:B,layoutPane:B[d],layoutEdge:d,layoutRole:"toggler"}).css(w.togglers.cssReq).css(c.applyDemoStyles?w.togglers.cssDemo:{}).addClass(h+" "+h+l).hover(ka,oa).bind("mouseenter",sa).appendTo(K),c.togglerContent_open&&a("<span>"+c.togglerContent_open+"</span>").data({layoutEdge:d,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",d).addClass("content content-open").css("display","none").appendTo(m),c.togglerContent_closed&&a("<span>"+
c.togglerContent_closed+"</span>").data({layoutEdge:d,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(m),Db(d));wb(d);e.isVisible?yb(d):(Ba(d),Xa(d,!0))}});ba()},vb=function(a,b){if(da()){var d=z[a],c=d.contentSelector,e=B[a],f=P[a],g;c&&(g=e.content=Sa[a]=d.findNestedContent?f.find(c).eq(0):f.children(c).eq(0));g&&g.length?(g.data("layoutRole","content"),g.data("layoutCSS")||g.data("layoutCSS",I(g,"height")),g.css(w.content.cssReq),d.applyDemoStyles&&
(g.css(w.content.cssDemo),f.css(w.content.cssDemoPane)),f.css("overflowX").match(/(scroll|auto)/)&&f.css("overflow","hidden"),F[a].content={},!1!==b&&Ca(a)):e.content=Sa[a]=!1}},wb=function(b){var d=a.layout.plugins.draggable;b=b?b.split(","):w.borderPanes;a.each(b,function(b,e){var f=z[e];if(!d||!P[e]||!f.resizable)return f.resizable=!1,!0;var g=F[e],h=z.zIndexes,B=w[e],l="horz"==B.dir?"top":"left",m=ma[e],K=f.resizerClass,n=0,p,q,t=K+"-drag",C=K+"-"+e+"-drag",v=K+"-dragging",A=K+"-"+e+"-dragging",
D=K+"-dragging-limit",aa=K+"-"+e+"-dragging-limit",E=!1;g.isClosed||m.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);m.draggable({containment:Q[0],axis:"horz"==B.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:h.resizer_drag,start:function(b,d){f=z[e];g=F[e];q=f.livePaneResizing;if(!1===T("ondrag_start",e))return!1;g.isResizing=!0;F.paneResizing=e;S.clear(e+"_closeSlider");wa(e);p=g.resizerPosition;n=d.position[l];m.addClass(t+
" "+C);E=!1;a("body").disableSelection();Bb(e,{resizing:!0})},drag:function(a,b){E||(b.helper.addClass(v+" "+A).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),E=!0,g.isSliding&&P[e].css("zIndex",h.pane_sliding));var d=0;b.position[l]<p.min?(b.position[l]=p.min,d=-1):b.position[l]>p.max&&(b.position[l]=p.max,d=1);d?(b.helper.addClass(D+" "+aa),window.defaultStatus=0<d&&e.match(/(north|west)/)||0>d&&e.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(D+
" "+aa),window.defaultStatus="");q&&Math.abs(b.position[l]-n)>=f.liveResizingTolerance&&(n=b.position[l],c(a,b,e))},stop:function(b,d){a("body").enableSelection();window.defaultStatus="";m.removeClass(t+" "+C);g.isResizing=!1;F.paneResizing=!1;c(b,d,e,!0)}})});var c=function(a,b,d,c){var e=b.position,f=w[d];a=z[d];b=F[d];var g;switch(d){case "north":g=e.top;break;case "west":g=e.left;break;case "south":g=X.layoutHeight-e.top-a.spacing_open;break;case "east":g=X.layoutWidth-e.left-a.spacing_open}g-=
X.inset[f.side];c?(!1!==T("ondrag_end",d)&&Z(d,g,!1,!0),xb(!0),b.isSliding&&Bb(d,{resizing:!0})):Math.abs(g-b.size)<a.liveResizingTolerance||(Z(d,g,!1,!0),Ma.each(Mb))}},Mb=function(){var b=a(this),d=b.data("layoutMask"),d=F[d];"IFRAME"==d.tagName&&d.isVisible&&b.css({top:d.offsetTop,left:d.offsetLeft,width:d.outerWidth,height:d.outerHeight})},Bb=function(b,d){var c=w[b],e=["center"],f=z.zIndexes,g=a.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:F[b].isSliding},d),h,B;g.resizing&&e.push(b);
g.sliding&&e.push(w.oppositeEdge[b]);"horz"===c.dir&&(e.push("west"),e.push("east"));a.each(e,function(a,b){B=F[b];h=z[b];B.isVisible&&(h.maskObjects||!g.objectsOnly&&h.maskContents)&&Ia(b).each(function(){Mb.call(this);this.style.zIndex=B.isSliding?f.pane_sliding+1:f.pane_normal+1;this.style.display="block"})})},xb=function(b){if(b||!F.paneResizing)Ma.hide();else if(!b&&!a.isEmptyObject(F.panesSliding)){b=Ma.length-1;for(var d,c;0<=b;b--)c=Ma.eq(b),d=c.data("layoutMask"),z[d].maskObjects||c.hide()}},
Ia=function(b){for(var d=a([]),c,e=0,f=Ma.length;e<f;e++)c=Ma.eq(e),c.data("layoutMask")===b&&(d=d.add(c));if(d.length)return d;d=P[b];c=F[b];var e=z[b],f=z.zIndexes,g=a([]),h,B,l,m,n;if(e.maskContents||e.maskObjects)for(n=0;n<(e.maskObjects?2:1);n++)h=e.maskObjects&&0==n,B=document.createElement(h?"iframe":"div"),l=a(B).data("layoutMask",b),B.className="ui-layout-mask ui-layout-mask-"+b,m=B.style,m.display="block",m.position="absolute",m.background="#FFF",h&&(B.frameborder=0,B.src="about:blank",
m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==c.tagName?(m.zIndex=f.pane_normal+1,Q.append(B)):(l.addClass("ui-layout-mask-inside-pane"),m.zIndex=e.maskZindex||f.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",d.append(B)),g=g.add(B),Ma=Ma.add(B);return g},Nb=function(b,d,c,e){if(da()){b=t.call(this,b);var f=P[b],g=Sa[b],h=ma[b],l=ya[b];f&&a.isEmptyObject(f.data())&&(f=!1);g&&a.isEmptyObject(g.data())&&(g=!1);h&&a.isEmptyObject(h.data())&&(h=!1);l&&a.isEmptyObject(l.data())&&
(l=!1);f&&f.stop(!0,!0);var m=z[b],n=O[b],p=a.isPlainObject(n)&&!a.isEmptyObject(n);e=void 0!==e?e:m.destroyChildren;p&&e&&(a.each(n,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete n[a]}),a.isEmptyObject(n)&&(n=O[b]=null,p=!1));f&&d&&!p?f.remove():f&&f[0]&&(d=m.paneClass,e=d+"-"+b,d=[d,d+"-open",d+"-closed",d+"-sliding",e,e+"-open",e+"-closed",e+"-sliding"],a.merge(d,ua(f,!0)),f.removeClass(d.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+
Ja),p&&g?(g.width(g.width()),a.each(n,function(a,b){b.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),f.data("layout")||f.css(f.data("layoutCSS")).removeData("layoutCSS"));l&&l.remove();h&&h.remove();B[b]=P[b]=Sa[b]=ma[b]=ya[b]=!1;c||kb()}},$a=function(a){var b=P[a],d=b[0].style;z[a].useOffscreenClose?(b.data(w.offscreenReset)||b.data(w.offscreenReset,{left:d.left,right:d.right}),b.css(w.offscreenCSS)):b.hide().removeData(w.offscreenReset)},Rb=function(a){var b=
P[a];a=z[a];var d=w.offscreenCSS,c=b.data(w.offscreenReset),e=b[0].style;b.show().removeData(w.offscreenReset);a.useOffscreenClose&&c&&(e.left==d.left&&(e.left=c.left),e.right==d.right&&(e.right=c.right))},ab=function(a,b){if(da()){var d=t.call(this,a),c=z[d],e=F[d],f=ma[d];!P[d]||e.isHidden||F.initialized&&!1===T("onhide_start",d)||(e.isSliding=!1,delete F.panesSliding[d],f&&f.hide(),!F.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,F.initialized||$a(d),aa("horz"===w[d].dir?
"":"center"),(F.initialized||c.triggerEventsOnLoad)&&T("onhide_end",d)):(e.isHiding=!0,fa(d,!1,b)))}},fb=function(a,b,d,c){if(da()){a=t.call(this,a);var e=F[a];P[a]&&e.isHidden&&!1!==T("onshow_start",a)&&(e.isShowing=!0,e.isSliding=!1,delete F.panesSliding[a],!1===b?fa(a,!0):rb(a,!1,d,c))}},hb=function(a,b){if(da()){var d=C(a),c=t.call(this,a),e=F[c];d&&d.stopImmediatePropagation();e.isHidden?fb(c):e.isClosed?rb(c,!!b):fa(c)}},gb=function(a,b){var d=F[a];$a(a);d.isClosed=!0;d.isVisible=!1;b&&Ba(a)},
fa=function(a,b,d,c){function e(){B.isMoving=!1;Xa(f,!0);var a=w.oppositeEdge[f];F[a].noRoom&&(wa(a),db(a));c||!F.initialized&&!h.triggerEventsOnLoad||(m||T("onclose_end",f),m&&T("onshow_end",f),n&&T("onhide_end",f))}var f=t.call(this,a);if(!F.initialized&&P[f])gb(f,!0);else if(da()){var g=P[f],h=z[f],B=F[f],l,m,n;Q.queue(function(a){if(!g||!h.closable&&!B.isShowing&&!B.isHiding||!b&&B.isClosed&&!B.isShowing)return a();var c=!B.isShowing&&!1===T("onclose_start",f);m=B.isShowing;n=B.isHiding;delete B.isShowing;
delete B.isHiding;if(c)return a();l=!d&&!B.isClosed&&"none"!=h.fxName_close;B.isMoving=!0;B.isClosed=!0;B.isVisible=!1;n?B.isHidden=!0:m&&(B.isHidden=!1);B.isSliding?bb(f,!1):aa("horz"===w[f].dir?"":"center",!1);Ba(f);l?(Tb(f,!0),g.hide(h.fxName_close,h.fxSettings_close,h.fxSpeed_close,function(){Tb(f,!1);B.isClosed&&e();a()})):($a(f),e(),a())})}},Ba=function(b){if(ma[b]){var d=ma[b],c=ya[b],e=z[b],f=w[b].side,g=e.resizerClass,h=e.togglerClass,B="-"+b;d.css(f,X.inset[f]).removeClass(g+"-open "+g+
B+"-open").removeClass(g+"-sliding "+g+B+"-sliding").addClass(g+"-closed "+g+B+"-closed");e.resizable&&a.layout.plugins.draggable&&d.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");c&&(c.removeClass(h+"-open "+h+B+"-open").addClass(h+"-closed "+h+B+"-closed").attr("title",e.tips.Open),c.children(".content-open").hide(),c.children(".content-closed").css("display","block"));Vb(b,!1);F.initialized&&ba()}},rb=function(a,b,d,c){function e(){B.isMoving=!1;
pa(f);B.isSliding||aa("vert"==w[f].dir?"center":"",!1);yb(f)}if(da()){var f=t.call(this,a),g=P[f],h=z[f],B=F[f],l,m;Q.queue(function(a){if(!g||!h.resizable&&!h.closable&&!B.isShowing||B.isVisible&&!B.isSliding)return a();if(B.isHidden&&!B.isShowing)a(),fb(f,!0);else{B.autoResize&&B.size!=h.size?Pa(f,h.size,!0,!0,!0):wa(f,b);var K=T("onopen_start",f);if("abort"===K)return a();"NC"!==K&&wa(f,b);if(B.minSize>B.maxSize)return Vb(f,!1),!c&&h.tips.noRoomToOpen&&alert(h.tips.noRoomToOpen),a();b?bb(f,!0):
B.isSliding?bb(f,!1):h.slidable&&Xa(f,!1);B.noRoom=!1;db(f);m=B.isShowing;delete B.isShowing;l=!d&&B.isClosed&&"none"!=h.fxName_open;B.isMoving=!0;B.isVisible=!0;B.isClosed=!1;m&&(B.isHidden=!1);l?(Tb(f,!0),g.show(h.fxName_open,h.fxSettings_open,h.fxSpeed_open,function(){Tb(f,!1);B.isVisible&&e();a()})):(Rb(f),e(),a())}})}},yb=function(b,d){var c=P[b],e=ma[b],f=ya[b],g=z[b],h=F[b],B=w[b].side,l=g.resizerClass,m=g.togglerClass,n="-"+b;e.css(B,X.inset[B]+ha(b)).removeClass(l+"-closed "+l+n+"-closed").addClass(l+
"-open "+l+n+"-open");h.isSliding?e.addClass(l+"-sliding "+l+n+"-sliding"):e.removeClass(l+"-sliding "+l+n+"-sliding");oa(0,e);g.resizable&&a.layout.plugins.draggable?e.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):h.isSliding||e.css("cursor","default");f&&(f.removeClass(m+"-closed "+m+n+"-closed").addClass(m+"-open "+m+n+"-open").attr("title",g.tips.Close),oa(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));Vb(b,!h.isSliding);
a.extend(h,J(c));F.initialized&&(ba(),Ca(b,!0));!d&&(F.initialized||g.triggerEventsOnLoad)&&c.is(":visible")&&(T("onopen_end",b),h.isShowing&&T("onshow_end",b),F.initialized&&T("onresize_end",b))},Sb=function(a){function b(){e.isClosed?e.isMoving||rb(c,!0):bb(c,!0)}if(da()){var d=C(a),c=t.call(this,a),e=F[c];a=z[c].slideDelay_open;d&&d.stopImmediatePropagation();e.isClosed&&d&&"mouseenter"===d.type&&0<a?S.set(c+"_openSlider",b,a):b()}},ea=function(d){function c(){g.isClosed?bb(f,!1):g.isMoving||fa(f)}
if(da()){var e=C(d),f=t.call(this,d);d=z[f];var g=F[f],h=g.isMoving?1E3:300;g.isClosed||g.isResizing||("click"===d.slideTrigger_close?c():d.preventQuickSlideClose&&g.isMoving||d.preventPrematureSlideClose&&e&&a.layout.isMouseOverElem(e,P[f])||(e?S.set(f+"_closeSlider",c,b(d.slideDelay_close,h)):c()))}},Tb=function(a,b){var d=P[a],c=F[a],e=z[a],f=z.zIndexes;b?(Bb(a,{animation:!0,objectsOnly:!0}),d.css({zIndex:f.pane_animate}),"south"==a?d.css({top:X.inset.top+X.innerHeight-d.outerHeight()}):"east"==
a&&d.css({left:X.inset.left+X.innerWidth-d.outerWidth()})):(xb(),d.css({zIndex:c.isSliding?f.pane_sliding:f.pane_normal}),"south"==a?d.css({top:"auto"}):"east"!=a||d.css("left").match(/\-99999/)||d.css({left:"auto"}),A.msie&&e.fxOpacityFix&&"slide"!=e.fxName_open&&d.css("filter")&&1==d.css("opacity")&&d[0].style.removeAttribute("filter"))},Xa=function(a,b){var d=z[a],c=ma[a],e=d.slideTrigger_open.toLowerCase();if(c&&(!b||d.slidable)){e.match(/mouseover/)?e=d.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||
(e=d.slideTrigger_open="click");if(d.resizerDblClickToggle&&e.match(/click/))c[b?"unbind":"bind"]("dblclick."+Ja,hb);c[b?"bind":"unbind"](e+"."+Ja,Sb).css("cursor",b?d.sliderCursor:"default").attr("title",b?d.tips.Slide:"")}},bb=function(a,b){function d(b){S.clear(a+"_closeSlider");b.stopPropagation()}var c=z[a],e=F[a],f=z.zIndexes,g=c.slideTrigger_close.toLowerCase(),h=b?"bind":"unbind",B=P[a],l=ma[a];S.clear(a+"_closeSlider");b?(e.isSliding=!0,F.panesSliding[a]=!0,Xa(a,!1)):(e.isSliding=!1,delete F.panesSliding[a]);
B.css("zIndex",b?f.pane_sliding:f.pane_normal);l.css("zIndex",b?f.pane_sliding+2:f.resizer_normal);g.match(/(click|mouseleave)/)||(g=c.slideTrigger_close="mouseleave");l[h](g,ea);"mouseleave"===g&&(B[h]("mouseleave."+Ja,ea),l[h]("mouseenter."+Ja,d),B[h]("mouseenter."+Ja,d));b?"click"!==g||c.resizable||(l.css("cursor",b?c.sliderCursor:"default"),l.attr("title",b?c.tips.Close:"")):S.clear(a+"_closeSlider")},db=function(b,d,c,e){d=z[b];var f=F[b],g=w[b],h=P[b],B=ma[b],l="vert"===g.dir,m=!1;if("center"===
b||l&&f.noVerticalRoom)(m=0<=f.maxHeight)&&f.noRoom?(Rb(b),B&&B.show(),f.isVisible=!0,f.noRoom=!1,l&&(f.noVerticalRoom=!1),pa(b)):m||f.noRoom||($a(b),B&&B.hide(),f.isVisible=!1,f.noRoom=!0);"center"!==b&&(f.minSize<=f.maxSize?(f.size>f.maxSize?Pa(b,f.maxSize,c,!0,e):f.size<f.minSize?Pa(b,f.minSize,c,!0,e):B&&f.isVisible&&h.is(":visible")&&(c=f.size+X.inset[g.side],a.layout.cssNum(B,g.side)!=c&&B.css(g.side,c)),f.noRoom&&(f.wasOpen&&d.closable?d.autoReopen?rb(b,!1,!0,!0):f.noRoom=!1:fb(b,f.wasOpen,
!0,!0))):f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(d.closable?fa(b,!0,!0):ab(b,!0))))},Z=function(a,b,d,c,e){if(da()){a=t.call(this,a);var f=z[a],g=F[a];e=e||f.livePaneResizing&&!g.isResizing;g.autoResize=!1;Pa(a,b,d,c,e)}},Pa=function(d,e,f,g,h){function B(){for(var d="width"===v?p.outerWidth():p.outerHeight(),d=[{pane:l,count:1,target:e,actual:d,correct:e===d,attempt:e,cssSize:pa}],c=d[0],g={},m="Inaccurate size after resizing the "+l+"-pane.";!c.correct;){g={pane:l,
count:c.count+1,target:e};g.attempt=c.actual>e?b(0,c.attempt-(c.actual-e)):b(0,c.attempt+(e-c.actual));g.cssSize=("horz"==w[l].dir?D:E)(P[l],g.attempt);p.css(v,g.cssSize);g.actual="width"==v?p.outerWidth():p.outerHeight();g.correct=e===g.actual;1===d.length&&(V(m,!1,!0),V(c,!1,!0));V(g,!1,!0);if(3<d.length)break;d.push(g);c=d[d.length-1]}n.size=e;a.extend(n,J(p));n.isVisible&&p.is(":visible")&&(q&&q.css(C,e+X.inset[C]),Ca(l));!f&&!A&&F.initialized&&n.isVisible&&T("onresize_end",l);f||(n.isSliding||
aa("horz"==w[l].dir?"":"center",A,h),ba());c=w.oppositeEdge[l];e<O&&F[c].noRoom&&(wa(c),db(c,!1,f));1<d.length&&V(m+"\nSee the Error Console for details.",!0,!0)}if(da()){var l=t.call(this,d),m=z[l],n=F[l],p=P[l],q=ma[l],C=w[l].side,v=w[l].sizeType.toLowerCase(),A=n.isResizing&&!m.triggerEventsDuringLiveResize,I=!0!==g&&m.animatePaneSizing,O,pa;Q.queue(function(d){wa(l);O=n.size;e=va(l,e);e=b(e,va(l,m.minSize));e=c(e,n.maxSize);if(e<n.minSize)d(),db(l,!1,f);else{if(!h&&e===O)return d();n.newSize=
e;!f&&F.initialized&&n.isVisible&&T("onresize_start",l);pa=("horz"==w[l].dir?D:E)(P[l],e);if(I&&p.is(":visible")){var g=a.layout.effects.size[l]||a.layout.effects.size.all,g=m.fxSettings_size.easing||g.easing,K=z.zIndexes,q={};q[v]=pa+"px";n.isMoving=!0;p.css({zIndex:K.pane_animate}).show().animate(q,m.fxSpeed_size,g,function(){p.css({zIndex:n.isSliding?K.pane_sliding:K.pane_normal});n.isMoving=!1;delete n.newSize;B();d()})}else p.css(v,pa),delete n.newSize,p.is(":visible")?B():(n.size=e,a.extend(n,
J(p))),d()}})}},aa=function(d,c,e){d=(d?d:"east,west,center").split(",");a.each(d,function(d,f){if(P[f]){var g=z[f],h=F[f],B=P[f],l=!0,m={},n=a.layout.showInvisibly(B),K={top:ha("north",!0),bottom:ha("south",!0),left:ha("west",!0),right:ha("east",!0),width:0,height:0};K.width=X.innerWidth-K.left-K.right;K.height=X.innerHeight-K.bottom-K.top;K.top+=X.inset.top;K.bottom+=X.inset.bottom;K.left+=X.inset.left;K.right+=X.inset.right;a.extend(h,J(B));if("center"===f){if(!e&&h.isVisible&&K.width===h.outerWidth&&
K.height===h.outerHeight)return B.css(n),!0;a.extend(h,La(f),{maxWidth:K.width,maxHeight:K.height});m=K;h.newWidth=m.width;h.newHeight=m.height;m.width=E(B,m.width);m.height=D(B,m.height);l=0<=m.width&&0<=m.height;if(!F.initialized&&g.minWidth>K.width){var g=g.minWidth-h.outerWidth,K=z.east.minSize||0,p=z.west.minSize||0,q=F.east.size,t=F.west.size,C=q,v=t;0<g&&F.east.isVisible&&q>K&&(C=b(q-K,q-g),g-=q-C);0<g&&F.west.isVisible&&t>p&&(v=b(t-p,t-g),g-=t-v);if(0===g){q&&q!=K&&Pa("east",C,!0,!0,e);t&&
t!=p&&Pa("west",v,!0,!0,e);aa("center",c,e);B.css(n);return}}}else{h.isVisible&&!h.noVerticalRoom&&a.extend(h,J(B),La(f));if(!e&&!h.noVerticalRoom&&K.height===h.outerHeight)return B.css(n),!0;m.top=K.top;m.bottom=K.bottom;h.newSize=K.height;m.height=D(B,K.height);h.maxHeight=m.height;l=0<=h.maxHeight;l||(h.noVerticalRoom=!0)}l?(!c&&F.initialized&&T("onresize_start",f),B.css(m),"center"!==f&&ba(f),!h.noRoom||h.isClosed||h.isHidden||db(f),h.isVisible&&(a.extend(h,J(B)),F.initialized&&Ca(f))):!h.noRoom&&
h.isVisible&&db(f);B.css(n);delete h.newSize;delete h.newWidth;delete h.newHeight;if(!h.isVisible)return!0;"center"===f&&(h=A.isIE6||!A.boxModel,P.north&&(h||"IFRAME"==F.north.tagName)&&P.north.css("width",E(P.north,X.innerWidth)),P.south&&(h||"IFRAME"==F.south.tagName)&&P.south.css("width",E(P.south,X.innerWidth)));!c&&F.initialized&&T("onresize_end",f)}})},kb=function(b){t(b);if(Q.is(":visible"))if(F.initialized){if(!0===b&&a.isPlainObject(z.outset)&&Q.css(z.outset),a.extend(X,J(Q,z.inset)),X.outerHeight){!0===
b&&Gb();if(!1===T("onresizeall_start"))return!1;var d,c,e;a.each(["south","north","east","west"],function(a,b){P[b]&&(c=z[b],e=F[b],e.autoResize&&e.size!=c.size?Pa(b,c.size,!0,!0,!0):(wa(b),db(b,!1,!0,!0)))});aa("",!0,!0);ba();a.each(w.allPanes,function(a,b){(d=P[b])&&F[b].isVisible&&T("onresize_end",b)});T("onresizeall_end")}}else pb()},lb=function(b,d){var c=t.call(this,b);z[c].resizeChildren&&(d||qa(c),c=O[c],a.isPlainObject(c)&&a.each(c,function(a,b){b.destroyed||b.resizeAll()}))},Ca=function(d,
c){if(da()){var e=t.call(this,d),e=e?e.split(","):w.allPanes;a.each(e,function(a,d){function e(a){return b(l.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function f(){var a=z[d].contentIgnoreSelector,a=h.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),b=a.filter(":visible"),c=b.filter(":last");m={top:h[0].offsetTop,height:h.outerHeight(),numFooters:a.length,hiddenFooters:a.length-b.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;m.spaceBelow=c.length?c[0].offsetTop+c.outerHeight()-
m.bottom+e(c):e(h)}var g=P[d],h=Sa[d],B=z[d],l=F[d],m=l.content;if(!g||!h||!g.is(":visible"))return!0;if(!h.length&&(vb(d,!1),!h))return;if(!1!==T("onsizecontent_start",d)){if(!l.isMoving&&!l.isResizing||B.liveContentResizing||c||void 0==m.top)f(),0<m.hiddenFooters&&"hidden"===g.css("overflow")&&(g.css("overflow","visible"),f(),g.css("overflow","hidden"));g=l.innerHeight-(m.spaceAbove-l.css.paddingTop)-(m.spaceBelow-l.css.paddingBottom);h.is(":visible")&&m.height==g||(Wa(h,g,!0),m.height=g);F.initialized&&
T("onsizecontent_end",d)}})}},ba=function(b){b=(b=t.call(this,b))?b.split(","):w.borderPanes;a.each(b,function(b,c){var f=z[c],g=F[c],h=P[c],B=ma[c],l=ya[c],m;if(h&&B){var n=w[c].dir,K=g.isClosed?"_closed":"_open",p=f["spacing"+K],q=f["togglerAlign"+K],K=f["togglerLength"+K],t;if(0===p)B.hide();else{g.noRoom||g.isHidden||B.show();"horz"===n?(t=X.innerWidth,g.resizerLength=t,h=a.layout.cssNum(h,"left"),B.css({width:E(B,t),height:D(B,p),left:-9999<h?h:X.inset.left})):(t=h.outerHeight(),g.resizerLength=
t,B.css({height:D(B,t),width:E(B,p),top:X.inset.top+ha("north",!0)}));oa(f,B);if(l){if(0===K||g.isSliding&&f.hideTogglerOnSlide){l.hide();return}l.show();if(!(0<K)||"100%"===K||K>t)K=t,q=0;else if(e(q))switch(q){case "top":case "left":q=0;break;case "bottom":case "right":q=t-K;break;default:q=d((t-K)/2)}else h=parseInt(q,10),q=0<=q?h:t-K+h;if("horz"===n){var C=E(l,K);l.css({width:C,height:D(l,p),left:q,top:0});l.children(".content").each(function(){m=a(this);m.css("marginLeft",d((C-m.outerWidth())/
2))})}else{var v=D(l,K);l.css({height:v,width:E(l,p),top:q,left:0});l.children(".content").each(function(){m=a(this);m.css("marginTop",d((v-m.outerHeight())/2))})}oa(0,l)}F.initialized||!f.initHidden&&!g.isHidden||(B.hide(),l&&l.hide())}}})},Db=function(a){if(da()){var b=t.call(this,a);a=ya[b];var d=z[b];a&&(d.closable=!0,a.bind("click."+Ja,function(a){a.stopPropagation();hb(b)}).css("visibility","visible").css("cursor","pointer").attr("title",F[b].isClosed?d.tips.Open:d.tips.Close).show())}},Vb=
function(b,d){a.layout.plugins.buttons&&a.each(F[b].pins,function(c,e){a.layout.buttons.setPinState(B,a(e),b,d)})},Q=a(this).eq(0);if(!Q.length)return V(z.errors.containerMissing);if(Q.data("layoutContainer")&&Q.data("layout"))return Q.data("layout");var P={},Sa={},ma={},ya={},Ma=a([]),X=F.container,Ja=F.id,B={options:z,state:F,container:Q,panes:P,contents:Sa,resizers:ma,togglers:ya,hide:ab,show:fb,toggle:hb,open:rb,close:fa,slideOpen:Sb,slideClose:ea,slideToggle:function(a){a=t.call(this,a);hb(a,
!0)},setSizeLimits:wa,_sizePane:Pa,sizePane:Z,sizeContent:Ca,swapPanes:function(d,c){function e(b){var d=P[b],c=Sa[b];return d?{pane:b,P:d?d[0]:!1,C:c?c[0]:!1,state:a.extend(!0,{},F[b]),options:a.extend(!0,{},z[b])}:!1}function f(d,c){if(d){var e=d.P,g=d.C,h=d.pane,l=w[c],n=a.extend(!0,{},F[c]),K=z[c],p={resizerCursor:K.resizerCursor};a.each(["fxName","fxSpeed","fxSettings"],function(a,b){p[b+"_open"]=K[b+"_open"];p[b+"_close"]=K[b+"_close"];p[b+"_size"]=K[b+"_size"]});P[c]=a(e).data({layoutPane:B[c],
layoutEdge:c}).css(w.hidden).css(l.cssReq);Sa[c]=g?a(g):!1;z[c]=a.extend(!0,{},d.options,p);F[c]=a.extend(!0,{},d.state);e.className=e.className.replace(new RegExp(K.paneClass+"-"+h,"g"),K.paneClass+"-"+c);Ra(c);l.dir!=w[h].dir?(e=m[c]||0,wa(c),e=b(e,F[c].minSize),Z(c,e,!0,!0)):ma[c].css(l.side,X.inset[l.side]+(F[c].isVisible?ha(c):0));d.state.isVisible&&!n.isVisible?yb(c,!0):(Ba(c),Xa(c,!0));d=null}}if(da()){var g=t.call(this,d);F[g].edge=c;F[c].edge=g;if(!1===T("onswap_start",g)||!1===T("onswap_start",
c))F[g].edge=g,F[c].edge=c;else{var h=e(g),l=e(c),m={};m[g]=h?h.state.size:0;m[c]=l?l.state.size:0;P[g]=!1;P[c]=!1;F[g]={};F[c]={};ya[g]&&ya[g].remove();ya[c]&&ya[c].remove();ma[g]&&ma[g].remove();ma[c]&&ma[c].remove();ma[g]=ma[c]=ya[g]=ya[c]=!1;f(h,c);f(l,g);h=l=m=null;P[g]&&P[g].css(w.visible);P[c]&&P[c].css(w.visible);kb();T("onswap_end",g);T("onswap_end",c)}}},showMasks:Bb,hideMasks:xb,initContent:vb,addPane:Lb,removePane:Nb,createChildren:jb,refreshChildren:qa,enableClosable:Db,disableClosable:function(a,
b){if(da()){var d=t.call(this,a),c=ya[d];c&&(z[d].closable=!1,F[d].isClosed&&rb(d,!1,!0),c.unbind("."+Ja).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(da()){a=t.call(this,a);var b=ma[a];b&&b.data("draggable")&&(z[a].slidable=!0,F[a].isClosed&&Xa(a,!0))}},disableSlidable:function(a){if(da()){a=t.call(this,a);var b=ma[a];b&&(z[a].slidable=!1,F[a].isSliding?fa(a,!1,!0):(Xa(a,!1),b.css("cursor","default").attr("title",""),oa(null,b[0])))}},
enableResizable:function(a){if(da()){a=t.call(this,a);var b=ma[a],d=z[a];b&&b.data("draggable")&&(d.resizable=!0,b.draggable("enable"),F[a].isClosed||b.css("cursor",d.resizerCursor).attr("title",d.tips.Resize))}},disableResizable:function(a){if(da()){a=t.call(this,a);var b=ma[a];b&&b.data("draggable")&&(z[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),oa(null,b[0]))}},allowOverflow:l,resetOverflow:v,destroy:function(b,d){a(window).unbind("."+Ja);a(document).unbind("."+
Ja);"object"===typeof b?t(b):d=b;Q.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(z.containerClass).unbind("."+Ja);Ma.remove();a.each(w.allPanes,function(a,b){Nb(b,!1,!0,d)});Q.data("layoutCSS")&&!Q.data("layoutRole")&&Q.css(Q.data("layoutCSS")).removeData("layoutCSS");"BODY"===X.tagName&&(Q=a("html")).data("layoutCSS")&&Q.css(Q.data("layoutCSS")).removeData("layoutCSS");f(B,a.layout.onDestroy);ca();for(var c in B)c.match(/^(container|options)$/)||delete B[c];B.destroyed=
!0;return B},initPanes:da,resizeAll:kb,runCallbacks:T,hasParentLayout:!1,children:O,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){ub();var b=z,d=F;d.creatingLayout=!0;f(B,a.layout.onCreate);if(!1===T("onload_start"))return"cancel";var c=Q[0],e=a("html"),g=X.tagName=c.tagName,h=X.id=c.id,l=X.className=c.className,c=z,m=c.name,n={},p=Q.data("parentLayout"),q=Q.data("layoutEdge"),t=p&&q,C=a.layout.cssNum,v;X.selector=Q.selector.split(".slice")[0];X.ref=(c.name?c.name+" layout / ":
"")+g+(h?"#"+h:l?".["+l+"]":"");X.isBody="BODY"===g;t||X.isBody||(g=Q.closest("."+a.layout.defaults.panes.paneClass),p=g.data("parentLayout"),q=g.data("layoutEdge"),t=p&&q);Q.data({layout:B,layoutContainer:Ja}).addClass(c.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(m in g)Q.bind("layout"+m.toLowerCase()+"."+Ja,B[g[m]||m]);t&&(B.hasParentLayout=!0,p.refreshChildren(q,B));Q.data("layoutCSS")||(X.isBody?(Q.data("layoutCSS",a.extend(I(Q,"position,margin,padding,border"),
{height:Q.css("height"),overflow:Q.css("overflow"),overflowX:Q.css("overflowX"),overflowY:Q.css("overflowY")})),e.data("layoutCSS",a.extend(I(e,"padding"),{height:"auto",overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}))):Q.data("layoutCSS",I(Q,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{n={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};Q.css(n);c.inset&&!a.isPlainObject(c.inset)&&(v=parseInt(c.inset,
10)||0,c.inset={top:v,bottom:v,left:v,right:v});if(X.isBody)c.outset?a.isPlainObject(c.outset)||(v=parseInt(c.outset,10)||0,c.outset={top:v,bottom:v,left:v,right:v}):c.outset={top:C(e,"paddingTop"),bottom:C(e,"paddingBottom"),left:C(e,"paddingLeft"),right:C(e,"paddingRight")},e.css(n).css({height:"100%",border:"none",padding:0,margin:0}),A.isIE6?(Q.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),c.inset||(c.inset=J(Q).inset)):(Q.css({width:"auto",height:"auto",
margin:0,position:"absolute"}),Q.css(c.outset)),a.extend(X,J(Q,c.inset));else{var w=Q.css("position");w&&w.match(/(fixed|absolute|relative)/)||Q.css("position","relative");Q.is(":visible")&&(a.extend(X,J(Q,c.inset)),1>X.innerHeight&&V(c.errors.noContainerHeight.replace(/CONTAINER/,X.ref)))}C(Q,"minWidth")&&Q.parent().css("overflowX","auto");C(Q,"minHeight")&&Q.parent().css("overflowY","auto")}catch(D){}qb();a(window).bind("unload."+Ja,ca);f(B,a.layout.onLoad);b.initPanes&&pb();delete d.creatingLayout;
return F.initialized}()?null:B}})(jQuery);
(function(a){a.ui||(a.ui={});a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(c){for(var b=document.cookie,b=b?b.split(";"):[],d,e=0,f=b.length;e<f;e++)if(d=a.trim(b[e]).split("="),d[0]==c)return decodeURIComponent(d[1]);return null},write:function(c,b,d){var e="",f="",g=!1;d=d||{};var h=d.expires||null,l=a.type(h);"date"===l?f=h:"string"===l&&0<h&&(h=parseInt(h,10),l="number");"number"===l&&(f=new Date,0<h?f.setDate(f.getDate()+h):(f.setFullYear(1970),g=!0));f&&(e+=";expires="+
f.toUTCString());d.path&&(e+=";path="+d.path);d.domain&&(e+=";domain="+d.domain);d.secure&&(e+=";secure");document.cookie=c+"="+(g?"":encodeURIComponent(b))+e},clear:function(c){a.ui.cookie.write(c,"",{expires:-1})}};a.cookie||(a.cookie=function(c,b,d){var e=a.ui.cookie;if(null===b)e.clear(c);else{if(void 0===b)return e.read(c);e.write(c,b,d)}});a.layout.plugins.stateManagement=!0;a.layout.config.optionRootKeys.push("stateManagement");a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,
animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};a.layout.optionsMap.layout.push("stateManagement");a.layout.state={saveCookie:function(c,b,d){var e=c.options,f=e.stateManagement;d=a.extend(!0,{},f.cookie,d||null);c=c.state.stateData=c.readState(b||f.stateKeys);a.ui.cookie.write(d.name||e.name||
"Layout",a.layout.state.encodeJSON(c),d);return a.extend(!0,{},c)},deleteCookie:function(c){c=c.options;a.ui.cookie.clear(c.stateManagement.cookie.name||c.name||"Layout")},readCookie:function(c){c=c.options;return(c=a.ui.cookie.read(c.stateManagement.cookie.name||c.name||"Layout"))?a.layout.state.decodeJSON(c):{}},loadCookie:function(c){var b=a.layout.state.readCookie(c);b&&(c.state.stateData=a.extend(!0,{},b),c.loadState(b));return b},loadState:function(c,b,d){if(a.isPlainObject(b)&&!a.isEmptyObject(b))if(b=
c.state.stateData=a.layout.transformData(b),d=a.extend({animateLoad:!1,includeChildren:c.options.stateManagement.includeChildren},d),c.state.initialized){var e=!d.animateLoad,f,g,h,l;a.each(a.layout.config.borderPanes,function(d,m){q=b[m];a.isPlainObject(q)&&(s=q.size,f=q.initClosed,g=q.initHidden,ar=q.autoResize,h=c.state[m],l=h.isVisible,ar&&(h.autoResize=ar),l||c._sizePane(m,s,!1,!1,!1),!0===g?c.hide(m,e):!0===f?c.close(m,!1,e):!1===f?c.open(m,!1,e):!1===g&&c.show(m,!1,e),l&&c._sizePane(m,s,!1,
!1,e))});if(d.includeChildren){var m,n;a.each(c.children,function(d,c){(m=b[d]?b[d].children:0)&&c&&a.each(c,function(a,b){n=m[a];b&&n&&b.loadState(n)})})}}else{var q=a.extend(!0,{},b);a.each(a.layout.config.allPanes,function(a,b){q[b]&&delete q[b].children});a.extend(!0,c.options,q)}},readState:function(c,b){"string"===a.type(b)&&(b={keys:b});b||(b={});var d=c.options.stateManagement,e=b.includeChildren,e=void 0!==e?e:d.includeChildren,d=b.stateKeys||d.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},
g=c.state,h=a.layout.config.allPanes,l={},m,n,q,v,A,w;a.isArray(d)&&(d=d.join(","));for(var d=d.replace(/__/g,".").split(","),E=0,D=d.length;E<D;E++)m=d[E].split("."),n=m[0],m=m[1],0>a.inArray(n,h)||(q=g[n][m],void 0!=q&&("isClosed"==m&&g[n].isSliding&&(q=!0),(l[n]||(l[n]={}))[f[m]?f[m]:m]=q));e&&a.each(h,function(b,d){A=c.children[d];v=g.stateData[d];a.isPlainObject(A)&&!a.isEmptyObject(A)&&(w=l[d]||(l[d]={}),w.children||(w.children={}),a.each(A,function(b,d){d.state.initialized?w.children[b]=a.layout.state.readState(d):
v&&v.children&&v.children[b]&&(w.children[b]=a.extend(!0,{},v.children[b]))}))});return l},encodeJSON:function(c){function b(d){var c=[],f=0,g,h,l,m=a.isArray(d);for(g in d)h=d[g],l=typeof h,"string"==l?h='"'+h+'"':"object"==l&&(h=b(h)),c[f++]=(m?"":'"'+g+'":')+h;return(m?"[":"{")+c.join(",")+(m?"]":"}")}return b(c)},decodeJSON:function(c){try{return a.parseJSON?a.parseJSON(c):window.eval("("+c+")")||{}}catch(b){return{}}},_create:function(c){var b=a.layout.state,d=c.options.stateManagement;a.extend(c,
{readCookie:function(){return b.readCookie(c)},deleteCookie:function(){b.deleteCookie(c)},saveCookie:function(a,d){return b.saveCookie(c,a,d)},loadCookie:function(){return b.loadCookie(c)},loadState:function(a,d){b.loadState(c,a,d)},readState:function(a){return b.readState(c,a)},encodeJSON:b.encodeJSON,decodeJSON:b.decodeJSON});c.state.stateData={};if(d.autoLoad)if(a.isPlainObject(d.autoLoad))a.isEmptyObject(d.autoLoad)||c.loadState(d.autoLoad);else if(d.enabled)if(a.isFunction(d.autoLoad)){var e=
{};try{e=d.autoLoad(c,c.state,c.options,c.options.name||"")}catch(f){}e&&a.isPlainObject(e)&&!a.isEmptyObject(e)&&c.loadState(e)}else c.loadCookie()},_unload:function(c){var b=c.options.stateManagement;if(b.enabled&&b.autoSave)if(a.isFunction(b.autoSave))try{b.autoSave(c,c.state,c.options,c.options.name||"")}catch(d){}else c.saveCookie()}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);a.layout.plugins.buttons=!0;a.layout.defaults.autoBindCustomButtons=
!1;a.layout.optionsMap.layout.push("autoBindCustomButtons");a.layout.buttons={init:function(c){var b=c.options.name||"",d;a.each("toggle open close pin toggle-slide open-slide".split(" "),function(e,f){a.each(a.layout.config.borderPanes,function(e,h){a(".ui-layout-button-"+f+"-"+h).each(function(){d=a(this).data("layoutName")||a(this).attr("layoutName");void 0!=d&&d!==b||c.bindButton(this,f,h)})})})},get:function(c,b,d,e){var f=a(b);c=c.options;var g=c.errors.addButtonError;f.length?0>a.inArray(d,
a.layout.config.borderPanes)?(a.layout.msg(g+" "+c.errors.pane+": "+d,!0),f=a("")):(b=c[d].buttonClass+"-"+e,f.addClass(b+" "+b+"-"+d).data("layoutName",c.name)):a.layout.msg(g+" "+c.errors.selector+": "+b,!0);return f},bind:function(c,b,d,e){var f=a.layout.buttons;switch(d.toLowerCase()){case "toggle":f.addToggle(c,b,e);break;case "open":f.addOpen(c,b,e);break;case "close":f.addClose(c,b,e);break;case "pin":f.addPin(c,b,e);break;case "toggle-slide":f.addToggle(c,b,e,!0);break;case "open-slide":f.addOpen(c,
b,e,!0)}return c},addToggle:function(c,b,d,e){a.layout.buttons.get(c,b,d,"toggle").click(function(a){c.toggle(d,!!e);a.stopPropagation()});return c},addOpen:function(c,b,d,e){a.layout.buttons.get(c,b,d,"open").attr("title",c.options[d].tips.Open).click(function(a){c.open(d,!!e);a.stopPropagation()});return c},addClose:function(c,b,d){a.layout.buttons.get(c,b,d,"close").attr("title",c.options[d].tips.Close).click(function(a){c.close(d);a.stopPropagation()});return c},addPin:function(c,b,d){var e=a.layout.buttons,
f=e.get(c,b,d,"pin");if(f.length){var g=c.state[d];f.click(function(b){e.setPinState(c,a(this),d,g.isSliding||g.isClosed);g.isSliding||g.isClosed?c.open(d):c.close(d);b.stopPropagation()});e.setPinState(c,f,d,!g.isClosed&&!g.isSliding);g.pins.push(b)}return c},setPinState:function(a,b,d,e){var f=b.attr("pin");if(!f||e!==("down"==f)){a=a.options[d];var f=a.buttonClass+"-pin",g=f+"-"+d;d=f+"-up "+g+"-up";f=f+"-down "+g+"-down";b.attr("pin",e?"down":"up").attr("title",e?a.tips.Unpin:a.tips.Pin).removeClass(e?
d:f).addClass(e?f:d)}},syncPinBtns:function(c,b,d){a.each(c.state[b].pins,function(e,f){a.layout.buttons.setPinState(c,a(f),b,d)})},_load:function(c){var b=a.layout.buttons;a.extend(c,{bindButton:function(a,d,g){return b.bind(c,a,d,g)},addToggleBtn:function(a,d,g){return b.addToggle(c,a,d,g)},addOpenBtn:function(a,d,g){return b.addOpen(c,a,d,g)},addCloseBtn:function(a,d){return b.addClose(c,a,d)},addPinBtn:function(a,d){return b.addPin(c,a,d)}});for(var d=0;4>d;d++)c.state[a.layout.config.borderPanes[d]].pins=
[];c.options.autoBindCustomButtons&&b.init(c)},_unload:function(a){}};a.layout.onLoad.push(a.layout.buttons._load);a.layout.plugins.browserZoom=!0;a.layout.defaults.browserZoomCheckInterval=1E3;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(c){!1!==a.layout.browserZoom.ratio()&&a.layout.browserZoom._setTimer(c)},_setTimer:function(c){if(!c.destroyed){var b=c.options,d=c.state,e=c.hasParentLayout?5E3:Math.max(b.browserZoomCheckInterval,100);setTimeout(function(){if(!c.destroyed&&
b.resizeWithWindow){var e=a.layout.browserZoom.ratio();e!==d.browserZoom&&(d.browserZoom=e,c.resizeAll());a.layout.browserZoom._setTimer(c)}},e)}},ratio:function(){function c(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var b=window,d=screen,e=document,f=e.documentElement||e.body,g=a.layout.browser,h=g.version,l,m,n;return g.msie&&8<h||!g.msie?!1:d.deviceXDPI&&d.systemXDPI?c(d.deviceXDPI,d.systemXDPI):g.webkit&&(l=e.body.getBoundingClientRect)?c(l.left-l.right,e.body.offsetWidth):g.webkit&&
(m=b.outerWidth)?c(m,b.innerWidth):(m=d.width)&&(n=f.clientWidth)?c(m,n):!1}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);
(function(a){function c(b,d){var c=document.createElementNS("http://www.w3.org/2000/svg",b||"svg");d&&a.each(d,function(a,b){c.setAttributeNS(null,a,b)});return a(c)}a.fn.activity=function(c){this.each(function(){var e=a(this),f=e.data("activity");f&&(clearInterval(f.data("interval")),f.remove(),e.removeData("activity"));if(!1!==c){c=a.extend({color:e.css("color")},a.fn.activity.defaults,c);var f=b(e,c).css("position","absolute").prependTo(c.outside?"body":e),g=e.outerHeight()-f.height(),q=e.outerWidth()-
f.width(),g="top"==c.valign?c.padding:"bottom"==c.valign?g-c.padding:Math.floor(g/2),q="left"==c.align?c.padding:"right"==c.align?q-c.padding:Math.floor(q/2),v=e.offset();c.outside?f.css({top:v.top+"px",left:v.left+"px"}):(g-=f.offset().top-v.top,q-=f.offset().left-v.left);f.css({marginTop:g+"px",marginLeft:q+"px"});d(f,c.segments,Math.round(10/c.speed)/10);e.data("activity",f)}});return this};a.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4};
a.fn.activity.getOpacity=function(a,b){var d=a.steps||a.segments-1,c=void 0!==a.opacity?a.opacity:1/d;return 1-Math.min(b,d)*(1-c)/d};var b=function(){return a("<div>").addClass("busy")},d=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)if(b=function(b,d){for(var e=2*d.width+d.space,f=e+d.length+Math.ceil(d.width/2)+1,g=c().width(2*f).height(2*f),v=c("g",{"stroke-width":d.width,"stroke-linecap":"round",stroke:d.color}).appendTo(c("g",
{transform:"translate("+f+","+f+")"}).appendTo(g)),A=0;A<d.segments;A++)v.append(c("line",{x1:0,y1:e,x2:0,y2:e+d.length,transform:"rotate("+360/d.segments*A+", 0, 0)",opacity:a.fn.activity.getOpacity(d,A)}));return a("<div>").append(g).width(2*f).height(2*f)},void 0!==document.createElement("div").style.WebkitAnimationName)var e={},d=function(a,b,d){if(!e[b]){for(var c="spin"+b,f="@-webkit-keyframes "+c+" {",g=0;g<b;g++)var A=Math.round(1E5/b*g)/1E3,w=Math.round(1E5/b*(g+1)-1)/1E3,E="% { -webkit-transform:rotate("+
Math.round(360/b*g)+"deg); }\n",f=f+(A+E+w+E);document.styleSheets[0].insertRule(f+"100% { -webkit-transform:rotate(100deg); }\n}");e[b]=c}a.css("-webkit-animation",e[b]+" "+d+"s linear infinite")};else d=function(a,b,d){var c=0,e=a.find("g g").get(0);a.data("interval",setInterval(function(){e.setAttributeNS(null,"transform","rotate("+ ++c%b*(360/b)+")")},1E3*d/b))};else{var f=a("<shape>").css("behavior","url(#default#VML)").appendTo("body");if(f.get(0).adj){var g=document.createStyleSheet();a.each(["group",
"shape","stroke"],function(){g.addRule(this,"behavior:url(#default#VML);")});b=function(b,d){for(var c=2*d.width+d.space,e=2*(c+d.length+Math.ceil(d.width/2)+1),f=-Math.ceil(e/2),f=a("<group>",{coordsize:e+" "+e,coordorigin:f+" "+f}).css({top:f,left:f,width:e,height:e}),g=0;g<d.segments;g++)f.append(a("<shape>",{path:"m "+c+",0  l "+(c+d.length)+",0"}).css({width:e,height:e,rotation:360/d.segments*g+"deg"}).append(a("<stroke>",{color:d.color,weight:d.width+"px",endcap:"round",opacity:a.fn.activity.getOpacity(d,
g)})));return a("<group>",{coordsize:e+" "+e}).css({width:e,height:e,overflow:"hidden"}).append(f)};d=function(a,b,d){var c=0,e=a.get(0);a.data("interval",setInterval(function(){e.style.rotation=++c%b*(360/b)},1E3*d/b))}}a(f).remove()}})(jQuery);
(function(a,c,b){(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(d){var e=function(f){function g(a,f){var g=e.defaults.columns,l=a.aoColumns.length,g=d.extend({},e.models.oColumn,g,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:f?f:c.createElement("th"),sTitle:g.sTitle?g.sTitle:f?f.innerHTML:"",aDataSort:g.aDataSort?g.aDataSort:[l],mData:g.mData?g.oDefaults:l});a.aoColumns.push(g);a.aoPreSearchCols[l]===
b||null===a.aoPreSearchCols[l]?a.aoPreSearchCols[l]=d.extend({},e.models.oSearch):(g=a.aoPreSearchCols[l],g.bRegex===b&&(g.bRegex=!0),g.bSmart===b&&(g.bSmart=!0),g.bCaseInsensitive===b&&(g.bCaseInsensitive=!0));h(a,l,null)}function h(a,c,e){var f=a.aoColumns[c];e!==b&&null!==e&&(e.mDataProp&&!e.mData&&(e.mData=e.mDataProp),e.sType!==b&&(f.sType=e.sType,f._bAutoType=!1),d.extend(f,e),ba(f,e,"sWidth","sWidthOrig"),e.iDataSort!==b&&(f.aDataSort=[e.iDataSort]),ba(f,e,"aDataSort"));var g=f.mRender?S(f.mRender):
null,h=S(f.mData);f.fnGetData=function(a,b){var d=h(a,b);return f.mRender&&b&&""!==b?g(d,b,a):d};f.fnSetData=V(f.mData);a.oFeatures.bSort||(f.bSortable=!1);!f.bSortable||-1==d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortableNone,f.sSortingClassJUI=""):-1==d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortable,f.sSortingClassJUI=a.oClasses.sSortJUI):-1!=d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",
f.asSorting)?(f.sSortingClass=a.oClasses.sSortableAsc,f.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==d.inArray("asc",f.asSorting)&&-1!=d.inArray("desc",f.asSorting)&&(f.sSortingClass=a.oClasses.sSortableDesc,f.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function l(a){if(!1===a.oFeatures.bAutoWidth)return!1;Ba(a);for(var b=0,d=a.aoColumns.length;b<d;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function m(a,b){var d=v(a,"bVisible");return"number"===typeof d[b]?d[b]:null}function n(a,
b){var c=v(a,"bVisible"),c=d.inArray(b,c);return-1!==c?c:null}function q(a){return v(a,"bVisible").length}function v(a,b){var c=[];d.map(a.aoColumns,function(a,d){a[b]&&c.push(d)});return c}function A(a){for(var b=e.ext.aTypes,d=b.length,c=0;c<d;c++){var f=b[c](a);if(null!==f)return f}return"string"}function w(a,b){for(var d=b.split(","),c=[],e=0,f=a.aoColumns.length;e<f;e++)for(var g=0;g<f;g++)if(a.aoColumns[e].sName==d[g]){c.push(g);break}return c}function E(a){for(var b="",d=0,c=a.aoColumns.length;d<
c;d++)b+=a.aoColumns[d].sName+",";return b.length==c?"":b.slice(0,-1)}function D(a,b,c,e){var f,h,l,m,n;if(b)for(f=b.length-1;0<=f;f--){var p=b[f].aTargets;d.isArray(p)||Ca(a,1,"aTargets must be an array of targets, not a "+typeof p);h=0;for(l=p.length;h<l;h++)if("number"===typeof p[h]&&0<=p[h]){for(;a.aoColumns.length<=p[h];)g(a);e(p[h],b[f])}else if("number"===typeof p[h]&&0>p[h])e(a.aoColumns.length+p[h],b[f]);else if("string"===typeof p[h])for(m=0,n=a.aoColumns.length;m<n;m++)("_all"==p[h]||d(a.aoColumns[m].nTh).hasClass(p[h]))&&
e(m,b[f])}if(c)for(f=0,a=c.length;f<a;f++)e(f,c[f])}function J(a,b){var c;c=d.isArray(b)?b.slice():d.extend(!0,{},b);var f=a.aoData.length,g=d.extend(!0,{},e.models.oRow);g._aData=c;a.aoData.push(g);for(var h,g=0,l=a.aoColumns.length;g<l;g++)c=a.aoColumns[g],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mData?O(a,f,g,Wa(a,f,g)):O(a,f,g,F(a,f,g)),c._bAutoType&&"string"!=c.sType&&(h=F(a,f,g,"type"),null!==h&&""!==h&&(h=A(h),null===c.sType?c.sType=h:c.sType!=h&&"html"!=c.sType&&(c.sType="string")));
a.aiDisplayMaster.push(f);a.oFeatures.bDeferRender||va(a,f);return f}function I(a){var b,c,f,g,h,l,m;if(a.bDeferLoading||null===a.sAjaxSource)for(b=a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(c=a.aoData.length,b._DT_RowIndex=c,a.aoData.push(d.extend(!0,{},e.models.oRow,{nTr:b})),a.aiDisplayMaster.push(c),h=b.firstChild,f=0;h;){l=h.nodeName.toUpperCase();if("TD"==l||"TH"==l)O(a,c,f,d.trim(h.innerHTML)),f++;h=h.nextSibling}b=b.nextSibling}g=kb(a);f=[];b=0;for(c=g.length;b<c;b++)for(h=
g[b].firstChild;h;)l=h.nodeName.toUpperCase(),"TD"!=l&&"TH"!=l||f.push(h),h=h.nextSibling;c=0;for(g=a.aoColumns.length;c<g;c++){m=a.aoColumns[c];null===m.sTitle&&(m.sTitle=m.nTh.innerHTML);var n=m._bAutoType,p="function"===typeof m.fnRender,q=null!==m.sClass,t=m.bVisible,C,z;if(n||p||q||!t)for(l=0,b=a.aoData.length;l<b;l++)h=a.aoData[l],C=f[l*g+c],n&&"string"!=m.sType&&(z=F(a,l,c,"type"),""!==z&&(z=A(z),null===m.sType?m.sType=z:m.sType!=z&&"html"!=m.sType&&(m.sType="string"))),m.mRender?C.innerHTML=
F(a,l,c,"display"):m.mData!==c&&(C.innerHTML=F(a,l,c,"display")),p&&(z=Wa(a,l,c),C.innerHTML=z,m.bUseRendered&&O(a,l,c,z)),q&&(C.className+=" "+m.sClass),t?h._anHidden[c]=null:(h._anHidden[c]=C,C.parentNode.removeChild(C)),m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,C,F(a,l,c,"display"),h._aData,l,c)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;b<c;b++)h=a.aoData[b],P(a,"aoRowCreatedCallback",null,[h.nTr,h._aData,b])}function C(a,d){return d._DT_RowIndex!==b?d._DT_RowIndex:
null}function t(a,b,d){b=lb(a,b);var c=0;for(a=a.aoColumns.length;c<a;c++)if(b[c]===d)return c;return-1}function z(a,b,d,c){for(var e=[],f=0,g=c.length;f<g;f++)e.push(F(a,b,c[f],d));return e}function F(a,d,c,e){var f=a.aoColumns[c];if((c=f.fnGetData(a.aoData[d]._aData,e))===b)return a.iDrawError!=a.iDraw&&null===f.sDefaultContent&&(Ca(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{mData function}":"'"+f.mData+"'")+" from the data source for row "+d),a.iDrawError=a.iDraw),f.sDefaultContent;
if(null===c&&null!==f.sDefaultContent)c=f.sDefaultContent;else if("function"===typeof c)return c();return"display"==e&&null===c?"":c}function O(a,b,d,c){a.aoColumns[d].fnSetData(a.aoData[b]._aData,c)}function S(a){if(null===a)return function(a,b){return null};if("function"===typeof a)return function(b,d,c){return a(b,d,c)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,d){return b[a]};var d=function(a,c,e){var f=e.split("."),g;if(""!==e){var h=0;for(g=f.length;h<
g;h++){if(e=f[h].match(ya)){f[h]=f[h].replace(ya,"");""!==f[h]&&(a=a[f[h]]);g=[];f.splice(0,h+1);for(var f=f.join("."),h=0,B=a.length;h<B;h++)g.push(d(a[h],c,f));a=e[0].substring(1,e[0].length-1);a=""===a?g:g.join(a);break}if(null===a||a[f[h]]===b)return b;a=a[f[h]]}}return a};return function(b,c){return d(b,c,a)}}function V(a){if(null===a)return function(a,b){};if("function"===typeof a)return function(b,d){a(b,"set",d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,
d){b[a]=d};var d=function(a,c,e){e=e.split(".");var f,g,h=0;for(g=e.length-1;h<g;h++){if(f=e[h].match(ya)){e[h]=e[h].replace(ya,"");a[e[h]]=[];f=e.slice();f.splice(0,h+1);g=f.join(".");for(var B=0,l=c.length;B<l;B++)f={},d(f,c[B],g),a[e[h]].push(f);return}if(null===a[e[h]]||a[e[h]]===b)a[e[h]]={};a=a[e[h]]}a[e[e.length-1].replace(ya,"")]=c};return function(b,c){return d(b,c,a)}}function T(a){for(var b=[],d=a.aoData.length,c=0;c<d;c++)b.push(a.aoData[c]._aData);return b}function pa(a){a.aoData.splice(0,
a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);Ia(a)}function La(a,b){for(var d=-1,c=0,e=a.length;c<e;c++)a[c]==b?d=c:a[c]>b&&a[c]--; -1!=d&&a.splice(d,1)}function Wa(a,b,d){var c=a.aoColumns[d];return c.fnRender({iDataRow:b,iDataColumn:d,oSettings:a,aData:a.aoData[b]._aData,mDataProp:c.mData},F(a,b,d,"display"))}function va(a,b){var d=a.aoData[b],e;if(null===d.nTr){d.nTr=c.createElement("tr");d.nTr._DT_RowIndex=b;d._aData.DT_RowId&&
(d.nTr.id=d._aData.DT_RowId);d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var f=0,g=a.aoColumns.length;f<g;f++){var h=a.aoColumns[f];e=c.createElement(h.sCellType);e.innerHTML="function"!==typeof h.fnRender||h.bUseRendered&&null!==h.mData?F(a,b,f,"display"):Wa(a,b,f);null!==h.sClass&&(e.className=h.sClass);h.bVisible?(d.nTr.appendChild(e),d._anHidden[f]=null):d._anHidden[f]=e;h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,e,F(a,b,f,"display"),d._aData,b,f)}P(a,"aoRowCreatedCallback",
null,[d.nTr,d._aData,b])}}function ha(a){var b,e,f;if(0!==d("th, td",a.nTHead).length)for(b=0,f=a.aoColumns.length;b<f;b++)e=a.aoColumns[b].nTh,e.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(e.setAttribute("tabindex",a.iTabIndex),e.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&d(e).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=e.innerHTML&&(e.innerHTML=a.aoColumns[b].sTitle);else{var g=c.createElement("tr");b=0;for(f=a.aoColumns.length;b<f;b++)e=
a.aoColumns[b].nTh,e.innerHTML=a.aoColumns[b].sTitle,e.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&d(e).addClass(a.aoColumns[b].sClass),g.appendChild(e);d(a.nTHead).html("")[0].appendChild(g);sa(a.aoHeader,a.nTHead)}d(a.nTHead).children("tr").attr("role","row");if(a.bJUI)for(b=0,f=a.aoColumns.length;b<f;b++){e=a.aoColumns[b].nTh;g=c.createElement("div");g.className=a.oClasses.sSortJUIWrapper;d(e).contents().appendTo(g);var h=c.createElement("span");h.className=a.oClasses.sSortIcon;
g.appendChild(h);e.appendChild(g)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)!1!==a.aoColumns[b].bSortable?bb(a,a.aoColumns[b].nTh,b):d(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);""!==a.oClasses.sFooterTH&&d(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot)for(e=N(a,null,a.aoFooter),b=0,f=a.aoColumns.length;b<f;b++)e[b]&&(a.aoColumns[b].nTf=e[b],a.aoColumns[b].sClass&&d(e[b]).addClass(a.aoColumns[b].sClass))}function wa(a,d,c){var e,
f,g,h=[],l=[],m=a.aoColumns.length,n;c===b&&(c=!1);e=0;for(f=d.length;e<f;e++){h[e]=d[e].slice();h[e].nTr=d[e].nTr;for(g=m-1;0<=g;g--)a.aoColumns[g].bVisible||c||h[e].splice(g,1);l.push([])}e=0;for(f=h.length;e<f;e++){if(a=h[e].nTr)for(;g=a.firstChild;)a.removeChild(g);g=0;for(d=h[e].length;g<d;g++)if(n=m=1,l[e][g]===b){a.appendChild(h[e][g].cell);for(l[e][g]=1;h[e+m]!==b&&h[e][g].cell==h[e+m][g].cell;)l[e+m][g]=1,m++;for(;h[e][g+n]!==b&&h[e][g].cell==h[e][g+n].cell;){for(c=0;c<m;c++)l[e+c][g+n]=
1;n++}h[e][g].cell.rowSpan=m;h[e][g].cell.colSpan=n}}}function ua(a){var e=P(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,e))ab(a,!1);else{var f,g,e=[],h=0,l=a.asStripeClasses.length;f=a.aoOpenRows.length;a.bDrawing=!0;a.iInitDisplayStart!==b&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,Ia(a));if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(!a.oFeatures.bServerSide)a.iDraw++;
else if(!a.bDestroying&&!da(a))return;if(0!==a.aiDisplay.length){var m=a._iDisplayStart;g=a._iDisplayEnd;a.oFeatures.bServerSide&&(m=0,g=a.aoData.length);for(;m<g;m++){var n=a.aoData[a.aiDisplay[m]];null===n.nTr&&va(a,a.aiDisplay[m]);var p=n.nTr;if(0!==l){var t=a.asStripeClasses[h%l];n._sRowStripe!=t&&(d(p).removeClass(n._sRowStripe).addClass(t),n._sRowStripe=t)}P(a,"aoRowCallback",null,[p,a.aoData[a.aiDisplay[m]]._aData,h,m]);e.push(p);h++;if(0!==f)for(n=0;n<f;n++)if(p==a.aoOpenRows[n].nParent){e.push(a.aoOpenRows[n].nTr);
break}}}else e[0]=c.createElement("tr"),a.asStripeClasses[0]&&(e[0].className=a.asStripeClasses[0]),f=a.oLanguage,l=f.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?f.sEmptyTable&&0===a.fnRecordsTotal()&&(l=f.sEmptyTable):l=f.sLoadingRecords,f=c.createElement("td"),f.setAttribute("valign","top"),f.colSpan=q(a),f.className=a.oClasses.sRowEmpty,f.innerHTML=vb(a,l),e[h].appendChild(f);P(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],T(a),a._iDisplayStart,a.fnDisplayEnd(),
a.aiDisplay]);P(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],T(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);h=c.createDocumentFragment();f=c.createDocumentFragment();if(a.nTBody){l=a.nTBody.parentNode;f.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;f=a.nTBody.firstChild;)a.nTBody.removeChild(f);f=0;for(g=e.length;f<g;f++)h.appendChild(e[f]);a.nTBody.appendChild(h);null!==l&&l.appendChild(a.nTBody)}P(a,"aoDrawCallback","draw",[a]);
a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(ab(a,!1),a._bInitComplete||Mb(a))}}function ka(a){a.oFeatures.bSort?Xa(a,a.oPreviousSearch):a.oFeatures.bFilter?Da(a,a.oPreviousSearch):(Ia(a),ua(a))}function oa(a){var b=d("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=d('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,f=a.sDom.split(""),
g,h,l,m,n,p,q,t=0;t<f.length;t++){h=0;l=f[t];if("<"==l){m=d("<div></div>")[0];n=f[t+1];if("'"==n||'"'==n){p="";for(q=2;f[t+q]!=n;)p+=f[t+q],q++;"H"==p?p=a.oClasses.sJUIHeader:"F"==p&&(p=a.oClasses.sJUIFooter);-1!=p.indexOf(".")?(n=p.split("."),m.id=n[0].substr(1,n[0].length-1),m.className=n[1]):"#"==p.charAt(0)?m.id=p.substr(1,p.length-1):m.className=p;t+=q}c.appendChild(m);c=m}else if(">"==l)c=c.parentNode;else if("l"==l&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)g=xb(a),h=1;else if("f"==
l&&a.oFeatures.bFilter)g=qa(a),h=1;else if("r"==l&&a.oFeatures.bProcessing)g=Rb(a),h=1;else if("t"==l)g=fb(a),h=1;else if("i"==l&&a.oFeatures.bInfo)g=Gb(a),h=1;else if("p"==l&&a.oFeatures.bPaginate)g=Nb(a),h=1;else if(0!==e.ext.aoFeatures.length)for(m=e.ext.aoFeatures,q=0,n=m.length;q<n;q++)if(l==m[q].cFeature){(g=m[q].fnInit(a))&&(h=1);break}1==h&&null!==g&&("object"!==typeof a.aanFeatures[l]&&(a.aanFeatures[l]=[]),a.aanFeatures[l].push(g),c.appendChild(g))}b.parentNode.replaceChild(a.nTableWrapper,
b)}function sa(a,b){var c=d(b).children("tr"),e,f,g,h,l,m,n,p,q,t;a.splice(0,a.length);g=0;for(m=c.length;g<m;g++)a.push([]);g=0;for(m=c.length;g<m;g++)for(e=c[g],f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||"TH"==f.nodeName.toUpperCase()){p=1*f.getAttribute("colspan");q=1*f.getAttribute("rowspan");p=p&&0!==p&&1!==p?p:1;q=q&&0!==q&&1!==q?q:1;h=0;for(l=a[g];l[h];)h++;n=h;t=1===p?!0:!1;for(l=0;l<p;l++)for(h=0;h<q;h++)a[g+h][n+l]={cell:f,unique:t},a[g+h].nTr=e}f=f.nextSibling}}function N(a,
b,d){var c=[];d||(d=a.aoHeader,b&&(d=[],sa(d,b)));b=0;for(var e=d.length;b<e;b++)for(var f=0,g=d[b].length;f<g;f++)!d[b][f].unique||c[f]&&a.bSortCellsTop||(c[f]=d[b][f].cell);return c}function da(a){if(a.bAjaxDataGet){a.iDraw++;ab(a,!0);var b=pb(a);jb(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Ga(a,b)},a);return!1}return!0}function pb(a){var b=a.aoColumns.length,d=[],c,e,f,g;d.push({name:"sEcho",value:a.iDraw});d.push({name:"iColumns",value:b});d.push({name:"sColumns",value:E(a)});
d.push({name:"iDisplayStart",value:a._iDisplayStart});d.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(f=0;f<b;f++)c=a.aoColumns[f].mData,d.push({name:"mDataProp_"+f,value:"function"===typeof c?"function":c});if(!1!==a.oFeatures.bFilter)for(d.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),d.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),f=0;f<b;f++)d.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),d.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),
d.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable});if(!1!==a.oFeatures.bSort){var h=0;c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<c.length;f++)for(e=a.aoColumns[c[f][0]].aDataSort,g=0;g<e.length;g++)d.push({name:"iSortCol_"+h,value:e[g]}),d.push({name:"sSortDir_"+h,value:c[f][1]}),h++;d.push({name:"iSortingCols",value:h});for(f=0;f<b;f++)d.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}return d}function jb(a,b){P(a,"aoServerParams",
"serverParams",[b])}function Ga(a,d){if(d.sEcho!==b){if(1*d.sEcho<a.iDraw)return;a.iDraw=1*d.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&pa(a);a._iRecordsTotal=parseInt(d.iTotalRecords,10);a._iRecordsDisplay=parseInt(d.iTotalDisplayRecords,10);var c=E(a),c=d.sColumns!==b&&""!==c&&d.sColumns!=c,e;c&&(e=w(a,d.sColumns));for(var f=S(a.sAjaxDataProp)(d),g=0,h=f.length;g<h;g++)if(c){for(var l=[],m=0,n=a.aoColumns.length;m<n;m++)l.push(f[g][e[m]]);J(a,l)}else J(a,f[g]);
a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;ua(a);a.bAjaxDataGet=!0;ab(a,!1)}function qa(a){var b=a.oPreviousSearch,e=a.oLanguage.sSearch,e=-1!==e.indexOf("_INPUT_")?e.replace("_INPUT_",'<input type="text" />'):""===e?'<input type="text" />':e+' <input type="text" />',f=c.createElement("div");f.className=a.oClasses.sFilter;f.innerHTML="<label>"+e+"</label>";a.aanFeatures.f||(f.id=a.sTableId+"_filter");e=d('input[type="text"]',f);f._DT_Input=e[0];e.val(b.sSearch.replace('"',"&quot;"));
e.bind("keyup.DT",function(c){c=a.aanFeatures.f;for(var e=""===this.value?"":this.value,f=0,g=c.length;f<g;f++)c[f]!=d(this).parents("div.dataTables_filter")[0]&&d(c[f]._DT_Input).val(e);e!=b.sSearch&&Da(a,{sSearch:e,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})});e.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode)return!1});return f}function Da(a,b,c){var e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;
e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)g(b);else{qb(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);g(b);for(b=0;b<a.aoPreSearchCols.length;b++)ca(a,f[b].sSearch,b,f[b].bRegex,f[b].bSmart,f[b].bCaseInsensitive);cb(a)}a.bFiltered=!0;d(a.oInstance).trigger("filter",a);a._iDisplayStart=0;Ia(a);ua(a);ub(a,0)}function cb(a){for(var b=e.ext.afnFiltering,d=v(a,"bSearchable"),c=0,f=b.length;c<f;c++)for(var g=0,h=0,l=a.aiDisplay.length;h<l;h++){var m=a.aiDisplay[h-
g];b[c](a,z(a,m,"filter",d),m)||(a.aiDisplay.splice(h-g,1),g++)}}function ca(a,b,d,c,e,f){if(""!==b){var g=0;b=nb(b,c,e,f);for(c=a.aiDisplay.length-1;0<=c;c--)e=Lb(F(a,a.aiDisplay[c],d,"filter"),a.aoColumns[d].sType),b.test(e)||(a.aiDisplay.splice(c,1),g++)}}function qb(a,b,d,c,f,g){c=nb(b,c,f,g);f=a.oPreviousSearch;d||(d=0);0!==e.ext.afnFiltering.length&&(d=1);if(0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||
f.sSearch.length>b.length||1==d||0!==b.indexOf(f.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),ub(a,1),b=0;b<a.aiDisplayMaster.length;b++)c.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=d=0;b<a.asDataSearch.length;b++)c.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-d,1),d++)}function ub(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var d=v(a,"bSearchable"),c=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=c.length;e<f;e++)a.asDataSearch[e]=p(a,z(a,c[e],"filter",
d))}}function p(a,b){var c=b.join("  ");-1!==c.indexOf("&")&&(c=d("<div>").html(c).text());return c.replace(/[\n\r]/g," ")}function nb(a,b,d,c){if(d){a=b?a.split(" "):Oa(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$";try{return new RegExp(a,c?"i":"")}catch(e){return RegExp("")}}else return a=b?a:Oa(a),new RegExp(a,c?"i":"")}function Lb(a,b){return"function"===typeof e.ext.ofnSearch[b]?e.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?
a.replace(/[\r\n]/g," "):a}function Oa(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Gb(a){var b=c.createElement("div");b.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ra,sName:"information"}),b.id=a.sTableId+"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return b}function Ra(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,e=a.fnDisplayEnd(),
f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),h;h=0===g?b.sInfoEmpty:b.sInfo;g!=f&&(h+=" "+b.sInfoFiltered);h+=b.sInfoPostFix;h=vb(a,h);null!==b.fnInfoCallback&&(h=b.fnInfoCallback.call(a.oInstance,a,c,e,f,g,h));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++)d(a[b]).html(h)}}function vb(a,b){var d=a.fnFormatNumber(a._iDisplayStart+1),c=a.fnDisplayEnd(),c=a.fnFormatNumber(c),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);a.oScroll.bInfinite&&(d=a.fnFormatNumber(1));
return b.replace(/_START_/g,d).replace(/_END_/g,c).replace(/_TOTAL_/g,e).replace(/_MAX_/g,f)}function wb(a){var b,d,c=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){wb(a)},200);else{oa(a);ha(a);wa(a,a.aoHeader);a.nTFoot&&wa(a,a.aoFooter);ab(a,!0);a.oFeatures.bAutoWidth&&Ba(a);b=0;for(d=a.aoColumns.length;b<d;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=ea(a.aoColumns[b].sWidth));a.oFeatures.bSort?Xa(a):a.oFeatures.bFilter?Da(a,a.oPreviousSearch):(a.aiDisplay=
a.aiDisplayMaster.slice(),Ia(a),ua(a));null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(ab(a,!1),Mb(a)):(d=[],jb(a,d),a.fnServerData.call(a.oInstance,a.sAjaxSource,d,function(d){var e=""!==a.sAjaxDataProp?S(a.sAjaxDataProp)(d):d;for(b=0;b<e.length;b++)J(a,e[b]);a.iInitDisplayStart=c;a.oFeatures.bSort?Xa(a):(a.aiDisplay=a.aiDisplayMaster.slice(),Ia(a),ua(a));ab(a,!1);Mb(a,d)},a))}}function Mb(a,b){a._bInitComplete=!0;P(a,"aoInitComplete","init",[a,b])}function Bb(a){var b=e.defaults.oLanguage;
!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&ba(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&ba(a,a,"sZeroRecords","sLoadingRecords")}function xb(a){if(a.oScroll.bInfinite)return null;var b='<select size="1" '+('name="'+a.sTableId+'_length"')+">",e,f,g=a.aLengthMenu;if(2==g.length&&"object"===typeof g[0]&&"object"===typeof g[1])for(e=0,f=g[0].length;e<f;e++)b+='<option value="'+g[0][e]+'">'+g[1][e]+"</option>";
else for(e=0,f=g.length;e<f;e++)b+='<option value="'+g[e]+'">'+g[e]+"</option>";b+="</select>";g=c.createElement("div");a.aanFeatures.l||(g.id=a.sTableId+"_length");g.className=a.oClasses.sLength;g.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";d('select option[value="'+a._iDisplayLength+'"]',g).attr("selected",!0);d("select",g).bind("change.DT",function(b){b=d(this).val();var c=a.aanFeatures.l;e=0;for(f=c.length;e<f;e++)c[e]!=this.parentNode&&d("select",c[e]).val(b);a._iDisplayLength=
parseInt(b,10);Ia(a);a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,0>a._iDisplayStart&&(a._iDisplayStart=0));-1==a._iDisplayLength&&(a._iDisplayStart=0);ua(a)});d("select",g).attr("aria-controls",a.sTableId);return g}function Ia(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Nb(a){if(a.oScroll.bInfinite)return null;
var b=c.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;e.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){Ia(a);ua(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){e.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){Ia(a);ua(a)})},sName:"pagination"});return b}function $a(a,b){var c=a._iDisplayStart;if("number"===typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=
0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(0<=a._iDisplayLength){var e=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(e-1)*a._iDisplayLength}else a._iDisplayStart=0;else Ca(a,0,"Unknown paging action: "+
b);d(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function Rb(a){var b=c.createElement("div");a.aanFeatures.r||(b.id=a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function ab(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,e=0,f=c.length;e<f;e++)c[e].style.visibility=b?"visible":"hidden";d(a.oInstance).trigger("processing",[a,b])}function fb(a){if(""===a.oScroll.sX&&""===
a.oScroll.sY)return a.nTable;var b=c.createElement("div"),e=c.createElement("div"),f=c.createElement("div"),g=c.createElement("div"),h=c.createElement("div"),l=c.createElement("div"),m=a.nTable.cloneNode(!1),n=a.nTable.cloneNode(!1),p=a.nTable.getElementsByTagName("thead")[0],q=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],t=a.oClasses;e.appendChild(f);h.appendChild(l);g.appendChild(a.nTable);b.appendChild(e);b.appendChild(g);f.appendChild(m);m.appendChild(p);
null!==q&&(b.appendChild(h),l.appendChild(n),n.appendChild(q));b.className=t.sScrollWrapper;e.className=t.sScrollHead;f.className=t.sScrollHeadInner;g.className=t.sScrollBody;h.className=t.sScrollFoot;l.className=t.sScrollFootInner;a.oScroll.bAutoCss&&(e.style.overflow="hidden",e.style.position="relative",h.style.overflow="hidden",g.style.overflow="auto");e.style.border="0";e.style.width="100%";h.style.border="0";f.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";m.removeAttribute("id");
m.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==q&&(n.removeAttribute("id"),n.style.marginLeft="0");f=d(a.nTable).children("caption");0<f.length&&(f=f[0],"top"===f._captionSide?m.appendChild(f):"bottom"===f._captionSide&&q&&n.appendChild(f));""!==a.oScroll.sX&&(e.style.width=ea(a.oScroll.sX),g.style.width=ea(a.oScroll.sX),null!==q&&(h.style.width=ea(a.oScroll.sX)),d(g).scroll(function(a){e.scrollLeft=this.scrollLeft;null!==q&&(h.scrollLeft=this.scrollLeft)}));""!==a.oScroll.sY&&(g.style.height=
ea(a.oScroll.sY));a.aoDrawCallback.push({fn:hb,sName:"scrolling"});a.oScroll.bInfinite&&d(g).scroll(function(){!a.bDrawing&&0!==d(this).scrollTop()&&d(this).scrollTop()+d(this).height()>d(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&($a(a,"next"),Ia(a),ua(a))});a.nScrollHead=e;a.nScrollFoot=h;return b}function hb(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],e=a.nTable.parentNode,f,g,h,l,n,p,q,t,C=[],z=[],v=null!==a.nTFoot?
a.nScrollFoot.getElementsByTagName("div")[0]:null,w=null!==a.nTFoot?v.getElementsByTagName("table")[0]:null,A=a.oBrowser.bScrollOversize,D=function(a){q=a.style;q.paddingTop="0";q.paddingBottom="0";q.borderTopWidth="0";q.borderBottomWidth="0";q.height=0};d(a.nTable).children("thead, tfoot").remove();f=d(a.nTHead).clone()[0];a.nTable.insertBefore(f,a.nTable.childNodes[0]);h=a.nTHead.getElementsByTagName("tr");l=f.getElementsByTagName("tr");null!==a.nTFoot&&(n=d(a.nTFoot).clone()[0],a.nTable.insertBefore(n,
a.nTable.childNodes[1]),p=a.nTFoot.getElementsByTagName("tr"),n=n.getElementsByTagName("tr"));""===a.oScroll.sX&&(e.style.width="100%",b.parentNode.style.width="100%");var F=N(a,f);f=0;for(g=F.length;f<g;f++)t=m(a,f),F[f].style.width=a.aoColumns[t].sWidth;null!==a.nTFoot&&gb(function(a){a.style.width=""},n);a.oScroll.bCollapse&&""!==a.oScroll.sY&&(e.style.height=e.offsetHeight+a.nTHead.offsetHeight+"px");f=d(a.nTable).outerWidth();""===a.oScroll.sX?(a.nTable.style.width="100%",A&&(d("tbody",e).height()>
e.offsetHeight||"scroll"==d(e).css("overflow-y"))&&(a.nTable.style.width=ea(d(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=ea(a.oScroll.sXInner):f==d(e).width()&&d(e).height()<d(a.nTable).height()?(a.nTable.style.width=ea(f-a.oScroll.iBarWidth),d(a.nTable).outerWidth()>f-a.oScroll.iBarWidth&&(a.nTable.style.width=ea(f))):a.nTable.style.width=ea(f);f=d(a.nTable).outerWidth();gb(D,l);gb(function(a){C.push(ea(d(a).width()))},l);gb(function(a,b){a.style.width=
C[b]},h);d(l).height(0);null!==a.nTFoot&&(gb(D,n),gb(function(a){z.push(ea(d(a).width()))},n),gb(function(a,b){a.style.width=z[b]},p),d(n).height(0));gb(function(a,b){a.innerHTML="";a.style.width=C[b]},l);null!==a.nTFoot&&gb(function(a,b){a.innerHTML="";a.style.width=z[b]},n);d(a.nTable).outerWidth()<f?(h=e.scrollHeight>e.offsetHeight||"scroll"==d(e).css("overflow-y")?f+a.oScroll.iBarWidth:f,A&&(e.scrollHeight>e.offsetHeight||"scroll"==d(e).css("overflow-y"))&&(a.nTable.style.width=ea(h-a.oScroll.iBarWidth)),
e.style.width=ea(h),a.nScrollHead.style.width=ea(h),null!==a.nTFoot&&(a.nScrollFoot.style.width=ea(h)),""===a.oScroll.sX?Ca(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&Ca(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(e.style.width=ea("100%"),a.nScrollHead.style.width=
ea("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=ea("100%")));""===a.oScroll.sY&&A&&(e.style.height=ea(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(e.style.height=ea(a.oScroll.sY),A=""!==a.oScroll.sX&&a.nTable.offsetWidth>e.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<e.offsetHeight&&(e.style.height=ea(a.nTable.offsetHeight+A)));A=d(a.nTable).outerWidth();c.style.width=ea(A);b.style.width=ea(A);c=d(a.nTable).height()>e.clientHeight||"scroll"==
d(e).css("overflow-y");b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(w.style.width=ea(A),v.style.width=ea(A),v.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px");d(e).scroll();if(a.bSorted||a.bFiltered)e.scrollTop=0}function gb(a,b,d){for(var c=0,e=0,f=b.length,g,h;e<f;){g=b[e].firstChild;for(h=d?d[e].firstChild:null;g;)1===g.nodeType&&(d?a(g,h,c):a(g,c),c++),g=g.nextSibling,h=d?h.nextSibling:null;e++}}function fa(a,b){if(!a||null===a||""===a)return 0;b||(b=c.body);var d,
e=c.createElement("div");e.style.width=ea(a);b.appendChild(e);d=e.offsetWidth;b.removeChild(e);return d}function Ba(a){var b=0,e,f=0,g=a.aoColumns.length,h,l,m=d("th",a.nTHead),n=a.nTable.getAttribute("width");l=a.nTable.parentNode;for(h=0;h<g;h++)a.aoColumns[h].bVisible&&(f++,null!==a.aoColumns[h].sWidth&&(e=fa(a.aoColumns[h].sWidthOrig,l),null!==e&&(a.aoColumns[h].sWidth=ea(e)),b++));if(g==m.length&&0===b&&f==g&&""===a.oScroll.sX&&""===a.oScroll.sY)for(h=0;h<a.aoColumns.length;h++)e=d(m[h]).width(),
null!==e&&(a.aoColumns[h].sWidth=ea(e));else{b=a.nTable.cloneNode(!1);h=a.nTHead.cloneNode(!0);f=c.createElement("tbody");e=c.createElement("tr");b.removeAttribute("id");b.appendChild(h);null!==a.nTFoot&&(b.appendChild(a.nTFoot.cloneNode(!0)),gb(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(f);f.appendChild(e);f=d("thead th",b);0===f.length&&(f=d("tbody tr:eq(0)>td",b));m=N(a,h);for(h=f=0;h<g;h++){var p=a.aoColumns[h];p.bVisible&&null!==p.sWidthOrig&&""!==p.sWidthOrig?
m[h-f].style.width=ea(p.sWidthOrig):p.bVisible?m[h-f].style.width="":f++}for(h=0;h<g;h++)a.aoColumns[h].bVisible&&(f=yb(a,h),null!==f&&(f=f.cloneNode(!0),""!==a.aoColumns[h].sContentPadding&&(f.innerHTML+=a.aoColumns[h].sContentPadding),e.appendChild(f)));l.appendChild(b);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?b.style.width=ea(a.oScroll.sXInner):""!==a.oScroll.sX?(b.style.width="",d(b).width()<l.offsetWidth&&(b.style.width=ea(l.offsetWidth))):""!==a.oScroll.sY?b.style.width=ea(l.offsetWidth):n&&
(b.style.width=ea(n));b.style.visibility="hidden";rb(a,b);g=d("tbody tr:eq(0)",b).children();0===g.length&&(g=N(a,d("thead",b)[0]));if(""!==a.oScroll.sX){for(h=f=l=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&(l=null===a.aoColumns[h].sWidthOrig?l+d(g[f]).outerWidth():l+(parseInt(a.aoColumns[h].sWidth.replace("px",""),10)+(d(g[f]).outerWidth()-d(g[f]).width())),f++);b.style.width=ea(l);a.nTable.style.width=ea(l)}for(h=f=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&(l=d(g[f]).width(),
null!==l&&0<l&&(a.aoColumns[h].sWidth=ea(l)),f++);g=d(b).css("width");a.nTable.style.width=-1!==g.indexOf("%")?g:ea(d(b).outerWidth());b.parentNode.removeChild(b)}n&&(a.nTable.style.width=ea(n))}function rb(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(d(b).width(),b.style.width=ea(d(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=ea(d(b).outerWidth()))}function yb(a,b){var d=Sb(a,b);if(0>d)return null;if(null===a.aoData[d].nTr){var e=c.createElement("td");e.innerHTML=F(a,d,b,
"");return e}return lb(a,d)[b]}function Sb(a,b){for(var d=-1,c=-1,e=0;e<a.aoData.length;e++){var f=F(a,e,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>d&&(d=f.length,c=e)}return c}function ea(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Tb(){var a=c.createElement("p"),b=a.style;b.width="100%";b.height="200px";b.padding="0px";var d=c.createElement("div"),b=d.style;b.position="absolute";b.top="0px";b.left=
"0px";b.visibility="hidden";b.width="200px";b.height="150px";b.padding="0px";b.overflow="hidden";d.appendChild(a);c.body.appendChild(d);b=a.offsetWidth;d.style.overflow="scroll";a=a.offsetWidth;b==a&&(a=d.clientWidth);c.body.removeChild(d);return b-a}function Xa(a,c){var f,g,h,l,m,p,q=[],t=[],C=e.ext.oSort,z=a.aoData,v=a.aoColumns,w=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){q=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();
for(f=0;f<q.length;f++)if(g=q[f][0],h=n(a,g),l=a.aoColumns[g].sSortDataType,e.ext.afnSortData[l])if(m=e.ext.afnSortData[l].call(a.oInstance,a,g,h),m.length===z.length)for(h=0,l=z.length;h<l;h++)O(a,h,g,m[h]);else Ca(a,0,"Returned data sort array (col "+g+") is the wrong length");f=0;for(g=a.aiDisplayMaster.length;f<g;f++)t[a.aiDisplayMaster[f]]=f;var A=q.length,D;f=0;for(g=z.length;f<g;f++)for(h=0;h<A;h++)for(D=v[q[h][0]].aDataSort,m=0,p=D.length;m<p;m++)l=v[D[m]].sType,l=C[(l?l:"string")+"-pre"],
z[f]._aSortData[D[m]]=l?l(F(a,f,D[m],"sort")):F(a,f,D[m],"sort");a.aiDisplayMaster.sort(function(a,b){var d,c,e,f,g;for(d=0;d<A;d++)for(g=v[q[d][0]].aDataSort,c=0,e=g.length;c<e;c++)if(f=v[g[c]].sType,f=C[(f?f:"string")+"-"+q[d][1]](z[a]._aSortData[g[c]],z[b]._aSortData[g[c]]),0!==f)return f;return C["numeric-asc"](t[a],t[b])})}c!==b&&!c||a.oFeatures.bDeferRender||db(a);f=0;for(g=a.aoColumns.length;f<g;f++)l=v[f].sTitle.replace(/<.*?>/g,""),h=v[f].nTh,h.removeAttribute("aria-sort"),h.removeAttribute("aria-label"),
v[f].bSortable?0<q.length&&q[0][0]==f?(h.setAttribute("aria-sort","asc"==q[0][1]?"ascending":"descending"),h.setAttribute("aria-label",l+("asc"==(v[f].asSorting[q[0][2]+1]?v[f].asSorting[q[0][2]+1]:v[f].asSorting[0])?w.sSortAscending:w.sSortDescending))):h.setAttribute("aria-label",l+("asc"==v[f].asSorting[0]?w.sSortAscending:w.sSortDescending)):h.setAttribute("aria-label",l);a.bSorted=!0;d(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?Da(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),
a._iDisplayStart=0,Ia(a),ua(a))}function bb(a,b,d,c){Vb(b,{},function(b){if(!1!==a.aoColumns[d].bSortable){var e=function(){var c,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==d){f=!0;c=a.aaSorting[g][0];e=a.aaSorting[g][2]+1;a.aoColumns[c].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[c].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}!1===f&&a.aaSorting.push([d,a.aoColumns[d].asSorting[0],0])}else 1==a.aaSorting.length&&a.aaSorting[0][0]==d?(c=a.aaSorting[0][0],
e=a.aaSorting[0][2]+1,a.aoColumns[c].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[c].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([d,a.aoColumns[d].asSorting[0],0]));Xa(a)};a.oFeatures.bProcessing?(ab(a,!0),setTimeout(function(){e();a.oFeatures.bServerSide||ab(a,!1)},0)):e();"function"==typeof c&&c(a)}})}function db(a){var b,c,e,f,g,h=a.aoColumns.length,l=a.oClasses;for(b=0;b<h;b++)a.aoColumns[b].bSortable&&d(a.aoColumns[b].nTh).removeClass(l.sSortAsc+
" "+l.sSortDesc+" "+a.aoColumns[b].sSortingClass);c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){g=a.aoColumns[b].sSortingClass;f=-1;for(e=0;e<c.length;e++)if(c[e][0]==b){g="asc"==c[e][1]?l.sSortAsc:l.sSortDesc;f=e;break}d(a.aoColumns[b].nTh).addClass(g);a.bJUI&&(g=d("span."+l.sSortIcon,a.aoColumns[b].nTh),g.removeClass(l.sSortJUIAsc+" "+l.sSortJUIDesc+" "+l.sSortJUI+" "+l.sSortJUIAscAllowed+" "+l.sSortJUIDescAllowed),
g.addClass(-1==f?a.aoColumns[b].sSortingClassJUI:"asc"==c[f][1]?l.sSortJUIAsc:l.sSortJUIDesc))}else d(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);g=l.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){a=lb(a);f=[];for(b=0;b<h;b++)f.push("");b=0;for(e=1;b<c.length;b++)l=parseInt(c[b][0],10),f[l]=g+e,3>e&&e++;g=new RegExp(g+"[123]");var m;b=0;for(c=a.length;b<c;b++)l=b%h,e=a[b].className,m=f[l],l=e.replace(g,m),l!=e?a[b].className=d.trim(l):0<m.length&&-1==e.indexOf(m)&&(a[b].className=
e+" "+m)}}function Z(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var e={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:d.extend(!0,[],a.aaSorting),oSearch:d.extend(!0,{},a.oPreviousSearch),aoSearchCols:d.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(c=a.aoColumns.length;b<c;b++)e.abVisCols.push(a.aoColumns[b].bVisible);P(a,"aoStateSaveParams","stateSaveParams",[a,e]);a.fnStateSave.call(a.oInstance,
a,e)}}function Pa(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var e=P(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===d.inArray(!1,e)){a.oLoadedState=d.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();d.extend(a.oPreviousSearch,c.oSearch);d.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(e=0;e<c.abVisCols.length;e++)b.saved_aoColumns[e]=
{},b.saved_aoColumns[e].bVisible=c.abVisCols[e];P(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function aa(a){for(var b=0;b<e.settings.length;b++)if(e.settings[b].nTable===a)return e.settings[b];return null}function kb(a){var b=[];a=a.aoData;for(var d=0,c=a.length;d<c;d++)null!==a[d].nTr&&b.push(a[d].nTr);return b}function lb(a,d){var c=[],e,f,g,h,l,m;f=0;var n=a.aoData.length;d!==b&&(f=d,n=d+1);for(g=f;g<n;g++)if(m=a.aoData[g],null!==m.nTr){f=[];for(e=m.nTr.firstChild;e;)h=e.nodeName.toLowerCase(),
"td"!=h&&"th"!=h||f.push(e),e=e.nextSibling;h=e=0;for(l=a.aoColumns.length;h<l;h++)a.aoColumns[h].bVisible?c.push(f[h-e]):(c.push(m._anHidden[h]),e++)}return c}function Ca(b,d,c){b=null===b?"DataTables warning: "+c:"DataTables warning (table id = '"+b.sTableId+"'): "+c;if(0===d)if("alert"==e.ext.sErrMode)alert(b);else throw Error(b);else a.console&&console.log&&console.log(b)}function ba(a,d,c,e){e===b&&(e=c);d[c]!==b&&(a[e]=d[c])}function Db(a,b){var c,e;for(e in b)b.hasOwnProperty(e)&&(c=b[e],"object"===
typeof f[e]&&null!==c&&!1===d.isArray(c)?d.extend(!0,a[e],c):a[e]=c);return a}function Vb(a,b,c){d(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function Q(a,b,d,c){d&&a[b].push({fn:d,sName:c})}function P(a,b,c,e){b=a[b];for(var f=[],g=b.length-1;0<=g;g--)f.push(b[g].fn.apply(a.oInstance,e));null!==c&&d(a.oInstance).trigger(c,e);return f}function Sa(a){var b=d('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];
c.body.appendChild(b);a.oBrowser.bScrollOversize=100===d("#DT_BrowserTest",b)[0].offsetWidth?!0:!1;c.body.removeChild(b)}function ma(a){return function(){var b=[aa(this[e.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return e.ext.oApi[a].apply(this,b)}}var ya=/\[.*?\]$/,Ma=a.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,e,f=[],g=d.isArray(a);for(c in a)e=a[c],b=typeof e,"string"===b?e='"'+e+'"':"object"===b&&
null!==e&&(e=Ma(e)),f.push((g?"":'"'+c+'":')+e);return(g?"[":"{")+f+(g?"]":"}")};this.$=function(a,b){var c,f,g=[],h;f=aa(this[e.ext.iApiIndex]);var l=f.aoData,m=f.aiDisplay,n=f.aiDisplayMaster;b||(b={});b=d.extend({},{filter:"none",order:"current",page:"all"},b);if("current"==b.page)for(c=f._iDisplayStart,f=f.fnDisplayEnd();c<f;c++)(h=l[m[c]].nTr)&&g.push(h);else if("current"==b.order&&"none"==b.filter)for(c=0,f=n.length;c<f;c++)(h=l[n[c]].nTr)&&g.push(h);else if("current"==b.order&&"applied"==b.filter)for(c=
0,f=m.length;c<f;c++)(h=l[m[c]].nTr)&&g.push(h);else if("original"==b.order&&"none"==b.filter)for(c=0,f=l.length;c<f;c++)(h=l[c].nTr)&&g.push(h);else if("original"==b.order&&"applied"==b.filter)for(c=0,f=l.length;c<f;c++)h=l[c].nTr,-1!==d.inArray(c,m)&&h&&g.push(h);else Ca(f,1,"Unknown selection options");g=d(g);c=g.filter(a);g=g.find(a);return d([].concat(d.makeArray(c),d.makeArray(g)))};this._=function(a,b){var d=[],c,e,f=this.$(a,b);c=0;for(e=f.length;c<e;c++)d.push(this.fnGetData(f[c]));return d};
this.fnAddData=function(a,d){if(0===a.length)return[];var c=[],f,g=aa(this[e.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0])for(var h=0;h<a.length;h++){f=J(g,a[h]);if(-1==f)return c;c.push(f)}else{f=J(g,a);if(-1==f)return c;c.push(f)}g.aiDisplay=g.aiDisplayMaster.slice();(d===b||d)&&ka(g);return c};this.fnAdjustColumnSizing=function(a){var d=aa(this[e.ext.iApiIndex]);l(d);a===b||a?this.fnDraw(!1):""===d.oScroll.sX&&""===d.oScroll.sY||this.oApi._fnScrollDraw(d)};this.fnClearTable=function(a){var d=
aa(this[e.ext.iApiIndex]);pa(d);(a===b||a)&&ua(d)};this.fnClose=function(a){for(var b=aa(this[e.ext.iApiIndex]),d=0;d<b.aoOpenRows.length;d++)if(b.aoOpenRows[d].nParent==a)return(a=b.aoOpenRows[d].nTr.parentNode)&&a.removeChild(b.aoOpenRows[d].nTr),b.aoOpenRows.splice(d,1),0;return 1};this.fnDeleteRow=function(a,c,f){var g=aa(this[e.ext.iApiIndex]),h,l;a="object"===typeof a?C(g,a):a;var m=g.aoData.splice(a,1);h=0;for(l=g.aoData.length;h<l;h++)null!==g.aoData[h].nTr&&(g.aoData[h].nTr._DT_RowIndex=
h);h=d.inArray(a,g.aiDisplay);g.asDataSearch.splice(h,1);La(g.aiDisplayMaster,a);La(g.aiDisplay,a);"function"===typeof c&&c.call(this,g,m);g._iDisplayStart>=g.fnRecordsDisplay()&&(g._iDisplayStart-=g._iDisplayLength,0>g._iDisplayStart&&(g._iDisplayStart=0));if(f===b||f)Ia(g),ua(g);return m};this.fnDestroy=function(a){var c=aa(this[e.ext.iApiIndex]),g=c.nTableWrapper.parentNode,h=c.nTBody,l,m;a=a===b?!1:a;c.bDestroying=!0;P(c,"aoDestroyCallback","destroy",[c]);if(!a)for(l=0,m=c.aoColumns.length;l<
m;l++)!1===c.aoColumns[l].bVisible&&this.fnSetColumnVis(l,!0);d(c.nTableWrapper).find("*").andSelf().unbind(".DT");d("tbody>tr>td."+c.oClasses.sRowEmpty,c.nTable).parent().remove();c.nTable!=c.nTHead.parentNode&&(d(c.nTable).children("thead").remove(),c.nTable.appendChild(c.nTHead));c.nTFoot&&c.nTable!=c.nTFoot.parentNode&&(d(c.nTable).children("tfoot").remove(),c.nTable.appendChild(c.nTFoot));c.nTable.parentNode.removeChild(c.nTable);d(c.nTableWrapper).remove();c.aaSorting=[];c.aaSortingFixed=[];
db(c);d(kb(c)).removeClass(c.asStripeClasses.join(" "));d("th, td",c.nTHead).removeClass([c.oClasses.sSortable,c.oClasses.sSortableAsc,c.oClasses.sSortableDesc,c.oClasses.sSortableNone].join(" "));c.bJUI&&(d("th span."+c.oClasses.sSortIcon+", td span."+c.oClasses.sSortIcon,c.nTHead).remove(),d("th, td",c.nTHead).each(function(){var a=d("div."+c.oClasses.sSortJUIWrapper,this),b=a.contents();d(this).append(b);a.remove()}));!a&&c.nTableReinsertBefore?g.insertBefore(c.nTable,c.nTableReinsertBefore):a||
g.appendChild(c.nTable);l=0;for(m=c.aoData.length;l<m;l++)null!==c.aoData[l].nTr&&h.appendChild(c.aoData[l].nTr);!0===c.oFeatures.bAutoWidth&&(c.nTable.style.width=ea(c.sDestroyWidth));if(m=c.asDestroyStripes.length)for(a=d(h).children("tr"),l=0;l<m;l++)a.filter(":nth-child("+m+"n + "+l+")").addClass(c.asDestroyStripes[l]);l=0;for(m=e.settings.length;l<m;l++)e.settings[l]==c&&e.settings.splice(l,1);f=c=null};this.fnDraw=function(a){var b=aa(this[e.ext.iApiIndex]);!1===a?(Ia(b),ua(b)):ka(b)};this.fnFilter=
function(a,f,g,h,l,m){var n=aa(this[e.ext.iApiIndex]);if(n.oFeatures.bFilter){if(g===b||null===g)g=!1;if(h===b||null===h)h=!0;if(l===b||null===l)l=!0;if(m===b||null===m)m=!0;if(f===b||null===f){if(Da(n,{sSearch:a+"",bRegex:g,bSmart:h,bCaseInsensitive:m},1),l&&n.aanFeatures.f)for(f=n.aanFeatures.f,g=0,h=f.length;g<h;g++)try{f[g]._DT_Input!=c.activeElement&&d(f[g]._DT_Input).val(a)}catch(p){d(f[g]._DT_Input).val(a)}}else d.extend(n.aoPreSearchCols[f],{sSearch:a+"",bRegex:g,bSmart:h,bCaseInsensitive:m}),
Da(n,n.oPreviousSearch,1)}};this.fnGetData=function(a,d){var c=aa(this[e.ext.iApiIndex]);if(a!==b){var f=a;if("object"===typeof a){var g=a.nodeName.toLowerCase();"tr"===g?f=C(c,a):"td"===g&&(f=C(c,a.parentNode),d=t(c,f,a))}return d!==b?F(c,f,d,""):c.aoData[f]!==b?c.aoData[f]._aData:null}return T(c)};this.fnGetNodes=function(a){var d=aa(this[e.ext.iApiIndex]);return a!==b?d.aoData[a]!==b?d.aoData[a].nTr:null:kb(d)};this.fnGetPosition=function(a){var b=aa(this[e.ext.iApiIndex]),d=a.nodeName.toUpperCase();
return"TR"==d?C(b,a):"TD"==d||"TH"==d?(d=C(b,a.parentNode),a=t(b,d,a),[d,n(b,a),a]):null};this.fnIsOpen=function(a){for(var b=aa(this[e.ext.iApiIndex]),d=0;d<b.aoOpenRows.length;d++)if(b.aoOpenRows[d].nParent==a)return!0;return!1};this.fnOpen=function(a,b,f){var g=aa(this[e.ext.iApiIndex]),h=kb(g);if(-1!==d.inArray(a,h)){this.fnClose(a);var h=c.createElement("tr"),l=c.createElement("td");h.appendChild(l);l.className=f;l.colSpan=q(g);"string"===typeof b?l.innerHTML=b:d(l).html(b);b=d("tr",g.nTBody);
-1!=d.inArray(a,b)&&d(h).insertAfter(a);g.aoOpenRows.push({nTr:h,nParent:a});return h}};this.fnPageChange=function(a,d){var c=aa(this[e.ext.iApiIndex]);$a(c,a);Ia(c);(d===b||d)&&ua(c)};this.fnSetColumnVis=function(a,d,c){var f=aa(this[e.ext.iApiIndex]),g,h,m=f.aoColumns,n=f.aoData,p,t;if(m[a].bVisible!=d){if(d){for(g=h=0;g<a;g++)m[g].bVisible&&h++;t=h>=q(f);if(!t)for(g=a;g<m.length;g++)if(m[g].bVisible){p=g;break}g=0;for(h=n.length;g<h;g++)null!==n[g].nTr&&(t?n[g].nTr.appendChild(n[g]._anHidden[a]):
n[g].nTr.insertBefore(n[g]._anHidden[a],lb(f,g)[p]))}else for(g=0,h=n.length;g<h;g++)null!==n[g].nTr&&(p=lb(f,g)[a],n[g]._anHidden[a]=p,p.parentNode.removeChild(p));m[a].bVisible=d;wa(f,f.aoHeader);f.nTFoot&&wa(f,f.aoFooter);g=0;for(h=f.aoOpenRows.length;g<h;g++)f.aoOpenRows[g].nTr.colSpan=q(f);if(c===b||c)l(f),ua(f);Z(f)}};this.fnSettings=function(){return aa(this[e.ext.iApiIndex])};this.fnSort=function(a){var b=aa(this[e.ext.iApiIndex]);b.aaSorting=a;Xa(b)};this.fnSortListener=function(a,b,d){bb(aa(this[e.ext.iApiIndex]),
a,b,d)};this.fnUpdate=function(a,c,f,g,h){var m=aa(this[e.ext.iApiIndex]);c="object"===typeof c?C(m,c):c;if(d.isArray(a)&&f===b)for(m.aoData[c]._aData=a.slice(),f=0;f<m.aoColumns.length;f++)this.fnUpdate(F(m,c,f),c,f,!1,!1);else if(d.isPlainObject(a)&&f===b)for(m.aoData[c]._aData=d.extend(!0,{},a),f=0;f<m.aoColumns.length;f++)this.fnUpdate(F(m,c,f),c,f,!1,!1);else{O(m,c,f,a);a=F(m,c,f,"display");var n=m.aoColumns[f];null!==n.fnRender&&(a=Wa(m,c,f),n.bUseRendered&&O(m,c,f,a));null!==m.aoData[c].nTr&&
(lb(m,c)[f].innerHTML=a)}f=d.inArray(c,m.aiDisplay);m.asDataSearch[f]=p(m,z(m,c,"filter",v(m,"bSearchable")));(h===b||h)&&l(m);(g===b||g)&&ka(m);return 0};this.fnVersionCheck=e.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:ma,_fnInitialise:wb,_fnInitComplete:Mb,_fnLanguageCompat:Bb,_fnAddColumn:g,_fnColumnOptions:h,_fnAddData:J,_fnCreateTr:va,_fnGatherData:I,_fnBuildHead:ha,_fnDrawHead:wa,_fnDraw:ua,_fnReDraw:ka,_fnAjaxUpdate:da,_fnAjaxParameters:pb,_fnAjaxUpdateDraw:Ga,_fnServerParams:jb,_fnAddOptionsHtml:oa,
_fnFeatureHtmlTable:fb,_fnScrollDraw:hb,_fnAdjustColumnSizing:l,_fnFeatureHtmlFilter:qa,_fnFilterComplete:Da,_fnFilterCustom:cb,_fnFilterColumn:ca,_fnFilter:qb,_fnBuildSearchArray:ub,_fnBuildSearchRow:p,_fnFilterCreateSearch:nb,_fnDataToSearch:Lb,_fnSort:Xa,_fnSortAttachListener:bb,_fnSortingClasses:db,_fnFeatureHtmlPaginate:Nb,_fnPageChange:$a,_fnFeatureHtmlInfo:Gb,_fnUpdateInfo:Ra,_fnFeatureHtmlLength:xb,_fnFeatureHtmlProcessing:Rb,_fnProcessingDisplay:ab,_fnVisibleToColumnIndex:m,_fnColumnIndexToVisible:n,
_fnNodeToDataIndex:C,_fnVisbleColumns:q,_fnCalculateEnd:Ia,_fnConvertToWidth:fa,_fnCalculateColumnWidths:Ba,_fnScrollingWidthAdjust:rb,_fnGetWidestNode:yb,_fnGetMaxLenString:Sb,_fnStringToCss:ea,_fnDetectType:A,_fnSettingsFromNode:aa,_fnGetDataMaster:T,_fnGetTrNodes:kb,_fnGetTdNodes:lb,_fnEscapeRegex:Oa,_fnDeleteIndex:La,_fnReOrderIndex:w,_fnColumnOrdering:E,_fnLog:Ca,_fnClearTable:pa,_fnSaveState:Z,_fnLoadState:Pa,_fnCreateCookie:function(b,e,f,g,h){var l=new Date;l.setTime(l.getTime()+1E3*f);f=
a.location.pathname.split("/");b=b+"_"+f.pop().replace(/[\/:]/g,"").toLowerCase();var m;null!==h?(m="function"===typeof d.parseJSON?d.parseJSON(e):eval("("+e+")"),e=h(b,m,l.toGMTString(),f.join("/")+"/")):e=b+"="+encodeURIComponent(e)+"; expires="+l.toGMTString()+"; path="+f.join("/")+"/";b=c.cookie.split(";");h=e.split(";")[0].length;l=[];if(4096<h+c.cookie.length+10){for(var n=0,p=b.length;n<p;n++)if(-1!=b[n].indexOf(g)){var q=b[n].split("=");try{(m=eval("("+decodeURIComponent(q[1])+")"))&&m.iCreate&&
l.push({name:q[0],time:m.iCreate})}catch(t){}}for(l.sort(function(a,b){return b.time-a.time});4096<h+c.cookie.length+10;){if(0===l.length)return;g=l.pop();c.cookie=g.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+f.join("/")+"/"}}c.cookie=e},_fnReadCookie:function(b){var d=a.location.pathname.split("/");b=b+"_"+d[d.length-1].replace(/[\/:]/g,"").toLowerCase()+"=";for(var d=c.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(b))return decodeURIComponent(f.substring(b.length,
f.length))}return null},_fnDetectHeader:sa,_fnGetUniqueThs:N,_fnScrollBarWidth:Tb,_fnApplyToChildren:gb,_fnMap:ba,_fnGetRowData:z,_fnGetCellData:F,_fnSetCellData:O,_fnGetObjectDataFn:S,_fnSetObjectDataFn:V,_fnApplyColumnDefs:D,_fnBindAction:Vb,_fnExtend:Db,_fnCallbackReg:Q,_fnCallbackFire:P,_fnJsonString:Ma,_fnRender:Wa,_fnNodeToColumnIndex:t,_fnInfoMacros:vb,_fnBrowserDetect:Sa,_fnGetColumns:v};d.extend(e.ext.oApi,this.oApi);for(var X in e.ext.oApi)X&&(this[X]=ma(X));var Ja=this;this.each(function(){var a=
0,l,m,n;m=this.getAttribute("id");var p=!1,q=!1;if("table"!=this.nodeName.toLowerCase())Ca(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{a=0;for(l=e.settings.length;a<l;a++){if(e.settings[a].nTable==this){if(f===b||f.bRetrieve)return e.settings[a].oInstance;if(f.bDestroy){e.settings[a].oInstance.fnDestroy();break}else{Ca(e.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");
return}}if(e.settings[a].sTableId==this.id){e.settings.splice(a,1);break}}if(null===m||""===m)this.id=m="DataTables_Table_"+e.ext._oExternConfig.iNextUnique++;var t=d.extend(!0,{},e.models.oSettings,{nTable:this,oApi:Ja.oApi,oInit:f,sDestroyWidth:d(this).width(),sInstance:m,sTableId:m});e.settings.push(t);t.oInstance=1===Ja.length?Ja:d(this).dataTable();f||(f={});f.oLanguage&&Bb(f.oLanguage);f=Db(d.extend(!0,{},e.defaults),f);ba(t.oFeatures,f,"bPaginate");ba(t.oFeatures,f,"bLengthChange");ba(t.oFeatures,
f,"bFilter");ba(t.oFeatures,f,"bSort");ba(t.oFeatures,f,"bInfo");ba(t.oFeatures,f,"bProcessing");ba(t.oFeatures,f,"bAutoWidth");ba(t.oFeatures,f,"bSortClasses");ba(t.oFeatures,f,"bServerSide");ba(t.oFeatures,f,"bDeferRender");ba(t.oScroll,f,"sScrollX","sX");ba(t.oScroll,f,"sScrollXInner","sXInner");ba(t.oScroll,f,"sScrollY","sY");ba(t.oScroll,f,"bScrollCollapse","bCollapse");ba(t.oScroll,f,"bScrollInfinite","bInfinite");ba(t.oScroll,f,"iScrollLoadGap","iLoadGap");ba(t.oScroll,f,"bScrollAutoCss","bAutoCss");
ba(t,f,"asStripeClasses");ba(t,f,"asStripClasses","asStripeClasses");ba(t,f,"fnServerData");ba(t,f,"fnFormatNumber");ba(t,f,"sServerMethod");ba(t,f,"aaSorting");ba(t,f,"aaSortingFixed");ba(t,f,"aLengthMenu");ba(t,f,"sPaginationType");ba(t,f,"sAjaxSource");ba(t,f,"sAjaxDataProp");ba(t,f,"iCookieDuration");ba(t,f,"sCookiePrefix");ba(t,f,"sDom");ba(t,f,"bSortCellsTop");ba(t,f,"iTabIndex");ba(t,f,"oSearch","oPreviousSearch");ba(t,f,"aoSearchCols","aoPreSearchCols");ba(t,f,"iDisplayLength","_iDisplayLength");
ba(t,f,"bJQueryUI","bJUI");ba(t,f,"fnCookieCallback");ba(t,f,"fnStateLoad");ba(t,f,"fnStateSave");ba(t.oLanguage,f,"fnInfoCallback");Q(t,"aoDrawCallback",f.fnDrawCallback,"user");Q(t,"aoServerParams",f.fnServerParams,"user");Q(t,"aoStateSaveParams",f.fnStateSaveParams,"user");Q(t,"aoStateLoadParams",f.fnStateLoadParams,"user");Q(t,"aoStateLoaded",f.fnStateLoaded,"user");Q(t,"aoRowCallback",f.fnRowCallback,"user");Q(t,"aoRowCreatedCallback",f.fnCreatedRow,"user");Q(t,"aoHeaderCallback",f.fnHeaderCallback,
"user");Q(t,"aoFooterCallback",f.fnFooterCallback,"user");Q(t,"aoInitComplete",f.fnInitComplete,"user");Q(t,"aoPreDrawCallback",f.fnPreDrawCallback,"user");t.oFeatures.bServerSide&&t.oFeatures.bSort&&t.oFeatures.bSortClasses?Q(t,"aoDrawCallback",db,"server_side_sort_classes"):t.oFeatures.bDeferRender&&Q(t,"aoDrawCallback",db,"defer_sort_classes");f.bJQueryUI?(d.extend(t.oClasses,e.ext.oJUIClasses),f.sDom===e.defaults.sDom&&"lfrtip"===e.defaults.sDom&&(t.sDom='<"H"lfr>t<"F"ip>')):d.extend(t.oClasses,
e.ext.oStdClasses);d(this).addClass(t.oClasses.sTable);if(""!==t.oScroll.sX||""!==t.oScroll.sY)t.oScroll.iBarWidth=Tb();t.iInitDisplayStart===b&&(t.iInitDisplayStart=f.iDisplayStart,t._iDisplayStart=f.iDisplayStart);f.bStateSave&&(t.oFeatures.bStateSave=!0,Pa(t,f),Q(t,"aoDrawCallback",Z,"state_save"));null!==f.iDeferLoading&&(t.bDeferLoading=!0,a=d.isArray(f.iDeferLoading),t._iRecordsDisplay=a?f.iDeferLoading[0]:f.iDeferLoading,t._iRecordsTotal=a?f.iDeferLoading[1]:f.iDeferLoading);null!==f.aaData&&
(q=!0);""!==f.oLanguage.sUrl?(t.oLanguage.sUrl=f.oLanguage.sUrl,d.getJSON(t.oLanguage.sUrl,null,function(a){Bb(a);d.extend(!0,t.oLanguage,f.oLanguage,a);wb(t)}),p=!0):d.extend(!0,t.oLanguage,f.oLanguage);null===f.asStripeClasses&&(t.asStripeClasses=[t.oClasses.sStripeOdd,t.oClasses.sStripeEven]);l=t.asStripeClasses.length;t.asDestroyStripes=[];if(l){m=!1;n=d(this).children("tbody").children("tr:lt("+l+")");for(a=0;a<l;a++)n.hasClass(t.asStripeClasses[a])&&(m=!0,t.asDestroyStripes.push(t.asStripeClasses[a]));
m&&n.removeClass(t.asStripeClasses.join(" "))}m=[];a=this.getElementsByTagName("thead");0!==a.length&&(sa(t.aoHeader,a[0]),m=N(t));if(null===f.aoColumns)for(n=[],a=0,l=m.length;a<l;a++)n.push(null);else n=f.aoColumns;a=0;for(l=n.length;a<l;a++)f.saved_aoColumns!==b&&f.saved_aoColumns.length==l&&(null===n[a]&&(n[a]={}),n[a].bVisible=f.saved_aoColumns[a].bVisible),g(t,m?m[a]:null);D(t,f.aoColumnDefs,n,function(a,b){h(t,a,b)});a=0;for(l=t.aaSorting.length;a<l;a++){t.aaSorting[a][0]>=t.aoColumns.length&&
(t.aaSorting[a][0]=0);var C=t.aoColumns[t.aaSorting[a][0]];t.aaSorting[a][2]===b&&(t.aaSorting[a][2]=0);f.aaSorting===b&&t.saved_aaSorting===b&&(t.aaSorting[a][1]=C.asSorting[0]);m=0;for(n=C.asSorting.length;m<n;m++)if(t.aaSorting[a][1]==C.asSorting[m]){t.aaSorting[a][2]=m;break}}db(t);Sa(t);a=d(this).children("caption").each(function(){this._captionSide=d(this).css("caption-side")});l=d(this).children("thead");0===l.length&&(l=[c.createElement("thead")],this.appendChild(l[0]));t.nTHead=l[0];l=d(this).children("tbody");
0===l.length&&(l=[c.createElement("tbody")],this.appendChild(l[0]));t.nTBody=l[0];t.nTBody.setAttribute("role","alert");t.nTBody.setAttribute("aria-live","polite");t.nTBody.setAttribute("aria-relevant","all");l=d(this).children("tfoot");0===l.length&&0<a.length&&(""!==t.oScroll.sX||""!==t.oScroll.sY)&&(l=[c.createElement("tfoot")],this.appendChild(l[0]));0<l.length&&(t.nTFoot=l[0],sa(t.aoFooter,t.nTFoot));if(q)for(a=0;a<f.aaData.length;a++)J(t,f.aaData[a]);else I(t);t.aiDisplay=t.aiDisplayMaster.slice();
t.bInitialised=!0;!1===p&&wb(t)}});Ja=null;return this};e.fnVersionCheck=function(a){var b=function(a,b){for(;a.length<b;)a+="0";return a},d=e.ext.sVersion.split(".");a=a.split(".");for(var c="",m="",n=0,q=a.length;n<q;n++)c+=b(d[n],3),m+=b(a[n],3);return parseInt(c,10)>=parseInt(m,10)};e.fnIsDataTable=function(a){for(var b=e.settings,d=0;d<b.length;d++)if(b[d].nTable===a||b[d].nScrollHead===a||b[d].nScrollFoot===a)return!0;return!1};e.fnTables=function(a){var b=[];jQuery.each(e.settings,function(c,
e){(!a||!0===a&&d(e.nTable).is(":visible"))&&b.push(e.nTable)});return b};e.version="1.9.4";e.settings=[];e.models={};e.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:e.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:e.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};e.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};e.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],
_sRowStripe:""};e.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};e.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,
25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1E3>a)return a;var b=a+"";a=b.split("");for(var d=
"",b=b.length,c=0;c<b;c++)0===c%3&&0!==c&&(d=this.oLanguage.sInfoThousands+d),d=a[b-c-1]+d;return d},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,e){e.jqXHR=d.ajax({url:a,data:b,success:function(a){a.sError&&e.oApi._fnLog(e,0,a.sError);d(e.oInstance).trigger("xhr",[e,a]);c(a)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(a,b,d){"parsererror"==b&&e.oApi._fnLog(e,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},
fnServerParams:null,fnStateLoad:function(a){a=this.oApi._fnReadCookie(a.sCookiePrefix+a.sInstance);var b;try{b="function"===typeof d.parseJSON?d.parseJSON(a):eval("("+a+")")}catch(c){b=null}return b},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,
iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",
sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},e.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};e.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,
sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};e.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},
aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,
bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,
bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,
this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};e.ext=d.extend(!0,{},e.models.ext);d.extend(e.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",
sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",
sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});d.extend(e.ext.oJUIClasses,e.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",
sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",
sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",
sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});
d.extend(e.ext.oPagination,{two_button:{fnInit:function(a,b,c){var e=a.oLanguage.oPaginate,m=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)},e=a.bJUI?'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+
'" role="button">'+e.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+e.sNext+"</a>";d(b).append(e);var n=d("a",b),e=n[0],n=n[1];a.oApi._fnBindAction(e,{action:"previous"},m);a.oApi._fnBindAction(n,{action:"next"},m);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_previous",n.id=a.sTableId+"_next",e.setAttribute("aria-controls",a.sTableId),n.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var d=
a.oClasses,c=a.aanFeatures.p,e,n=0,q=c.length;n<q;n++)if(e=c[n].firstChild)e.className=0===a._iDisplayStart?d.sPagePrevDisabled:d.sPagePrevEnabled,e=e.nextSibling,e.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?d.sPageNextDisabled:d.sPageNextEnabled}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var e=a.oLanguage.oPaginate,m=a.oClasses,n=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};d(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageFirst+'">'+
e.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPagePrevious+'">'+e.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageNext+'">'+e.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageLast+'">'+e.sLast+"</a>");var q=d("a",b),e=q[0],m=q[1],v=q[2],q=q[3];a.oApi._fnBindAction(e,{action:"first"},n);a.oApi._fnBindAction(m,{action:"previous"},n);a.oApi._fnBindAction(v,{action:"next"},n);a.oApi._fnBindAction(q,{action:"last"},
n);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_first",m.id=a.sTableId+"_previous",v.id=a.sTableId+"_next",q.id=a.sTableId+"_last")},fnUpdate:function(a,b){if(a.aanFeatures.p){var c=e.ext.oPagination.iFullNumbersShowPages,l=Math.floor(c/2),m=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),n=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,q="",v,A=a.oClasses,w,E=a.aanFeatures.p,D=function(d){a.oApi._fnBindAction(this,{page:d+v-1},function(d){a.oApi._fnPageChange(a,d.data.page);
b(a);d.preventDefault()})};-1===a._iDisplayLength?n=l=v=1:m<c?(v=1,l=m):n<=l?(v=1,l=c):n>=m-l?(v=m-c+1,l=m):(v=n-Math.ceil(c/2)+1,l=v+c-1);for(c=v;c<=l;c++)q+=n!==c?'<a tabindex="'+a.iTabIndex+'" class="'+A.sPageButton+'">'+a.fnFormatNumber(c)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+A.sPageButtonActive+'">'+a.fnFormatNumber(c)+"</a>";c=0;for(l=E.length;c<l;c++)w=E[c],w.hasChildNodes()&&(d("span:eq(0)",w).html(q).children("a").each(D),w=w.getElementsByTagName("a"),w=[w[0],w[1],w[w.length-2],
w[w.length-1]],d(w).removeClass(A.sPageButton+" "+A.sPageButtonActive+" "+A.sPageButtonStaticDisabled),d([w[0],w[1]]).addClass(1==n?A.sPageButtonStaticDisabled:A.sPageButton),d([w[2],w[3]]).addClass(0===m||n===m||-1===a._iDisplayLength?A.sPageButtonStaticDisabled:A.sPageButton))}}}});d.extend(e.ext.oSort,{"string-pre":function(a){"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():"");return a.toLowerCase()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<
b?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return a<b?-1:a>b?1:0},"html-desc":function(a,b){return a<b?1:a>b?-1:0},"date-pre":function(a){a=Date.parse(a);if(isNaN(a)||""===a)a=Date.parse("01/01/1970 00:00:00");return a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}});d.extend(e.ext.aTypes,
[function(a){if("number"===typeof a)return"numeric";if("string"!==typeof a)return null;var b,d=!1;b=a.charAt(0);if(-1=="0123456789-".indexOf(b))return null;for(var c=1;c<a.length;c++){b=a.charAt(c);if(-1=="0123456789.".indexOf(b))return null;if("."==b){if(d)return null;d=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"===typeof a&&0===a.length?"date":null},function(a){return"string"===typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]);d.fn.DataTable=
e;d.fn.dataTable=e;d.fn.dataTableSettings=e.settings;d.fn.dataTableExt=e.ext})})(window,document);
var ZeroClipboard_TableTools={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(new RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+
a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,c,b){(a=this.clients[a])&&a.receiveEvent(c,b)},register:function(a,c){this.clients[a]=c},getDOMObjectPosition:function(a){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};""!=a.style.width&&(c.width=a.style.width.replace("px",""));""!=a.style.height&&(c.height=a.style.height.replace("px",""));for(;a;)c.left+=a.offsetLeft,c.top+=a.offsetTop,a=a.offsetParent;return c},
Client:function(a){this.handlers={};this.id=ZeroClipboard_TableTools.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;ZeroClipboard_TableTools.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard_TableTools.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,c){this.domElement=ZeroClipboard_TableTools.$(a);var b=99;this.domElement.style.zIndex&&(b=parseInt(this.domElement.style.zIndex)+1);var d=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var e=this.div.style;e.position="absolute";e.left="0px";e.top="0px";e.width=d.width+
"px";e.height=d.height+"px";e.zIndex=b;"undefined"!=typeof c&&""!=c&&(this.div.title=c);0!=d.width&&0!=d.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(d.width,d.height))},positionElement:function(){var a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),c=this.div.style;c.position="absolute";c.width=a.width+"px";c.height=a.height+"px";0!=a.width&&0!=a.height&&(this.sized=!0,c=this.div.childNodes[0],c.width=a.width,c.height=
a.height)},getHTML:function(a,c){var b="",d="id="+this.id+"&width="+a+"&height="+c;if(navigator.userAgent.match(/MSIE/))var e=location.href.match(/^https/i)?"https://":"http://",b=b+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+c+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
ZeroClipboard_TableTools.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>');else b+='<embed id="'+this.movieId+'" src="'+ZeroClipboard_TableTools.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+c+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
d+'" wmode="transparent" />';return b},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(c){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard_TableTools.$(a))||this.hide());if(this.domElement&&this.div){a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);
var c=this.div.style;c.left=""+a.left+"px";c.top=""+a.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a;this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a;this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a;this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a;this.ready&&this.movie.setFileName(a)},
setAction:function(a){this.action=a;this.ready&&this.movie.setAction(a)},addEventListener:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(c)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);
if(!this.movie){var b=this;setTimeout(function(){b.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){b=this;setTimeout(function(){b.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);
break;case "mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=
0,e=this.handlers[a].length;d<e;d++){var f=this.handlers[a][d];if("function"==typeof f)f(this,c);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,c);else if("string"==typeof f)window[f](this,c)}}};var TableTools;
(function(a,c,b){TableTools=function(b,c){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:b.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,
background:null}};this.classes=a.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof c&&(c={});this._fnConstruct(c);return this};TableTools.prototype={fnGetSelected:function(a){var b=[],c=this.s.dt.aoData,g=this.s.dt.aiDisplay,h;if(a)for(a=0,h=g.length;a<h;a++)c[g[a]]._DTTT_selected&&b.push(c[g[a]].nTr);else for(a=0,h=c.length;a<h;a++)c[a]._DTTT_selected&&b.push(c[a].nTr);return b},
fnGetSelectedData:function(){var a=[],b=this.s.dt.aoData,c,g;c=0;for(g=b.length;c<g;c++)b[c]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(c));return a},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){var b=this._fnGetMasterSettings();this._fnRowSelect(!0===a?b.dt.aiDisplay:b.dt.aoData)},fnSelectNone:function(a){this._fnGetMasterSettings();this._fnRowDeselect(this.fnGetSelected(a))},fnSelect:function(a){"single"==
this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(a)):"multi"==this.s.select.type&&this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var c="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?c=a.sTitle:(a=b.getElementsByTagName("title"),0<a.length&&(c=a[0].innerHTML));return 4>"\u00a1".toString().length?c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):c.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var b=this.s.dt.aoColumns;
a=this._fnColumnTargets(a.mColumns);var c=[],g=0,h=0,l,m;l=0;for(m=a.length;l<m;l++)a[l]&&(g=b[l].nTh.offsetWidth,h+=g,c.push(g));l=0;for(m=c.length;l<m;l++)c[l]/=h;return c.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement()}},
fnResizeRequired:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];if("undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&!1===b.sized)return!0}return!1},fnPrint:function(a,b){void 0===b&&(b={});void 0===a||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(c,e){var f=b.createElement("div");f.className=this.classes.print.info;f.innerHTML=c;b.body.appendChild(f);setTimeout(function(){a(f).fadeOut("normal",function(){b.body.removeChild(f)})},
e)},_fnConstruct:function(a){var c=this;this._fnCustomiseSettings(a);this.dom.container=b.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){c.dom.container.innerHTML=""}})},_fnCustomiseSettings:function(b){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=
!0);this.dom.table=this.s.dt.nTable;this.s.custom=a.extend({},TableTools.DEFAULTS,b);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof ZeroClipboard_TableTools&&(ZeroClipboard_TableTools.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);
this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(b,c){for(var f,g=0,h=b.length;g<h;g++){if("string"==typeof b[g]){if("undefined"==typeof TableTools.BUTTONS[b[g]]){alert("TableTools: Warning - unknown button type: "+b[g]);continue}f=a.extend({},TableTools.BUTTONS[b[g]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[b[g].sExtends]){alert("TableTools: Warning - unknown button type: "+b[g].sExtends);continue}f=a.extend({},TableTools.BUTTONS[b[g].sExtends],
!0);f=a.extend(f,b[g],!0)}c.appendChild(this._fnCreateButton(f,a(c).hasClass(this.classes.collection.container)))}},_fnCreateButton:function(a,b){var c=this._fnButtonBase(a,b);a.sAction.match(/flash/)?this._fnFlashConfig(c,a):"text"==a.sAction?this._fnTextConfig(c,a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));return c},_fnButtonBase:function(a,c){var f,g,h;c?(f="default"!==a.sTag?a.sTag:this.s.tags.collection.button,g=
"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,h=this.classes.collection.buttons.normal):(f="default"!==a.sTag?a.sTag:this.s.tags.button,g="default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,h=this.classes.buttons.normal);f=b.createElement(f);g=b.createElement(g);var l=this._fnGetMasterSettings();f.className=h+" "+a.sButtonClass;f.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+l.buttonCounter);f.appendChild(g);g.innerHTML=a.sButtonText;l.buttonCounter++;return f},_fnGetMasterSettings:function(){if(this.s.master)return this.s;
for(var a=TableTools._aInstances,b=0,c=a.length;b<c;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,c){var f=b.createElement(this.s.tags.collection.container);f.style.display="none";f.className=this.classes.collection.container;c._collection=f;b.body.appendChild(f);this._fnButtonDefinations(c.aButtons,f)},_fnCollectionShow:function(d,e){var f=this,g=a(d).offset(),h=e._collection,l=g.left,g=g.top+a(d).outerHeight(),m=a(c).height(),n=a(b).height(),q=a(c).width(),
v=a(b).width();h.style.position="absolute";h.style.left=l+"px";h.style.top=g+"px";h.style.display="block";a(h).css("opacity",0);var A=b.createElement("div");A.style.position="absolute";A.style.left="0px";A.style.top="0px";A.style.height=(m>n?m:n)+"px";A.style.width=(q>v?q:v)+"px";A.className=this.classes.collection.background;a(A).css("opacity",0);b.body.appendChild(A);b.body.appendChild(h);m=a(h).outerWidth();q=a(h).outerHeight();l+m>v&&(h.style.left=v-m+"px");g+q>n&&(h.style.top=g-q-a(d).outerHeight()+
"px");this.dom.collection.collection=h;this.dom.collection.background=A;setTimeout(function(){a(h).animate({opacity:1},500);a(A).animate({opacity:.25},500)},10);this.fnResizeButtons();a(A).click(function(){f._fnCollectionHide.call(f,null,null)})},_fnCollectionHide:function(b,c){null!==c&&"collection"==c.sExtends||null===this.dom.collection.collection||(a(this.dom.collection.collection).animate({opacity:0},500,function(a){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},
500,function(a){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var b=this,c=this.s.dt;a(c.nTable).addClass(this.classes.select.table);a("tr",c.nTBody).live("click",function(a){this.parentNode==c.nTBody&&null!==c.oInstance.fnGetData(this)&&(b.fnIsSelected(this)?b._fnRowDeselect(this,a):"single"==b.s.select.type?(b.fnSelectNone(),b._fnRowSelect(this,a)):"multi"==b.s.select.type&&b._fnRowSelect(this,
a))});c.oApi._fnCallbackReg(c,"aoRowCreatedCallback",function(f,g,h){c.aoData[h]._DTTT_selected&&a(f).addClass(b.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(b,c){var f=this._fnSelectData(b),g=[],h,l;h=0;for(l=f.length;h<l;h++)f[h].nTr&&g.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!0)){h=0;for(l=f.length;h<l;h++)f[h]._DTTT_selected=!0,f[h].nTr&&a(f[h].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&
this.s.select.postSelected.call(this,g);TableTools._fnEventDispatch(this,"select",g,!0)}},_fnRowDeselect:function(b,c){var f=this._fnSelectData(b),g=[],h,l;h=0;for(l=f.length;h<l;h++)f[h].nTr&&g.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!1)){h=0;for(l=f.length;h<l;h++)f[h]._DTTT_selected=!1,f[h].nTr&&a(f[h].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,g);TableTools._fnEventDispatch(this,
"select",g,!1)}},_fnSelectData:function(a){var b=[],c,g,h;if(a.nodeName)c=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[c]);else if("undefined"!==typeof a.length)for(g=0,h=a.length;g<h;g++)a[g].nodeName?(c=this.s.dt.oInstance.fnGetPosition(a[g]),b.push(this.s.dt.aoData[c])):"number"===typeof a[g]?b.push(this.s.dt.aoData[a[g]]):b.push(a[g]);else b.push(a);return b},_fnTextConfig:function(b,c){var f=this;null!==c.fnInit&&c.fnInit.call(this,b,c);""!==c.sToolTip&&(b.title=c.sToolTip);a(b).hover(function(){null!==
c.fnMouseover&&c.fnMouseover.call(this,b,c,null)},function(){null!==c.fnMouseout&&c.fnMouseout.call(this,b,c,null)});null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(a){c.fnSelect.call(f,b,c,a)});a(b).click(function(a){null!==c.fnClick&&c.fnClick.call(f,b,c,null);null!==c.fnComplete&&c.fnComplete.call(f,b,c,null,null);f._fnCollectionHide(b,c)})},_fnFlashConfig:function(a,b){var c=this,g=new ZeroClipboard_TableTools.Client;null!==b.fnInit&&b.fnInit.call(this,a,b);g.setHandCursor(!0);
"flash_save"==b.sAction?(g.setAction("save"),g.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),g.setBomInc(b.bBomInc),g.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(g.setAction("pdf"),g.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):g.setAction("copy");g.addEventListener("mouseOver",function(h){null!==b.fnMouseover&&b.fnMouseover.call(c,a,b,g)});g.addEventListener("mouseOut",function(h){null!==b.fnMouseout&&b.fnMouseout.call(c,a,b,g)});g.addEventListener("mouseDown",
function(h){null!==b.fnClick&&b.fnClick.call(c,a,b,g)});g.addEventListener("complete",function(h,l){null!==b.fnComplete&&b.fnComplete.call(c,a,b,g,l);c._fnCollectionHide(a,b)});this._fnFlashGlue(g,a,b.sToolTip)},_fnFlashGlue:function(a,c,f){var g=this,h=c.getAttribute("id");b.getElementById(h)?a.glue(c,f):setTimeout(function(){g._fnFlashGlue(a,c,f)},100)},_fnFlashSetText:function(a,b){var c=this._fnChunkData(b,8192);a.clearText();for(var g=0,h=c.length;g<h;g++)a.appendText(c[g])},_fnColumnTargets:function(a){var b=
[],c=this.s.dt;if("object"==typeof a){i=0;for(iLen=c.aoColumns.length;i<iLen;i++)b.push(!1);i=0;for(iLen=a.length;i<iLen;i++)b[a[i]]=!0}else if("visible"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!0:!1);else if("hidden"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!1:!0);else if("sortable"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(!0);
return b},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(b){var c,f,g,h,l,m=[],n="",q=this.s.dt,v,A=new RegExp(b.sFieldBoundary,"g"),w=this._fnColumnTargets(b.mColumns);g="undefined"!=typeof b.bSelectedOnly?b.bSelectedOnly:!1;if(b.bHeader){l=[];c=0;for(f=q.aoColumns.length;c<f;c++)w[c]&&(n=q.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),n=this._fnHtmlDecode(n),l.push(this._fnBoundData(n,
b.sFieldBoundary,A)));m.push(l.join(b.sFieldSeperator))}var E=q.aiDisplay;h=this.fnGetSelected();if("none"!==this.s.select.type&&g&&0!==h.length)for(E=[],c=0,f=h.length;c<f;c++)E.push(q.oInstance.fnGetPosition(h[c]));g=0;for(h=E.length;g<h;g++){v=q.aoData[E[g]].nTr;l=[];c=0;for(f=q.aoColumns.length;c<f;c++)w[c]&&(n=q.oApi._fnGetCellData(q,E[g],c,"display"),b.fnCellRender?n=b.fnCellRender(n,c,v,E[g])+"":"string"==typeof n?(n=n.replace(/\n/g," "),n=n.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
"$1$2$3"),n=n.replace(/<.*?>/g,"")):n+="",n=n.replace(/^\s+/,"").replace(/\s+$/,""),n=this._fnHtmlDecode(n),l.push(this._fnBoundData(n,b.sFieldBoundary,A)));m.push(l.join(b.sFieldSeperator));b.bOpenRows&&(c=a.grep(q.aoOpenRows,function(a){return a.nParent===v}),1===c.length&&(n=this._fnBoundData(a("td",c[0].nTr).html(),b.sFieldBoundary,A),m.push(n)))}if(b.bFooter&&null!==q.nTFoot){l=[];c=0;for(f=q.aoColumns.length;c<f;c++)w[c]&&null!==q.aoColumns[c].nTf&&(n=q.aoColumns[c].nTf.innerHTML.replace(/\n/g,
" ").replace(/<.*?>/g,""),n=this._fnHtmlDecode(n),l.push(this._fnBoundData(n,b.sFieldBoundary,A)));m.push(l.join(b.sFieldSeperator))}return _sLastData=m.join(this._fnNewline(b))},_fnBoundData:function(a,b,c){return""===b?a:b+a.replace(c,b+b)+b},_fnChunkData:function(a,b){for(var c=[],g=a.length,h=0;h<g;h+=b)h+b<g?c.push(a.substring(h,h+b)):c.push(a.substring(h,g));return c},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var c=b.createElement("div");return a.replace(/&([^\s]*);/g,function(a,
b){if("#"===a.substr(1,1))return String.fromCharCode(Number(b.substr(1)));c.innerHTML=a;return c.childNodes[0].nodeValue})},_fnPrintStart:function(d){var e=this,f=this.s.dt;this._fnPrintHideNodes(f.nTable);this.s.print.saveStart=f._iDisplayStart;this.s.print.saveLength=f._iDisplayLength;d.bShowAll&&(f._iDisplayStart=0,f._iDisplayLength=-1,f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f));if(""!==f.oScroll.sX||""!==f.oScroll.sY)this._fnPrintScrollStart(f),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){e._fnPrintScrollStart(f)});
var g=f.aanFeatures,h;for(h in g)if("i"!=h&&"t"!=h&&1==h.length)for(var l=0,m=g[h].length;l<m;l++)this.dom.print.hidden.push({node:g[h][l],display:"block"}),g[h][l].style.display="none";a(b.body).addClass(this.classes.print.body);""!==d.sInfo&&this.fnInfo(d.sInfo,3E3);d.sMessage&&(this.dom.print.message=b.createElement("div"),this.dom.print.message.className=this.classes.print.message,this.dom.print.message.innerHTML=d.sMessage,b.body.insertBefore(this.dom.print.message,b.body.childNodes[0]));this.s.print.saveScroll=
a(c).scrollTop();c.scrollTo(0,0);a(b).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),e._fnPrintEnd.call(e,a))})},_fnPrintEnd:function(d){d=this.s.dt;var e=this.s.print,f=this.dom.print;this._fnPrintShowNodes();if(""!==d.oScroll.sX||""!==d.oScroll.sY)a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd();c.scrollTo(0,e.saveScroll);null!==f.message&&(b.body.removeChild(f.message),f.message=null);a(b.body).removeClass("DTTT_Print");d._iDisplayStart=e.saveStart;d._iDisplayLength=
e.saveLength;d.oApi._fnCalculateEnd(d);d.oApi._fnDraw(d);a(b).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var b=this.s.dt;b.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var c=b.nTable.parentNode,f=b.nTable.getElementsByTagName("thead");0<f.length&&b.nTable.removeChild(f[0]);null!==b.nTFoot&&(f=b.nTable.getElementsByTagName("tfoot"),0<f.length&&b.nTable.removeChild(f[0]));f=b.nTHead.cloneNode(!0);b.nTable.insertBefore(f,b.nTable.childNodes[0]);null!==b.nTFoot&&
(f=b.nTFoot.cloneNode(!0),b.nTable.insertBefore(f,b.nTable.childNodes[1]));""!==b.oScroll.sX&&(b.nTable.style.width=a(b.nTable).outerWidth()+"px",c.style.width=a(b.nTable).outerWidth()+"px",c.style.overflow="visible");""!==b.oScroll.sY&&(c.style.height=a(b.nTable).outerHeight()+"px",c.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto");""!==a.oScroll.sY&&(b.style.height=
a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,b=0,c=a.length;b<c;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(b){for(var c=this.dom.print.hidden,f=b.parentNode,g=f.childNodes,h=0,l=g.length;h<l;h++)if(g[h]!=b&&1==g[h].nodeType){var m=a(g[h]).css("display");"none"!=m&&(c.push({node:g[h],display:m}),g[h].style.display="none")}"BODY"!=f.nodeName&&this._fnPrintHideNodes(f)}};TableTools._aInstances=
[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],b=0,c=TableTools._aInstances.length;b<c;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=b.getElementById(a));for(var c=0,f=TableTools._aInstances.length;c<f;c++)if(TableTools._aInstances[c].s.master&&TableTools._aInstances[c].dom.table==a)return TableTools._aInstances[c];return null};TableTools._fnEventListen=function(a,b,c){TableTools._aListeners.push({that:a,
type:b,fn:c})};TableTools._fnEventDispatch=function(a,b,c,g){for(var h=TableTools._aListeners,l=0,m=h.length;l<m;l++)a.dom.table==h[l].that.dom.table&&h[l].type==b&&h[l].fn(c,g)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,fnMouseover:null,
fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,c){this.fnSetText(c,
this.fnGetTableData(b))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))},fnComplete:function(a,b,c,g){a=g.split("\n").length;a=null===this.s.dt.nTFoot?a-1:a-2;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",
sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,c){this.fnSetText(c,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:null,bShowAll:!0,
sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",
fnSelect:function(b,c){1==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(a,b){this.fnSelectAll()},fnSelect:function(b,c){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(b).addClass(this.classes.buttons.disabled):a(b).removeClass(this.classes.buttons.disabled)}}),
select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(a,b){this.fnSelectNone()},fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(b,c){var f=this.fnGetTableData(c);a.ajax({url:c.sAjaxUrl,data:[{name:"tableData",
value:f}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(a){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,
b)}})};TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},
collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.1.4";TableTools.prototype.VERSION=TableTools.VERSION;"function"==
typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");a.fn.DataTable.TableTools=TableTools})(jQuery,window,
document);
(function(a){function c(b,c,d){var e="text_filter";d&&(e="number_filter");e=a('<input type="text" class="search_init '+e+'" value="'+l+'"/>');m.html(e);d?m.wrapInner('<span class="filter_column filter_number" />'):m.wrapInner('<span class="filter_column filter_text" />');g[h]=l;var f=h;d&&!oTable.fnSettings().oFeatures.bServerSide?e.keyup(function(){oTable.fnFilter("^"+this.value,f,!0,!1)}):e.keyup(function(){oTable.fnFilter(this.value,f,b,c)});e.focus(function(){a(this).hasClass("search_init")&&(a(this).removeClass("search_init"),
this.value="")});e.blur(function(){""==this.value&&(a(this).addClass("search_init"),this.value=g[f])})}function b(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="number_range_filter" id="'+b+'" rel="'+h+'"/>');m.append(c);m.append(f(1));var d="tablerange_to_"+h,c=a('<input type="text" class="number_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(c);m.append(f(2));m.wrapInner('<span class="filterColumn filter_number_range" />');var e=h;v.push(h);a.fn.dataTableExt.afnFiltering.push(function(a,
c,f){a=1*document.getElementById(b).value;f=1*document.getElementById(d).value;c="-"==c[e]?0:1*c[e];return""==a&&""==f||""==a&&c<f||a<c&&""==f||a<c&&c<f?!0:!1});a("#"+b+",#"+d,m).keyup(function(){var a=1*document.getElementById(b).value,c=1*document.getElementById(d).value;0!=a&&0!=c&&a>c||oTable.fnDraw()})}function d(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="date_range_filter" id="'+b+'" rel="'+h+'"/>');c.datepicker();m.append(c);m.append(f(1));var d="tablerange_to_"+
h,e=a('<input type="text" class="date_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(e);m.append(f(2));m.wrapInner('<span class="filterColumn filter_date_range" />');e.datepicker();var g=h;v.push(h);a.fn.dataTableExt.afnFiltering.push(function(b,d,f){b=c.datepicker("getDate");f=e.datepicker("getDate");d=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,d[g]);return null==d?!1:null==b&&null==f||null==b&&d<f||b<d&&null==f||b<d&&d<f?!0:!1});a("#"+b+",#"+d,m).change(function(){oTable.fnDraw()})}
function e(b){var c=h,d='<select class="search_init select_filter"><option value="" class="search_init">'+l+"</option>",e,f=b.length;for(e=0;e<f;e++)d+='<option value="'+b[e]+'">'+b[e]+"</option>";b=a(d+"</select>");m.html(b);m.wrapInner('<span class="filterColumn filter_select" />');b.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");oTable.fnFilter(a(this).val(),c)})}function f(a){switch(a){case 0:return n.substring(0,n.indexOf("{from}"));case 1:return n.substring(n.indexOf("{from}")+
6,n.indexOf("{to}"));default:return n.substring(n.indexOf("{to}")+4)}}var g,h,l,m,n="From {from} to {to}",q=[],v=[];a.fn.columnFilter=function(f){oTable=this;properties=a.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}"},f);return this.each(function(){g=[];var f="tfoot tr";"head:after"==properties.sPlaceHolder?f="thead tr:last":"head:before"==properties.sPlaceHolder&&(a("thead tr:last").detach().prependTo("thead"),f="thead tr:first");
a(f+" th",oTable).each(function(f){h=f;f={type:"text",bRegex:!1,bSmart:!0};if(null!=properties.aoColumns){if(properties.aoColumns.length<h||null==properties.aoColumns[h])return;f=properties.aoColumns[h]}l=a(this).text();m=a(a(this)[0]);if(null!=f)switch(n=null!=f.sRangeFormat?f.sRangeFormat:properties.sRangeFormat,f.type){case "number":c(!0,!1,!0);break;case "text":bRegex=null==f.bRegex?!1:f.bRegex;bSmart=null==f.bSmart?!1:f.bSmart;c(bRegex,bSmart,!1);break;case "select":e(f.values);break;case "number-range":b();
break;case "date-range":d()}});for(j=0;j<v.length;j++){var A=v[j];q.push(function(){return a("#range_from_"+A).val()+properties.sRangeSeparator+a("#range_to_"+A).val()})}if(oTable.fnSettings().oFeatures.bServerSide){var D=oTable.fnSettings().fnServerData;oTable.fnSettings().fnServerData=function(b,c,d){for(j=0;j<v.length;j++){var e=v[j];for(k=0;k<c.length;k++)c[k].name=="sSearch_"+e&&(c[k].value=q[j]())}c.push({name:"sRangeSeparator",value:properties.sRangeSeparator});null!=D?D(b,c,d):a.getJSON(b,
c,function(a){d(a)})}}})}})(jQuery);
(function(a){a.widget("ui.dropdownchecklist",{version:function(){alert("DropDownCheckList v1.4")},_appendDropContainer:function(c){var b=a("<div/>");b.addClass("ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper");b.addClass("ui-widget");b.attr("id",c.attr("id")+"-ddw");b.css({position:"absolute",left:"-33000px",top:"-33000px"});var d=a("<div/>");d.addClass("ui-dropdownchecklist-dropcontainer ui-widget-content");b.append(d);b.insertAfter(c);b.isOpen=!1;return b},_isDropDownKeyShortcut:function(c,
b){return c.altKey&&a.ui.keyCode.DOWN==b},_isDropDownCloseKey:function(c,b){return a.ui.keyCode.ESCAPE==b||a.ui.keyCode.ENTER==b},_keyFocusChange:function(c,b,d){var e=a(":focusable");c=e.index(c);0<=c&&(c+=b,d&&(d=this.dropWrapper.find("input:not([disabled])"),b=e.index(d.get(0)),d=e.index(d.get(d.length-1)),c<b?c=d:c>d&&(c=b)),e.get(c).focus())},_handleKeyboard:function(c){var b=c.keyCode||c.which;!this.dropWrapper.isOpen&&this._isDropDownKeyShortcut(c,b)?(c.stopImmediatePropagation(),this._toggleDropContainer(!0)):
this.dropWrapper.isOpen&&this._isDropDownCloseKey(c,b)?(c.stopImmediatePropagation(),this._toggleDropContainer(!1),this.controlSelector.focus()):!this.dropWrapper.isOpen||"checkbox"!=c.target.type||b!=a.ui.keyCode.DOWN&&b!=a.ui.keyCode.UP||(c.stopImmediatePropagation(),this._keyFocusChange(c.target,b==a.ui.keyCode.DOWN?1:-1,!0))},_handleFocus:function(c,b,d){d&&!this.dropWrapper.isOpen?(c.stopImmediatePropagation(),b?(this.controlSelector.addClass("ui-state-hover"),null!=a.ui.dropdownchecklist.gLastOpened&&
a.ui.dropdownchecklist.gLastOpened._toggleDropContainer(!1)):this.controlSelector.removeClass("ui-state-hover")):d||b||(null!=c&&c.stopImmediatePropagation(),this.controlSelector.removeClass("ui-state-hover"),this._toggleDropContainer(!1))},_cancelBlur:function(a){null!=this.blurringItem&&(clearTimeout(this.blurringItem),this.blurringItem=null)},_appendControl:function(){var c=this,b=this.sourceSelect,d=this.options,e=a("<span/>");e.addClass("ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget");
e.css({display:"inline-block",cursor:"default",overflow:"hidden"});var f=b.attr("id"),f=null==f||""==f?"ddcl-"+a.ui.dropdownchecklist.gIDCounter++:"ddcl-"+f;e.attr("id",f);var g=a("<span/>");g.addClass("ui-dropdownchecklist-selector ui-state-default");g.css({display:"inline-block",overflow:"hidden","white-space":"nowrap"});f=b.attr("tabIndex");null==f?f=0:(f=parseInt(f),0>f&&(f=0));g.attr("tabIndex",f);g.keyup(function(a){c._handleKeyboard(a)});g.focus(function(a){c._handleFocus(a,!0,!0)});g.blur(function(a){c._handleFocus(a,
!1,!0)});e.append(g);if(null!=d.icon){var f=null==d.icon.placement?"left":d.icon.placement,h=a("<div/>");h.addClass("ui-icon");h.addClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e");h.css({"float":f});g.append(h)}d=a("<span/>");d.addClass("ui-dropdownchecklist-text");d.css({display:"inline-block","white-space":"nowrap",overflow:"hidden"});g.append(d);e.hover(function(){c.disabled||g.addClass("ui-state-hover")},function(){c.disabled||g.removeClass("ui-state-hover")});e.click(function(a){c.disabled||
(a.stopImmediatePropagation(),c._toggleDropContainer(!c.dropWrapper.isOpen))});e.insertAfter(b);a(window).resize(function(){!c.disabled&&c.dropWrapper.isOpen&&c._toggleDropContainer(!0)});return e},_createDropItem:function(c,b,d,e,f,g,h,l){var m=this,n=this.options,q=this.sourceSelect,v=this.controlWrapper,A=a("<div/>");A.addClass("ui-dropdownchecklist-item");A.css({"white-space":"nowrap"});g=g?' checked="checked"':"";var w=h?' class="inactive"':' class="active"',E=v.attr("id"),v=E+"-i"+c;b=m.isMultiple?
a('<input disabled type="checkbox" id="'+v+'"'+g+w+' tabindex="'+b+'" />'):a('<input disabled type="radio" id="'+v+'" name="'+E+'"'+g+w+' tabindex="'+b+'" />');b=b.attr("index",c).val(d);A.append(b);c=a("<label for="+v+"/>");c.addClass("ui-dropdownchecklist-text");null!=f&&c.attr("style",f);c.css({cursor:"default"});c.html(e);l&&A.addClass("ui-dropdownchecklist-indent");A.addClass("ui-state-default");h&&A.addClass("ui-state-disabled");c.click(function(a){a.stopImmediatePropagation()});A.append(c);
A.hover(function(b){b=a(this);b.hasClass("ui-state-disabled")||b.addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});b.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("active")){b=m.options.onItemClick;if(a.isFunction(b))try{b.call(m,c,q.get(0))}catch(d){c.prop("checked",!c.prop("checked"));m._syncSelected(c);return}m._syncSelected(c);m.sourceSelect.trigger("change","ddcl_internal");!m.isMultiple&&n.closeRadioOnClick&&m._toggleDropContainer(!1)}});
A.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("ui-state-disabled"))c.focus(),m._cancelBlur();else{b=c.find("input");c=b.prop("checked");b.prop("checked",!c);var d=m.options.onItemClick;if(a.isFunction(d))try{d.call(m,b,q.get(0))}catch(e){b.prop("checked",c);m._syncSelected(b);return}m._syncSelected(b);m.sourceSelect.trigger("change","ddcl_internal");c||m.isMultiple||!n.closeRadioOnClick||m._toggleDropContainer(!1)}});A.focus(function(b){a(this);b.stopImmediatePropagation()});
A.keyup(function(a){m._handleKeyboard(a)});return A},_createGroupItem:function(c,b){var d=this,e=a("<div />");e.addClass("ui-dropdownchecklist-group ui-widget-header");b&&e.addClass("ui-state-disabled");e.css({"white-space":"nowrap"});var f=a("<span/>");f.addClass("ui-dropdownchecklist-text");f.css({cursor:"default"});f.text(c);e.append(f);e.click(function(b){var c=a(this);b.stopImmediatePropagation();c.focus();d._cancelBlur()});e.focus(function(b){a(this);b.stopImmediatePropagation()});return e},
_createCloseItem:function(c){var b=this,d=a("<div />");d.addClass("ui-state-default ui-dropdownchecklist-close ui-dropdownchecklist-item");d.css({"white-space":"nowrap","text-align":"right"});var e=a("<span/>");e.addClass("ui-dropdownchecklist-text");e.css({cursor:"default"});e.html(c);d.append(e);d.click(function(c){var d=a(this);c.stopImmediatePropagation();d.focus();b._toggleDropContainer(!1)});d.hover(function(b){a(this).addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});
d.focus(function(b){a(this);b.stopImmediatePropagation()});return d},_appendItems:function(){var c=this,b=this.options,d=this.sourceSelect,e=this.dropWrapper.find(".ui-dropdownchecklist-dropcontainer");d.children().each(function(b){var d=a(this);if(d.is("option"))c._appendOption(d,e,b,!1,!1);else if(d.is("optgroup")){var h=d.prop("disabled"),l=d.attr("label");""!=l&&(l=c._createGroupItem(l,h),e.append(l));c._appendOptions(d,e,b,!0,h)}});null!=b.explicitClose&&(b=c._createCloseItem(b.explicitClose),
e.append(b));b=e.outerWidth();d=e.outerHeight();return{width:b,height:d}},_appendOptions:function(c,b,d,e,f){var g=this;c.children("option").each(function(c){var l=a(this);g._appendOption(l,b,d+"."+c,e,f)})},_appendOption:function(a,b,d,e,f){var g=a.html();if(null!=g&&""!=g){var h=a.val(),l=a.attr("style"),m=a.prop("selected");a=f||a.prop("disabled");f=this.controlSelector.attr("tabindex");d=this._createDropItem(d,f,h,g,l,m,a,e);b.append(d)}},_syncSelected:function(c){var b=this.options,d=this.dropWrapper,
e=this.sourceSelect.get(0).options,f=d.find("input.active");if("exclusive"==b.firstItemChecksAll)if(null==c&&a(e[0]).prop("selected"))f.prop("checked",!1),a(f[0]).prop("checked",!0);else if(null!=c&&0==c.attr("index"))b=c.prop("checked"),f.prop("checked",!1),a(f[0]).prop("checked",b);else{var g=!0,h=null;f.each(function(b){0<b?a(this).prop("checked")||(g=!1):h=a(this)});null!=h&&(g&&f.prop("checked",!1),h.prop("checked",g))}else b.firstItemChecksAll&&(null==c&&a(e[0]).prop("selected")?f.prop("checked",
!0):null!=c&&0==c.attr("index")?f.prop("checked",c.prop("checked")):(g=!0,h=null,f.each(function(b){0<b?a(this).prop("checked")||(g=!1):h=a(this)}),null!=h&&h.prop("checked",g)));var l=0,f=d.find("input");f.each(function(b){var c=a(e[b+l]),d=c.html();if(null==d||""==d)l+=1,c=a(e[b+l]);c.prop("selected",a(this).prop("checked"))});this._updateControlText();null!=c&&c.focus()},_sourceSelectChangeHandler:function(a){this.dropWrapper.find("input").val(this.sourceSelect.val());this._updateControlText()},
_updateControlText:function(){var a=this.sourceSelect,b=this.options,d=this.controlWrapper,e=a.find("option:first"),a=a.find("option"),b=this._formatText(a,b.firstItemChecksAll,e),d=d.find(".ui-dropdownchecklist-text");d.html(b);d.attr("title",d.text())},_formatText:function(c,b,d){var e;if(a.isFunction(this.options.textFormatFunction))try{e=this.options.textFormatFunction(c)}catch(f){alert("textFormatFunction failed: "+f)}else b&&null!=d&&d.prop("selected")?e=d.html():(e="",c.each(function(){if(a(this).prop("selected")){""!=
e&&(e+=", ");var b=a(this).attr("style"),c=a("<span/>");c.html(a(this).html());null==b?e+=c.html():(c.attr("style",b),e+=a("<span/>").append(c).html())}}),""==e&&(e=null!=this.options.emptyText?this.options.emptyText:"&nbsp;"));return e},_toggleDropContainer:function(c){var b=function(c){if(null!=c&&c.dropWrapper.isOpen){c.dropWrapper.isOpen=!1;a.ui.dropdownchecklist.gLastOpened=null;var d=c.options;c.dropWrapper.css({top:"-33000px",left:"-33000px"});var g=c.controlSelector;g.removeClass("ui-state-active");
g.removeClass("ui-state-hover");g=c.controlWrapper.find(".ui-icon");0<g.length&&(g.removeClass(null!=d.icon.toClose?d.icon.toClose:"ui-icon-triangle-1-s"),g.addClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e"));a(document).unbind("click",b);c.dropWrapper.find("input.active").prop("disabled",!0);if(a.isFunction(d.onComplete))try{d.onComplete.call(c,c.sourceSelect.get(0))}catch(h){alert("callback failed: "+h)}}},d=function(c){if(!c.dropWrapper.isOpen){c.dropWrapper.isOpen=!0;a.ui.dropdownchecklist.gLastOpened=
c;var d=c.options;null==d.positionHow||"absolute"==d.positionHow?c.dropWrapper.css({position:"absolute",top:c.controlWrapper.position().top+c.controlWrapper.outerHeight()+"px",left:c.controlWrapper.position().left+"px"}):"relative"==d.positionHow&&c.dropWrapper.css({position:"relative",top:"0px",left:"0px"});var g=0;if(null==d.zIndex){var h=c.controlWrapper.parents().map(function(){var b=a(this).css("z-index");return isNaN(b)?0:b}).get(),h=Math.max.apply(Math,h);0<=h&&(g=h+1)}else g=parseInt(d.zIndex);
0<g&&c.dropWrapper.css({"z-index":g});g=c.controlSelector;g.addClass("ui-state-active");g.removeClass("ui-state-hover");g=c.controlWrapper.find(".ui-icon");0<g.length&&(g.removeClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e"),g.addClass(null!=d.icon.toClose?d.icon.toClose:"ui-icon-triangle-1-s"));a(document).bind("click",function(a){b(c)});d=c.dropWrapper.find("input.active");d.prop("disabled",!1);d=d.get(0);null!=d&&d.focus()}};c?(b(a.ui.dropdownchecklist.gLastOpened),d(this)):b(this)},
_setSize:function(a){var b=this.options,d=this.controlWrapper;a=a.width;null!=b.width?a=parseInt(b.width):null!=b.minWidth&&(b=parseInt(b.minWidth),a<b&&(a=b));var e=this.controlSelector;e.css({width:a+"px"});b=e.find(".ui-dropdownchecklist-text");e=e.find(".ui-icon");null!=e&&(a-=e.outerWidth()+4,b.css({width:a+"px"}));d.outerWidth()},_init:function(){var c=this,b=this.options;null==a.ui.dropdownchecklist.gIDCounter&&(a.ui.dropdownchecklist.gIDCounter=1);c.blurringItem=null;var d=c.element;c.initialDisplay=
d.css("display");d.css("display","none");c.initialMultiple=d.prop("multiple");c.isMultiple=c.initialMultiple;null!=b.forceMultiple&&(c.isMultiple=b.forceMultiple);d.prop("multiple",!0);c.sourceSelect=d;var e=c._appendControl();c.controlWrapper=e;c.controlSelector=e.find(".ui-dropdownchecklist-selector");var f=c._appendDropContainer(e);c.dropWrapper=f;var g=c._appendItems();c._updateControlText(e,f,d);c._setSize(g);b.firstItemChecksAll&&c._syncSelected(null);b.bgiframe&&"function"==typeof c.dropWrapper.bgiframe&&
c.dropWrapper.bgiframe();c.sourceSelect.change(function(a,b){"ddcl_internal"!=b&&c._sourceSelectChangeHandler(a)})},_refreshOption:function(a,b,d){var e=a.parent();b?(a.prop("disabled",!0),a.removeClass("active"),a.addClass("inactive"),e.addClass("ui-state-disabled")):(a.prop("disabled",!1),a.removeClass("inactive"),a.addClass("active"),e.removeClass("ui-state-disabled"));a.prop("checked",d)},_refreshGroup:function(a,b){b?a.addClass("ui-state-disabled"):a.removeClass("ui-state-disabled")},close:function(){this._toggleDropContainer(!1)},
refresh:function(){var c=this,b=this.sourceSelect,d=this.dropWrapper,e=d.find("input"),f=d.find(".ui-dropdownchecklist-group"),g=0,h=0;b.children().each(function(b){b=a(this);var d=b.prop("disabled");if(b.is("option")){b=b.prop("selected");var n=a(e[h]);c._refreshOption(n,d,b);h+=1}else b.is("optgroup")&&(""!=b.attr("label")&&(n=a(f[g]),c._refreshGroup(n,d),g+=1),b.children("option").each(function(){var b=a(this),f=d||b.prop("disabled"),b=b.prop("selected"),g=a(e[h]);c._refreshOption(g,f,b);h+=1}))});
c._syncSelected(null)},enable:function(){this.controlSelector.removeClass("ui-state-disabled");this.disabled=!1},disable:function(){this.controlSelector.addClass("ui-state-disabled");this.disabled=!0},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);this.sourceSelect.css("display",this.initialDisplay);this.sourceSelect.prop("multiple",this.initialMultiple);this.controlWrapper.unbind().remove();this.dropWrapper.remove()}});a.extend(a.ui.dropdownchecklist,{defaults:{width:null,maxDropHeight:null,
firstItemChecksAll:!1,closeRadioOnClick:!1,minWidth:50,positionHow:"absolute",bgiframe:!1,explicitClose:null}})})(jQuery);(function(a,c,b,d,e,f,g){a.GoogleAnalyticsObject=e;a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)};a[e].l=1*new Date;f=c.createElement(b);g=c.getElementsByTagName(b)[0];f.async=1;f.src=d;g.parentNode.insertBefore(f,g)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-40113910-1","umd.edu");ga("send","pageview");
!function(){function a(a){return null!=a&&!isNaN(a)}function c(a){return a.length}function b(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function d(){}function e(a){return wd+a in this}function f(){var a=[];return this.forEach(function(b){a.push(b)}),a}function g(){var a=0,b;for(b in this)b.charCodeAt(0)===xe&&++a;return a}function h(){for(var a in this)if(a.charCodeAt(0)===xe)return!1;return!0}function l(){}function m(a,b,c){return function(){var d=
c.apply(b,arguments);return d===b?a:d}}function n(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=rg.length;d>c;++c){var e=rg[c]+b;if(e in a)return e}}function q(){}function v(){}function A(a){function b(){for(var d,e=c,f=-1,r=e.length;++f<r;)(d=e[f].on)&&d.apply(this,arguments);return a}var c=[],e=new d;return b.on=function(b,d){var f,r=e.get(b);return 2>arguments.length?r&&r.on:(r&&(r.on=null,c=c.slice(0,f=c.indexOf(r)).concat(c.slice(f+1)),e.remove(b)),d&&c.push(e.set(b,
{on:d})),a)},b}function w(){y.event.preventDefault()}function E(){for(var a,b=y.event;a=b.sourceEvent;)b=a;return b}function D(a){for(var b=new v,c=0,d=arguments.length;++c<d;)b[arguments[c]]=A(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=y.event;e.target=a;y.event=e;b[e.type].apply(c,d)}finally{y.event=f}}},b}function J(a){return ye(a,za),a}function I(a){return"function"==typeof a?a:function(){return Qf(a,this)}}function C(a){return"function"==typeof a?a:function(){return yd(a,
this)}}function t(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function r(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=y.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?
g:r:a.local?f:e}function z(a){return a.trim().replace(/\s+/g," ")}function F(a){return new RegExp("(?:^|\\s+)"+y.requote(a)+"(?:\\s+|$)","g")}function O(a,b){function c(){for(var d=-1;++d<e;)a[d](this,b)}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;)a[c](this,f)}a=a.trim().split(/^|\s+/).map(S);var e=a.length;return"function"==typeof b?d:c}function S(a){var b=F(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||
c.setAttribute("class",z(e+" "+a))):c.setAttribute("class",z(e.replace(b," ")))}}function V(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function T(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==
typeof b?e:d}function pa(a){return"function"==typeof a?a:(a=y.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function La(a){return function(){return cf(this,a)}}function Wa(a){return arguments.length||(a=y.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function va(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],r=0,g=f.length;g>r;r++)(e=f[r])&&b(e,r,c);
return a}function ha(a){return ye(a,Ac),a}function wa(a){var b,c;return function(d,e,f){d=a[f].update;var r=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<r;);return e}}function ua(){var a=this.__transition__;a&&++a.active}function ka(a,b,c){function d(){var b=this[r];b&&(this.removeEventListener(a,b,b.$),delete this[r])}function e(){var f=h(b,Bc(arguments));d.call(this);this.addEventListener(a,this[r]=f,f.$=c);f._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+y.requote(a)+"$"),d;for(d in this)if(b=
d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$);delete this[d]}}var r="__on"+a,g=a.indexOf("."),h=oa;0<g&&(a=a.substring(0,g));var u=Cc.get(a);return u&&(a=u,h=sa),g?b?e:d:b?q:f}function oa(a,b){return function(c){var d=y.event;y.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{y.event=d}}}function sa(a,b){var c=oa(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||c.call(this,a)}}function N(){var a=".dragsuppress-"+ ++dh,b="click"+
a,c=y.select(Ha).on("touchmove"+a,w).on("dragstart"+a,w).on("selectstart"+a,w);if(Wc){var d=Pb.style,e=d[Wc];d[Wc]="none"}return function(f){function r(){c.on(b,null)}c.on(a,null);Wc&&(d[Wc]=e);f&&(c.on(b,function(){w();r()},!0),setTimeout(r,0))}}function da(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>r&&(Ha.scrollX||Ha.scrollY)){var c=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,
border:"none"},"important"),e=c[0][0].getScreenCTM();r=!(e.f||e.e);c.remove()}return r?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function pb(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function jb(a){return 1<a?0:-1>a?u:Math.acos(a)}function Ga(a){return 1<a?H:-1>a?-H:Math.asin(a)}function qa(a){return((a=Math.exp(a))+
1/a)/2}function Da(a){return(a=Math.sin(a/2))*a}function cb(){}function ca(a,b,c){return new qb(a,b,c)}function qb(a,b,c){this.h=a;this.s=b;this.l=c}function ub(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=.5>=c?c*(1+b):c+b-c*b,e=2*c-f,Ia(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function p(a,b,c){return new nb(a,b,
c)}function nb(a,b,c){this.h=a;this.c=b;this.l=c}function Lb(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),Oa(c,Math.cos(a*=M)*b,Math.sin(a)*b)}function Oa(a,b,c){return new Gb(a,b,c)}function Gb(a,b,c){this.l=a;this.a=b;this.b=c}function Ra(a,b,c){a=(a+16)/116;b=a+b/500;c=a-c/200;return b=wb(b)*sh,a=wb(a)*th,c=wb(c)*uh,Ia(Bb(3.2404542*b-1.5371385*a-.4985314*c),Bb(-.969266*b+1.8760108*a+.041556*c),Bb(.0556434*b-.2040259*a+1.0572252*c))}function vb(a,b,c){return 0<a?p(Math.atan2(c,b)*xa,Math.sqrt(b*
b+c*c),a):p(0/0,0/0,a)}function wb(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Mb(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Bb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function xb(a){return Ia(a>>16,255&a>>8,255&a)+""}function Ia(a,b,c){return new Nb(a,b,c)}function Nb(a,b,c){this.r=a;this.g=b;this.b=c}function $a(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Rb(a,b,c){var d,e,f,r=0,g=0,h=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=
d[2].split(","),d[1]){case "hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return b(gb(e[0]),gb(e[1]),gb(e[2]))}return(f=sg.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(r=a.charAt(1),r+=r,g=a.charAt(2),g+=g,h=a.charAt(3),h+=h):7===a.length&&(r=a.substring(1,3),g=a.substring(3,5),h=a.substring(5,7)),r=parseInt(r,16),g=parseInt(g,16),h=parseInt(h,16)),b(r,g,h))}function ab(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),r=Math.max(a,b,c),g=
r-f,h=(r+f)/2;return g?(e=.5>h?g/(r+f):g/(2-r-f),d=a==r?(b-c)/g+(c>b?6:0):b==r?(c-a)/g+2:(a-b)/g+4,d*=60):(d=0/0,e=0<h&&1>h?0:d),ca(d,e,h)}function fb(a,b,c){a=hb(a);b=hb(b);c=hb(c);var d=Mb((.4124564*a+.3575761*b+.1804375*c)/sh),e=Mb((.2126729*a+.7151522*b+.072175*c)/th);a=Mb((.0193339*a+.119192*b+.9503041*c)/uh);return Oa(116*e-16,500*(d-e),200*(e-a))}function hb(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function gb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*
b):b}function fa(a){return"function"==typeof a?a:function(){return a}}function Ba(a){return a}function rb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),yb(b,c,a,d)}}function yb(a,b,c,d){function e(){var a,b=h.status;if(!b&&h.responseText||200<=b&&300>b||304===b){try{a=c.call(f,h)}catch(d){return r.error.call(f,d),void 0}r.load.call(f,a)}else r.error.call(f,h)}var f={},r=y.dispatch("beforesend","progress","load","error"),g={},h=new XMLHttpRequest,u=null;
return!Ha.XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest),"onload"in h?h.onload=h.onerror=e:h.onreadystatechange=function(){3<h.readyState&&e()},h.onprogress=function(a){var b=y.event;y.event=a;try{r.progress.call(f,h)}finally{y.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?g[a]:(null==b?delete g[a]:g[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?
(u=a,f):u},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Bc(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),h.open(c,a,!0),null==b||"accept"in g||(g.accept=b+",*/*"),h.setRequestHeader)for(var x in g)h.setRequestHeader(x,g[x]);return null!=b&&h.overrideMimeType&&h.overrideMimeType(b),null!=u&&(h.responseType=u),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),r.beforesend.call(f,
h),h.send(null==d?null:d),f},f.abort=function(){return h.abort(),f},y.rebind(f,r,"on"),null==d?f:f.get(Sb(d))}function Sb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function ea(){var a=Tb(),a=Xa()-a;24<a?(isFinite(a)&&(clearTimeout(tg),tg=setTimeout(ea,a)),ug=0):(ug=1,vh(ea))}function Tb(){var a=Date.now();for(zd=vg;zd;)a>=zd.t&&(zd.f=zd.c(a-zd.t)),zd=zd.n;return a}function Xa(){for(var a,b=vg,c=1/0;b;)b.f?b=a?a.n=b.n:vg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return wg=a,c}function bb(a,b){return b-
(a?Math.ceil(Math.log(a)/Math.LN10):1)}function db(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d?function(a){for(var b=a.length,e=[],f=0,r=d[0];0<b&&0<r;)e.push(a.substring(b-=r,b+r)),r=d[f=(f+1)%d.length];return e.reverse().join(c)}:Ba;return function(a){a=wh.exec(a);var c=a[1]||" ",d=a[2]||">",r=a[3]||"",g=a[4]||"",R=a[5],h=+a[6],u=a[7],x=a[8],l=a[9],Eb=1,m="",G="",H=!1;switch(x&&(x=+x.substring(1)),(R||"0"===c&&"="===d)&&(R=c="0",d="=",u&&(h-=Math.floor((h-1)/4))),l){case "n":u=
!0;l="g";break;case "%":Eb=100;G="%";l="f";break;case "p":Eb=100;G="%";l="r";break;case "b":case "o":case "x":case "X":"#"===g&&(m="0"+l.toLowerCase());case "c":case "d":H=!0;x=0;break;case "s":Eb=-1,l="r"}"$"===g&&(m=e[0],G=e[1]);"r"!=l||x||(l="g");null!=x&&("g"==l?x=Math.max(1,Math.min(21,x)):("e"==l||"f"==l)&&(x=Math.max(0,Math.min(20,x))));var l=Xh.get(l)||Z,cc=R&&u;return function(a){if(H&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):r;if(0>Eb){var g=y.formatPrefix(a,x);a=g.scale(a);G=g.symbol}else a*=
Eb;a=l(a,x);var n=a.lastIndexOf("."),g=0>n?a:a.substring(0,n),n=0>n?"":b+a.substring(n+1);!R&&u&&(g=f(g));var Ib=m.length+g.length+n.length+(cc?0:e.length),p=h>Ib?Array(Ib=h-Ib+1).join(c):"";return cc&&(g=f(p+g)),e+=m,a=g+n,("<"===d?e+a+p:">"===d?p+e+a:"^"===d?p.substring(0,Ib>>=1)+e+a+p.substring(Ib):e+(cc?a:p+a))+G}}}function Z(a){return a+""}function Pa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function aa(a,b,c){function d(b){var c=a(b),e=f(c,1);return e-
b>b-c?c:e}function e(c){return b(c=a(new Ub(c-1)),1),c}function f(a,c){return b(a=new Ub(+a),c),a}function r(a,d,f){a=e(a);var g=[];if(1<f)for(;d>a;)c(a)%f||g.push(new Date(+a)),b(a,1);else for(;d>a;)g.push(new Date(+a)),b(a,1);return g}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=r;var g=a.utc=kb(a);return g.floor=g,g.round=kb(d),g.ceil=kb(e),g.offset=kb(f),g.range=function(a,b,c){try{Ub=Pa;var d=new Pa;return d._=a,r(d,b,c)}finally{Ub=Date}},a}function kb(a){return function(b,c){try{Ub=Pa;var d=
new Pa;return d._=b,a(d,c)._}finally{Ub=Date}}}function lb(a){function b(a){function d(b){for(var c,f,r,g=[],R=-1,h=0;++R<e;)37===a.charCodeAt(R)&&(g.push(a.substring(h,R)),null!=(f=xh[c=a.charAt(++R)])&&(c=a.charAt(++R)),(r=M[c])&&(c=r(b,null==f?"e"===c?" ":"0":f)),g.push(c),h=R+1);return g.push(a.substring(h,R)),g.join("")}var e=a.length;return d.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&Ub!==Pa;
var e=new (b?Pa:Ub);return"j"in d?e.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d),e.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L),b?e._:e},d.toString=function(){return a},d}function c(a,b,d,e){for(var f,r,g,R=0,h=b.length,u=d.length;h>R;){if(e>=u)return-1;if(f=b.charCodeAt(R++),37===f){if(g=b.charAt(R++),r=z[g in xh?b.charAt(R++):g],!r||0>(e=r(a,
d,e)))return-1}else if(f!=d.charCodeAt(e++))return-1}return e}var d=a.dateTime,e=a.date,f=a.time,r=a.periods,g=a.days,h=a.shortDays,u=a.months,x=a.shortMonths;b.utc=function(a){function c(a){try{Ub=Pa;var b=new Ub;return b._=a,d(b)}finally{Ub=Date}}var d=b(a);return c.parse=function(a){try{Ub=Pa;var b=d.parse(a);return b&&b._}finally{Ub=Date}},c.toString=d.toString,c};b.multi=b.utc.multi=ra;var l=y.map(),m=ba(g),G=Db(g),H=ba(h),n=Db(h),p=ba(u),q=Db(u),L=ba(x),t=Db(x);r.forEach(function(a,b){l.set(a.toLowerCase(),
b)});var M={a:function(a){return h[a.getDay()]},A:function(a){return g[a.getDay()]},b:function(a){return x[a.getMonth()]},B:function(a){return u[a.getMonth()]},c:b(d),d:function(a,b){return Ca(a.getDate(),b,2)},e:function(a,b){return Ca(a.getDate(),b,2)},H:function(a,b){return Ca(a.getHours(),b,2)},I:function(a,b){return Ca(a.getHours()%12||12,b,2)},j:function(a,b){return Ca(1+U.dayOfYear(a),b,3)},L:function(a,b){return Ca(a.getMilliseconds(),b,3)},m:function(a,b){return Ca(a.getMonth()+1,b,2)},M:function(a,
b){return Ca(a.getMinutes(),b,2)},p:function(a){return r[+(12<=a.getHours())]},S:function(a,b){return Ca(a.getSeconds(),b,2)},U:function(a,b){return Ca(U.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ca(U.mondayOfYear(a),b,2)},x:b(e),X:b(f),y:function(a,b){return Ca(a.getFullYear()%100,b,2)},Y:function(a,b){return Ca(a.getFullYear()%1E4,b,4)},Z:eb,"%":function(){return"%"}},z={a:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c)))?(a.w=n.get(b[0].toLowerCase()),
c+b[0].length):-1},A:function(a,b,c){m.lastIndex=0;return(b=m.exec(b.substring(c)))?(a.w=G.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c)))?(a.m=t.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){p.lastIndex=0;return(b=p.exec(b.substring(c)))?(a.m=q.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,M.c.toString(),b,d)},d:X,e:X,H:B,I:B,j:Ja,L:Na,m:Ma,M:K,p:function(a,b,c){b=l.get(b.substring(c,c+=2).toLowerCase());
return null==b?-1:(a.p=b,c)},S:Y,U:Q,w:Vb,W:P,x:function(a,b,d){return c(a,M.x.toString(),b,d)},X:function(a,b,d){return c(a,M.X.toString(),b,d)},y:ma,Y:Sa,Z:ya,"%":Qa};return b}function Ca(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(c>e?Array(c-e+1).join(b)+a:a)}function ba(a){return new RegExp("^(?:"+a.map(y.requote).join("|")+")","i")}function Db(a){for(var b=new d,c=-1,e=a.length;++c<e;)b.set(a[c].toLowerCase(),c);return b}function Vb(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,
c+1)))?(a.w=+b[0],c+b[0].length):-1}function Q(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1}function P(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1}function Sa(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function ma(a,b,c){mb.lastIndex=0;if(b=mb.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}function ya(a,b,c){return/^[+-]\d{4}$/.test(b=
b.substring(c,c+5))?(a.Z=+b,c+5):-1}function Ma(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function X(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Ja(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function B(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function K(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,
c+2)))?(a.M=+b[0],c+b[0].length):-1}function Y(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function Na(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function eb(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(ja(b)/60),b=ja(b)%60;return a+Ca(c,"0",2)+Ca(b,"0",2)}function Qa(a,b,c){yh.lastIndex=0;return(a=yh.exec(b.substring(c,c+1)))?c+a[0].length:-1}function ra(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);
return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function Ka(){}function Zb(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Ea(a,b){a&&zh.hasOwnProperty(a.type)&&zh[a.type](a,b)}function ob(a,b,c){var d=-1,e=a.length-c;for(b.lineStart();++d<e;)c=a[d],b.point(c[0],c[1],c[2]);b.lineEnd()}function $b(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)ob(a[c],b,1);b.polygonEnd()}function ib(){function a(b,c){b*=M;c=c*M/2+u/4;var r=b-d,g=Math.cos(c),R=Math.sin(c),h=f*R,
x=e*g+h*Math.cos(r),r=h*Math.sin(r);ze.add(Math.atan2(r,x));d=b;e=g;f=R}var b,c,d,e,f;rc.point=function(r,g){rc.point=a;d=(b=r)*M;e=Math.cos(g=(c=g)*M/2+u/4);f=Math.sin(g)};rc.lineEnd=function(){a(b,c)}}function Kb(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function kc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Ob(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function yc(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function rd(a,
b){return[a[0]*b,a[1]*b,a[2]*b]}function Md(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function sd(a){return[Math.atan2(a[1],a[0]),Ga(a[2])]}function Hd(a,b){return ja(a[0]-b[0])<G&&ja(a[1]-b[1])<G}function vc(a,b){a*=M;var c=Math.cos(b*=M);td(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function td(a,b,c){++Rf;Ad+=(a-Ad)/Rf;Bd+=(b-Bd)/Rf;gd+=(c-gd)/Rf}function wc(){function a(e,f){e*=M;var r=Math.cos(f*=M),g=r*Math.cos(e),r=r*Math.sin(e),R=Math.sin(f),h=Math.atan2(Math.sqrt((h=
c*R-d*r)*h+(h=d*g-b*R)*h+(h=b*r-c*g)*h),b*g+c*r+d*R);df+=h;Dc+=h*(b+(b=g));Ec+=h*(c+(c=r));gc+=h*(d+(d=R));td(b,c,d)}var b,c,d;Xc.point=function(e,f){e*=M;var r=Math.cos(f*=M);b=r*Math.cos(e);c=r*Math.sin(e);d=Math.sin(f);Xc.point=a;td(b,c,d)}}function Sc(){Xc.point=vc}function se(){function a(b,c){b*=M;var r=Math.cos(c*=M),g=r*Math.cos(b),r=r*Math.sin(b),R=Math.sin(c),h=e*R-f*r,u=f*g-d*R,x=d*r-e*g,l=Math.sqrt(h*h+u*u+x*x),Ta=d*g+e*r+f*R,m=l&&-jb(Ta)/l,l=Math.atan2(l,Ta);Vd+=m*h;Wd+=m*u;hd+=m*x;df+=
l;Dc+=l*(d+(d=g));Ec+=l*(e+(e=r));gc+=l*(f+(f=R));td(d,e,f)}var b,c,d,e,f;Xc.point=function(r,g){b=r;c=g;Xc.point=a;r*=M;var h=Math.cos(g*=M);d=h*Math.cos(r);e=h*Math.sin(r);f=Math.sin(g);td(d,e,f)};Xc.lineEnd=function(){a(b,c);Xc.lineEnd=Sc;Xc.point=vc}}function Fb(){return!0}function Gd(a,b,c,d,e){var f=[],r=[];if(a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(Hd(c,d)){e.lineStart();for(d=0;b>d;++d)e.point((c=a[d])[0],c[1]);return e.lineEnd(),void 0}b=new Nd(c,a,null,!0);
c=new Nd(c,null,b,!1);b.o=c;f.push(b);r.push(c);b=new Nd(d,a,null,!1);c=new Nd(d,null,b,!0);b.o=c;f.push(b);r.push(c)}}),r.sort(b),te(f),te(r),f.length){a=0;b=c;for(c=r.length;c>a;++a)r[a].e=b=!b;for(var g,h=f[0];;){for(var u=h,x=!0;u.v;)if((u=u.n)===h)return;b=u.z;e.lineStart();do{if(u.v=u.o.v=!0,u.e){if(x)for(a=0,c=b.length;c>a;++a)e.point((g=b[a])[0],g[1]);else d(u.x,u.n.x,1,e);u=u.n}else{if(x)for(b=u.p.z,a=b.length-1;0<=a;--a)e.point((g=b[a])[0],g[1]);else d(u.x,u.p.x,-1,e);u=u.p}u=u.o;b=u.z;
x=!x}while(!u.v);e.lineEnd()}}}function te(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0];c.p=e}}function Nd(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function ge(a,b,c,d){return function(e,f){function r(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function g(a,b){var c=e(a,b);t.point(c[0],c[1])}function h(){z.point=g;t.lineStart()}function l(){z.point=r;t.lineEnd()}function m(a,b){L.push([a,b]);var c=e(a,b);v.point(c[0],c[1])}function H(){v.lineStart();
L=[]}function n(){m(L[0][0],L[0][1]);v.lineEnd();var a;a=v.clean();var b=C.buffer(),c=b.length;if(L.pop(),q.push(L),L=null,c){if(1&a){a=b[0];var d,c=a.length-1,b=-1;for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);return f.lineEnd(),void 0}1<c&&2&a&&b.push(b.pop().concat(b.shift()));p.push(b.filter(Ye))}}var p,q,L,t=b(f),M=e.invert(d[0],d[1]),z={point:r,lineStart:h,lineEnd:l,polygonStart:function(){z.point=m;z.lineStart=H;z.lineEnd=n;p=[];q=[];f.polygonStart()},polygonEnd:function(){z.point=r;z.lineStart=
h;z.lineEnd=l;p=y.merge(p);var a,b=M;a=q;var d=b[0],e=b[1],g=[Math.sin(d),-Math.cos(d),0],R=0,Ta=0;ze.reset();for(var m=0,H=a.length;H>m;++m){var n=a[m],cc=n.length;if(cc)for(var Ib=n[0],Xb=Ib[0],b=Ib[1]/2+u/4,L=Math.sin(b),t=Math.cos(b),C=1;;){C===cc&&(C=0);var b=n[C],ch=b[0],v=b[1]/2+u/4,xa=Math.sin(v),v=Math.cos(v),Ud=ch-Xb,w=ja(Ud)>u,L=L*xa;if(ze.add(Math.atan2(L*Math.sin(Ud),t*v+L*Math.cos(Ud))),R+=w?Ud+(0<=Ud?x:-x):Ud,w^Xb>=d^ch>=d)Ib=Ob(Kb(Ib),Kb(b)),Md(Ib),Xb=Ob(g,Ib),Md(Xb),Xb=(w^0<=Ud?-1:
1)*Ga(Xb[2]),(e>Xb||e===Xb&&(Ib[0]||Ib[1]))&&(Ta+=w^0<=Ud?1:-1);if(!C++)break;Xb=ch;L=xa;t=v;Ib=b}}a=(-G>R||G>R&&0>ze)^1&Ta;p.length?Gd(p,Ze,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd());f.polygonEnd();p=q=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},C=ue(),v=b(C);return z}}function Ye(a){return 1<a.length}function ue(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:q,buffer:function(){var c=
b;return b=[],a=null,c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Ze(a,b){return(0>(a=a.x)[0]?a[1]-H-G:H-a[1])-(0>(b=b.x)[0]?b[1]-H-G:H-b[1])}function zc(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=Kb(a),r=Kb(b),g=[1,0,0],r=Ob(f,r),R=kc(r,r),f=r[0],h=R-f*f;if(!h)return!d&&a;R=e*R/h;h=-e*f/h;f=Ob(g,r);g=rd(g,R);r=rd(r,h);yc(g,r);r=kc(g,f);R=kc(f,f);h=r*r-R*(kc(g,g)-1);if(!(0>h)){var x=Math.sqrt(h),h=rd(f,(-r-x)/R);if(yc(h,g),h=sd(h),
!d)return h;var l;d=a[0];var Ta=b[0];a=a[1];b=b[1];d>Ta&&(l=d,d=Ta,Ta=l);var m=Ta-d,Eb=ja(m-u)<G,H=Eb||G>m;if(!Eb&&a>b&&(l=a,a=b,b=l),H?Eb?0<a+b^h[1]<(ja(h[0]-d)<G?a:b):a<=h[1]&&h[1]<=b:m>u^(d<=h[0]&&h[0]<=Ta))return l=rd(f,(-r+x)/R),yc(l,g),[h,sd(l)]}}function d(b,c){var e=f?a:u-a,r=0;return-e>b?r|=1:b>e&&(r|=2),-e>c?r|=4:c>e&&(r|=8),r}var e=Math.cos(a),f=0<e,r=ja(e)>G,g=Yb(a,6*M);return ge(b,function(a){var e,g,R,h,x;return{lineStart:function(){h=R=!1;x=1},point:function(l,m){var H,n=[l,m],p=b(l,
m),Ib=f?p?0:d(l,m):p?d(l+(0>l?u:-u),m):0;if(!e&&(h=R=p)&&a.lineStart(),p!==R&&(H=c(e,n),(Hd(e,H)||Hd(n,H))&&(n[0]+=G,n[1]+=G,p=b(n[0],n[1]))),p!==R)x=0,p?(a.lineStart(),H=c(n,e),a.point(H[0],H[1])):(H=c(e,n),a.point(H[0],H[1]),a.lineEnd()),e=H;else if(r&&e&&f^p){var q;Ib&g||!(q=c(n,e,!0))||(x=0,f?(a.lineStart(),a.point(q[0][0],q[0][1]),a.point(q[1][0],q[1][1]),a.lineEnd()):(a.point(q[1][0],q[1][1]),a.lineEnd(),a.lineStart(),a.point(q[0][0],q[0][1])))}!p||e&&Hd(e,n)||a.point(n[0],n[1]);e=n;R=p;g=Ib},
lineEnd:function(){R&&a.lineEnd();e=null},clean:function(){return x|(h&&R)<<1}}},g,f?[0,-a]:[-u,a-u])}function ac(a,b,c,d){return function(e){var f,r=e.a,g=e.b,h=r.x,r=r.y,u=0,x=1,l=g.x-h,g=g.y-r;if(f=a-h,l||!(0<f)){if(f/=l,0>l){if(u>f)return;x>f&&(x=f)}else if(0<l){if(f>x)return;f>u&&(u=f)}if(f=c-h,l||!(0>f)){if(f/=l,0>l){if(f>x)return;f>u&&(u=f)}else if(0<l){if(u>f)return;x>f&&(x=f)}if(f=b-r,g||!(0<f)){if(f/=g,0>g){if(u>f)return;x>f&&(x=f)}else if(0<g){if(f>x)return;f>u&&(u=f)}if(f=d-r,g||!(0>f)){if(f/=
g,0>g){if(f>x)return;f>u&&(u=f)}else if(0<g){if(u>f)return;x>f&&(x=f)}return 0<u&&(e.a={x:h+u*l,y:r+u*g}),1>x&&(e.b={x:h+x*l,y:r+x*g}),e}}}}}}function ve(a,b,c,d){function e(d,f){return ja(d[0]-a)<G?0<f?0:3:ja(d[0]-c)<G?0<f?2:1:ja(d[1]-b)<G?0<f?1:0:0<f?3:2}function f(a,b){return r(a.x,b.x)}function r(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(g){function h(f,g,u,x){var l=0,m=0;if(null==f||(l=e(f,u))!==(m=e(g,u))||0>r(f,g)^
0<u){do x.point(0===l||3===l?a:c,1<l?d:b);while((l=(l+u+4)%4)!==m)}else x.point(g[0],g[1])}function u(e,f){e>=a&&c>=e&&f>=b&&d>=f&&g.point(e,f)}function x(e,f){e=Math.max(-xg,Math.min(xg,e));f=Math.max(-xg,Math.min(xg,f));var r=e>=a&&c>=e&&f>=b&&d>=f;if(m&&G.push([e,f]),M)H=e,n=f,p=r,M=!1,r&&(g.lineStart(),g.point(e,f));else if(r&&t)g.point(e,f);else{var h={a:{x:q,y:L},b:{x:e,y:f}};xa(h)?(t||(g.lineStart(),g.point(h.a.x,h.a.y)),g.point(h.b.x,h.b.y),r||g.lineEnd(),z=!1):r&&(g.lineStart(),g.point(e,
f),z=!1)}q=e;L=f;t=r}var l,m,G,H,n,p,q,L,t,M,z,C=g,v=ue(),xa=ac(a,b,c,d),w={point:u,lineStart:function(){w.point=x;m&&m.push(G=[]);M=!0;t=!1;q=L=0/0},lineEnd:function(){l&&(x(H,n),p&&t&&v.rejoin(),l.push(v.buffer()));w.point=u;t&&g.lineEnd()},polygonStart:function(){g=v;l=[];m=[];z=!0},polygonEnd:function(){g=C;l=y.merge(l);var b;b=[a,d];for(var c=0,e=m.length,r=b[1],u=0;e>u;++u)for(var x,Ta=1,Eb=m[u],H=Eb.length,n=Eb[0];H>Ta;++Ta)x=Eb[Ta],n[1]<=r?x[1]>r&&0<pb(n,x,b)&&++c:x[1]<=r&&0>pb(n,x,b)&&--c,
n=x;b=0!==c;c=z&&b;e=l.length;(c||e)&&(g.polygonStart(),c&&(g.lineStart(),h(null,null,1,g),g.lineEnd()),e&&Gd(l,f,b,h,g),g.polygonEnd());l=m=G=null}};return w}}function $e(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Od(a){var b=0,c=u/3,d=Wb(a);a=d(b,c);return a.parallels=function(a){return arguments.length?d(b=a[0]*u/180,c=a[1]*u/180):[b/u*180,c/u*180]},a}function Pd(a,b){function c(a,
b){var d=Math.sqrt(f-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),r-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),r=Math.sqrt(f)/e;return c.invert=function(a,b){var c=r-b;return[Math.atan2(a,c)/e,Ga((f-(a*a+c*c)*e*e)/(2*e))]},c}function we(){function a(b,c){yg+=e*b-d*c;d=b;e=c}var b,c,d,e;Xd.point=function(f,r){Xd.point=a;b=d=f;c=e=r};Xd.lineEnd=function(){a(b,c)}}function af(){function a(b,c){r.push("M",b,",",c,f)}function b(a,d){r.push("M",a,",",d);g.point=c}function c(a,b){r.push("L",
a,",",b)}function d(){g.point=a}function e(){r.push("Z")}var f=Tc(4.5),r=[],g={point:a,lineStart:function(){g.point=b},lineEnd:d,polygonStart:function(){g.lineEnd=e},polygonEnd:function(){g.lineEnd=d;g.point=a},pointRadius:function(a){return f=Tc(a),g},result:function(){if(r.length){var a=r.join("");return r=[],a}}};return g}function Tc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function qc(a,b){Ad+=a;Bd+=b;++gd}function ed(){function a(d,e){var f=d-b,r=e-c,f=Math.sqrt(f*
f+r*r);Dc+=f*(b+d)/2;Ec+=f*(c+e)/2;gc+=f;qc(b=d,c=e)}var b,c;Yc.point=function(d,e){Yc.point=a;qc(b=d,c=e)}}function od(){Yc.point=qc}function fd(){function a(b,c){var f=b-d,r=c-e,f=Math.sqrt(f*f+r*r);Dc+=f*(d+b)/2;Ec+=f*(e+c)/2;gc+=f;f=e*b-d*c;Vd+=f*(d+b);Wd+=f*(e+c);hd+=3*f;qc(d=b,e=c)}var b,c,d,e;Yc.point=function(f,r){Yc.point=a;qc(b=d=f,c=e=r)};Yc.lineEnd=function(){a(b,c)}}function bf(a){function b(c,d){a.moveTo(c,d);a.arc(c,d,r,0,x)}function c(b,e){a.moveTo(b,e);g.point=d}function d(b,c){a.lineTo(b,
c)}function e(){g.point=b}function f(){a.closePath()}var r=4.5,g={point:b,lineStart:function(){g.point=c},lineEnd:e,polygonStart:function(){g.lineEnd=f},polygonEnd:function(){g.lineEnd=e;g.point=b},pointRadius:function(a){return r=a,g},result:q};return g}function Qd(a){function b(a){return(g?d:c)(a)}function c(b){return ec(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,e){d=a(d,e);b.point(d[0],d[1])}function f(){p=0/0;xd.point=r;b.lineStart()}function r(c,d){var f=Kb([c,
d]),h=a(c,d);e(p,Pf,cc,q,L,t,p=h[0],Pf=h[1],cc=c,q=f[0],L=f[1],t=f[2],g,b);b.point(p,Pf)}function h(){xd.point=c;b.lineEnd()}function u(){f();xd.point=x;xd.lineEnd=l}function x(a,b){r(m=a,b);Ta=p;G=Pf;Eb=q;H=L;n=t;xd.point=r}function l(){e(p,Pf,cc,q,L,t,Ta,G,m,Eb,H,n,g,b);xd.lineEnd=h;h()}var m,Ta,G,Eb,H,n,cc,p,Pf,q,L,t,xd={point:c,lineStart:f,lineEnd:h,polygonStart:function(){b.polygonStart();xd.lineStart=u},polygonEnd:function(){b.polygonEnd();xd.lineStart=f}};return xd}function e(b,c,d,g,h,u,x,
l,m,Ta,Eb,H,n,p){var cc=x-b,q=l-c,L=cc*cc+q*q;if(L>4*f&&n--){var t=g+Ta,Xb=h+Eb,M=u+H,z=Math.sqrt(t*t+Xb*Xb+M*M),C=Math.asin(M/=z),v=ja(ja(M)-1)<G||ja(d-m)<G?(d+m)/2:Math.atan2(Xb,t),xa=a(v,C),C=xa[0],xa=xa[1],w=C-b,A=xa-c,y=q*w-cc*A;(y*y/L>f||.3<ja((cc*w+q*A)/L-.5)||r>g*Ta+h*Eb+u*H)&&(e(b,c,d,g,h,u,C,xa,v,t/=z,Xb/=z,M,n,p),p.point(C,xa),e(C,xa,v,t,Xb,M,x,l,m,Ta,Eb,H,n,p))}}var f=.5,r=Math.cos(30*M),g=16;return b.precision=function(a){return arguments.length?(g=0<(f=a*a)&&16,b):Math.sqrt(f)},b}function ud(a){var b=
Qd(function(b,c){return a([b*xa,c*xa])});return function(a){return Uc(b(a))}}function vd(a){this.stream=a}function ec(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function bc(a){return Wb(function(){return a})()}function Wb(a){function b(a){return a=g(a[0]*M,a[1]*M),[a[0]*m+h,u-a[1]*m]}function c(a){return a=g.invert((a[0]-h)/m,(u-a[1])/m),a&&[a[0]*
xa,a[1]*xa]}function d(){g=$e(r=Vc(q,L,t),f);var a=f(n,p);return h=G-a[0]*m,u=H+a[1]*m,e()}function e(){return x&&(x.valid=!1,x=null),b}var f,r,g,h,u,x,l=Qd(function(a,b){return a=f(a,b),[a[0]*m+h,u-a[1]*m]}),m=150,G=480,H=250,n=0,p=0,q=0,L=0,t=0,z=Ah,C=Ba,v=null,w=null;return b.stream=function(a){return x&&(x.valid=!1),x=Uc(z(r,l(C(a)))),x.valid=!0,x},b.clipAngle=function(a){return arguments.length?(z=null==a?(v=a,Ah):zc((v=+a)*M),e()):v},b.clipExtent=function(a){return arguments.length?(w=a,C=a?
ve(a[0][0],a[0][1],a[1][0],a[1][1]):Ba,e()):w},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(G=+a[0],H=+a[1],d()):[G,H]},b.center=function(a){return arguments.length?(n=a[0]%360*M,p=a[1]%360*M,d()):[n*xa,p*xa]},b.rotate=function(a){return arguments.length?(q=a[0]%360*M,L=a[1]%360*M,t=2<a.length?a[2]%360*M:0,d()):[q*xa,L*xa,t*xa]},y.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function Uc(a){return ec(a,
function(b,c){a.point(b*M,c*M)})}function fc(a,b){return[a,b]}function Mc(a,b){return[a>u?a-x:-u>a?a+x:a,b]}function Vc(a,b,c){return a?b||c?$e(ta(a),Sd(b,c)):ta(a):b||c?Sd(b,c):Mc}function Rd(a){return function(b,c){return b+=a,[b>u?b-x:-u>b?b+x:b,c]}}function ta(a){var b=Rd(a);return b.invert=Rd(-a),b}function Sd(a,b){function c(a,b){var g=Math.cos(b),h=Math.cos(a)*g,g=Math.sin(a)*g,R=Math.sin(b),u=R*d+h*e;return[Math.atan2(g*f-u*r,h*d-R*e),Ga(u*f+g*r)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),
r=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),g=Math.cos(a)*c,c=Math.sin(a)*c,h=Math.sin(b),R=h*f-c*r;return[Math.atan2(c*f+h*r,g*d+R*e),Ga(R*d-g*e)]},c}function Yb(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,r,g){var h=r*b;null!=e?(e=ad(c,e),f=ad(c,f),(0<r?f>e:e>f)&&(e+=r*x)):(e=a+r*x,f=a-.5*h);for(var u;0<r?e>f:f>e;e-=h)g.point((u=sd([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],u[1])}}function ad(a,b){var c=Kb(b);c[0]-=a;Md(c);var d=jb(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-
G)%(2*Math.PI)}function Td(a,b,c){var d=y.range(a,b-G,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function eg(a,b,c){var d=y.range(a,b-G,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function Fd(a){return a.source}function nd(a){return a.target}function Cf(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),r=Math.cos(d),g=Math.sin(d),h=e*Math.cos(a),u=e*Math.sin(a),x=r*Math.cos(c),l=r*Math.sin(c),m=2*Math.asin(Math.sqrt(Da(d-b)+e*r*Da(c-a))),G=1/Math.sin(m);
c=m?function(a){var b=Math.sin(a*=m)*G,c=Math.sin(m-a)*G;a=c*h+b*x;var d=c*u+b*l,b=c*f+b*g;return[Math.atan2(d,a)*xa,Math.atan2(b,Math.sqrt(a*a+d*d))*xa]}:function(){return[a*xa,b*xa]};return c.distance=m,c}function $c(a,b){function c(b,d){var e=Math.cos(b),f=Math.cos(d),e=a(e*f);return[e*f*Math.sin(b),e*Math.sin(d)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*f,d*e),Math.asin(d&&c*f/d)]},c}function Df(a,b){function c(a,b){var d=ja(ja(b)-
H)<G?0:f/Math.pow(Math.tan(u/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(u/4+b/2)/Math.tan(u/4+a/2)),f=d*Math.pow(Math.tan(u/4+a/2),e)/e;return e?(c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-H]},c):he}function fg(a,b){function c(a,b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/
(b-a),f=d/e+a;return ja(e)<G?fc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]},c)}function he(a,b){return[a,Math.log(Math.tan(u/4+b/2))]}function Ef(a){var b,c=bc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var r=f.apply(c,arguments);if(r===c){if(b=
null==a){var g=u*d(),h=e();f([[h[0]-g,h[1]-g],[h[0]+g,h[1]+g]])}}else b&&(r=null);return r},c.clipExtent(null)}function Pe(a,b){return[Math.log(Math.tan(u/4+b/2)),-a]}function dc(a){return a[0]}function Id(a){return a[1]}function lc(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;1<d&&0>=pb(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function ie(a,b){return a[0]-b[0]||a[1]-b[1]}function Qe(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function bd(a,b,c,d){var e=
a[0],f=c[0],r=b[0]-e,g=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(g*(a-c)-d*(e-f))/(d*r-g*b);return[e+f*r,a+f*b]}function Re(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function je(){Kd(this);this.edge=this.site=this.circle=null}function jg(a){var b=Bh.pop()||new je;return b.site=a,b}function We(a){dd(a);ef.remove(a);Bh.push(a);Kd(a)}function If(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var r=a.P;if(!r)return-1/0;var c=r.site,r=c.x,c=c.y,g=c-b;if(!g)return r;var h=r-d,u=1/
f-1/g,x=h/g;return u?(-x+Math.sqrt(x*x-2*u*(h*h/(-2*g)-c+g/2+e-f/2)))/u+d:(d+r)/2}function Se(a){this.site=a;this.edges=[]}function Nf(a,b){return b.angle-a.angle}function lg(){Kd(this);this.x=this.y=this.arc=this.site=this.cy=null}function qd(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,r=d.x-c,g=d.y-f,d=e.x-c,e=e.y-f,h=2*(r*e-g*d);if(!(h>=-L)){var u=r*r+g*g,x=d*d+e*e,g=(e*u-g*x)/h,r=(r*x-d*u)/h,e=r+f,f=Ch.pop()||new lg;f.arc=a;f.site=b;f.x=g+c;f.y=e+Math.sqrt(g*
g+r*r);f.cy=e;a.circle=f;a=null;for(b=Sf._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x){if(!b.L){a=b.P;break}b=b.L}else{if(!b.R){a=b;break}b=b.R}Sf.insert(a,f);a||(eh=f)}}}}function dd(a){var b=a.circle;b&&(b.P||(eh=b.N),Sf.remove(b),Ch.push(b),Kd(b),a.circle=null)}function mg(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,c=b[0][0],r=b[1][0],g=b[0][1],h=b[1][1],u=a.l,x=a.r,l=u.x,u=u.y,m=x.x,x=x.y;e=(l+m)/2;if(x===u){if(c>e||e>=r)return;if(l>m){if(f){if(f.y>=h)return}else f={x:e,y:g};c={x:e,y:h}}else{if(f){if(f.y<
g)return}else f={x:e,y:h};c={x:e,y:g}}}else if(d=(l-m)/(x-u),e=(u+x)/2-d*e,-1>d||1<d)if(l>m){if(f){if(f.y>=h)return}else f={x:(g-e)/d,y:g};c={x:(h-e)/d,y:h}}else{if(f){if(f.y<g)return}else f={x:(h-e)/d,y:h};c={x:(g-e)/d,y:g}}else if(x>u){if(f){if(f.x>=r)return}else f={x:c,y:d*c+e};c={x:r,y:d*r+e}}else{if(f){if(f.x<c)return}else f={x:r,y:d*r+e};c={x:c,y:d*c+e}}return a.a=f,a.b=c,!0}function Kf(a,b){this.l=a;this.r=b;this.a=this.b=null}function ke(a,b,c,d){var e=new Kf(a,b);return ff.push(e),c&&Xe(e,
a,b,c),d&&Xe(e,b,a,d),Ae[a.i].edges.push(new le(e,a,b)),Ae[b.i].edges.push(new le(e,b,a)),e}function ah(a,b,c){a=new Kf(a,null);return a.a=b,a.b=c,ff.push(a),a}function Xe(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function le(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function Ue(){this._=null}function Kd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Oc(a,b){var c=b.R,d=b.U;d?d.L===
b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function Pc(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function cd(a){for(;a.L;)a=a.L;return a}function Te(a,b){var c,d,e,f=a.sort(la).pop();ff=[];Ae=Array(a.length);ef=new Ue;for(Sf=new Ue;;)if(e=eh,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x)){if(f.x!==c||f.y!==d){Ae[f.i]=new Se(f);c=f;for(var r=d=void 0,g=void 0,h=void 0,u=c.x,x=c.y,l=ef._;l;)if(g=If(l,x)-u,g>G)l=l.L;else{var m;var H=l;m=x;var n=
H.N;n?m=If(n,m):(H=H.site,m=H.y===m?H.x:1/0);if(h=u-m,!(h>G)){g>-G?(d=l.P,r=l):h>-G?(d=l,r=l.N):d=r=l;break}if(!l.R){d=l;break}l=l.R}g=jg(c);if(ef.insert(d,g),d||r)if(d===r)dd(d),r=jg(d.site),ef.insert(g,r),g.edge=r.edge=ke(d.site,g.site),qd(d),qd(r);else if(r){dd(d);dd(r);h=d.site;x=h.x;l=h.y;m=c.x-x;var H=c.y-l,u=r.site,n=u.x-x,p=u.y-l,q=2*(m*p-H*n),L=m*m+H*H,t=n*n+p*p,x={x:(p*L-H*t)/q+x,y:(m*t-n*L)/q+l};Xe(r.edge,h,u,x);g.edge=ke(h,c,null,x);r.edge=ke(c,u,null,x);qd(d);qd(r)}else g.edge=ke(d.site,
g.site);c=f.x;d=f.y}f=a.pop()}else{if(!e)break;u=e.arc;r=u.circle;h=r.x;x=r.cy;r={x:h,y:x};m=u.P;l=u.N;g=[u];We(u);for(u=m;u.circle&&ja(h-u.circle.x)<G&&ja(x-u.circle.cy)<G;)m=u.P,g.unshift(u),We(u),u=m;g.unshift(u);dd(u);for(m=l;m.circle&&ja(h-m.circle.x)<G&&ja(x-m.circle.cy)<G;)l=m.N,g.push(m),We(m),m=l;g.push(m);dd(m);h=void 0;x=g.length;for(h=1;x>h;++h)m=g[h],u=g[h-1],Xe(m.edge,u.site,m.site,r);u=g[0];m=g[x-1];m.edge=ke(u.site,m.site,null,r);qd(u);qd(m)}if(b){f=ff;c=ac(b[0][0],b[0][1],b[1][0],
b[1][1]);for(d=f.length;d--;)e=f[d],(!mg(e,b)||!c(e)||ja(e.a.x-e.b.x)<G&&ja(e.a.y-e.b.y)<G)&&(e.a=e.b=null,f.splice(d,1));var M,u=b[0][0],x=b[1][0],l=b[0][1];m=b[1][1];H=Ae;for(n=H.length;n--;)if(M=H[n],M&&M.prepare())for(r=M.edges,g=r.length,d=0;g>d;)h=r[d].end(),f=h.x,c=h.y,p=r[++d%g].start(),e=p.x,p=p.y,(ja(f-e)>G||ja(c-p)>G)&&(r.splice(d,0,new le(ah(M.site,h,ja(f-u)<G&&m-c>G?{x:u,y:ja(e-u)<G?p:m}:ja(c-m)<G&&x-f>G?{x:ja(p-m)<G?e:x,y:m}:ja(f-x)<G&&c-l>G?{x:x,y:ja(e-x)<G?p:l}:ja(c-l)<G&&f-u>G?{x:ja(p-
l)<G?e:u,y:l}:null),M.site,null)),++g)}M={cells:Ae,edges:ff};return ef=Sf=ff=Ae=null,M}function la(a,b){return b.y-a.y||b.x-a.x}function pe(a){return a.x}function Jf(a){return a.y}function pc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Za(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var r=.5*(c+e),g=.5*(d+f);b=b.nodes;b[0]&&Za(a,b[0],c,d,r,g);b[1]&&Za(a,b[1],r,d,e,g);b[2]&&Za(a,b[2],c,g,r,f);b[3]&&Za(a,b[3],r,g,e,f)}}function Qc(a,b){a=y.rgb(a);b=y.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,r=b.g-d,
g=b.b-e;return function(a){return"#"+$a(Math.round(c+f*a))+$a(Math.round(d+r*a))+$a(Math.round(e+g*a))}}function oc(a,b){var c,d={},e={};for(c in a)c in b?d[c]=Nc(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function Cb(a,b){return b-=a=+a,function(c){return a+b*c}}function qe(a,b){var c,d,e,f,r=0,g=[],h=[];a+="";b+="";for(d=zg.lastIndex=0;c=zg.exec(b);++d)c.index&&g.push(b.substring(r,c.index)),h.push({i:g.length,x:c[0]}),g.push(null),r=
zg.lastIndex;r<b.length&&g.push(b.substring(r));d=0;for(e=h.length;(c=zg.exec(a))&&e>d;++d)if(f=h[d],f.x==c[0]){if(f.i)if(null==g[f.i+1])for(g[f.i-1]+=f.x,g.splice(f.i,1),c=d+1;e>c;++c)h[c].i--;else for(g[f.i-1]+=f.x+g[f.i+1],g.splice(f.i,2),c=d+1;e>c;++c)h[c].i-=2;else if(null==g[f.i+1])g[f.i]=f.x;else for(g[f.i]=f.x+g[f.i+1],g.splice(f.i+1,1),c=d+1;e>c;++c)h[c].i--;h.splice(d,1);e--;d--}else f.x=Cb(parseFloat(c[0]),parseFloat(f.x));for(;e>d;)f=h.pop(),null==g[f.i+1]?g[f.i]=f.x:(g[f.i]=f.x+g[f.i+
1],g.splice(f.i+1,1)),e--;return 1===g.length?null==g[0]?(f=h[0].x,function(a){return f(a)+""}):function(){return b}:function(a){for(d=0;e>d;++d)g[(f=h[d]).i]=f.x(a);return g.join("")}}function Nc(a,b){for(var c,d=y.interpolators.length;0<=--d&&!(c=y.interpolators[d](a,b)););return c}function oe(a,b){var c,d=[],e=[],f=a.length,r=b.length,g=Math.min(a.length,b.length);for(c=0;g>c;++c)d.push(Nc(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;r>c;++c)e[c]=b[c];return function(a){for(c=0;g>c;++c)e[c]=d[c](a);
return e}}function ng(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function re(a){return function(b){return 1-a(1-b)}}function Mf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function bh(a){return a*a}function Ld(a){return a*a*a}function og(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function pg(a){return 1-Math.cos(a*H)}function ig(a){return Math.pow(2,10*(a-1))}function Of(a){return 1-Math.sqrt(1-a*a)}function qg(a){return 1/2.75>a?7.5625*
a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function zb(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function gg(a){var b=[a.a,a.b],c=[a.c,a.d],d=mc(b),e=b[0]*c[0]+b[1]*c[1],f;f=-e;f=(c[0]+=f*b[0],c[1]+=f*b[1],c);f=mc(f)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*xa;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*xa:0}function mc(a){var b=
Math.sqrt(a[0]*a[0]+a[1]*a[1]);return b&&(a[0]/=b,a[1]/=b),b}function Ff(a,b){var c,d=[],e=[],f=y.transform(a),r=y.transform(b),g=f.translate,h=r.translate,u=f.rotate,x=r.rotate,l=f.skew,m=r.skew,f=f.scale,r=r.scale;return g[0]!=h[0]||g[1]!=h[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:Cb(g[0],h[0])},{i:3,x:Cb(g[1],h[1])})):h[0]||h[1]?d.push("translate("+h+")"):d.push(""),u!=x?(180<u-x?x+=360:180<x-u&&(u+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:Cb(u,x)})):x&&d.push(d.pop()+
"rotate("+x+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:Cb(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),f[0]!=r[0]||f[1]!=r[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:Cb(f[0],r[0])},{i:c-2,x:Cb(f[1],r[1])})):(1!=r[0]||1!=r[1])&&d.push(d.pop()+"scale("+r+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function nc(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Jd(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,
Math.min(1,(c-a)*b))}}function Gf(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=Hf(b);for(var d=Hf(d),e=c.pop(),f=d.pop(),r=null;e===f;)r=e,e=c.pop(),f=d.pop();c=r}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function Hf(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function hg(a){a.fixed|=2}function Ya(a){a.fixed&=-7}function Hb(a){a.fixed|=4;a.px=a.x;a.py=a.y}function me(a){a.fixed&=-5}function Lf(a,
b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,r=a.nodes,g=r.length,h=-1;++h<g;)f=r[h],null!=f&&(Lf(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Rc(a,b){return y.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ne,a}function xc(a){return a.children}function Ve(a){return a.value}function kg(a,
b){return b.value-a.value}function ne(a){return y.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ia(a){return a.x}function pd(a){return a.y}function sc(a,b,c){a.y0=b;a.y=c}function Fc(a){return y.range(a.length)}function Be(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function gf(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function hf(a){return a.reduce(Tf,0)}function Tf(a,b){return a+
b[1]}function Ag(a,b){return Bg(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Bg(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function fh(a){return[y.min(a),y.max(a)]}function Cg(a,b){return a.parent==b.parent?1:2}function Uf(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Ce(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Yd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Yd(c[f],b),a)&&(a=d);
return a}function jf(a,b){return a.x-b.x}function kf(a,b){return b.x-a.x}function Dg(a,b){return a.depth-b.depth}function Gc(a,b){function c(a,d){var e=a.children;if(e&&(r=e.length))for(var f,r,g=null,h=-1;++h<r;)f=e[h],c(f,g),g=f;b(a,d)}c(a,null)}function Vf(a,b){return a.value-b.value}function De(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function lf(a,b){a._pack_next=b;b._pack_prev=a}function Wf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+
d*d}function Zd(a){function b(a){x=Math.min(a.x-a.r,x);l=Math.max(a.x+a.r,l);m=Math.min(a.y-a.r,m);G=Math.max(a.y+a.r,G)}if((c=a.children)&&(u=c.length)){var c,d,e,f,r,g,h,u,x=1/0,l=-1/0,m=1/0,G=-1/0;if(c.forEach(Eg),d=c[0],d.x=-d.r,d.y=0,b(d),1<u&&(e=c[1],e.x=e.r,e.y=0,b(e),2<u))for(f=c[2],Ua(d,e,f),b(f),De(d,f),d._pack_prev=f,De(f,e),e=d._pack_next,r=3;u>r;r++){Ua(d,e,f=c[r]);var H=0,n=1,p=1;for(g=e._pack_next;g!==e;g=g._pack_next,n++)if(Wf(g,f)){H=1;break}if(1==H)for(h=d._pack_prev;h!==g._pack_prev&&
!Wf(h,f);h=h._pack_prev,p++);H?(p>n||n==p&&e.r<d.r?lf(d,e=g):lf(d=h,e),r--):(De(d,f),e=f,b(f))}d=(x+l)/2;e=(m+G)/2;for(r=g=0;u>r;r++)f=c[r],f.x-=d,f.y-=e,g=Math.max(g,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=g;c.forEach(Fg)}}function Eg(a){a._pack_next=a._pack_prev=a}function Fg(a){delete a._pack_next;delete a._pack_prev}function Fa(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e){a=-1;for(var f=e.length;++a<f;)Fa(e[a],b,c,d)}}function Ua(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&
(e||f)){var r=b.r+c.r,g=e*e+f*f,r=r*r,d=d*d;b=.5+(d-r)/(2*g);r=Math.sqrt(Math.max(0,2*r*(d+g)-(d-=g)*d-r*r))/(2*g);c.x=a.x+b*e+r*f;c.y=a.y+b*f-r*e}else c.x=a.x+d,c.y=a.y}function Jb(a){return 1+y.max(a,function(a){return a.y})}function gh(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Gg(a){var b=a.children;return b&&b.length?Gg(b[0]):a}function hc(a){var b,c=a.children;return c&&(b=c.length)?hc(c[b-1]):a}function mf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function nf(a,b){var c=
a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function $d(a){var b=a[0];a=a[a.length-1];return a>b?[b,a]:[a,b]}function of(a){return a.rangeExtent?a.rangeExtent():$d(a.range())}function Ee(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function ae(a,b){var c,d=0,e=a.length-1,f=a[d],r=a[e];return f>r&&(c=d,d=e,e=c,c=f,f=r,r=c),a[d]=b.floor(f),a[e]=b.ceil(r),a}function ic(a){return a?{floor:function(b){return Math.floor(b/
a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Yh}function hh(a,b,c,d){var e=[],f=[],r=0,g=Math.min(a.length,b.length)-1;for(a[g]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++r<=g;)e.push(c(a[r-1],a[r])),f.push(d(b[r-1],b[r]));return function(b){var c=y.bisect(a,b,1,g)-1;return f[c](e[c](b))}}function id(a,b,c,d){function e(){var h=2<Math.min(a.length,b.length)?hh:Ee,u=d?Jd:nc;return r=h(a,b,u,c),g=h(b,a,u,Nc),f}function f(a){return r(a)}var r,g;return f.invert=function(a){return g(a)},
f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(zb)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return y.range.apply(y,Hc(a,b))},f.tickFormat=function(b,c){return pf(a,b,c)},f.nice=function(b){return ae(a,ic(Hc(a,b)[2])),e()},f.copy=function(){return id(a,b,c,d)},e()}function qf(a,
b){return y.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Hc(a,b){null==b&&(b=10);var c=$d(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function pf(a,b,c){var d=Hc(a,b);return y.format(c?c.replace(wh,function(a,b,c,e,f,r,g,h,u,x){return[b,c,e,f,r,g,h,u||"."+W(x,d),x].join("")}):",."+Ic(d[2])+"f")}function Ic(a){return-Math.floor(Math.log(a)/
Math.LN10+.01)}function W(a,b){var c=Ic(b[2]);return a in Zh?Math.abs(c-Ic(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Aa(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function r(b){return a(e(b))}return r.invert=function(b){return f(a.invert(b))},r.domain=function(b){return arguments.length?(c=0<=b[0],a.domain((d=b.map(Number)).map(e)),r):d},r.base=function(c){return arguments.length?
(b=+c,a.domain(d.map(e)),r):b},r.nice=function(){var b=ae(d.map(e),c?Math:$h);return a.domain(b),d=b.map(f),r},r.ticks=function(){var a=$d(d),r=[],g=a[0],a=a[1],h=Math.floor(e(g)),u=Math.ceil(e(a)),x=b%1?2:b;if(isFinite(u-h)){if(c){for(;u>h;h++)for(var R=1;x>R;R++)r.push(f(h)*R);r.push(f(h))}else for(r.push(f(h));h++<u;)for(R=x-1;0<R;R--)r.push(f(h)*R);for(h=0;r[h]<g;h++);for(u=r.length;r[u-1]>a;u--);r=r.slice(h,u)}return r},r.tickFormat=function(a,b){if(!arguments.length)return Dh;2>arguments.length?
b=Dh:"function"!=typeof b&&(b=y.format(b));var d,g=Math.max(.1,a/r.ticks().length),h=c?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/f(h(e(a)+d))<=g?b(a):""}},r.copy=function(){return Aa(a.copy(),b,c,d)},qf(r,a)}function rf(a,b,c){function d(b){return a(e(b))}var e=Jc(b),f=Jc(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return y.range.apply(y,Hc(c,a))},d.tickFormat=
function(a,b){return pf(c,a,b)},d.nice=function(a){return d.domain(ae(c,ic(Hc(c,a)[2])))},d.exponent=function(r){return arguments.length?(e=Jc(b=r),f=Jc(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return rf(a.copy(),b,c)},qf(d,a)}function Jc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Cd(a,b){function c(d){return r[((f.get(d)||"range"===b.t&&f.set(d,a.push(d)))-1)%r.length]}function e(b,c){return y.range(a.length).map(function(a){return b+c*a})}var f,r,g;return c.domain=
function(e){if(!arguments.length)return a;a=[];f=new d;for(var r,g=-1,h=e.length;++g<h;)f.has(r=e[g])||f.set(r,a.push(r));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(r=a,g=0,b={t:"range",a:arguments},c):r},c.rangePoints=function(d,f){2>arguments.length&&(f=0);var h=d[0],u=d[1],x=(u-h)/(Math.max(1,a.length-1)+f);return r=e(2>a.length?(h+u)/2:h+x*f/2,x),g=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(d,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);
var u=d[1]<d[0],x=d[u-0],l=(d[1-u]-x)/(a.length-f+2*h);return r=e(x+l*h,l),u&&r.reverse(),g=l*(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(d,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var u=d[1]<d[0],x=d[u-0],l=d[1-u],m=Math.floor((l-x)/(a.length-f+2*h));return r=e(x+Math.round((l-x-(a.length-f)*m)/2),m),u&&r.reverse(),g=Math.round(m*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return $d(b.a[0])},c.copy=
function(){return Cd(a,b)},c.domain(a)}function Hg(a,b){function c(){var f=0,r=b.length;for(e=[];++f<r;)e[f-1]=y.quantile(a,f/r);return d}function d(a){return isNaN(a=+a)?void 0:b[y.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(y.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[0/0,0/0]:[0<c?e[c-1]:a[0],c<e.length?
e[c]:a[a.length-1]]},d.copy=function(){return Hg(a,b)},c()}function jd(a,b,c){function d(b){return c[Math.max(0,Math.min(r,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),r=c.length-1,d}var f,r;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return jd(a,b,c)},e()}function Fe(a,b){function c(d){return d>=
d?b[y.bisect(a,d)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return Fe(a,b)},c}function Ge(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return y.range.apply(y,Hc(a,b))},b.tickFormat=function(b,c){return pf(a,b,c)},b.copy=function(){return Ge(a)},
b}function Ig(a){return a.innerRadius}function sf(a){return a.outerRadius}function jc(a){return a.startAngle}function Xf(a){return a.endAngle}function tf(a){function b(r){function h(){x.push("M",f(a(l),g))}for(var u,x=[],l=[],m=-1,G=r.length,H=fa(c),n=fa(d);++m<G;)e.call(this,u=r[m],m)?l.push([+H.call(this,u,m),+n.call(this,u,m)]):l.length&&(h(),l=[]);return l.length&&h(),x.length?x.join(""):null}var c=dc,d=Id,e=Fb,f=sb,r=f.key,g=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?
(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(r="function"==typeof a?f=a:(f=ih.get(a)||sb).key,b):r},b.tension=function(a){return arguments.length?(g=a,b):g},b}function sb(a){return a.join("L")}function Yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function kd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}
function He(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return sb(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],r=b[0],g=r,h=1;if(c&&(d+="Q"+(f[0]-2*r[0]/3)+","+(f[1]-2*r[1]/3)+","+f[0]+","+f[1],e=a[1],h=2),1<b.length)for(g=b[1],f=a[h],h++,d+="C"+(e[0]+r[0])+","+(e[1]+r[1])+","+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,h++)f=a[h],g=b[e],d+="S"+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1];c&&(c=a[h],d+="Q"+(f[0]+2*g[0]/3)+","+(f[1]+2*g[1]/3)+","+c[0]+","+c[1]);
return d}function uf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],r=a[1],g=1,h=a.length;++g<h;)c=f,f=r,r=a[g],d.push([e*(r[0]-c[0]),e*(r[1]-c[1])]);return d}function be(a){if(3>a.length)return sb(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],r=[e,e,e,(d=a[1])[0]],g=[f,f,f,d[1]],e=[e,",",f,"L",Qb(ce,r),",",Qb(ce,g)];for(a.push(a[c-1]);++b<=c;)d=a[b],r.shift(),r.push(d[0]),g.shift(),g.push(d[1]),Ie(e,r,g);return a.pop(),e.push("L",d),e.join("")}function Qb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Ie(a,
b,c){a.push("C",Qb(Eh,b),",",Qb(Eh,c),",",Qb(Fh,b),",",Qb(Fh,c),",",Qb(ce,b),",",Qb(ce,c))}function Zc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function de(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+Je,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Jg(a){function b(h){function m(){p.push("M",g(a(q),l),x,u(a(Ta.reverse()),l),"Z")}for(var G,H,n,p=[],Ta=[],q=[],L=-1,t=h.length,M=fa(c),z=fa(e),C=c===d?function(){return H}:fa(d),v=e===f?function(){return n}:fa(f);++L<t;)r.call(this,
G=h[L],L)?(Ta.push([H=+M.call(this,G,L),n=+z.call(this,G,L)]),q.push([+C.call(this,G,L),+v.call(this,G,L)])):Ta.length&&(m(),Ta=[],q=[]);return Ta.length&&m(),p.length?p.join(""):null}var c=dc,d=dc,e=0,f=Id,r=Fb,g=sb,h=g.key,u=g,x="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=
a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(r=a,b):r},b.interpolate=function(a){return arguments.length?(h="function"==typeof a?g=a:(g=ih.get(a)||sb).key,u=g.reverse||g,x=g.closed?"M":"L",b):h},b.tension=function(a){return arguments.length?(l=a,b):l},b}function vf(a){return a.radius}function Kc(a){return[a.x,a.y]}function wf(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+Je;return[c*Math.cos(b),c*Math.sin(b)]}}function jh(){return 64}
function kh(){return"circle"}function Ke(a){a=Math.sqrt(a/u);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function tc(a,b){return ye(a,Ab),a.id=b,a}function Zf(a,b,c,d){var e=a.id;return va(a,"function"==typeof c?function(a,f,r){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,r)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function xf(a){return null==a&&(a=""),function(){this.textContent=a}}function Dd(a,b,c,e){var f=a.__transition__||(a.__transition__=
{active:0,count:0}),r=f[c];if(!r){var g=e.time,r=f[c]={tween:new d,time:g,ease:e.ease,delay:e.delay,duration:e.duration};++f.count;y.timer(function(d){function e(d){return f.active>c?u():(f.active=c,r.event&&r.event.start.call(a,x,b),r.tween.forEach(function(c,d){(d=d.call(a,x,b))&&n.push(d)}),y.timer(function(){return H.c=h(d||1)?Fb:h,1},0,g),void 0)}function h(d){if(f.active!==c)return u();d/=G;for(var e=l(d),g=n.length;0<g;)n[--g].call(a,e);return 1<=d?(r.event&&r.event.end.call(a,x,b),u()):void 0}
function u(){return--f.count?delete f[c]:delete a.__transition__,1}var x=a.__data__,l=r.ease,m=r.delay,G=r.duration,H=zd,n=[];return H.t=m+g,d>=m?e(d-m):(H.c=e,void 0)},0,g)}}function ld(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Kg(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function $f(a){return a.toISOString()}function ag(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,f=y.bisect(Lg,d);return f==Lg.length?[b.year,Hc(a.map(function(a){return a/
31536E6}),c)[2]]:f?b[d/Lg[f-1]<Lg[f]/d?f-1:f]:[ai,Hc(a,c)[2]]}return d.invert=function(b){return tb(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(tb)},d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,tb(+d+1),b).length}var f=d.domain(),r=$d(f),r=null==a?e(r,10):"number"==typeof a&&e(r,a);return r&&(a=r[0],b=r[1]),d.domain(ae(f,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=tb(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=tb(+b+1);
return b}}:a))},d.ticks=function(a,b){var c=$d(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],tb(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return ag(a.copy(),b,c)},qf(d,a)}function tb(a){return new Date(a)}function lh(a){return JSON.parse(a.responseText)}function Le(a){var b=na.createRange();return b.selectNode(na.body),b.createContextualFragment(a.responseText)}var y={version:"3.4.1"};Date.now||(Date.now=
function(){return+new Date});var Mg=[].slice,Bc=function(a){return Mg.call(a)},na=document,Pb=na.documentElement,Ha=window;try{Bc(Pb.childNodes)[0].nodeType}catch(yf){Bc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{na.createElement("div").style.setProperty("opacity",0,"")}catch(Lc){var Me=Ha.Element.prototype,md=Me.setAttribute,bg=Me.setAttributeNS,ee=Ha.CSSStyleDeclaration.prototype,uc=ee.setProperty;Me.setAttribute=function(a,b){md.call(this,a,b+"")};Me.setAttributeNS=
function(a,b,c){bg.call(this,a,b,c+"")};ee.setProperty=function(a,b,c){uc.call(this,a,b+"",c)}}y.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0};y.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0};y.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c};y.max=function(a,
b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c};y.extent=function(a,b){var c,d,e,f=-1,r=a.length;if(1===arguments.length){for(;++f<r&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<r;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<r&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;
for(;++f<r;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]};y.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d};y.mean=function(b,c){var d,e=b.length,f=0,r=-1,g=0;if(1===arguments.length)for(;++r<e;)a(d=b[r])&&(f+=(d-f)/++g);else for(;++r<e;)a(d=c.call(b,b[r],r))&&(f+=(d-f)/++g);return g?f:void 0};y.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-
1];return(c-=d)?e+c*(a[d]-e):e};y.median=function(b,c){return 1<arguments.length&&(b=b.map(c)),b=b.filter(a),b.length?y.quantile(b.sort(y.ascending),.5):void 0};y.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var Ne=y.bisector(function(a){return a});
y.bisectLeft=Ne.left;y.bisect=y.bisectRight=Ne.right;y.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a};y.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};y.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);c>b;)e[b]=[d,d=a[++b]];return e};y.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=y.min(arguments,c),d=Array(b);++a<b;)for(var e,f=-1,r=d[a]=Array(e);++f<e;)r[f]=arguments[f][a];
return d};y.transpose=function(a){return y.zip.apply(y,a)};y.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};y.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};y.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};y.merge=function(a){var b,c,d,e=a.length;b=-1;for(var f=0;++b<e;)f+=a[b].length;for(c=Array(f);0<=--e;)for(d=a[e],b=d.length;0<=--b;)c[--f]=d[b];return c};var ja=Math.abs;y.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&
(b=a,a=0)),1/0===(b-a)/c)throw Error("infinite range");var d,e=[],f;d=ja(c);for(f=1;d*f%1;)f*=10;var r=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++r)>b;)e.push(d/f);else for(;(d=a+c*++r)<b;)e.push(d/f);return e};y.map=function(a){var b=new d;if(a instanceof d)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};b(d,{has:e,get:function(a){return this[wd+a]},set:function(a,b){return this[wd+a]=b},remove:function(a){return a=wd+a,a in this&&delete this[a]},keys:f,values:function(){var a=
[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},size:g,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===xe&&a.call(this,b.substring(1),this[b])}});var wd="\x00",xe=wd.charCodeAt(0);y.nest=function(){function a(b,g,h){if(h>=r.length)return e?e.call(f,g):c?g.sort(c):g;for(var u,x,l,m,G=-1,H=g.length,n=r[h++],p=new d;++G<H;)(m=p.get(u=n(x=g[G])))?m.push(x):p.set(u,[x]);return b?(x=b(),l=function(c,
d){x.set(c,a(b,d,h))}):(x={},l=function(c,d){x[c]=a(b,d,h)}),p.forEach(l),x}function b(a,c){if(c>=r.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,e,f={},r=[],g=[];return f.map=function(b,c){return a(c,b,0)},f.entries=function(c){return b(a(y.map,c,0),0)},f.key=function(a){return r.push(a),f},f.sortKeys=function(a){return g[r.length-1]=a,f},f.sortValues=function(a){return c=a,f},f.rollup=function(a){return e=
a,f},f};y.set=function(a){var b=new l;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b};b(l,{has:e,add:function(a){return this[wd+a]=!0,a},remove:function(a){return a=wd+a,a in this&&delete this[a]},values:f,size:g,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===xe&&a.call(this,b.substring(1))}});y.behavior={};y.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=m(a,b,b[c]);return a};var rg="webkit ms moz Moz o O".split(" ");y.dispatch=function(){for(var a=
new v,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=A(a);return a};v.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(0<=c&&(d=a.substring(c+1),a=a.substring(0,c)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};y.event=null;y.requote=function(a){return a.replace(fe,"\\$&")};var fe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ye={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=
b[c]},Qf=function(a,b){return b.querySelector(a)},yd=function(a,b){return b.querySelectorAll(a)},cg=Pb[n(Pb,"matchesSelector")],cf=function(a,b){return cg.call(a,b)};"function"==typeof Sizzle&&(Qf=function(a,b){return Sizzle(a,b)[0]||null},yd=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},cf=Sizzle.matchesSelector);y.selection=function(){return zf};var za=y.selection.prototype=[];za.select=function(a){var b,c,d,e,f=[];a=I(a);for(var r=-1,g=this.length;++r<g;){f.push(b=[]);b.parentNode=(d=this[r]).parentNode;
for(var h=-1,u=d.length;++h<u;)(e=d[h])?(b.push(c=a.call(e,e.__data__,h,r)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return J(f)};za.selectAll=function(a){var b,c,d=[];a=C(a);for(var e=-1,f=this.length;++e<f;)for(var r=this[e],g=-1,h=r.length;++g<h;)(c=r[g])&&(d.push(b=Bc(a.call(c,c.__data__,g,e))),b.parentNode=c);return J(d)};var dg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:dg,qualify:function(a){var b=a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),dg.hasOwnProperty(c)?{space:dg[c],local:a}:a}};za.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=y.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(t(b,a[b]));return this}return this.each(t(a,b))};za.classed=function(a,b){if(2>arguments.length){if("string"==
typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!F(a[e]).test(b))return!1;return!0}for(b in a)this.each(O(b,a[b]));return this}return this.each(O(a,b))};za.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(V(c,a[c],b));return this}if(2>d)return Ha.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(V(a,
b,c))};za.property=function(a,b){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(b in a)this.each(T(b,a[b]));return this}return this.each(T(a,b))};za.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};za.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=
a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};za.append=function(a){return a=pa(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};za.insert=function(a,b){return a=pa(a),b=I(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};za.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};
za.data=function(a,b){function c(a,e){var f,r,g,l=a.length,m=e.length,G=Math.min(l,m),H=Array(m),R=Array(m),n=Array(l);if(b){var p=new d,q=new d,L=[];for(f=-1;++f<l;)G=b.call(r=a[f],r.__data__,f),p.has(G)?n[f]=r:p.set(G,r),L.push(G);for(f=-1;++f<m;)G=b.call(e,g=e[f],f),(r=p.get(G))?(H[f]=r,r.__data__=g):q.has(G)||(R[f]={__data__:g}),q.set(G,g),p.remove(G);for(f=-1;++f<l;)p.has(L[f])&&(n[f]=a[f])}else{for(f=-1;++f<G;)r=a[f],g=e[f],r?(r.__data__=g,H[f]=r):R[f]={__data__:g};for(;m>f;++f)R[f]={__data__:e[f]};
for(;l>f;++f)n[f]=a[f]}R.update=H;R.parentNode=H.parentNode=n.parentNode=a.parentNode;h.push(R);u.push(H);x.push(n)}var e,f,r=-1,g=this.length;if(!arguments.length){for(a=Array(g=(e=this[0]).length);++r<g;)(f=e[r])&&(a[r]=f.__data__);return a}var h=ha([]),u=J([]),x=J([]);if("function"==typeof a)for(;++r<g;)c(e=this[r],a.call(e,e.parentNode.__data__,r));else for(;++r<g;)c(e=this[r],a);return u.enter=function(){return h},u.exit=function(){return x},u};za.datum=function(a){return arguments.length?this.property("__data__",
a):this.property("__data__")};za.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=La(a));for(var f=0,r=this.length;r>f;f++){e.push(b=[]);b.parentNode=(c=this[f]).parentNode;for(var g=0,h=c.length;h>g;g++)(d=c[g])&&a.call(d,d.__data__,g,f)&&b.push(d)}return J(e)};za.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];0<=--e;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this};za.sort=function(a){a=Wa.apply(this,arguments);
for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};za.each=function(a){return va(this,function(b,c,d){a.call(b,b.__data__,c,d)})};za.call=function(a){var b=Bc(arguments);return a.apply(b[0]=this,b),this};za.empty=function(){return!this.node()};za.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null};za.size=function(){var a=0;return this.each(function(){++a}),a};var Ac=[];y.selection.enter=ha;y.selection.enter.prototype=
Ac;Ac.append=za.append;Ac.empty=za.empty;Ac.node=za.node;Ac.call=za.call;Ac.size=za.size;Ac.select=function(a){for(var b,c,d,e,f,r=[],g=-1,h=this.length;++g<h;){d=(e=this[g]).update;r.push(b=[]);b.parentNode=e.parentNode;for(var u=-1,x=e.length;++u<x;)(f=e[u])?(b.push(d[u]=c=a.call(e.parentNode,f.__data__,u,g)),c.__data__=f.__data__):b.push(null)}return J(r)};Ac.insert=function(a,b){return 2>arguments.length&&(b=wa(this)),za.insert.call(this,a,b)};za.transition=function(){for(var a,b,c=Oe||++Gh,d=
[],e=Ng||{time:Date.now(),ease:og,delay:0,duration:250},f=-1,r=this.length;++f<r;){d.push(a=[]);for(var g=this[f],h=-1,u=g.length;++h<u;)(b=g[h])&&Dd(b,h,c,e),a.push(b)}return tc(d,c)};za.interrupt=function(){return this.each(ua)};y.select=function(a){a=["string"==typeof a?Qf(a,na):a];return a.parentNode=Pb,J([a])};y.selectAll=function(a){a=Bc("string"==typeof a?yd(a,na):a);return a.parentNode=Pb,J([a])};var zf=y.select(Pb);za.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>
d&&(b=!1);for(c in a)this.each(ka(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(ka(a,b,c))};var Cc=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});Cc.forEach(function(a){"on"+a in na&&Cc.remove(a)});var Wc="onselectstart"in na?null:n(Pb.style,"userSelect"),dh=0;y.mouse=function(a){return da(a,E())};var r=/WebKit/.test(Ha.navigator.userAgent)?-1:0;y.touches=function(a,b){return 2>arguments.length&&(b=E().touches),b?Bc(b).map(function(b){var c=da(a,b);
return c.identifier=b.identifier,c}):[]};y.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,e,f,r){return function(){var b,g=this.parentNode,h=c.of(this,arguments),u=y.event.target,x=a(),l=null==x?"drag":"drag-"+x,m=e(g,x),G=0,H=y.select(Ha).on(f+"."+l,function(){var a=e(g,x),c=a[0]-m[0],d=a[1]-m[1];G=G|c|d;m=a;h({type:"drag",x:a[0]+b[0],y:a[1]+b[1],dx:c,dy:d})}).on(r+"."+l,function(){H.on(f+"."+l,null).on(r+"."+l,null);n(G&&y.event.target===u);
h({type:"dragend"})}),n=N();d?(b=d.apply(this,arguments),b=[b.x-m[0],b.y-m[1]]):b=[0,0];h({type:"dragstart"})}}var c=D(a,"drag","dragstart","dragend"),d=null,e=b(q,y.mouse,"mousemove","mouseup"),f=b(function(){return y.event.changedTouches[0].identifier},function(a,b){return y.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},y.rebind(a,c,"on")};var u=Math.PI,x=2*u,H=u/2,G=1E-6,L=G*G,M=u/180,xa=180/u,
Va=Math.SQRT2;y.interpolateZoom=function(a,b){function c(a){var b=a*H;if(G){a=qa(m);var r=f/(2*x),u,l=Va*b+m;u=((l=Math.exp(2*l))-1)/(l+1);u*=a;var n=m,l=((n=Math.exp(n))-1/n)/2,r=r*(u-l);return[d+r*g,e+r*h,f*a/qa(Va*b+m)]}return[d+a*g,e+a*h,f*Math.exp(Va*b)]}var d=a[0],e=a[1],f=a[2],r=b[2],g=b[0]-d,h=b[1]-e,u=g*g+h*h,x=Math.sqrt(u),l=(r*r-f*f+4*u)/(4*f*x),u=(r*r-f*f-4*u)/(4*r*x),m=Math.log(Math.sqrt(l*l+1)-l),G=Math.log(Math.sqrt(u*u+1)-u)-m,H=(G||Math.log(r/f))/Va;return c.duration=1E3*H,c};y.behavior.zoom=
function(){function a(b){b.on(xa,h).on(bi+".zoom",x).on(A,l).on("dblclick.zoom",m).on(Va,u)}function b(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function c(a){z.k=Math.max(v[0],Math.min(v[1],a))}function d(a,b){b=[b[0]*z.k+z.x,b[1]*z.k+z.y];z.x+=a[0]-b[0];z.y+=a[1]-b[1]}function e(){L&&L.domain(q.range().map(function(a){return(a-z.x)/z.k}).map(q.invert));M&&M.domain(t.range().map(function(a){return(a-z.y)/z.k}).map(t.invert))}function f(a){a({type:"zoomstart"})}function r(a){e();a({type:"zoom",scale:z.k,
translate:[z.x,z.y]})}function g(a){a({type:"zoomend"})}function h(){var a=this,c=B.of(a,arguments),e=y.event.target,u=0,x=y.select(Ha).on(A,function(){u=1;d(y.mouse(a),m);r(c)}).on(F,function(){x.on(A,Ha===a?l:null).on(F,null);G(u&&y.event.target===e);g(c)}),m=b(y.mouse(a)),G=N();ua.call(a);f(c)}function u(){function a(){var c=y.touches(l);return x=z.k,c.forEach(function(a){a.identifier in G&&(G[a.identifier]=b(a))}),c}function e(){for(var b=y.event.changedTouches,f=0,g=b.length;g>f;++f)G[b[f].identifier]=
null;g=a();f=Date.now();1===g.length?(500>f-p&&(b=g[0],g=G[b.identifier],c(2*z.k),d(b,g),w(),r(m)),p=f):1<g.length&&(b=g[0],g=g[1],f=b[0]-g[0],b=b[1]-g[1],H=f*f+b*b)}var x,l=this,m=B.of(l,arguments),G={},H=0,n=y.event.changedTouches[0].identifier,R="touchmove.zoom-"+n,q="touchend.zoom-"+n,L=y.select(Ha).on(R,function(){for(var a,b,e,f,g=y.touches(l),h=0,u=g.length;u>h;++h,f=null)if(e=g[h],f=G[e.identifier]){if(b)break;a=e;b=f}if(f){var n=(n=e[0]-a[0])*n+(n=e[1]-a[1])*n,g=H&&Math.sqrt(n/H);a=[(a[0]+
e[0])/2,(a[1]+e[1])/2];b=[(b[0]+f[0])/2,(b[1]+f[1])/2];c(g*x)}p=null;d(a,b);r(m)}).on(q,function(){if(y.event.touches.length){for(var b=y.event.changedTouches,c=0,d=b.length;d>c;++c)delete G[b[c].identifier];for(var e in G)return void a()}L.on(R,null).on(q,null);t.on(xa,h).on(Va,u);M();g(m)}),t=y.select(l).on(xa,null).on(Va,e),M=N();ua.call(l);e();f(m)}function x(){var a=B.of(this,arguments);n?clearTimeout(n):(ua.call(this),f(a));n=setTimeout(function(){n=null;g(a)},50);w();var e=H||y.mouse(this);
G||(G=b(e));c(Math.pow(2,.002*Og())*z.k);d(e,G);r(a)}function l(){G=null}function m(){var a=B.of(this,arguments),e=y.mouse(this),h=b(e),u=Math.log(z.k)/Math.LN2;f(a);c(Math.pow(2,y.event.shiftKey?Math.ceil(u)-1:Math.floor(u)+1));d(e,h);r(a);g(a)}var G,H,n,p,q,L,t,M,z={x:0,y:0,k:1},C=[960,500],v=Hh,xa="mousedown.zoom",A="mousemove.zoom",F="mouseup.zoom",Va="touchstart.zoom",B=D(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=B.of(this,arguments),b=z;Oe?y.select(this).transition().each("start.zoom",
function(){z=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=C[0],d=c/2,e=C[1]/2,f=y.interpolateZoom([(d-z.x)/z.k,(e-z.y)/z.k,c/z.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=f(b);var g=c/b[2];this.__chart__=z={x:d-b[0]*g,y:e-b[1]*g,k:g};r(a)}}).each("end.zoom",function(){g(a)}):(this.__chart__=z,f(a),r(a),g(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},e(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,
k:+b},e(),a):z.k},a.scaleExtent=function(b){return arguments.length?(v=null==b?Hh:[+b[0],+b[1]],a):v},a.center=function(b){return arguments.length?(H=b&&[+b[0],+b[1]],a):H},a.size=function(b){return arguments.length?(C=b&&[+b[0],+b[1]],a):C},a.x=function(b){return arguments.length?(L=b,q=b.copy(),z={x:0,y:0,k:1},a):L},a.y=function(b){return arguments.length?(M=b,t=b.copy(),z={x:0,y:0,k:1},a):M},y.rebind(a,B,"on")};var Og,Hh=[0,1/0],bi="onwheel"in na?(Og=function(){return-y.event.deltaY*(y.event.deltaMode?
120:1)},"wheel"):"onmousewheel"in na?(Og=function(){return y.event.wheelDelta},"mousewheel"):(Og=function(){return-y.event.detail},"MozMousePixelScroll");cb.prototype.toString=function(){return this.rgb()+""};y.hsl=function(a,b,c){return 1===arguments.length?a instanceof qb?ca(a.h,a.s,a.l):Rb(""+a,ab,ca):ca(+a,+b,+c)};var mh=qb.prototype=new cb;mh.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),ca(this.h,this.s,this.l/a)};mh.darker=function(a){return a=Math.pow(.7,arguments.length?
a:1),ca(this.h,this.s,a*this.l)};mh.rgb=function(){return ub(this.h,this.s,this.l)};y.hcl=function(a,b,c){return 1===arguments.length?a instanceof nb?p(a.h,a.c,a.l):a instanceof Gb?vb(a.l,a.a,a.b):vb((a=fb((a=y.rgb(a)).r,a.g,a.b)).l,a.a,a.b):p(+a,+b,+c)};var nh=nb.prototype=new cb;nh.brighter=function(a){return p(this.h,this.c,Math.min(100,this.l+Pg*(arguments.length?a:1)))};nh.darker=function(a){return p(this.h,this.c,Math.max(0,this.l-Pg*(arguments.length?a:1)))};nh.rgb=function(){return Lb(this.h,
this.c,this.l).rgb()};y.lab=function(a,b,c){return 1===arguments.length?a instanceof Gb?Oa(a.l,a.a,a.b):a instanceof nb?Lb(a.l,a.c,a.h):fb((a=y.rgb(a)).r,a.g,a.b):Oa(+a,+b,+c)};var Pg=18,sh=.95047,th=1,uh=1.08883,oh=Gb.prototype=new cb;oh.brighter=function(a){return Oa(Math.min(100,this.l+Pg*(arguments.length?a:1)),this.a,this.b)};oh.darker=function(a){return Oa(Math.max(0,this.l-Pg*(arguments.length?a:1)),this.a,this.b)};oh.rgb=function(){return Ra(this.l,this.a,this.b)};y.rgb=function(a,b,c){return 1===
arguments.length?a instanceof Nb?Ia(a.r,a.g,a.b):Rb(""+a,Ia,ub):Ia(~~a,~~b,~~c)};var Qg=Nb.prototype=new cb;Qg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),Ia(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):Ia(30,30,30)};Qg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),Ia(~~(a*this.r),~~(a*this.g),~~(a*this.b))};Qg.hsl=function(){return ab(this.r,this.g,this.b)};
Qg.toString=function(){return"#"+$a(this.r)+$a(this.g)+$a(this.b)};var sg=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,
springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});sg.forEach(function(a,b){sg.set(a,Ia(b>>16,255&b>>8,255&b))});y.functor=fa;y.xhr=rb(Ba);y.dsv=function(a,b){function c(a,f,r){3>arguments.length&&(r=f,f=null);var g=yb(a,b,null==f?d:e(f),r);return g.row=function(a){return arguments.length?g.response(null==(f=a)?d:e(a)):f},g}function d(a){return c.parse(a.responseText)}
function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(r).join(a)}function r(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(x>=
u)return r;if(e)return e=!1,f;var b=x;if(34===a.charCodeAt(b)){for(var d=b;d++<u;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}x=d+2;var g=a.charCodeAt(d+1);return 13===g?(e=!0,10===a.charCodeAt(d+2)&&++x):10===g&&(e=!0),a.substring(b+1,d).replace(/""/g,'"')}for(;u>x;){g=a.charCodeAt(x++);d=1;if(10===g)e=!0;else if(13===g)e=!0,10===a.charCodeAt(x)&&(++x,++d);else if(g!==h)continue;return a.substring(b,x-d)}return a.substring(b)}for(var d,e,f={},r={},g=[],u=a.length,x=0,l=0;(d=c())!==
r;){for(var m=[];d!==f&&d!==r;)m.push(d),d=c();b&&!(m=b(m,l++))||g.push(m)}return g},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new l,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(r).join(a)].concat(b.map(function(b){return e.map(function(a){return r(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t","text/tab-separated-values");var vg,wg,ug,tg,zd,vh=
Ha[n(Ha,"requestAnimationFrame")]||function(a){setTimeout(a,17)};y.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,f:!1,n:null};wg?wg.n=d:vg=d;wg=d;ug||(tg=clearTimeout(tg),ug=1,vh(ea))};y.timer.flush=function(){Tb();Xa()};y.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ci="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*ja(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*
c},symbol:a}});y.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=y.round(a,bb(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),ci[8+c/3]};var wh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Xh=y.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},
g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=y.round(a,bb(a,b))).toFixed(Math.max(0,Math.min(20,bb(a*(1+1E-15),b))))}}),U=y.time={},Ub=Date;Pa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ed.setUTCDate.apply(this._,arguments)},setDay:function(){Ed.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ed.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ed.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Ed.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ed.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ed.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ed.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ed.setTime.apply(this._,arguments)}};var Ed=Date.prototype;U.year=aa(function(a){return a=U.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});U.years=
U.year.range;U.years.utc=U.year.utc.range;U.day=aa(function(a){var b=new Ub(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});U.days=U.day.range;U.days.utc=U.day.utc.range;U.dayOfYear=function(a){var b=U.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var c=U[a]=
aa(function(a){return(a=U.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=U.year(a).getDay();return Math.floor((U.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});U[a+"s"]=c.range;U[a+"s"].utc=c.utc.range;U[a+"OfYear"]=function(a){var c=U.year(a).getDay();return Math.floor((U.dayOfYear(a)+(c+b)%7)/7)}});U.week=U.sunday;U.weeks=U.sunday.range;U.weeks.utc=U.sunday.utc.range;U.weekOfYear=U.sundayOfYear;var xh={"-":"",_:" ",0:"0"},mb=/^\s*\d+/,
yh=/^%/;y.locale=function(a){return{numberFormat:db(a),timeFormat:lb(a)}};var Ih=y.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
y.format=Ih.numberFormat;y.geo={};Ka.prototype={s:0,t:0,add:function(a){Zb(a,this.t,Rg);Zb(Rg.s,this.s,this);this.s?this.t+=Rg.t:this.s=Rg.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Rg=new Ka;y.geo.stream=function(a,b){a&&Jh.hasOwnProperty(a.type)?Jh[a.type](a,b):Ea(a,b)};var Jh={Feature:function(a,b){Ea(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Ea(c[d].geometry,b)}},zh={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){ob(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b,0)},Polygon:function(a,b){$b(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)$b(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Ea(c[d],
b)}};y.geo.area=function(a){return Af=0,y.geo.stream(a,rc),Af};var Af,ze=new Ka,rc={sphere:function(){Af+=4*u},point:q,lineStart:q,lineEnd:q,polygonStart:function(){ze.reset();rc.lineStart=ib},polygonEnd:function(){var a=2*ze;Af+=0>a?4*u+a:a;rc.lineStart=rc.lineEnd=rc.point=q}};y.geo.bounds=function(){function a(b,c){z.push(C=[x=b,m=b]);l>c&&(l=c);c>H&&(H=c)}function b(c,d){var e=Kb([c*M,d*M]);if(L){var f=Ob(L,e),f=Ob([f[1],-f[0],0],f);Md(f);var f=sd(f),r=c-n,h=0<r?1:-1,u=f[0]*xa*h,r=180<ja(r);r^
(u>h*n&&h*c>u)?(f=f[1]*xa,f>H&&(H=f)):(u=(u+360)%360-180,r^(u>h*n&&h*c>u))?(f=-f[1]*xa,l>f&&(l=f)):(l>d&&(l=d),d>H&&(H=d));r?n>c?g(x,c)>g(x,m)&&(m=c):g(c,m)>g(x,m)&&(x=c):m>=x?(x>c&&(x=c),c>m&&(m=c)):c>n?g(x,c)>g(x,m)&&(m=c):g(c,m)>g(x,m)&&(x=c)}else a(c,d);L=e;n=c}function c(){v.point=b}function d(){C[0]=x;C[1]=m;v.point=a;L=null}function e(a,c){if(L){var d=a-n;t+=180<ja(d)?d+(0<d?360:-360):d}else p=a,q=c;rc.point(a,c);b(a,c)}function f(){rc.lineStart()}function r(){e(p,q);rc.lineEnd();ja(t)>G&&
(x=-(m=180));C[0]=x;C[1]=m;L=null}function g(a,b){return 0>(b-=a)?b+360:b}function h(a,b){return a[0]-b[0]}function u(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var x,l,m,H,n,p,q,L,t,z,C,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e;v.lineStart=f;v.lineEnd=r;t=0;rc.polygonStart()},polygonEnd:function(){rc.polygonEnd();v.point=a;v.lineStart=c;v.lineEnd=d;0>ze?(x=-(m=180),l=-(H=90)):t>G?H=90:-G>t&&(l=-90);C[0]=x;C[1]=m}};return function(a){H=m=-(x=l=1/0);z=[];y.geo.stream(a,
v);if(a=z.length){z.sort(h);for(var b,c=1,d=z[0],e=[d];a>c;++c)b=z[c],u(b[0],d)||u(b[1],d)?(g(d[0],b[1])>g(d[0],d[1])&&(d[1]=b[1]),g(b[0],d[1])>g(d[0],d[1])&&(d[0]=b[0])):e.push(d=b);var f,r=-1/0;a=e.length-1;c=0;for(d=e[a];a>=c;d=b,++c)b=e[c],(f=g(d[1],b[0]))>r&&(r=f,x=b[0],m=d[1])}return z=C=null,1/0===x||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[x,l],[m,H]]}}();y.geo.centroid=function(a){Rf=df=Ad=Bd=gd=Dc=Ec=gc=Vd=Wd=hd=0;y.geo.stream(a,Xc);a=Vd;var b=Wd,c=hd,d=a*a+b*b+c*c;return L>d&&(a=Dc,b=Ec,c=gc,G>
df&&(a=Ad,b=Bd,c=gd),d=a*a+b*b+c*c,L>d)?[0/0,0/0]:[Math.atan2(b,a)*xa,Ga(c/Math.sqrt(d))*xa]};var Rf,df,Ad,Bd,gd,Dc,Ec,gc,Vd,Wd,hd,Xc={sphere:q,point:vc,lineStart:wc,lineEnd:Sc,polygonStart:function(){Xc.lineStart=se},polygonEnd:function(){Xc.lineStart=wc}},Ah=ge(Fb,function(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(f,r){var g=0<f?u:-u,h=ja(f-c);if(ja(h-u)<G)a.point(c,d=0<(d+r)/2?H:-H),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(g,d),a.point(f,d),
b=0;else if(e!==g&&h>=u){ja(c-e)<G&&(c-=e*G);ja(f-g)<G&&(f-=g*G);var h=c,x=d,l=f,m,n,p=Math.sin(h-l);d=ja(p)>G?Math.atan((Math.sin(x)*(n=Math.cos(r))*Math.sin(l)-Math.sin(r)*(m=Math.cos(x))*Math.sin(h))/(m*n*p)):(x+r)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(g,d);b=0}a.point(c=f,d=r);e=g},lineEnd:function(){a.lineEnd();c=d=0/0},clean:function(){return 2-b}}},function(a,b,c,d){null==a?(c*=H,d.point(-u,c),d.point(0,c),d.point(u,c),d.point(u,0),d.point(u,-c),d.point(0,-c),d.point(-u,-c),d.point(-u,
0),d.point(-u,c)):ja(a[0]-b[0])>G?(a=a[0]<b[0]?u:-u,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-u,-u/2]),xg=1E9;y.geo.clipExtent=function(){var a,b,c,d,e,f,r={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(g){return arguments.length?(f=ve(a=+g[0][0],b=+g[0][1],c=+g[1][0],d=+g[1][1]),e&&(e.valid=!1,e=null),r):[[a,b],[c,d]]}};return r.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return Od(Pd)}).raw=Pd;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function a(f){var r=f[0];f=f[1];return b=null,c(r,f),b||(d(r,f),b)||e(r,f),b}var b,c,d,e,f=y.geo.albers(),r=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),g=y.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,b=(a[1]-c[1])/b;return(.12<=b&&.234>b&&-.425<=
d&&-.214>d?r:.166<=b&&.234>b&&-.214<=d&&-.115>d?g:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=r.stream(a),d=g.stream(a);return{point:function(a,e){b.point(a,e);c.point(a,e);d.point(a,e)},sphere:function(){b.sphere();c.sphere();d.sphere()},lineStart:function(){b.lineStart();c.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();c.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();c.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();c.polygonEnd();d.polygonEnd()}}},
a.precision=function(b){return arguments.length?(f.precision(b),r.precision(b),g.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),r.scale(.35*b),g.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var u=f.scale(),x=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[x-.455*u,l-.238*u],[x+.455*u,l+.238*u]]).stream(h).point,d=r.translate([x-.307*u,l+.201*u]).clipExtent([[x-.425*u+G,l+.12*u+G],[x-.214*
u-G,l+.234*u-G]]).stream(h).point,e=g.translate([x-.205*u,l+.212*u]).clipExtent([[x-.214*u+G,l+.166*u+G],[x-.115*u-G,l+.234*u-G]]).stream(h).point,a},a.scale(1070)};var Sg,yg,Tg,Ug,Vg,Wg,Xd={point:q,lineStart:q,lineEnd:q,polygonStart:function(){yg=0;Xd.lineStart=we},polygonEnd:function(){Xd.lineStart=Xd.lineEnd=Xd.point=q;Sg+=ja(yg/2)}},di={point:function(a,b){Tg>a&&(Tg=a);a>Vg&&(Vg=a);Ug>b&&(Ug=b);b>Wg&&(Wg=b)},lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q},Yc={point:qc,lineStart:ed,lineEnd:od,
polygonStart:function(){Yc.lineStart=fd},polygonEnd:function(){Yc.point=qc;Yc.lineStart=ed;Yc.lineEnd=od}};y.geo.path=function(){function a(b){return b&&("function"==typeof r&&e.pointRadius(+r.apply(this,arguments)),f&&f.valid||(f=d(e)),y.geo.stream(b,f)),e.result()}var b,c,d,e,f,r=4.5;return a.area=function(a){return Sg=0,y.geo.stream(a,d(Xd)),Sg},a.centroid=function(a){return Ad=Bd=gd=Dc=Ec=gc=Vd=Wd=hd=0,y.geo.stream(a,d(Yc)),hd?[Vd/hd,Wd/hd]:gc?[Dc/gc,Ec/gc]:gd?[Ad/gd,Bd/gd]:[0/0,0/0]},a.bounds=
function(a){return Vg=Wg=-(Tg=Ug=1/0),y.geo.stream(a,d(di)),[[Tg,Ug],[Vg,Wg]]},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||ud(c):Ba,f=null,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new af:new bf(b),"function"!=typeof r&&e.pointRadius(r),f=null,a):c},a.pointRadius=function(b){return arguments.length?(r="function"==typeof b?b:(e.pointRadius(+b),+b),a):r},a.projection(y.geo.albersUsa()).context(null)};y.geo.transform=function(a){return{stream:function(b){b=
new vd(b);for(var c in a)b[c]=a[c];return b}}};vd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};y.geo.projection=bc;y.geo.projectionMutator=Wb;(y.geo.equirectangular=function(){return bc(fc)}).raw=fc.invert=fc;y.geo.rotation=function(a){function b(c){return c=a(c[0]*
M,c[1]*M),c[0]*=xa,c[1]*=xa,c}return a=Vc(a[0]%360*M,a[1]*M,2<a.length?a[2]*M:0),b.invert=function(b){return b=a.invert(b[0]*M,b[1]*M),b[0]*=xa,b[1]*=xa,b},b};Mc.invert=fc;y.geo.circle=function(){function a(){var b="function"==typeof d?d.apply(this,arguments):d,e=Vc(-b[0]*M,-b[1]*M,0).invert,f=[];return c(null,null,1,{point:function(a,b){f.push(a=e(a,b));a[0]*=xa;a[1]*=xa}}),{type:"Polygon",coordinates:[f]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=
function(d){return arguments.length?(c=Yb((b=+d)*M,e*M),a):b},a.precision=function(d){return arguments.length?(c=Yb(b*M,(e=+d)*M),a):e},a.angle(90)};y.geo.distance=function(a,b){var c,d=(b[0]-a[0])*M,e=a[1]*M,f=b[1]*M,r=Math.sin(d),d=Math.cos(d),g=Math.sin(e),e=Math.cos(e),h=Math.sin(f),f=Math.cos(f);return Math.atan2(Math.sqrt((c=f*r)*c+(c=e*h-g*f*d)*c),g*h+e*f*d)};y.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return y.range(Math.ceil(f/q)*q,
e,q).map(m).concat(y.range(Math.ceil(u/L)*L,h,L).map(H)).concat(y.range(Math.ceil(d/n)*n,c,n).filter(function(a){return ja(a%q)>G}).map(x)).concat(y.range(Math.ceil(g/p)*p,r,p).filter(function(a){return ja(a%L)>G}).map(l))}var c,d,e,f,r,g,h,u,x,l,m,H,n=10,p=n,q=90,L=360,t=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(H(h).slice(1),m(e).reverse().slice(1),H(u).reverse().slice(1))]}},
a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],u=+b[0][1],h=+b[1][1],f>e&&(b=f,f=e,e=b),u>h&&(b=u,u=h,h=b),a.precision(t)):[[f,u],[e,h]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],g=+b[0][1],r=+b[1][1],d>c&&(b=d,d=c,c=b),g>r&&(b=g,g=r,r=b),a.precision(t)):[[d,g],[c,r]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},
a.majorStep=function(b){return arguments.length?(q=+b[0],L=+b[1],a):[q,L]},a.minorStep=function(b){return arguments.length?(n=+b[0],p=+b[1],a):[n,p]},a.precision=function(b){return arguments.length?(t=+b,x=Td(g,r,90),l=eg(d,c,t),m=Td(u,h,90),H=eg(f,e,t),a):t},a.majorExtent([[-180,-90+G],[180,90-G]]).minorExtent([[-180,-80-G],[180,80+G]])};y.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=Fd,e=nd;return a.distance=
function(){return y.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a};y.geo.interpolate=function(a,b){return Cf(a[0]*M,a[1]*M,b[0]*M,b[1]*M)};y.geo.length=function(a){return Xg=0,y.geo.stream(a,Bf),Xg};var Xg,Bf={sphere:q,point:q,lineStart:function(){function a(e,
f){var r=Math.sin(f*=M),g=Math.cos(f),h=ja((e*=M)-b),u=Math.cos(h);Xg+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*r-c*g*u)*h),c*r+d*g*u);b=e;c=r;d=g}var b,c,d;Bf.point=function(e,f){b=e*M;c=Math.sin(f*=M);d=Math.cos(f);Bf.point=a};Bf.lineEnd=function(){Bf.point=Bf.lineEnd=q}},lineEnd:q,polygonStart:q,polygonEnd:q},Kh=$c(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(y.geo.azimuthalEqualArea=function(){return bc(Kh)}).raw=Kh;var Lh=$c(function(a){return(a=Math.acos(a))&&
a/Math.sin(a)},Ba);(y.geo.azimuthalEquidistant=function(){return bc(Lh)}).raw=Lh;(y.geo.conicConformal=function(){return Od(Df)}).raw=Df;(y.geo.conicEquidistant=function(){return Od(fg)}).raw=fg;var Mh=$c(function(a){return 1/a},Math.atan);(y.geo.gnomonic=function(){return bc(Mh)}).raw=Mh;he.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-H]};(y.geo.mercator=function(){return Ef(he)}).raw=he;var Nh=$c(function(){return 1},Math.asin);(y.geo.orthographic=function(){return bc(Nh)}).raw=Nh;var Oh=
$c(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(y.geo.stereographic=function(){return bc(Oh)}).raw=Oh;Pe.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-H]};(y.geo.transverseMercator=function(){var a=Ef(Pe),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])},a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},a.rotate([0,0])}).raw=Pe;y.geom={};y.geom.hull=function(a){function b(a){if(3>
a.length)return[];var e,f=fa(c),r=fa(d),g=a.length,h=[],u=[];for(e=0;g>e;e++)h.push([+f.call(this,a[e],e),+r.call(this,a[e],e),e]);h.sort(ie);for(e=0;g>e;e++)u.push([h[e][0],-h[e][1]]);var f=lc(h),u=lc(u),r=u[0]===f[0],g=u[u.length-1]===f[f.length-1],x=[];for(e=f.length-1;0<=e;--e)x.push(a[h[f[e]][2]]);for(e=+r;e<u.length-g;++e)x.push(a[h[u[e]][2]]);return x}var c=dc,d=Id;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,
b):d},b)};y.geom.polygon=function(a){return ye(a,Yg),a};var Yg=y.geom.polygon.prototype=[];Yg.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e};Yg.centroid=function(a){var b,c,d=-1,e=this.length,f=0,r=0,g=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=g,g=this[d],c=b[0]*g[1]-g[0]*b[1],f+=(b[0]+g[0])*c,r+=(b[1]+g[1])*c;return[f*a,r*a]};Yg.clip=function(a){for(var b,c,d,e,f,r,g=Re(a),h=-1,u=this.length-Re(this),x=this[u-
1];++h<u;){b=a.slice();a.length=0;e=this[h];f=b[(d=b.length-g)-1];for(c=-1;++c<d;)r=b[c],Qe(r,x,e)?(Qe(f,x,e)||a.push(bd(f,r,x,e)),a.push(r)):Qe(f,x,e)&&a.push(bd(f,r,x,e)),f=r;g&&a.push(a[0]);x=e}return a};var ff,Ae,ef,eh,Sf,Bh=[],Ch=[];Se.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Nf),b.length};le.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?
this.edge.b:this.edge.a}};Ue.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=cd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(Oc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Pc(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(Pc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Oc(this,d))),
c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b,c,d,e=a.U,f=a.L,r=a.R;if(c=f?r?cd(r):f:r,e?e.L===a?e.L=c:e.R=c:this._=c,f&&r?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==r?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=r,r.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,Oc(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Pc(this,b),b=e.R);b.C=e.C;e.C=b.R.C=!1;Oc(this,e);
a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,Pc(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Oc(this,b),b=e.L);b.C=e.C;e.C=b.L.C=!1;Pc(this,e);a=this._;break}b.C=!0;a=e;e=e.U}while(!a.C);a&&(a.C=!1)}}};y.geom.voronoi=function(a){function b(a){var d=Array(a.length),e=g[0][0],f=g[0][1],r=g[1][0],h=g[1][1];return Te(c(a),g).cells.forEach(function(b,c){var g=b.edges,u=b.site;(d[c]=g.length?g.map(function(a){a=a.start();return[a.x,a.y]}):u.x>=e&&u.x<=r&&u.y>=f&&u.y<=h?[[e,h],
[r,h],[r,f],[e,f]]:[]).point=a[c]}),d}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/G)*G,y:Math.round(r(a,b)/G)*G,i:b}})}var d=dc,e=Id,f=d,r=e,g=Zg;return a?b(a):(b.links=function(a){return Te(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return Te(c(a)).cells.forEach(function(c,d){for(var e,f=c.site,r=c.edges.sort(Nf),g=-1,h=r.length,u=r[h-1].edge,u=u.l===f?u.r:u.l;++g<h;)e=u,u=r[g].edge,
u=u.l===f?u.r:u.l,d<e.i&&d<u.i&&0>(f.x-u.x)*(e.y-f.y)-(f.x-e.x)*(u.y-f.y)&&b.push([a[d],a[e.i],a[u.i]])}),b},b.x=function(a){return arguments.length?(f=fa(d=a),b):d},b.y=function(a){return arguments.length?(r=fa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(g=null==a?Zg:a,b):g===Zg?null:g},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):g===Zg?null:g&&g[1]},b)};var Zg=[[-1E6,-1E6],[1E6,1E6]];y.geom.delaunay=function(a){return y.geom.voronoi().triangles(a)};y.geom.quadtree=
function(a,b,c,d,e){function f(a){function u(a,b,c,d,e,f,r,g){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var h=a.x,l=a.y;if(null!=h){if(!(.01>ja(h-c)+ja(l-d))){var m=a.point;a.x=a.y=a.point=null;x(a,m,h,l,e,f,r,g)}x(a,b,c,d,e,f,r,g)}else a.x=c,a.y=d,a.point=b}else x(a,b,c,d,e,f,r,g)}function x(a,b,c,d,e,f,r,g){var h=.5*(e+r),l=.5*(f+g),m=c>=h,G=d>=l,H=(G<<1)+m;a.leaf=!1;a=a.nodes[H]||(a.nodes[H]=pc());m?e=h:r=h;G?f=l:g=l;u(a,b,c,d,e,f,r,g)}var l,m,G,H,n,p,q,L,t,R=fa(g),M=fa(h);if(null!=b)p=b,q=c,L=d,t=e;
else if(L=t=-(p=q=1/0),m=[],G=[],n=a.length,r)for(H=0;n>H;++H)l=a[H],l.x<p&&(p=l.x),l.y<q&&(q=l.y),l.x>L&&(L=l.x),l.y>t&&(t=l.y),m.push(l.x),G.push(l.y);else for(H=0;n>H;++H){var z=+R(l=a[H],H);l=+M(l,H);p>z&&(p=z);q>l&&(q=l);z>L&&(L=z);l>t&&(t=l);m.push(z);G.push(l)}z=L-p;l=t-q;z>l?t=q+z:L=p+l;var C=pc();if(C.add=function(a){u(C,a,+R(a,++H),+M(a,H),p,q,L,t)},C.visit=function(a){Za(a,C,p,q,L,t)},H=-1,null==b){for(;++H<n;)u(C,a[H],m[H],G[H],p,q,L,t);--H}else a.forEach(C.add);return m=G=a=l=null,C}
var r,g=dc,h=Id;return(r=arguments.length)?(g=pe,h=Jf,3===r&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(g=a,f):g},f.y=function(a){return arguments.length?(h=a,f):h},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)};y.interpolateRgb=Qc;y.interpolateObject=oc;y.interpolateNumber=
Cb;y.interpolateString=qe;var zg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;y.interpolate=Nc;y.interpolators=[function(a,b){var c=typeof b;return("string"===c?sg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?Qc:qe:b instanceof cb?Qc:"object"===c?Array.isArray(b)?oe:oc:Cb)(a,b)}];y.interpolateArray=oe;var Ph=function(){return Ba},ei=y.map({linear:Ph,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return bh},cubic:function(){return Ld},sin:function(){return pg},exp:function(){return ig},
circle:function(){return Of},elastic:function(a,b){var c;return 2>arguments.length&&(b=.45),arguments.length?c=b/x*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*x/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return qg}}),fi=y.map({"in":Ba,out:re,"in-out":Mf,"out-in":function(a){return Mf(re(a))}});y.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=ei.get(c)||
Ph,b=fi.get(b)||Ba,ng(b(c.apply(null,Mg.call(arguments,1))))};y.interpolateHcl=function(a,b){a=y.hcl(a);b=y.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,r=b.c-d,g=b.l-e;return isNaN(r)&&(r=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return Lb(c+f*a,d+r*a,e+g*a)+""}};y.interpolateHsl=function(a,b){a=y.hsl(a);b=y.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,r=b.s-d,g=b.l-e;return isNaN(r)&&(r=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&
(f+=360),function(a){return ub(c+f*a,d+r*a,e+g*a)+""}};y.interpolateLab=function(a,b){a=y.lab(a);b=y.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,r=b.a-d,g=b.b-e;return function(a){return Ra(c+f*a,d+r*a,e+g*a)+""}};y.interpolateRound=zb;y.transform=function(a){var b=na.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new gg(c?c.matrix:gi)})(a)};gg.prototype.toString=function(){return"translate("+this.translate+
")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gi={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=Ff;y.layout={};y.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Gf(a[c]));return b}};y.layout.chord=function(){function a(){var u,m,G,H,n,p={},q=[],L=y.range(f),t=[];c=[];d=[];u=0;for(H=-1;++H<f;){m=0;for(n=-1;++n<f;)m+=e[H][n];q.push(m);t.push(y.range(f));u+=m}r&&L.sort(function(a,b){return r(q[a],q[b])});g&&t.forEach(function(a,b){a.sort(function(a,
c){return g(e[b][a],e[b][c])})});u=(x-l*f)/u;m=0;for(H=-1;++H<f;){G=m;for(n=-1;++n<f;){var M=L[H],z=t[M][n],R=e[M][z],C=m,v=m+=R*u;p[M+"-"+z]={index:M,subindex:z,startAngle:C,endAngle:v,value:R}}d[M]={index:M,startAngle:G,endAngle:m,value:(m-G)/u};m+=l}for(H=-1;++H<f;)for(n=H-1;++n<f;)u=p[H+"-"+n],m=p[n+"-"+H],(u.value||m.value)&&c.push(u.value<m.value?{source:m,target:u}:{source:u,target:m});h&&b()}function b(){c.sort(function(a,b){return h((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/
2)})}var c,d,e,f,r,g,h,u={},l=0;return u.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,u):e},u.padding=function(a){return arguments.length?(l=a,c=d=null,u):l},u.sortGroups=function(a){return arguments.length?(r=a,c=d=null,u):r},u.sortSubgroups=function(a){return arguments.length?(g=a,c=null,u):g},u.sortChords=function(a){return arguments.length?(h=a,c&&b(),u):h},u.chords=function(){return c||a(),c},u.groups=function(){return d||a(),d},u};y.layout.force=function(){function a(b){return function(a,
c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y;c=e-c;e=d*d+f*f;if(e>c*c/p)return H>e&&(c=a.charge/e,b.px-=d*c,b.py-=f*c),!0;a.point&&e&&H>e&&(c=a.pointCharge/e,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){a.px=y.event.x;a.py=y.event.y;g.resume()}var c,d,e,f,r,g={},h=y.dispatch("start","tick","end"),u=[1,1],x=.9,l=hi,m=ii,G=-30,H=ji,n=.1,p=.64,q=[],L=[];return g.tick=function(){if(.005>(d*=.99))return h.end({type:"end",alpha:d=0}),!0;var b,c,g,l,m,H,p,t,M=q.length,z=L.length;for(c=0;z>c;++c)g=
L[c],b=g.source,l=g.target,p=l.x-b.x,t=l.y-b.y,(m=p*p+t*t)&&(m=d*f[c]*((m=Math.sqrt(m))-e[c])/m,p*=m,t*=m,l.x-=p*(H=b.weight/(l.weight+b.weight)),l.y-=t*H,b.x+=p*(H=1-H),b.y+=t*H);if((H=d*n)&&(p=u[0]/2,t=u[1]/2,c=-1,H))for(;++c<M;)g=q[c],g.x+=(p-g.x)*H,g.y+=(t-g.y)*H;if(G)for(Lf(b=y.geom.quadtree(q),d,r),c=-1;++c<M;)(g=q[c]).fixed||b.visit(a(g));for(c=-1;++c<M;)g=q[c],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*x,g.y-=(g.py-(g.py=g.y))*x);h.tick({type:"tick",alpha:d})},g.nodes=function(a){return arguments.length?
(q=a,g):q},g.links=function(a){return arguments.length?(L=a,g):L},g.size=function(a){return arguments.length?(u=a,g):u},g.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,g):l},g.distance=g.linkDistance,g.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,g):m},g.friction=function(a){return arguments.length?(x=+a,g):x},g.charge=function(a){return arguments.length?(G="function"==typeof a?a:+a,g):G},g.chargeDistance=function(a){return arguments.length?
(H=a*a,g):Math.sqrt(H)},g.gravity=function(a){return arguments.length?(n=+a,g):n},g.theta=function(a){return arguments.length?(p=a*a,g):Math.sqrt(p)},g.alpha=function(a){return arguments.length?(a=+a,d?d=0<a?a:0:0<a&&(h.start({type:"start",alpha:d=a}),y.timer(g.tick)),g):d},g.start=function(){function a(d,e){if(!c){c=Array(h);for(g=0;h>g;++g)c[g]=[];for(g=0;u>g;++g){var f=L[g];c[f.source.index].push(f.target);c[f.target.index].push(f.source)}}for(var r=c[b],g=-1,u=r.length;++g<u;)if(!isNaN(f=r[g][d]))return f;
return Math.random()*e}var b,c,d,h=q.length,x=L.length,H=u[0],n=u[1];for(b=0;h>b;++b)(d=q[b]).index=b,d.weight=0;for(b=0;x>b;++b)d=L[b],"number"==typeof d.source&&(d.source=q[d.source]),"number"==typeof d.target&&(d.target=q[d.target]),++d.source.weight,++d.target.weight;for(b=0;h>b;++b)d=q[b],isNaN(d.x)&&(d.x=a("x",H)),isNaN(d.y)&&(d.y=a("y",n)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;x>b;++b)e[b]=+l.call(this,L[b],b);else for(b=0;x>b;++b)e[b]=l;if(f=
[],"function"==typeof m)for(b=0;x>b;++b)f[b]=+m.call(this,L[b],b);else for(b=0;x>b;++b)f[b]=m;if(r=[],"function"==typeof G)for(b=0;h>b;++b)r[b]=+G.call(this,q[b],b);else for(b=0;h>b;++b)r[b]=G;return g.resume()},g.resume=function(){return g.alpha(.1)},g.stop=function(){return g.alpha(0)},g.drag=function(){return c||(c=y.behavior.drag().origin(Ba).on("dragstart.force",hg).on("drag.force",b).on("dragend.force",Ya)),arguments.length?(this.on("mouseover.force",Hb).on("mouseout.force",me).call(c),void 0):
c},y.rebind(g,h,"on")};var hi=20,ii=1,ji=1/0;y.layout.hierarchy=function(){function a(b,r,g){var h=e.call(c,b,r);if(b.depth=r,g.push(b),h&&(u=h.length)){for(var u,x=-1,l=b.children=Array(u),m=0,G=r+1;++x<u;)r=l[x]=a(h[x],G,g),r.parent=b,m+=r.value;d&&l.sort(d);f&&(b.value=m)}else delete b.children,f&&(b.value=+f.call(c,b,r)||0);return b}function b(a,d){var e=a.children,r=0;if(e&&(g=e.length))for(var g,h=-1,u=d+1;++h<g;)r+=b(e[h],u);else f&&(r=+f.call(c,a,d)||0);return f&&(a.value=r),r}function c(b){var d=
[];return a(b,0,d),d}var d=kg,e=xc,f=Ve;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};y.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(r=f.length)){var r,g,h=-1;for(d=b.value?d/b.value:0;++h<r;)a(g=f[h],c,b=g.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(d=a.length))for(var d,
e=-1;++e<d;)c=Math.max(c,b(a[e]));return 1+c}function c(f,r){var g=d.call(this,f,r);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=y.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Rc(c,d)};y.layout.pie=function(){function a(f){var r=f.map(function(c,d){return+b.call(a,c,d)}),g=+("function"==typeof d?d.apply(this,arguments):d),h=(("function"==typeof e?e.apply(this,arguments):e)-g)/y.sum(r),u=y.range(f.length);null!=c&&u.sort(c===Qh?function(a,b){return r[b]-r[a]}:
function(a,b){return c(f[a],f[b])});var x=[];return u.forEach(function(a){var b;x[a]={data:f[a],value:b=r[a],startAngle:g,endAngle:g+=b*h}}),x}var b=Number,c=Qh,d=0,e=x;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Qh={};y.layout.stack=function(){function a(g,h){var u=g.map(function(c,d){return b.call(a,c,
d)}),x=u.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),r.call(a,b,c)]})}),l=c.call(a,x,h),u=y.permute(u,l),x=y.permute(x,l),m,G,H=d.call(a,x,h),n=u.length,p=u[0].length;for(m=0;p>m;++m)for(e.call(a,u[0][m],G=H[m],x[0][m][1]),l=1;n>l;++l)e.call(a,u[l][m],G+=x[l-1][m][1],x[l][m][1]);return g}var b=Ba,c=Fc,d=Be,e=sc,f=ia,r=pd;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ki.get(b)||Fc,a):c},a.offset=
function(b){return arguments.length?(d="function"==typeof b?b:li.get(b)||Be,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(r=b,a):r},a.out=function(b){return arguments.length?(e=b,a):e},a};var ki=y.map({"inside-out":function(a){var b,c=a.length,d=a.map(gf),e=a.map(hf),f=y.range(c).sort(function(a,b){return d[a]-d[b]}),r=0,g=0,h=[],u=[];for(a=0;c>a;++a)b=f[a],g>r?(r+=e[b],h.push(b)):(g+=e[b],u.push(b));return u.reverse().concat(h)},reverse:function(a){return y.range(a.length).reverse()},
"default":Fc}),li=y.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,r=[],g=0,h=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];d>g&&(g=d);r.push(d)}for(c=0;f>c;++c)h[c]=(g-r[c])/2;return h},wiggle:function(a){var b,c,d,e,f,r,g,h,u,x=a.length,l=a[0],m=l.length,G=[];G[0]=h=u=0;for(c=1;m>c;++c){for(e=b=0;x>b;++b)e+=a[b][c][1];f=b=0;for(g=l[c][0]-l[c-1][0];x>b;++b){d=0;for(r=(a[b][c][1]-a[b][c-1][1])/(2*g);b>d;++d)r+=(a[d][c][1]-a[d][c-1][1])/g;f+=r*a[b][c][1]}G[c]=h-=e?f/e*g:0;u>h&&
(u=h)}for(c=0;m>c;++c)G[c]-=u;return G},expand:function(a){var b,c,d,e=a.length,f=a[0].length,r=1/e,g=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=r}for(c=0;f>c;++c)g[c]=0;return g},zero:Be});y.layout.histogram=function(){function a(f,r){var g,h,u=[],x=f.map(c,this),l=d.call(this,x,r),m=e.call(this,l,x,r);r=-1;for(var G=x.length,H=m.length-1,n=b?1:1/G;++r<H;)g=u[r]=[],g.dx=m[r+1]-(g.x=m[r]),g.y=0;if(0<H)for(r=-1;++r<G;)h=x[r],
h>=l[0]&&h<=l[1]&&(g=u[y.bisect(m,h,1,H)-1],g.y+=n,g.push(f[r]));return u}var b=!0,c=Number,d=fh,e=Ag;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=fa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return Bg(a,b)}:fa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a};y.layout.tree=function(){function a(f,r){function g(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,
r,h,u=d[0],x=u,l=-1;++l<f;){h=d[l];g(h,r);var m=h;if(r){for(var G=void 0,H=m,n=m,p=m.parent.children[0],q=H._tree.mod,L=n._tree.mod,t=r._tree.mod,M=p._tree.mod;r=Ce(r),H=Uf(H),r&&H;){p=Uf(p);n=Ce(n);n._tree.ancestor=m;G=r._tree.prelim+t-H._tree.prelim-q+c(r,H);if(0<G){var z=r._tree.ancestor.parent==m.parent?r._tree.ancestor:x,C=m,v=G,z=z._tree,C=C._tree,R=v/(C.number-z.number);z.change+=R;C.change-=R;C.shift+=v;C.prelim+=v;C.mod+=v;q+=G;L+=G}t+=r._tree.mod;q+=H._tree.mod;M+=p._tree.mod;L+=n._tree.mod}r&&
!Ce(n)&&(n._tree.thread=r,n._tree.mod+=t-L);H&&!Uf(p)&&(p._tree.thread=H,p._tree.mod+=q-M,x=m)}r=h}l=f=0;m=a.children;for(x=m.length;0<=--x;)d=m[x]._tree,d.prelim+=f,d.mod+=f,f+=d.shift+(l+=d.change);h=.5*(u._tree.prelim+h._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-h):e.prelim=h}else b&&(e.prelim=b._tree.prelim+c(a,b))}function h(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)h(c[e],b)}}var u=b.call(this,f,r),x=u[0];Gc(x,function(a,
b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});g(x);h(x,-x._tree.prelim);var l=Yd(x,kf),m=Yd(x,jf),G=Yd(x,Dg),H=l.x-c(l,m)/2,n=m.x+c(m,l)/2,p=G.depth||1;return Gc(x,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-H)/(n-H)*d[0];a.y=a.depth/p*d[1];delete a._tree}),u}var b=y.layout.hierarchy().sort(null).value(null),c=Cg,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?
(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Rc(a,b)};y.layout.pack=function(){function a(f,r){var g=c.call(this,f,r),h=g[0],u=e[0],x=e[1],l=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,Gc(h,function(a){a.r=+l(a.value)}),Gc(h,Zd),d){var m=d*(b?1:Math.max(2*h.r/u,2*h.r/x))/2;Gc(h,function(a){a.r+=m});Gc(h,Zd);Gc(h,function(a){a.r-=m})}return Fa(h,u/2,x/2,b?1:1/Math.max(2*h.r/u,2*h.r/x)),g}var b,c=y.layout.hierarchy().sort(Vf),
d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Rc(a,c)};y.layout.cluster=function(){function a(f,r){var g,h=b.call(this,f,r),u=h[0],x=0;Gc(u,function(a){var b=a.children;b&&b.length?(a.x=gh(b),a.y=Jb(b)):(a.x=g?x+=c(a,g):0,a.y=0,g=a)});var l=Gg(u),m=hc(u),G=l.x-c(l,m)/2,H=m.x+c(m,l)/2;return Gc(u,e?function(a){a.x=(a.x-u.x)*d[0];
a.y=(u.y-a.y)*d[1]}:function(a){a.x=(a.x-G)/(H-G)*d[0];a.y=(1-(u.y?a.y/u.y:1))*d[1]}),h}var b=y.layout.hierarchy().sort(null).value(null),c=Cg,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Rc(a,b)};y.layout.treemap=function(){function a(b,c){for(var d,e,f=-1,r=b.length;++f<r;)e=(d=b[f]).value*(0>c?0:c),d.area=isNaN(e)||
0>=e?0:e}function b(c){var e=c.children;if(e&&e.length){var f,r=x(c),g=[],h=e.slice(),u=1/0,l="slice"===m?r.dx:"dice"===m?r.dy:"slice-dice"===m?1&c.depth?r.dy:r.dx:Math.min(r.dx,r.dy);a(h,r.dx*r.dy/c.value);for(g.area=0;0<(c=h.length);){g.push(c=h[c-1]);g.area+=c.area;var H;if(!(H="squarify"!==m)){c=l;f=void 0;var n=g.area;H=0;for(var p=1/0,q=-1,L=g.length;++q<L;)(f=g[q].area)&&(p>f&&(p=f),f>H&&(H=f));H=(f=(n*=n,c*=c,n?Math.max(c*H*G/n,n/(c*p*G)):1/0))<=u}H?(h.pop(),u=f):(g.area-=g.pop().area,d(g,
l,r,!1),l=Math.min(r.dx,r.dy),g.length=g.area=0,u=1/0)}g.length&&(d(g,l,r,!0),g.length=g.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=x(b),r=e.slice(),g=[];a(r,f.dx*f.dy/b.value);for(g.area=0;b=r.pop();)g.push(b),g.area+=b.area,null!=b.z&&(d(g,b.z?f.dx:f.dy,f,!r.length),g.length=g.area=0);e.forEach(c)}}function d(a,b,c,e){var f,r=-1,h=a.length,u=c.x,x=c.y,l=b?g(a.area/b):0;if(b==c.dx){for((e||l>c.dy)&&(l=c.dy);++r<h;)f=a[r],f.x=u,f.y=x,f.dy=l,u+=f.dx=Math.min(c.x+c.dx-
u,l?g(f.area/l):0);f.z=!0;f.dx+=c.x+c.dx-u;c.y+=l;c.dy-=l}else{for((e||l>c.dx)&&(l=c.dx);++r<h;)f=a[r],f.x=u,f.y=x,f.dx=l,x+=f.dy=Math.min(c.y+c.dy-x,l?g(f.area/l):0);f.z=!1;f.dy+=c.y+c.dy-x;c.x+=l;c.dx-=l}}function e(d){d=f||r(d);var g=d[0];return g.x=0,g.y=0,g.dx=h[0],g.dy=h[1],f&&r.revalue(g),a([g],g.dx*g.dy/g.value),(f?c:b)(g),l&&(f=d),d}var f,r=y.layout.hierarchy(),g=Math.round,h=[1,1],u=null,x=mf,l=!1,m="squarify",G=.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?(h=a,
e):h},e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?mf(c):nf(c,"number"==typeof d?[d,d,d,d]:d)}function c(b){return nf(b,a)}if(!arguments.length)return u;var d;return x=null==(u=a)?mf:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,e},e.round=function(a){return arguments.length?(g=a?Math.round:Number,e):g!=Number},e.sticky=function(a){return arguments.length?(l=a,f=null,e):l},e.ratio=function(a){return arguments.length?(G=a,e):G},e.mode=function(a){return arguments.length?
(m=a+"",e):m},Rc(e,r)};y.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=y.random.normal.apply(y,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=y.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}};
y.scale={};var Yh={floor:Ba,ceil:Ba};y.scale.linear=function(){return id([0,1],[0,1],Nc,!1)};var Zh={s:1,g:1,p:1,r:1,e:1};y.scale.log=function(){return Aa(y.scale.linear().domain([0,1]),10,!0,[1,10])};var Dh=y.format(".0e"),$h={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};y.scale.pow=function(){return rf(y.scale.linear(),1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(.5)};y.scale.ordinal=function(){return Cd([],{t:"range",a:[[]]})};y.scale.category10=
function(){return y.scale.ordinal().range(mi)};y.scale.category20=function(){return y.scale.ordinal().range(ni)};y.scale.category20b=function(){return y.scale.ordinal().range(oi)};y.scale.category20c=function(){return y.scale.ordinal().range(pi)};var mi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xb),ni=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(xb),oi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xb),pi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xb);y.scale.quantile=function(){return Hg([],[])};y.scale.quantize=function(){return jd(0,1,[0,1])};y.scale.threshold=
function(){return Fe([.5],[0,1])};y.scale.identity=function(){return Ge([0,1])};y.svg={};y.svg.arc=function(){function a(){var f=b.apply(this,arguments),r=c.apply(this,arguments),g=d.apply(this,arguments)+Je,h=e.apply(this,arguments)+Je,x=(g>h&&(x=g,g=h,h=x),h-g),l=u>x?"0":"1",m=Math.cos(g),g=Math.sin(g),G=Math.cos(h),h=Math.sin(h);return x>=qi?f?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+
-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":f?"M"+r*m+","+r*g+"A"+r+","+r+" 0 "+l+",1 "+r*G+","+r*h+"L"+f*G+","+f*h+"A"+f+","+f+" 0 "+l+",0 "+f*m+","+f*g+"Z":"M"+r*m+","+r*g+"A"+r+","+r+" 0 "+l+",1 "+r*G+","+r*h+"L0,0Z"}var b=Ig,c=sf,d=jc,e=Xf;return a.innerRadius=function(c){return arguments.length?(b=fa(c),a):b},a.outerRadius=function(b){return arguments.length?(c=fa(b),a):c},a.startAngle=function(b){return arguments.length?(d=fa(b),a):d},a.endAngle=function(b){return arguments.length?(e=fa(b),a):e},a.centroid=
function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Je;return[Math.cos(f)*a,Math.sin(f)*a]},a};var Je=-H,qi=x-G;y.svg.line=function(){return tf(Ba)};var ih=y.map({linear:sb,"linear-closed":function(a){return sb(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return 1<c&&e.push("H",d[0]),e.join("")},"step-before":Yf,"step-after":kd,basis:be,"basis-open":function(a){if(4>
a.length)return sb(a);for(var b,c=[],d=-1,e=a.length,f=[0],r=[0];3>++d;)b=a[d],f.push(b[0]),r.push(b[1]);c.push(Qb(ce,f)+","+Qb(ce,r));for(--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),r.shift(),r.push(b[1]),Ie(c,f,r);return c.join("")},"basis-closed":function(a){for(var b,c,d=-1,e=a.length,f=e+4,r=[],g=[];4>++d;)c=a[d%e],r.push(c[0]),g.push(c[1]);b=[Qb(ce,r),",",Qb(ce,g)];for(--d;++d<f;)c=a[d%e],r.shift(),r.push(c[0]),g.shift(),g.push(c[1]),Ie(b,r,g);return b.join("")},bundle:function(a,b){var c=a.length-
1;if(c)for(var d,e,f=a[0][0],r=a[0][1],g=a[c][0]-f,h=a[c][1]-r,u=-1;++u<=c;)d=a[u],e=u/c,d[0]=b*d[0]+(1-b)*(f+e*g),d[1]=b*d[1]+(1-b)*(r+e*h);return be(a)},cardinal:function(a,b){return 3>a.length?sb(a):a[0]+He(a,uf(a,b))},"cardinal-open":function(a,b){return 4>a.length?sb(a):a[1]+He(a.slice(1,a.length-1),uf(a,b))},"cardinal-closed":function(a,b){return 3>a.length?sb(a):a[0]+He((a.push(a[0]),a),uf([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=sb(a);else{var b=a[0],c,d,
e,f,r=[],g;c=0;g=a.length-1;for(var h=[],u=a[1],x=h[0]=Zc(a[0],u);++c<g;)h[c]=(x+(x=Zc(u,u=a[c+1])))/2;g=(h[c]=x,h);h=-1;for(u=a.length-1;++h<u;)c=Zc(a[h],a[h+1]),ja(c)<G?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));for(h=-1;++h<=u;)f=(a[Math.min(u,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),r.push([f||0,g[h]*f||0]);a=b+He(a,r)}return a}});ih.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Eh=[0,2/3,1/3,0],Fh=[0,1/3,2/3,0],ce=[0,
1/6,2/3,1/6];y.svg.line.radial=function(){var a=tf(de);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};Yf.reverse=kd;kd.reverse=Yf;y.svg.area=function(){return Jg(Ba)};y.svg.area.radial=function(){var a=Jg(de);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};y.svg.chord=function(){function a(f,r){var g=b(this,d,f,r),h=b(this,e,f,r);return"M"+g.p0+c(g.r,g.p1,g.a1-
g.a0)+(g.a0==h.a0&&g.a1==h.a1?"Q 0,0 "+g.p0:"Q 0,0 "+h.p0+c(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+g.p0))+"Z"}function b(a,c,d,e){var h=c.call(a,d,e);c=f.call(a,h,e);d=r.call(a,h,e)+Je;a=g.call(a,h,e)+Je;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>u)+",1 "+b}var d=Fd,e=nd,f=vf,r=jc,g=Xf;return a.radius=function(b){return arguments.length?(f=fa(b),a):f},a.source=function(b){return arguments.length?(d=fa(b),a):d},a.target=
function(b){return arguments.length?(e=fa(b),a):e},a.startAngle=function(b){return arguments.length?(r=fa(b),a):r},a.endAngle=function(b){return arguments.length?(g=fa(b),a):g},a};y.svg.diagonal=function(){function a(e,f){var r=b.call(this,e,f),g=c.call(this,e,f),h=(r.y+g.y)/2,r=[r,{x:r.x,y:h},{x:g.x,y:h},g];return r=r.map(d),"M"+r[0]+"C"+r[1]+" "+r[2]+" "+r[3]}var b=Fd,c=nd,d=Kc;return a.source=function(c){return arguments.length?(b=fa(c),a):b},a.target=function(b){return arguments.length?(c=fa(b),
a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a};y.svg.diagonal.radial=function(){var a=y.svg.diagonal(),b=Kc,c=a.projection;return a.projection=function(a){return arguments.length?c(wf(b=a)):b},a};y.svg.symbol=function(){function a(d,e){return(Rh.get(b.call(this,d,e))||Ke)(c.call(this,d,e))}var b=kh,c=jh;return a.type=function(c){return arguments.length?(b=fa(c),a):b},a.size=function(b){return arguments.length?(c=fa(b),a):c},a};var Rh=y.map({circle:Ke,cross:function(a){a=Math.sqrt(a/
5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Sh));var b=a*Sh;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/$g);var b=a*$g/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/$g);var b=a*$g/2;return"M0,"+-b+"L"+a+","+b+" "+
-a+","+b+"Z"}});y.svg.symbolTypes=Rh.keys();var Oe,Ng,$g=Math.sqrt(3),Sh=Math.tan(30*M),Ab=[],Gh=0;Ab.call=za.call;Ab.empty=za.empty;Ab.node=za.node;Ab.size=za.size;y.transition=function(a){return arguments.length?Oe?a.transition():a:zf.transition()};y.transition.prototype=Ab;Ab.select=function(a){var b,c,d,e=this.id,f=[];a=I(a);for(var r=-1,g=this.length;++r<g;){f.push(b=[]);for(var h=this[r],u=-1,x=h.length;++u<x;)(d=h[u])&&(c=a.call(d,d.__data__,u,r))?("__data__"in d&&(c.__data__=d.__data__),Dd(c,
u,e,d.__transition__[e]),b.push(c)):b.push(null)}return tc(f,e)};Ab.selectAll=function(a){var b,c,d,e,f=this.id,r=[];a=C(a);for(var g=-1,h=this.length;++g<h;)for(var u=this[g],x=-1,l=u.length;++x<l;)if(b=u[x]){e=b.__transition__[f];c=a.call(b,b.__data__,x,g);r.push(b=[]);for(var m=-1,G=c.length;++m<G;)(d=c[m])&&Dd(d,m,f,e),b.push(d)}return tc(r,f)};Ab.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=La(a));for(var f=0,r=this.length;r>f;f++){e.push(b=[]);c=this[f];for(var g=0,h=c.length;h>
g;g++)(d=c[g])&&a.call(d,d.__data__,g,f)&&b.push(d)}return tc(e,this.id)};Ab.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):va(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};Ab.attr=function(a,b){function c(){this.removeAttribute(g)}function d(){this.removeAttributeNS(g.space,g.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(g);return c!==a&&(b=
r(c,a),function(a){this.setAttribute(g,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(g.space,g.local);return c!==a&&(b=r(c,a),function(a){this.setAttributeNS(g.space,g.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var r="transform"==a?Ff:Nc,g=y.ns.qualify(a);return Zf(this,"attr."+a,b,g.local?f:e)};Ab.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,
f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,e.local,f(a))}}var e=y.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};Ab.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Zf(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d,e=Ha.getComputedStyle(this,
null).getPropertyValue(a);return e!==b&&(d=Nc(e,b),function(b){this.style.setProperty(a,d(b),c)})})})};Ab.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Ha.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};Ab.text=function(a){return Zf(this,"text",a,xf)};Ab.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&
a.removeChild(this)})};Ab.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=y.ease.apply(y,arguments)),va(this,function(c){c.__transition__[b].ease=a}))};Ab.delay=function(a){var b=this.id;return va(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};Ab.duration=function(a){var b=this.id;return va(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=
Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))};Ab.each=function(a,b){var c=this.id;if(2>arguments.length){var d=Ng,e=Oe;Oe=c;va(this,function(b,d,e){Ng=b.__transition__[c];a.call(b,b.__data__,d,e)});Ng=d;Oe=e}else va(this,function(d){d=d.__transition__[c];(d.event||(d.event=y.dispatch("start","end"))).on(a,b)});return this};Ab.transition=function(){for(var a,b,c,d,e=this.id,f=++Gh,r=[],g=0,h=this.length;h>g;g++){r.push(a=[]);b=this[g];for(var u=
0,x=b.length;x>u;u++)(c=b[u])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Dd(c,u,f,d)),a.push(c)}return tc(r,f)};y.svg.axis=function(){function a(u){u.each(function(){var a,u=y.select(this),x=this.__chart__||c,l=this.__chart__=c.copy(),m=null==h?l.ticks?l.ticks.apply(l,g):l.domain():h,H=null==b?l.tickFormat?l.tickFormat.apply(l,g):Ba:b,n=u.selectAll(".tick").data(m,l),m=n.enter().insert("g",".domain").attr("class","tick").style("opacity",G),p=y.transition(n.exit()).style("opacity",
G).remove(),q=y.transition(n).style("opacity",1),L=of(l),u=u.selectAll(".domain").data([0]),u=(u.enter().append("path").attr("class","domain"),y.transition(u));m.append("line");m.append("text");var t=m.select("line"),M=q.select("line"),H=n.select("text").text(H),n=m.select("text"),z=q.select("text");switch(d){case "bottom":a=ld;t.attr("y2",e);n.attr("y",Math.max(e,0)+r);M.attr("x2",0).attr("y2",e);z.attr("x",0).attr("y",Math.max(e,0)+r);H.attr("dy",".71em").style("text-anchor","middle");u.attr("d",
"M"+L[0]+","+f+"V0H"+L[1]+"V"+f);break;case "top":a=ld;t.attr("y2",-e);n.attr("y",-(Math.max(e,0)+r));M.attr("x2",0).attr("y2",-e);z.attr("x",0).attr("y",-(Math.max(e,0)+r));H.attr("dy","0em").style("text-anchor","middle");u.attr("d","M"+L[0]+","+-f+"V0H"+L[1]+"V"+-f);break;case "left":a=Kg;t.attr("x2",-e);n.attr("x",-(Math.max(e,0)+r));M.attr("x2",-e).attr("y2",0);z.attr("x",-(Math.max(e,0)+r)).attr("y",0);H.attr("dy",".32em").style("text-anchor","end");u.attr("d","M"+-f+","+L[0]+"H0V"+L[1]+"H"+
-f);break;case "right":a=Kg,t.attr("x2",e),n.attr("x",Math.max(e,0)+r),M.attr("x2",e).attr("y2",0),z.attr("x",Math.max(e,0)+r).attr("y",0),H.attr("dy",".32em").style("text-anchor","start"),u.attr("d","M"+f+","+L[0]+"H0V"+L[1]+"H"+f)}if(l.rangeBand)var C=l,v=C.rangeBand()/2,x=l=function(a){return C(a)+v};else x.rangeBand?x=l:p.call(a,l);m.call(a,x);q.call(a,l)})}var b,c=y.scale.linear(),d=Th,e=6,f=6,r=3,g=[10],h=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?
(d=b in ri?b+"":Th,a):d},a.ticks=function(){return arguments.length?(g=arguments,a):g},a.tickValues=function(b){return arguments.length?(h=b,a):h},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(r=+b,a):r},a.tickSubdivide=function(){return arguments.length&&
a},a};var Th="bottom",ri={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function a(f){f.each(function(){var f=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),r=f.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var g=f.selectAll(".resize").data(H,Ba);g.exit().remove();g.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return si[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");g.style("display",a.empty()?"none":null);var x,f=y.transition(f),r=y.transition(r);h&&(x=of(h),r.attr("x",x[0]).attr("width",x[1]-x[0]),c(f));u&&
(x=of(u),r.attr("y",x[0]).attr("height",x[1]-x[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+x[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",x[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",x[1]-x[0])}function d(a){a.select(".extent").attr("y",l[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function H(){var a=y.mouse(t),e=!1;L&&(a[0]+=L[0],a[1]+=L[1]);F||(y.event.altKey?
(q||(q=[(x[0]+x[1])/2,(l[0]+l[1])/2]),Va[0]=x[+(a[0]<q[0])],Va[1]=l[+(a[1]<q[1])]):q=null);xa&&n(a,h,0)&&(c(C),e=!0);A&&n(a,u,1)&&(d(C),e=!0);e&&(b(C),z({type:"brush",mode:F?"move":"resize"}))}function n(a,b,c){var d,e,g=of(b);b=g[0];var g=g[1],h=Va[c],u=c?l:x,H=u[1]-u[0];return F&&(b-=h,g-=H+h),d=(c?G:m)?Math.max(b,Math.min(g,a[c])):a[c],F?e=(d+=h)+H:(q&&(h=Math.max(b,Math.min(g,2*q[c]-d))),d>h?(e=d,d=h):e=h),u[0]!=d||u[1]!=e?(c?r=null:f=null,u[0]=d,u[1]=e,!0):void 0}function p(){H();C.style("pointer-events",
"all").selectAll(".resize").style("display",a.empty()?"none":null);y.select("body").style("cursor",null);B.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);D();z({type:"brushend"})}var q,L,t=this,M=y.select(y.event.target),z=g.of(t,arguments),C=y.select(t),v=M.datum(),xa=!/^(n|s)$/.test(v)&&h,A=!/^(e|w)$/.test(v)&&u,F=M.classed("extent"),D=N(),Va=y.mouse(t),B=y.select(Ha).on("keydown.brush",function(){32==
y.event.keyCode&&(F||(q=null,Va[0]-=x[1],Va[1]-=l[1],F=2),w())}).on("keyup.brush",function(){32==y.event.keyCode&&2==F&&(Va[0]+=x[1],Va[1]+=l[1],F=0,w())});if(y.event.changedTouches?B.on("touchmove.brush",H).on("touchend.brush",p):B.on("mousemove.brush",H).on("mouseup.brush",p),C.interrupt().selectAll("*").interrupt(),F)Va[0]=x[0]-Va[0],Va[1]=l[0]-Va[1];else if(v){var T=+/w$/.test(v),v=+/^n/.test(v);L=[x[1-T]-Va[0],l[1-v]-Va[1]];Va[0]=x[T];Va[1]=l[v]}else y.event.altKey&&(q=Va.slice());C.style("pointer-events",
"none").selectAll(".resize").style("display",null);y.select("body").style("cursor",M.style("cursor"));z({type:"brushstart"});H()}var f,r,g=D(a,"brushstart","brush","brushend"),h=null,u=null,x=[0,0],l=[0,0],m=!0,G=!0,H=ph[0];return a.event=function(a){a.each(function(){var a=g.of(this,arguments),b={x:x,y:l,i:f,j:r},c=this.__chart__||b;this.__chart__=b;Oe?y.select(this).transition().each("start.brush",function(){f=c.i;r=c.j;x=c.x;l=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=oe(x,
b.x),d=oe(l,b.y);return f=r=null,function(e){x=b.x=c(e);l=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i;r=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(h=b,H=ph[!h<<1|!u],a):h},a.y=function(b){return arguments.length?(u=b,H=ph[!h<<1|!u],a):u},a.clamp=function(b){return arguments.length?(h&&u?(m=!!b[0],G=!!b[1]):h?m=!!b:u&&(G=!!b),a):
h&&u?[m,G]:h?m:u?G:null},a.extent=function(b){var c,d,e,g,m;return arguments.length?(h&&(c=b[0],d=b[1],u&&(c=c[0],d=d[0]),f=[c,d],h.invert&&(c=h(c),d=h(d)),c>d&&(m=c,c=d,d=m),(c!=x[0]||d!=x[1])&&(x=[c,d])),u&&(e=b[0],g=b[1],h&&(e=e[1],g=g[1]),r=[e,g],u.invert&&(e=u(e),g=u(g)),e>g&&(m=e,e=g,g=m),(e!=l[0]||g!=l[1])&&(l=[e,g])),a):(h&&(f?(c=f[0],d=f[1]):(c=x[0],d=x[1],h.invert&&(c=h.invert(c),d=h.invert(d)),c>d&&(m=c,c=d,d=m))),u&&(r?(e=r[0],g=r[1]):(e=l[0],g=l[1],u.invert&&(e=u.invert(e),g=u.invert(g)),
e>g&&(m=e,e=g,g=m))),h&&u?[[c,e],[d,g]]:h?[c,d]:u&&[e,g])},a.clear=function(){return a.empty()||(x=[0,0],l=[0,0],f=r=null),a},a.empty=function(){return!!h&&x[0]==x[1]||!!u&&l[0]==l[1]},y.rebind(a,g,"on")};var si={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ph=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],qh=U.format=Ih.timeFormat,Uh=qh.utc,Vh=Uh("%Y-%m-%dT%H:%M:%S.%LZ");qh.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?$f:Vh;$f.parse=function(a){a=new Date(a);return isNaN(a)?null:a};$f.toString=Vh.toString;U.second=aa(function(a){return new Ub(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});U.seconds=U.second.range;U.seconds.utc=U.second.utc.range;U.minute=aa(function(a){return new Ub(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});U.minutes=
U.minute.range;U.minutes.utc=U.minute.utc.range;U.hour=aa(function(a){var b=a.getTimezoneOffset()/60;return new Ub(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});U.hours=U.hour.range;U.hours.utc=U.hour.utc.range;U.month=aa(function(a){return a=U.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});U.months=U.month.range;U.months.utc=U.month.utc.range;var Lg=[1E3,5E3,15E3,3E4,6E4,
3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],rh=[[U.second,1],[U.second,5],[U.second,15],[U.second,30],[U.minute,1],[U.minute,5],[U.minute,15],[U.minute,30],[U.hour,1],[U.hour,3],[U.hour,6],[U.hour,12],[U.day,1],[U.day,2],[U.week,1],[U.month,1],[U.month,3],[U.year,1]],ti=qh.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",
function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Fb]]),ai={range:function(a,b,c){return y.range(+a,+b,c).map(tb)},floor:Ba,ceil:Ba};rh.year=U.year;U.scale=function(){return ag(y.scale.linear(),rh,ti)};var Wh=rh.map(function(a){return[a[0].utc,a[1]]}),ui=Uh.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",
function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Fb]]);Wh.year=U.year.utc;U.scale.utc=function(){return ag(y.scale.linear(),Wh,ui)};y.text=rb(function(a){return a.responseText});y.json=function(a,b){return yb(a,"application/json",lh,b)};y.html=function(a,b){return yb(a,"text/html",Le,b)};y.xml=rb(function(a){return a.responseXML});"function"==typeof define&&
define.amd?define(y):"object"==typeof module&&module.exports?module.exports=y:this.d3=y}();function str_repeat(a,c){for(var b=[];0<c;b[--c]=a);return b.join("")}
function sprintf(){for(var a=0,c,b=arguments[a++],d=[],e,f,g;b;){if(e=/^[^\x25]+/.exec(b))d.push(e[0]);else if(e=/^\x25{2}/.exec(b))d.push("%");else if(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)){if(null==(c=arguments[e[1]||a++])||void 0==c)throw"Too few arguments.";if(/[^s]/.test(e[7])&&"number"!=typeof c)throw"Expecting number but found "+typeof c;switch(e[7]){case "b":c=c.toString(2);break;case "c":c=String.fromCharCode(c);break;case "d":c=parseInt(c);break;
case "e":c=e[6]?c.toExponential(e[6]):c.toExponential();break;case "f":c=e[6]?parseFloat(c).toFixed(e[6]):parseFloat(c);break;case "o":c=c.toString(8);break;case "s":c=(c=String(c))&&e[6]?c.substring(0,e[6]):c;break;case "u":c=Math.abs(c);break;case "x":c=c.toString(16);break;case "X":c=c.toString(16).toUpperCase()}c=/[def]/.test(e[7])&&e[2]&&0<=c?"+"+c:c;f=e[3]?"0"==e[3]?"0":e[3].charAt(1):" ";g=e[5]-String(c).length-0;f=e[5]?str_repeat(f,g):"";d.push(""+(e[4]?c+f:f+c))}else throw"Huh ?!";b=b.substring(e[0].length)}return d.join("")}
(function(a,c){var b,d,e,f,g,h,l,m,n,q,v,A,w,E,D,J,I,C,t,z,F,O,S,V;b=function(a){return new b.prototype.init(a)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=b:a.Globalize=b;b.cultures={};b.prototype={constructor:b,init:function(a){this.cultures=b.cultures;this.cultureSelector=a;return this}};b.prototype.init.prototype=b.prototype;b.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};b.cultures["default"].calendar=b.cultures["default"].calendars.standard;b.cultures.en=b.cultures["default"];b.cultureSelector="en";d=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;g=/^\s+|\s+$/g;h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};l=function(a,b){return a.substr(a.length-b.length)===b};m=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,l=arguments.length,
t=!1;"boolean"===typeof g&&(t=g,g=arguments[1]||{},h=2);for("object"===typeof g||q(g)||(g={});h<l;h++)if(null!=(a=arguments[h]))for(b in a)d=g[b],e=a[b],g!==e&&(t&&e&&(v(e)||(f=n(e)))?(f?(f=!1,d=d&&n(d)?d:[]):d=d&&v(d)?d:{},g[b]=m(t,d,e)):e!==c&&(g[b]=e));return g};n=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};q=function(a){return"[object Function]"===Object.prototype.toString.call(a)};v=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
A=function(a,b){return 0===a.indexOf(b)};w=function(a){return(a+"").replace(g,"")};E=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};D=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a};J=function(a,b){for(var c=0,d=!1,e=0,f=a.length;e<f;e++){var g=a.charAt(e);switch(g){case "'":d?b.push("'"):c++;d=!1;break;case "\\":d&&b.push("\\");d=!d;break;default:b.push(g),d=!1}}return c};I=function(a,b){b=b||"F";var c;c=a.patterns;var d=b.length;if(1===d){c=c[b];if(!c)throw"Invalid date format string '"+
b+"'.";b=c}else 2===d&&"%"===b.charAt(0)&&(b=b.charAt(1));return b};C=function(a,b,c){function d(a,b){var c;c=a+"";return 1<b&&c.length<b?(c=q[b-2]+c,c.substr(c.length-b,b)):c}function e(){if(t||v)return t;t=w.test(b);v=!0;return t}function f(a,b){if(E)return E[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var g=c.calendar,h=g.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(h)c=C(a,g.patterns.F,c);else{c=
new Date(a.getTime());var l=F(a,g.eras);c.setFullYear(O(a,g,l));c=c.toLocaleString()}else c=a.toString();return c}var l=g.eras,m="s"===b;b=I(g,b);c=[];var n,q=["0","00","000"],t,v,w=/([^d]|^)(d|dd)([^d]|$)/g,A=0,D=z(),E;for(!m&&h&&(E=h.fromGregorian(a));;){n=D.lastIndex;h=D.exec(b);n=b.slice(n,h?h.index:b.length);A+=J(n,c);if(!h)break;if(A%2)c.push(h[0]);else switch(n=h[0],h=n.length,n){case "ddd":case "dddd":c.push((3===h?g.days.namesAbbr:g.days.names)[a.getDay()]);break;case "d":case "dd":t=!0;
c.push(d(f(a,2),h));break;case "MMM":case "MMMM":n=f(a,1);c.push(g.monthsGenitive&&e()?g.monthsGenitive[3===h?"namesAbbr":"names"][n]:g.months[3===h?"namesAbbr":"names"][n]);break;case "M":case "MM":c.push(d(f(a,1)+1,h));break;case "y":case "yy":case "yyyy":n=E?E[0]:O(a,g,F(a,l),m);4>h&&(n%=100);c.push(d(n,h));break;case "h":case "hh":n=a.getHours()%12;0===n&&(n=12);c.push(d(n,h));break;case "H":case "HH":c.push(d(a.getHours(),h));break;case "m":case "mm":c.push(d(a.getMinutes(),h));break;case "s":case "ss":c.push(d(a.getSeconds(),
h));break;case "t":case "tt":n=12>a.getHours()?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ";c.push(1===h?n.charAt(0):n);break;case "f":case "ff":case "fff":c.push(d(a.getMilliseconds(),3).substr(0,h));break;case "z":case "zz":n=a.getTimezoneOffset()/60;c.push((0>=n?"+":"-")+d(Math.floor(Math.abs(n)),h));break;case "zzz":n=a.getTimezoneOffset()/60;c.push((0>=n?"+":"-")+d(Math.floor(Math.abs(n)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":g.eras&&c.push(g.eras[F(a,l)].name);break;
case "/":c.push(g["/"]);break;default:throw"Invalid date format pattern '"+n+"'.";}}return c.join("")};(function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],f=1,g=Math.pow(10,b),g=Math.round(a*g)/g;isFinite(g)||(g=a);a=g+"";var g="",g=a.split(/e/i),h=1<g.length?parseInt(g[1],10):0;a=g[0];g=a.split(".");a=g[0];g=1<g.length?g[1]:"";0<h?(g=D(g,h,!1),a+=g.slice(0,h),g=g.substr(h)):0>h&&(h=-h,a=D(a,h+1,!0),g=a.slice(-h,a.length)+g,a=a.slice(0,-h));g=0<b?c["."]+(g.length>b?g.slice(0,b):D(g,b)):
"";b=a.length-1;c=c[","];for(h="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(h.length?c+h+g:g);h=a.slice(b-e+1,b+1)+(h.length?c+h:"");b-=e;f<d.length&&(e=d[f],f++)}return a.slice(0,b+1)+c+h+g};t=function(b,c,d){if(!isFinite(b))return Infinity===b?d.numberFormat.positiveInfinity:-Infinity===b?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";d=d.numberFormat;var e=Math.abs(b),f=-1;1<c.length&&(f=parseInt(c.slice(1),10));
var g=c.charAt(0).toUpperCase(),h;switch(g){case "D":c="n";e=E(e);-1!==f&&(e=D(""+e,f,!0));0>b&&(e="-"+e);break;case "N":h=d;case "C":h=h||d.currency;case "P":h=h||d.percent;c=0>b?h.pattern[0]:h.pattern[1]||"n";-1===f&&(f=h.decimals);e=a(e*("P"===g?100:1),f,h);break;default:throw"Bad number format specifier: "+g;}b=/n|\$|-|%/g;for(h="";;){f=b.lastIndex;g=b.exec(c);h+=c.slice(f,g?g.index:c.length);if(!g)break;switch(g[0]){case "n":h+=e;break;case "$":h+=d.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(h+=d["-"]);break;case "%":h+=d.percent.symbol}}return h}})();z=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};F=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,f=b.length;e<f;e++)if(c=b[e].start,null===c||d>=c)return e;return 0};O=function(a,b,c,d){a=a.getFullYear();!d&&b.eras&&(a-=b.eras[c].offset);return a};(function(){var a,b,c,d,e,f,g;a=function(a,b){if(100>b){var c=new Date,d=F(c),c=O(c,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=c-c%100;b>d&&(b-=100)}return b};b=function(a,b,c){var d=a.days,e=a._upperDays;e||(a._upperDays=e=[g(d.names),g(d.namesAbbr),g(d.namesShort)]);b=f(b);c?(a=h(e[1],b),-1===a&&(a=h(e[2],b))):a=h(e[0],b);return a};c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,l=a._upperMonths,m=a._upperMonthsGen;l||(a._upperMonths=l=[g(d.names),g(d.namesAbbr)],a._upperMonthsGen=m=[g(e.names),g(e.namesAbbr)]);b=f(b);a=h(c?l[1]:l[0],b);0>a&&(a=h(c?
m[1]:m[0],b));return a};d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var d=I(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],f=[],g=0,h=0,l=z(),m;null!==(m=l.exec(d));){var n=d.slice(g,m.index),g=l.lastIndex,h=h+J(n,e);if(h%2)e.push(m[0]);else{var n=m[0],q=n.length;switch(n){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":n="(\\D+)";break;case "tt":case "t":n="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":n=
"(\\d{"+q+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":n="(\\d\\d?)";break;case "zzz":n="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":n="([+-]?\\d\\d?)";break;case "/":n="(\\/)";break;default:throw"Invalid date format pattern '"+n+"'.";}n&&e.push(n);f.push(m[0])}}J(d.slice(g),e);e.push("$");d={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:f};return c[b]=d};e=function(a,b,c){return a<b||a>c};f=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
g=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=f(a[c]);return b};S=function(f,g,h){f=w(f);h=h.calendar;g=d(h,g);var l=(new RegExp(g.regExp)).exec(f);if(null===l)return null;var m=g.groups,n=g=f=null,q=null,t=null,z=0,C,v=0,F=0,D=0;C=null;for(var E=!1,O=0,p=m.length;O<p;O++){var I=l[O+1];if(I){var J=m[O],S=J.length,V=parseInt(I,10);switch(J){case "dd":case "d":q=V;if(e(q,1,31))return null;break;case "MMM":case "MMMM":n=c(h,I,3===S);if(e(n,0,11))return null;break;case "M":case "MM":n=V-1;if(e(n,
0,11))return null;break;case "y":case "yy":case "yyyy":g=4>S?a(h,V):V;if(e(g,0,9999))return null;break;case "h":case "hh":z=V;12===z&&(z=0);if(e(z,0,11))return null;break;case "H":case "HH":z=V;if(e(z,0,23))return null;break;case "m":case "mm":v=V;if(e(v,0,59))return null;break;case "s":case "ss":F=V;if(e(F,0,59))return null;break;case "tt":case "t":E=h.PM&&(I===h.PM[0]||I===h.PM[1]||I===h.PM[2]);if(!E&&(!h.AM||I!==h.AM[0]&&I!==h.AM[1]&&I!==h.AM[2]))return null;break;case "f":case "ff":case "fff":D=
V*Math.pow(10,3-S);if(e(D,0,999))return null;break;case "ddd":case "dddd":t=b(h,I,3===S);if(e(t,0,6))return null;break;case "zzz":J=I.split(/:/);if(2!==J.length)return null;C=parseInt(J[0],10);if(e(C,-12,13))return null;J=parseInt(J[1],10);if(e(J,0,59))return null;C=60*C+(A(I,"-")?-J:J);break;case "z":case "zz":C=V;if(e(C,-12,13))return null;C*=60;break;case "g":case "gg":if(!I||!h.eras)return null;I=w(I.toLowerCase());J=0;for(S=h.eras.length;J<S;J++)if(I===h.eras[J].name.toLowerCase()){f=J;break}if(null===
f)return null}}}l=new Date;m=(O=h.convert)?O.fromGregorian(l)[0]:l.getFullYear();null===g?g=m:h.eras&&(g+=h.eras[f||0].offset);null===n&&(n=0);null===q&&(q=1);if(O){if(l=O.toGregorian(g,n,q),null===l)return null}else if(l.setFullYear(g,n,q),l.getDate()!==q||null!==t&&l.getDay()!==t)return null;E&&12>z&&(z+=12);l.setHours(z,v,F,D);null!==C&&(h=l.getMinutes()-(C+l.getTimezoneOffset()),l.setHours(l.getHours()+parseInt(h/60,10),h%60));return l}})();V=function(a,b,c){var d=b["-"];b=b["+"];var e;switch(c){case "n -":d=
" "+d,b=" "+b;case "n-":l(a,d)?e=["-",a.substr(0,a.length-d.length)]:l(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":d+=" ",b+=" ";case "-n":A(a,d)?e=["-",a.substr(d.length)]:A(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":A(a,"(")&&l(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};b.prototype.findClosestCulture=function(a){return b.findClosestCulture.call(this,a)};b.prototype.format=function(a,c,d){return b.format.call(this,a,c,d)};b.prototype.localize=function(a,
c){return b.localize.call(this,a,c)};b.prototype.parseInt=function(a,c,d){return b.parseInt.call(this,a,c,d)};b.prototype.parseFloat=function(a,c,d){return b.parseFloat.call(this,a,c,d)};b.prototype.culture=function(a){return b.culture.call(this,a)};b.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!==typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!==typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]);this.cultures[a]=
m(!0,{},d,c);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};b.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(n(a)){var c,d=this.cultures,e=a,f,g=e.length,h=[];for(f=0;f<g;f++)a=w(e[f]),a=a.split(";"),c=w(a[0]),1===a.length?a=1:(a=w(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:c,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(f=0;f<g;f++)if(c=h[f].lang,b=d[c])return b;for(f=0;f<g;f++){c=h[f].lang;do{e=c.lastIndexOf("-");if(-1===e)break;c=c.substr(0,e);if(b=d[c])return b}while(1)}for(f=0;f<g;f++){c=h[f].lang;for(var l in d)if(e=d[l],e.language==c)return e}}else if("object"===typeof a)return a;return b||null};b.format=function(a,b,c){c=this.findClosestCulture(c);a instanceof Date?a=C(a,b,c):"number"===typeof a&&(a=t(a,b,c));return a};b.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};b.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(d=S(a,g,c)))break}}}else for(e in b=c.calendar.patterns,b)if(d=S(a,b[e],c))break;return d||null};b.parseInt=function(a,c,d){return E(b.parseFloat(a,c,d))};b.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var g=this.findClosestCulture(c);c=NaN;var h=g.numberFormat;-1<a.indexOf(g.numberFormat.currency.symbol)&&
(a=a.replace(g.numberFormat.currency.symbol,""),a=a.replace(g.numberFormat.currency["."],g.numberFormat["."]));-1<a.indexOf(g.numberFormat.percent.symbol)&&(a=a.replace(g.numberFormat.percent.symbol,""));a=a.replace(/ /g,"");if(e.test(a))c=parseFloat(a);else if(!b&&d.test(a))c=parseInt(a,16);else{g=V(a,h,h.pattern[0]);b=g[0];g=g[1];""===b&&"(n)"!==h.pattern[0]&&(g=V(a,h,"(n)"),b=g[0],g=g[1]);""===b&&"-n"!==h.pattern[0]&&(g=V(a,h,"-n"),b=g[0],g=g[1]);b=b||"+";var l;a=g.indexOf("e");0>a&&(a=g.indexOf("E"));
0>a?(l=g,a=null):(l=g.substr(0,a),a=g.substr(a+1));var m=h["."],n=l.indexOf(m);0>n?(g=l,l=null):(g=l.substr(0,n),l=l.substr(n+m.length));m=h[","];g=g.split(m).join("");n=m.replace(/\u00A0/g," ");m!==n&&(g=g.split(n).join(""));b+=g;null!==l&&(b+="."+l);null!==a&&(h=V(a,h,"-n"),b+="e"+(h[0]||"+")+h[1]);f.test(b)&&(c=parseFloat(b))}return c};b.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
var Parser=function(a){function c(a){function b(){}b.prototype=a;return new b}function b(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function d(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function e(a){return"string"===typeof a?(J.lastIndex=0,J.test(a)?"'"+a.replace(J,
function(a){var b=I[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function g(a,b){return a-b}function h(a,b){return a*b}function l(a,b){return a/b}function m(a,b){return a%b}function n(a,b){return""+a+b}function q(a){return-a}function v(a){return Math.random()*(a||1)}function A(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function w(a,b){return Math.sqrt(a*a+b*b)}function E(a,b){if("[object Array]"!=
Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function D(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":q,exp:Math.exp};this.ops2={"+":f,"-":g,"*":h,"/":l,"%":m,"^":Math.pow,",":E,"||":n};this.functions={random:v,
fac:A,min:Math.min,max:Math.max,pyt:w,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var J=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,I={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};d.prototype={simplify:function(a){a=a||{};for(var e=[],f=[],g,h,l,m=this.tokens.length,n=0,n=0;n<m;n++)if(l=this.tokens[n],g=l.type_,0===g)e.push(l);else if(3===g&&l.index_ in a)l=new b(0,
0,0,a[l.index_]),e.push(l);else if(2===g&&1<e.length)h=e.pop(),g=e.pop(),l=this.ops2[l.index_],l=new b(0,0,0,l(g.number_,h.number_)),e.push(l);else if(1===g&&0<e.length)g=e.pop(),l=this.ops1[l.index_],l=new b(0,0,0,l(g.number_)),e.push(l);else{for(;0<e.length;)f.push(e.shift());f.push(l)}for(;0<e.length;)f.push(e.shift());return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},substitute:function(a,e){e instanceof d||(e=(new D).parse(String(e)));for(var f=[],g=this.tokens.length,h,l=0,l=0;l<
g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<e.tokens.length;h++){var m=e.tokens[h],m=new b(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);else if(e.index_ in
this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},toString:function(a){for(var b=[],c,d,
f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(e(f.number_));else if(2===c)d=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+d+")"):b.push("("+c+f+d+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=
this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};D.parse=function(a){return(new D).parse(a)};D.evaluate=function(a,b){return D.parse(a).evaluate(b)};D.Expression=d;D.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,
floor:Math.floor,round:Math.round,random:v,fac:A,exp:Math.exp,min:Math.min,max:Math.max,pyt:w,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};D.prototype={parse:function(a){this.errormsg="";this.success=!0;var e=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,e,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,
"unexpected operator"),h+=2,this.addfunc(f,e,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,e,4)),g=333):this.isRightParenth()?(g&256?(a=new b(0,
0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,e,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,
e,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new b(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,'unmatched "()"');0<e.length;)a=e.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a,
b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,c,d){for(d=new b(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<c.length;)if(d.prio_<=c[c.length-1].prio_)a.push(c.pop());else break;c.push(d)},isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,
this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+
f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,
c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=
2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===
this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;
a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===
c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=D}("undefined"===typeof exports?{}:exports);
(function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}})(function(){function a(b,d){if(!(this instanceof a))return new a(b,d);this.options=d=d||{};Rc(Yf,d,!1);A(d);var e=d.value;"string"==typeof e&&(e=new tb(e,d.mode));this.doc=e;var f=this.display=new c(b,e);f.wrapper.CodeMirror=this;m(this);h(this);d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");d.autofocus&&
!ae&&ob(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Gf};Fa&&11>Ua&&setTimeout(xc(Ea,this,!0),20);Kb(this);ye||(Bg(),ye=!0);var g=this;Sa(this,function(){g.curOp.forceUpdate=!0;Te(g,e);d.autofocus&&!ae||Fc()==f.input?setTimeout(xc(zc,g),20):ac(g);for(var a in kd)if(kd.hasOwnProperty(a))kd[a](g,d[a],He);I(g);for(a=0;a<Ie.length;++a)Ie[a](g)})}function c(a,b){var c=this.input=ia("textarea",null,
null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Jb?c.style.width="1000px":c.setAttribute("wrap","off");Ee&&(c.style.border="1px solid black");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck","false");this.inputDiv=ia("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");this.scrollbarH=ia("div",[ia("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");this.scrollbarV=
ia("div",[ia("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");this.scrollbarFiller=ia("div",null,"CodeMirror-scrollbar-filler");this.gutterFiller=ia("div",null,"CodeMirror-gutter-filler");this.lineDiv=ia("div",null,"CodeMirror-code");this.selectionDiv=ia("div",null,null,"position: relative; z-index: 1");this.cursorDiv=ia("div",null,"CodeMirror-cursors");this.measure=ia("div",null,"CodeMirror-measure");this.lineMeasure=ia("div",null,"CodeMirror-measure");this.lineSpace=ia("div",[this.measure,
this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=ia("div",[ia("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=ia("div",[this.mover],"CodeMirror-sizer");this.heightForcer=ia("div",null,null,"position: absolute; height: "+Lc+"px; width: 1px;");this.gutters=ia("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=ia("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");
this.scroller.setAttribute("tabIndex","-1");this.wrapper=ia("div",[this.inputDiv,this.scrollbarH,this.scrollbarV,this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");Fa&&8>Ua&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Ee&&(c.style.width="0px");Jb||(this.scroller.draggable=!0);nf&&(this.inputDiv.style.height="1px",this.inputDiv.style.position="absolute");Fa&&8>Ua&&(this.scrollbarH.style.minHeight=this.scrollbarV.style.minWidth="18px");a.appendChild?a.appendChild(this.wrapper):
a(this.wrapper);this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=null;this.lastSizeC=this.viewOffset=0;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=this.updateLineNumbers=null;this.prevInput="";this.pollingFast=this.alignWidgets=!1;this.poll=new Gf;this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.inaccurateSelection=!1;this.maxLine=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=
null;this.shift=!1;this.selForContextMenu=null}function b(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption);d(b)}function d(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;fb(a,100);a.state.modeGen++;a.curOp&&B(a)}function e(a){var b=Db(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Vb(a.display)-3);return function(e){if(bd(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&
(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&pc(a,b)})}function g(a){var b=Kc[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");bb(a)}function l(a){m(a);B(a);setTimeout(function(){J(a)},
20)}function m(a){var b=a.display.gutters,c=a.options.gutters;pd(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(ia("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";n(a)}function n(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function q(a){if(0==a.height)return 0;for(var b=a.text.length,
c,d=a;c=dc(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=dc(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function v(a){var b=a.display;a=a.doc;b.maxLine=la(a,a.first);b.maxLineLength=q(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=q(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function A(a){var b=Hb(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):
-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function w(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,hScrollbarTakesSpace:a.display.scroller.clientHeight-a.display.wrapper.clientHeight<Lc-3,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+Ba(a.display))}}function E(a,b){b||(b=w(a));var c=a.display,d=fh(c.measure),e=b.docHeight+Lc,
f=b.scrollWidth>b.clientWidth;f&&b.scrollWidth<=b.clientWidth+1&&0<d&&!b.hScrollbarTakesSpace&&(f=!1);var g=e>b.clientHeight;g?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=f?d+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,e-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0");f?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=g?d+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-
b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0");f&&g?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=d+"px"):c.scrollbarFiller.style.display="";f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display=
"";!a.state.checkedOverlayScrollbar&&0<b.clientHeight&&(0===d&&(c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=ic&&!$d?"12px":"18px",d=function(b){(b.target||b.srcElement)!=c.scrollbarV&&(b.target||b.srcElement)!=c.scrollbarH&&ma(a,rd)(b)},na(c.scrollbarV,"mousedown",d),na(c.scrollbarH,"mousedown",d)),a.state.checkedOverlayScrollbar=!0)}function D(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,
d=Qc(b,d),e=Qc(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;if(f<d)return{from:f,to:Qc(b,oc(la(b,f))+a.wrapper.clientHeight)};if(Math.min(c,b.lastLine())>=e)return{from:Qc(b,oc(la(b,c))-a.wrapper.clientHeight),to:c}}return{from:d,to:Math.max(e,d+1)}}function J(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=t(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&
c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var l=0;l<h.length;l++)h[l].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function I(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=C(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(ia("div",[ia("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,
c.lineGutter.offsetWidth-d);c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";n(a);return!0}return!1}function C(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function t(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function z(a,b,c){var d=a.display;this.viewport=b;this.visible=D(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;
this.oldViewFrom=d.viewFrom;this.oldViewTo=d.viewTo;this.oldScrollerWidth=d.scroller.clientWidth;this.force=c;this.dims=La(a)}function F(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Y(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&0==Qa(a))return!1;I(a)&&(Y(a),b.dims=La(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);
c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));Ic&&(f=ie(a.doc,f),g=Qe(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastSizeC!=b.wrapperHeight;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Ja(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Ja(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(Na(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(Ja(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,Na(a,
g))));e.viewTo=g;c.viewOffset=oc(la(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Qa(a);if(!d&&0==g&&!b.force&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=Fc();4<g&&(c.lineDiv.style.display="none");Wa(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");f&&Fc()!=f&&f.offsetHeight&&f.focus();pd(c.cursorDiv);pd(c.selectionDiv);d&&(c.lastSizeC=b.wrapperHeight,fb(a,400));c.updateLineNumbers=null;return!0}function O(a,b){for(var c=b.viewport,d=!0;;d=
!1){if(!d||!a.options.lineWrapping||b.oldScrollerWidth==a.display.scroller.clientWidth)if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Ba(a.display)-Lc-a.display.scroller.clientHeight,c.top)}),b.visible=D(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!F(a,b))break;T(a);d=w(a);$a(a);V(a,d);E(a,d)}zb(a,"update",a);a.display.viewFrom==b.oldViewFrom&&a.display.viewTo==b.oldViewTo||zb(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)}function S(a,
b){var c=new z(a,b);F(a,c)&&(T(a),O(a,c),c=w(a),$a(a),V(a,c),E(a,c))}function V(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-Lc)+"px"}function T(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(Fa&&8>Ua){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=
Db(a));if(.001<f||-.001>f)if(pc(d.line,e),pa(d.line),d.rest)for(e=0;e<d.rest.length;e++)pa(d.rest[e])}}}function pa(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function La(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:t(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}
function Wa(a,b,c){function d(b){var c=b.nextSibling;Jb&&ic&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,l=e.view,e=e.viewFrom,m=0;m<l.length;m++){var n=l[m];if(!n.hidden)if(n.node){for(;h!=n.node;)h=d(h);h=f&&null!=b&&b<=e&&n.lineNumber;n.changes&&(-1<Hb(n.changes,"gutter")&&(h=!1),va(a,n,e,c));h&&(pd(n.lineNumber),n.lineNumber.appendChild(document.createTextNode(C(a.options,e))));
h=n.node.nextSibling}else{var p=oa(a,n,e,c);g.insertBefore(p,h)}e+=n.size}for(;h;)h=d(h)}function va(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=b,g=f.text.className,h=wa(a,f);f.text==f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,ua(f)):g&&(f.text.className=g)}else if("gutter"==f)ka(a,b,c,d);else if("class"==f)ua(b);else if("widget"==
f){f=b;g=d;f.alignable&&(f.alignable=null);for(var h=f.node.firstChild,l=void 0;h;h=l)l=h.nextSibling,"CodeMirror-linewidget"==h.className&&f.node.removeChild(h);sa(f,g)}}b.changes=null}function ha(a){a.node==a.text&&(a.node=ia("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Fa&&8>Ua&&(a.node.style.zIndex=2));return a.node}function wa(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=
null,b.measure=c.measure,c.built):Kf(a,b)}function ua(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=ha(a);a.background=c.insertBefore(ia("div",null,b),c.firstChild)}a.line.wrapClass?ha(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||
""):a.line.textClass)||""}function ka(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=ha(b),f=b.gutter=f.insertBefore(ia("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=f.appendChild(ia("div",C(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.options.gutters.length;++b){c=a.options.gutters[b];var g=e.hasOwnProperty(c)&&e[c];g&&f.appendChild(ia("div",[g],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}}function oa(a,b,c,d){var e=wa(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);ua(b);ka(a,b,c,d);sa(b,d);return b.node}function sa(a,b){N(a.line,a,b,!0);if(a.rest)for(var c=0;c<a.rest.length;c++)N(a.rest[c],
a,b,!1)}function N(a,b,c,d){if(a.widgets){var e=ha(b),f=0;for(a=a.widgets;f<a.length;++f){var g=a[f],h=ia("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||(h.ignoreEvents=!0);var l=g,m=h,n=c;if(l.noHScroll){(b.alignable||(b.alignable=[])).push(m);var p=n.wrapperWidth;m.style.left=n.fixedPos+"px";l.coverGutter||(p-=n.gutterTotalWidth,m.style.paddingLeft=n.gutterTotalWidth+"px");m.style.width=p+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=
-n.gutterTotalWidth+"px"));d&&g.above?e.insertBefore(h,b.gutter||b.text):e.appendChild(h);zb(g,"redraw")}}}function da(a){return W(a.line,a.ch)}function pb(a,b){return 0>Aa(a,b)?b:a}function jb(a,b){return 0>Aa(a,b)?a:b}function Ga(a,b){this.ranges=a;this.primIndex=b}function qa(a,b){this.anchor=a;this.head=b}function Da(a,b){var c=a[b];a.sort(function(a,b){return Aa(a.from(),b.from())});b=Hb(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=Aa(e.to(),d.from())){var f=jb(e.from(),d.from()),g=
pb(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new qa(d?g:f,d?f:g))}}return new Ga(a,b)}function cb(a,b){return new Ga([new qa(a,b||a)],0)}function ca(a,b){if(b.line<a.first)return W(a.first,0);var c=a.first+a.size-1;if(b.line>c)return W(c,la(a,c).text.length);var c=la(a,b.line).text.length,d=b.ch,c=null==d||d>c?W(b.line,c):0>d?W(b.line,0):b;return c}function qb(a,b){return b>=a.first&&b<a.first+a.size}function ub(a,b,c,d){return a.cm&&a.cm.display.shift||
a.extend?(a=b.anchor,d&&(b=0>Aa(c,a),b!=0>Aa(d,a)?(a=c,c=d):b!=0>Aa(c,d)&&(c=d)),new qa(a,c)):new qa(d||c,c)}function p(a,b,c,d){Ra(a,new Ga([ub(a,a.sel.primary(),b,c)],0),d)}function nb(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=ub(a,a.sel.ranges[e],b[e],null);b=Da(d,a.sel.primIndex);Ra(a,b,c)}function Lb(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;Ra(a,Da(e,a.sel.primIndex),d)}function Oa(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=
new qa(ca(a,b[c].anchor),ca(a,b[c].head))}};Ha(a,"beforeSelectionChange",a,c);a.cm&&Ha(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?Da(c.ranges,c.ranges.length-1):b}function Gb(a,b,c){var d=a.history.done,e=Ya(d);e&&e.ranges?(d[d.length-1]=b,vb(a,b,c)):Ra(a,b,c)}function Ra(a,b,c){vb(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=Ya(e.done);var h=f.charAt(0);
g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:re(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&oe(e.undone)}function vb(a,b,c){if(nc(a,"beforeSelectionChange")||a.cm&&nc(a.cm,"beforeSelectionChange"))b=Oa(a,b);var d=c&&c.bias||(0>Aa(b.primary().head,a.sel.primary().head)?-1:1);wb(a,Bb(a,b,d,!0));c&&!1===c.scroll||
!a.cm||ec(a.cm)}function wb(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ff(a.cm)),zb(a,"cursorActivity",a))}function Mb(a){wb(a,Bb(a,a.sel,null,!1),md)}function Bb(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=xb(a,g.anchor,c,d),l=xb(a,g.head,c,d);if(e||h!=g.anchor||l!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new qa(h,l)}return e?Da(e,b.primIndex):b}function xb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=la(a,f.line);
if(h.markedSpans)for(var l=0;l<h.markedSpans.length;++l){var m=h.markedSpans[l],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(Ha(n,"beforeCursorEnter"),n.explicitlyCleared))if(h.markedSpans){--l;continue}else break;if(n.atomic){l=n.find(0>g?-1:1);if(0==Aa(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?ca(a,W(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?W(l.line+1,0):null),!l)){if(e){if(!d)return xb(a,
b,c,!0);a.cantEdit=!0;return W(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}}return f}}function Ia(a){for(var b=a.display,c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++){var h=c.sel.ranges[g],l=h.empty();if(l||a.options.showCursorWhenSelecting){var m=a,n=e,p=aa(m,h.head,"div",null,null,!m.options.singleCursorHeightPerLine),q=n.appendChild(ia("div","\u00a0","CodeMirror-cursor"));q.style.left=p.left+"px";q.style.top=
p.top+"px";q.style.height=Math.max(0,p.bottom-p.top)*m.options.cursorHeight+"px";p.other&&(m=n.appendChild(ia("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),m.style.display="",m.style.left=p.other.left+"px",m.style.top=p.other.top+"px",m.style.height=.85*(p.other.bottom-p.other.top)+"px")}l||Rb(a,h,f)}a.options.moveInputWithCursor&&(a=aa(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect(),d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-
10,a.top+e.top-c.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left)));return d}function Nb(a,b){sc(a.display.cursorDiv,b.cursors);sc(a.display.selectionDiv,b.selection);null!=b.teTop&&(a.display.inputDiv.style.top=b.teTop+"px",a.display.inputDiv.style.left=b.teLeft+"px")}function $a(a){Nb(a,Ia(a))}function Rb(a,b,c){function d(a,b,c,e){0>b&&(b=0);b=Math.round(b);e=Math.round(e);h.appendChild(ia("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+
b+"px; width: "+(null==c?n-a:c)+"px; height: "+(e-b)+"px"))}function e(b,c,f){var h=la(g,b),u=h.text.length,l,x;Uf(Cb(h),c||0,null==f?u:f,function(e,g,G){var p=Pa(a,W(b,e),"div",h,"left"),q,L;e==g?(q=p,G=L=p.left):(q=Pa(a,W(b,g-1),"div",h,"right"),"rtl"==G&&(G=p,p=q,q=G),G=p.left,L=q.right);null==c&&0==e&&(G=m);3<q.top-p.top&&(d(G,p.top,null,p.bottom),G=m,p.bottom<q.top&&d(G,p.bottom,null,q.top));null==f&&g==u&&(L=n);if(!l||p.top<l.top||p.top==l.top&&p.left<l.left)l=p;if(!x||q.bottom>x.bottom||q.bottom==
x.bottom&&q.right>x.right)x=q;G<m+1&&(G=m);d(G,q.top,L-G,q.bottom)});return{start:l,end:x}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),l=rb(a.display),m=l.left,n=f.lineSpace.offsetWidth-l.right,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var p=la(g,f.line),l=la(g,b.line),l=lc(p)==lc(l),f=e(f.line,f.ch,l?p.text.length+1:null).end;b=e(b.line,l?0:null,b.ch).start;l&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(m,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,
f.bottom));f.bottom<b.top&&d(m,f.bottom,null,b.top)}c.appendChild(h)}function ab(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function fb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,xc(hb,a))}function hb(a){var b=
a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=de(b.mode,fa(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=lg(a,f,d,!0);f.styles=h.styles;var l=f.styleClasses;(h=h.classes)?f.styleClasses=h:l&&(f.styleClasses=null);l=!g||g.length!=f.styles.length||l!=h&&(!l||!h||l.bgClass!=h.bgClass||l.textClass!=h.textClass);for(h=0;!l&&h<g.length;++h)l=
g[h]!=f.styles[h];l&&e.push(b.frontier);f.stateAfter=de(b.mode,d)}else dd(a,f.text,d),f.stateAfter=0==b.frontier%5?de(b.mode,d):null;++b.frontier;if(+new Date>c)return fb(a,a.options.workDelay),!0});e.length&&Sa(a,function(){for(var b=0;b<e.length;b++)K(a,e[b],"text")})}}function gb(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=la(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=uc(h.text,null,a.options.tabSize);if(null==e||d>
h)e=b-1,d=h}return e}function fa(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=gb(a,b,c),g=f>d.first&&la(d,f-1).stateAfter,g=g?de(d.mode,g):Jg(d.mode);d.iter(f,b,function(c){dd(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?de(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Ba(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function rb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=sc(a.measure,ia("pre","x")),b=window.getComputedStyle?
window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function yb(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Na(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Sb(a,b){var c=Za(b),d=yb(a,c);d&&!d.text?d=null:d&&d.changes&&va(a,d,c,La(a));if(!d){var e;e=lc(b);d=Za(e);e=a.display.externalMeasured=new X(a.doc,e,d);e.lineN=
d;d=e.built=Kf(a,e);e.text=d.pre;sc(a.display.lineMeasure,d.pre);d=e}a:if(e=d,e.line==b)c={map:e.measure.map,cache:e.measure.cache};else{for(var f=0;f<e.rest.length;f++)if(e.rest[f]==b){c={map:e.measure.maps[f],cache:e.measure.caches[f]};break a}for(f=0;f<e.rest.length;f++)if(Za(e.rest[f])>c){c={map:e.measure.maps[f],cache:e.measure.caches[f],before:!0};break a}c=void 0}return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function ea(a,b,c,d,e){b.before&&(c=-1);var f=
c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,l=a.options.lineWrapping,m=l&&a.display.scroller.clientWidth;if(!g.measure.heights||l&&g.measure.width!=m){var n=g.measure.heights=[];if(l)for(g.measure.width=m,g=g.text.firstChild.getClientRects(),l=0;l<g.length-1;l++){var m=g[l],p=g[l+1];2<Math.abs(m.bottom-p.bottom)&&n.push((m.bottom+p.top)/2-h.top)}n.push(h.bottom-h.top)}b.hasHeights=!0}var h=d,
n=b.map,q,t,v,z;for(d=0;d<n.length;d+=3){var C=n[d],w=n[d+1];if(c<C)t=0,v=1,z="left";else if(c<w)t=c-C,v=t+1;else if(d==n.length-3||c==w&&n[d+3]>c)v=w-C,t=v-1,c>=w&&(z="right");if(null!=t){q=n[d+2];C==w&&h==(q.insertLeft?"left":"right")&&(z=h);if("left"==h&&0==t)for(;d&&n[d-2]==n[d-3]&&n[d-1].insertLeft;)q=n[(d-=3)+2],z="left";if("right"==h&&t==w-C)for(;d<n.length-3&&n[d+3]==n[d+4]&&!n[d+5].insertLeft;)q=n[(d+=3)+2],z="right";break}}if(3==q.nodeType)for(;;){for(;t&&ne(b.line.text.charAt(C+t));)--t;
for(;C+v<w&&ne(b.line.text.charAt(C+v));)++v;if(Fa&&9>Ua&&0==t&&v==w-C)c=q.parentNode.getBoundingClientRect();else if(Fa&&a.options.lineWrapping){var A=fe(q,t,v).getClientRects();c=A.length?A["right"==h?A.length-1:0]:rf}else c=fe(q,t,v).getBoundingClientRect()||rf;if(c.left||c.right||0==t)break;v=t;t-=1;z="right"}else 0<t&&(z=h="right"),c=a.options.lineWrapping&&1<(A=q.getClientRects()).length?A["right"==h?A.length-1:0]:q.getBoundingClientRect();!(Fa&&9>Ua)||t||c&&(c.left||c.right)||(c=(q=q.parentNode.getClientRects()[0])?
{left:q.left,right:q.left+Vb(a.display),top:q.top,bottom:q.bottom}:rf);if(Fa&&11>Ua){q=c;if(t=window.screen&&null!=screen.logicalXDPI&&screen.logicalXDPI!=screen.deviceXDPI)null!=zf?t=zf:(C=sc(a.display.measure,ia("span","x")),t=C.getBoundingClientRect(),C=fe(C,0,1).getBoundingClientRect(),t=zf=1<Math.abs(t.left-C.left));t?(t=screen.logicalXDPI/screen.deviceXDPI,C=screen.logicalYDPI/screen.deviceYDPI,c={left:q.left*t,right:q.right*t,top:q.top*C,bottom:q.bottom*C}):c=q}q=c.top-b.rect.top;t=c.bottom-
b.rect.top;C=(q+t)/2;w=b.view.measure.heights;for(d=0;d<w.length-1&&!(C<w[d]);d++);z={left:("right"==z?c.right:c.left)-b.rect.left,right:("left"==z?c.left:c.right)-b.rect.left,top:d?w[d-1]:0,bottom:w[d]};c.left||c.right||(z.bogus=!0);a.options.singleCursorHeightPerLine||(z.rtop=q,z.rbottom=t);a=z;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function Tb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]=
{}}function Xa(a){a.display.externalMeasure=null;pd(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Tb(a.display.view[b])}function bb(a){Xa(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function db(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=je(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=oc(b);
b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Z(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||
document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Pa(a,b,c,d,e){d||(d=la(a.doc,b.line));var f=d;b=b.ch;d=ea(a,Sb(a,d),b,e);return db(a,f,d,c)}function aa(a,b,c,d,e,f){function g(b,h){var u=ea(a,e,b,h?"right":"left",f);h?u.left=u.right:u.right=u.left;return db(a,d,u,c)}function h(a,
b){var c=l[b],d=c.level%2;a==Ce(c)&&b&&c.level<l[b-1].level?(c=l[--b],a=Yd(c)-(c.level%2?0:1),d=!0):a==Yd(c)&&b<l.length-1&&c.level<l[b+1].level&&(c=l[++b],a=Ce(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||la(a.doc,b.line);e||(e=Sb(a,d));var l=Cb(d);b=b.ch;if(!l)return g(b);var m=Vf(l,b),m=h(b,m);null!=Wc&&(m.other=h(b,Wc));return m}function kb(a,b){var c=0;b=ca(a.doc,b);a.options.lineWrapping||(c=Vb(a.display)*b.ch);var d=la(a.doc,b.line),e=oc(d)+a.display.lineSpace.offsetTop;
return{left:c,right:c,top:e,bottom:e+d.height}}function lb(a,b,c,d){a=W(a,b);a.xRel=d;c&&(a.outside=!0);return a}function Ca(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return lb(d.first,0,!0,-1);var e=Qc(d,c),f=d.first+d.size-1;if(e>f)return lb(d.first+d.size-1,la(d,f).text.length,!0,1);0>b&&(b=0);for(d=la(d,e);;)if(e=ba(a,d,e,b,c),f=(d=dc(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=Za(d=f.to.line);else return e}function ba(a,b,c,d,e){function f(d){d=aa(a,W(c,d),"line",
b,m);h=!0;if(g>d.bottom)return d.left-l;if(g<d.top)return d.left+l;h=!1;return d.left}var g=e-oc(b),h=!1,l=2*a.display.wrapper.clientWidth,m=Sb(a,b),n=Cb(b),p=b.text.length;e=jf(b);var q=kf(b),t=f(e),v=h,z=f(q),C=h;if(d>z)return lb(c,q,C,1);for(;;){if(n?q==e||q==lf(b,e,1):1>=q-e){n=d<t||d-t<=z-d?e:q;for(d-=n==e?t:z;ne(b.text.charAt(n));)++n;return lb(c,n,n==e?v:C,-1>d?-1:1<d?1:0)}var w=Math.ceil(p/2),A=e+w;if(n)for(var A=e,y=0;y<w;++y)A=lf(b,A,1);y=f(A);if(y>d){q=A;z=y;if(C=h)z+=1E3;p=w}else e=A,
t=y,v=h,p-=w}}function Db(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Jc){Jc=ia("pre");for(var b=0;49>b;++b)Jc.appendChild(document.createTextNode("x")),Jc.appendChild(ia("br"));Jc.appendChild(document.createTextNode("x"))}sc(a.measure,Jc);b=Jc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);pd(a.measure);return b||1}function Vb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=ia("span","xxxxxxxxxx"),c=ia("pre",[b]);sc(a.measure,c);b=b.getBoundingClientRect();b=(b.right-
b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function Q(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Hg};Cd?Cd.ops.push(a.curOp):a.curOp.ownsGroup=Cd={ops:[a.curOp],delayedCallbacks:[]}}function P(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();
for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<b.length)}finally{Cd=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++)e=a[b],c=e.cm,d=c.display,e.updateMaxLine&&v(c),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||
d.maxLineChanged&&c.options.lineWrapping,e.update=e.mustUpdate&&new z(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate);for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&F(e.cm,e.update);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;e.updatedDisplay&&T(c);e.barMeasure=w(c);if(d.maxLineChanged&&!c.options.lineWrapping){var f=e,g;g=d.maxLine.text.length;g=ea(c,Sb(c,d.maxLine),g,void 0);f.adjustWidthTo=g.left+3;e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo+
Lc-d.scroller.clientWidth)}if(e.updatedDisplay||e.selectionChanged)e.newSelectionNodes=Ia(c)}for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Sc(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.newSelectionNodes&&Nb(c,e.newSelectionNodes),e.updatedDisplay&&V(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&E(c,e.barMeasure),e.selectionChanged&&
ab(c),c.state.focused&&e.updateInput&&Ea(c,e.typing);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;null!=e.adjustWidthTo&&1<Math.abs(e.barMeasure.scrollWidth-c.display.scroller.scrollWidth)&&E(c);e.updatedDisplay&&O(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null!=e.scrollTop&&d.scroller.scrollTop!=e.scrollTop&&(g=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scroller.scrollTop=
d.scrollbarV.scrollTop=f.scrollTop=g);null!=e.scrollLeft&&d.scroller.scrollLeft!=e.scrollLeft&&(g=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,e.scrollLeft)),d.scroller.scrollLeft=d.scrollbarH.scrollLeft=f.scrollLeft=g,J(c));if(e.scrollToPos){var h;a:{g=c;h=ca(f,e.scrollToPos.from);var l=ca(f,e.scrollToPos.to),m=e.scrollToPos.margin;for(null==m&&(m=0);;){var n=!1,p=aa(g,h),q=l&&l!=h?aa(g,l):p,q=ud(g,Math.min(p.left,q.left),Math.min(p.top,q.top)-m,Math.max(p.left,q.left),Math.max(p.bottom,
q.bottom)+m),t=g.doc.scrollTop,C=g.doc.scrollLeft;null!=q.scrollTop&&(wc(g,q.scrollTop),1<Math.abs(g.doc.scrollTop-t)&&(n=!0));null!=q.scrollLeft&&(Sc(g,q.scrollLeft),1<Math.abs(g.doc.scrollLeft-C)&&(n=!0));if(!n){h=p;break a}}}e.scrollToPos.isCursor&&c.state.focused&&(g=c,l=h,m=g.display,n=m.sizer.getBoundingClientRect(),h=null,0>l.top+n.top?h=!0:l.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||of||(l=ia("div","\u200b",null,"position: absolute; top: "+(l.top-
m.viewOffset-g.display.lineSpace.offsetTop)+"px; height: "+(l.bottom-l.top+Lc)+"px; left: "+l.left+"px; width: 2px;"),g.display.lineSpace.appendChild(l),l.scrollIntoView(h),g.display.lineSpace.removeChild(l)))}g=e.maybeHiddenMarkers;h=e.maybeUnhiddenMarkers;if(g)for(l=0;l<g.length;++l)g[l].lines.length||Ha(g[l],"hide");if(h)for(l=0;l<h.length;++l)h[l].lines.length&&Ha(h[l],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.updatedDisplay&&Jb&&(c.options.lineWrapping&&(d=
c,f=e.barMeasure,d.display.sizer.offsetWidth+d.display.gutters.offsetWidth<d.display.scroller.clientWidth-1&&(d.display.sizer.style.minHeight=d.display.heightForcer.style.top="0px",d.display.gutters.style.height=f.docHeight+"px")),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!(c.display.scroller.clientHeight-c.display.wrapper.clientHeight<Lc-3)&&E(c));e.changeObjs&&Ha(c,"changes",c,e.changeObjs)}}}function Sa(a,b){if(a.curOp)return b();Q(a);
try{return b()}finally{P(a)}}function ma(a,b){return function(){if(a.curOp)return b.apply(a,arguments);Q(a);try{return b.apply(a,arguments)}finally{P(a)}}}function ya(a){return function(){if(this.curOp)return a.apply(this,arguments);Q(this);try{return a.apply(this,arguments)}finally{P(this)}}}function Ma(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);Q(b);try{return a.apply(this,arguments)}finally{P(b)}}}function X(a,b,c){for(var d=this.line=b,e;d=dc(d,!1);)d=d.find(1,
!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?Za(Ya(this.rest))-c+1:1;this.node=this.text=null;this.hidden=bd(a,b)}function Ja(a,b,c){var d=[],e;for(e=b;e<c;)b=new X(a.doc,la(a.doc,e),e),e+=b.size,d.push(b);return d}function B(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)Ic&&ie(a.doc,b)<e.viewTo&&Y(a);else if(c<=e.viewFrom)Ic&&
Qe(a.doc,c+d)>e.viewFrom?Y(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Y(a);else if(b<=e.viewFrom){var f=eb(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Y(a)}else if(c>=e.viewTo)(f=eb(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Y(a);else{var f=eb(a,b,b,-1),g=eb(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Ja(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Y(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:
b<a.lineN+a.size&&(e.externalMeasured=null)}function K(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Na(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==Hb(a,c)&&a.push(c)))}function Y(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Na(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=
a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function eb(a,b,c,d){var e=Na(a,b),f=a.display.view;if(!Ic||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;ie(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Qa(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||
d.node&&!d.changes||++b}return b}function ra(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Zb(a);a.state.focused&&ra(a)})}function Ka(a){function b(){Zb(a)||c?(a.display.pollingFast=!1,ra(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Zb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc;if(!a.state.focused||dg(b)&&!c||ib(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=
b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var e=b.value;if(e==c&&!a.somethingSelected())return!1;if(Fa&&9<=Ua&&a.display.inputHasSelection===e||ic&&/[\uf700-\uf7ff]/.test(e))return Ea(a),!1;var f=!a.curOp;f&&Q(a);a.display.shift=!1;8203!=e.charCodeAt(0)||d.sel!=a.display.selForContextMenu||c||(c="\u200b");for(var g=0,h=Math.min(c.length,e.length);g<h&&c.charCodeAt(g)==e.charCodeAt(g);)++g;var h=e.slice(g),l=za(h),m=null;a.state.pasteIncoming&&1<d.sel.ranges.length&&(jd&&jd.join("\n")==
h?m=0==d.sel.ranges.length%jd.length&&me(jd,za):l.length==d.sel.ranges.length&&(m=me(l,function(a){return[a]})));for(var n=d.sel.ranges.length-1;0<=n;n--){var p=d.sel.ranges[n],q=p.from(),t=p.to();g<c.length?q=W(q.line,q.ch-(c.length-g)):a.state.overwrite&&p.empty()&&!a.state.pasteIncoming&&(t=W(t.line,Math.min(la(d,t.line).text.length,t.ch+Ya(l).length)));var v=a.curOp.updateInput,t={from:q,to:t,text:m?m[n%m.length]:l,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};Tc(a.doc,
t);zb(a,"inputRead",a,t);if(h&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&100>p.head.ch&&(!n||d.sel.ranges[n-1].head.line!=p.head.line))if(q=a.getModeAt(p.head),q.electricChars)for(t=0;t<q.electricChars.length;t++){if(-1<h.indexOf(q.electricChars.charAt(t))){Wb(a,p.head.line,"smart");break}}else q.electricInput&&(t=sb(t),q.electricInput.test(la(d,t.line).text.slice(0,t.ch))&&Wb(a,p.head.line,"smart"))}ec(a);a.curOp.updateInput=v;a.curOp.typing=!0;1E3<e.length||-1<e.indexOf("\n")?
b.value=a.display.prevInput="":a.display.prevInput=e;f&&P(a);a.state.pasteIncoming=a.state.cutIncoming=!1;return!0}function Ea(a,b){var c,d,e=a.doc;a.somethingSelected()?(a.display.prevInput="",c=e.sel.primary(),d=(c=Ac&&(100<c.to().line-c.from().line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&ja(a.display.input),Fa&&9<=Ua&&(a.display.inputHasSelection=d)):b||(a.display.prevInput=a.display.input.value="",Fa&&9<=Ua&&(a.display.inputHasSelection=
null));a.display.inaccurateSelection=c}function ob(a){"nocursor"==a.options.readOnly||ae&&Fc()==a.display.input||a.display.input.focus()}function $b(a){a.state.focused||(ob(a),zc(a))}function ib(a){return a.options.readOnly||a.doc.cantEdit}function Kb(a){function b(){a.state.focused&&setTimeout(xc(ob,a),0)}function c(b){mc(a,b)||Bc(b)}function d(b){if(a.somethingSelected())jd=a.getSelections(),e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=jd.join("\n"),ja(e.input));
else{for(var c=[],f=[],g=0;g<a.doc.sel.ranges.length;g++){var h=a.doc.sel.ranges[g].head.line,h={anchor:W(h,0),head:W(h+1,0)};f.push(h);c.push(a.getRange(h.anchor,h.head))}"cut"==b.type?a.setSelections(f,null,md):(e.prevInput="",e.input.value=c.join("\n"),ja(e.input));jd=c}"cut"==b.type&&(a.state.cutIncoming=!0)}var e=a.display;na(e.scroller,"mousedown",ma(a,rd));Fa&&11>Ua?na(e.scroller,"dblclick",ma(a,function(b){if(!mc(a,b)){var c=yc(a,b);!c||vc(a,b,"gutterClick",!0,zb)||Ob(a.display,b)||(y(b),
b=Rd(a,c),p(a.doc,b.anchor,b.head))}})):na(e.scroller,"dblclick",function(b){mc(a,b)||y(b)});na(e.lineSpace,"selectstart",function(a){Ob(e,a)||y(a)});Hc||na(e.scroller,"contextmenu",function(b){ve(a,b)});na(e.scroller,"scroll",function(){e.scroller.clientHeight&&(wc(a,e.scroller.scrollTop),Sc(a,e.scroller.scrollLeft,!0),Ha(a,"scroll",a))});na(e.scrollbarV,"scroll",function(){e.scroller.clientHeight&&wc(a,e.scrollbarV.scrollTop)});na(e.scrollbarH,"scroll",function(){e.scroller.clientHeight&&Sc(a,e.scrollbarH.scrollLeft)});
na(e.scroller,"mousewheel",function(b){se(a,b)});na(e.scroller,"DOMMouseScroll",function(b){se(a,b)});na(e.scrollbarH,"mousedown",b);na(e.scrollbarV,"mousedown",b);na(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0});na(e.input,"keyup",function(b){ue.call(a,b)});na(e.input,"input",function(){Fa&&9<=Ua&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);Ka(a)});na(e.input,"keydown",ma(a,ge));na(e.input,"keypress",ma(a,Ze));na(e.input,"focus",xc(zc,a));na(e.input,
"blur",xc(ac,a));a.options.dragDrop&&(na(e.scroller,"dragstart",function(b){if(Fa&&(!a.state.draggingText||100>+new Date-Ig))Bc(b);else if(!mc(a,b)&&!Ob(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!mf)){var c=ia("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";hc&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,
0,0);hc&&c.parentNode.removeChild(c)}}),na(e.scroller,"dragenter",c),na(e.scroller,"dragover",c),na(e.scroller,"drop",ma(a,td)));na(e.scroller,"paste",function(b){Ob(e,b)||(a.state.pasteIncoming=!0,ob(a),Ka(a))});na(e.input,"paste",function(){if(Jb&&!a.state.fakedLastChar&&!(200>new Date-a.state.lastMiddleDown)){var b=e.input.selectionStart,c=e.input.selectionEnd;e.input.value+="$";e.input.selectionEnd=c;e.input.selectionStart=b;a.state.fakedLastChar=!0}a.state.pasteIncoming=!0;Ka(a)});na(e.input,
"cut",d);na(e.input,"copy",d);nf&&na(e.sizer,"mouseup",function(){Fc()==e.input&&e.input.blur();ob(a)})}function kc(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;a.setSize()}function Ob(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function yc(a,b,c,d){var e=a.display;if(!c&&(c=b.target||b.srcElement,c==e.scrollbarH||c==e.scrollbarV||c==e.scrollbarFiller||c==e.gutterFiller))return null;
var f,g,e=e.lineSpace.getBoundingClientRect();try{f=b.clientX-e.left,g=b.clientY-e.top}catch(h){return null}b=Ca(a,f,g);var l;d&&1==b.xRel&&(l=la(a.doc,b.line).text).length==b.ch&&(d=uc(l,l.length,a.options.tabSize)-l.length,b=W(b.line,Math.max(0,Math.round((f-rb(a.display).left)/Vb(a.display))-d)));return b}function rd(a){if(!mc(this,a)){var b=this.display;b.shift=a.shiftKey;if(Ob(b,a))Jb||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!vc(this,a,"gutterClick",
!0,zb)){var c=yc(this,a);window.focus();switch(qg(a)){case 1:c?Md(this,a,c):(a.target||a.srcElement)==b.scroller&&y(a);break;case 2:Jb&&(this.state.lastMiddleDown=+new Date);c&&p(this.doc,c);setTimeout(xc(ob,this),20);y(a);break;case 3:Hc&&ve(this,a)}}}}function Md(a,b,c){setTimeout(xc($b,a),0);var d=+new Date,e;Ge&&Ge.time>d-400&&0==Aa(Ge.pos,c)?e="triple":Fe&&Fe.time>d-400&&0==Aa(Fe.pos,c)?(e="double",Ge={time:d,pos:c}):(e="single",Fe={time:d,pos:c});var d=a.doc.sel,f=ic?b.metaKey:b.ctrlKey;a.options.dragDrop&&
Qf&&!ib(a)&&"single"==e&&-1<d.contains(c)&&d.somethingSelected()?sd(a,b,c,f):Hd(a,b,c,e,f)}function sd(a,b,c,d){var e=a.display,f=ma(a,function(g){Jb&&(e.scroller.draggable=!1);a.state.draggingText=!1;Pb(document,"mouseup",f);Pb(e.scroller,"drop",f);10>Math.abs(b.clientX-g.clientX)+Math.abs(b.clientY-g.clientY)&&(y(g),d||p(a.doc,c),ob(a),Fa&&9==Ua&&setTimeout(function(){document.body.focus();ob(a)},20))});Jb&&(e.scroller.draggable=!0);a.state.draggingText=f;e.scroller.dragDrop&&e.scroller.dragDrop();
na(document,"mouseup",f);na(e.scroller,"drop",f)}function Hd(a,b,c,d,e){function f(b){if(0!=Aa(t,b))if(t=b,"rect"==d){for(var e=[],g=a.options.tabSize,h=uc(la(m,c.line).text,c.ch,g),l=uc(la(m,b.line).text,b.ch,g),u=Math.min(h,l),h=Math.max(h,l),l=Math.min(c.line,b.line),G=Math.min(a.lastLine(),Math.max(c.line,b.line));l<=G;l++){var L=la(m,l).text,v=Hf(L,u,g);u==h?e.push(new qa(W(l,v),W(l,v))):L.length>v&&e.push(new qa(W(l,v),W(l,Hf(L,h,g))))}e.length||e.push(new qa(c,c));Ra(m,Da(q.ranges.slice(0,
p).concat(e),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=n,g=e.anchor,u=b,"single"!=d&&(b="double"==d?Rd(a,b):new qa(W(b.line,0),ca(m,W(b.line+1,0))),0<Aa(b.anchor,g)?(u=b.head,g=jb(e.from(),b.anchor)):(u=b.anchor,g=pb(e.to(),b.head))),e=q.ranges.slice(0),e[p]=new qa(ca(m,g),u),Ra(m,Da(e,p),bg)}function g(b){var c=++z,e=yc(a,b,!0,"rect"==d);if(e)if(0!=Aa(e,t)){$b(a);f(e);var h=D(l,m);(e.line>=h.to||e.line<h.from)&&setTimeout(ma(a,function(){z==c&&g(b)}),150)}else{var u=b.clientY<v.top?
-20:b.clientY>v.bottom?20:0;u&&setTimeout(ma(a,function(){z==c&&(l.scroller.scrollTop+=u,g(b))}),50)}}function h(b){z=Infinity;y(b);ob(a);Pb(document,"mousemove",C);Pb(document,"mouseup",w);m.history.lastSelOrigin=null}var l=a.display,m=a.doc;y(b);var n,p,q=m.sel;e&&!b.shiftKey?(p=m.sel.contains(c),n=-1<p?m.sel.ranges[p]:new qa(c,c)):n=m.sel.primary();b.altKey?(d="rect",e||(n=new qa(c,c)),c=yc(a,b,!0,!0),p=-1):"double"==d?(b=Rd(a,c),n=a.display.shift||m.extend?ub(m,n,b.anchor,b.head):b):"triple"==
d?(b=new qa(W(c.line,0),ca(m,W(c.line+1,0))),n=a.display.shift||m.extend?ub(m,n,b.anchor,b.head):b):n=ub(m,n,c);e?-1<p?Lb(m,p,n,bg):(p=m.sel.ranges.length,Ra(m,Da(m.sel.ranges.concat([n]),p),{scroll:!1,origin:"*mouse"})):(p=0,Ra(m,new Ga([n],0),bg),q=m.sel);var t=c,v=l.wrapper.getBoundingClientRect(),z=0,C=ma(a,function(a){qg(a)?g(a):h(a)}),w=ma(a,h);na(document,"mousemove",C);na(document,"mouseup",w)}function vc(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(h){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;
d&&y(b);d=a.display;var l=d.lineDiv.getBoundingClientRect();if(g>l.bottom||!nc(a,c))return Of(b);g-=l.top-d.viewOffset;for(l=0;l<a.options.gutters.length;++l){var m=d.gutters.childNodes[l];if(m&&m.getBoundingClientRect().right>=f)return f=Qc(a.doc,g),e(a,c,a,f,a.options.gutters[l],b),Of(b)}}function td(a){var b=this;if(!mc(b,a)&&!Ob(b.display,a)){y(a);Fa&&(Ig=+new Date);var c=yc(b,a,!0),d=a.dataTransfer.files;if(c&&!ib(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=
0;a=function(a,d){var h=new FileReader;h.onload=ma(b,function(){f[d]=h.result;if(++g==e){c=ca(b.doc,c);var a={from:c,to:c,text:za(f.join("\n")),origin:"paste"};Tc(b.doc,a);Gb(b.doc,cb(c,sb(a)))}});h.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(xc(ob,b),20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(ic?!a.metaKey:!a.ctrlKey))var l=b.listSelections();vb(b.doc,cb(c,c));if(l)for(h=0;h<
l.length;++h)Qd(b.doc,"",l[h].anchor,l[h].head,"drag");b.replaceSelection(f,"around","paste");ob(b)}}catch(m){}}}function wc(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Zd||S(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Zd&&S(a),fb(a,100))}function Sc(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),
a.doc.scrollLeft=b,J(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function se(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&ic&&Jb){var g=b.target,h=e.view;a:for(;g!=
f;g=g.parentNode)for(var l=0;l<h.length;l++)if(h[l].node==g){a.display.currentWheelTarget=g;break a}}!c||Zd||hc||null==jc?(d&&null!=jc&&(g=d*jc,h=a.doc.scrollTop,l=h+e.wrapper.clientHeight,0>g?h=Math.max(0,h+g-50):l=Math.min(a.doc.height,l+g+50),S(a,{top:h,bottom:l})),20>sf&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||
a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(jc=(jc*sf+a)/(sf+1),++sf)}},200)):(e.wheelDX+=c,e.wheelDY+=d))):(d&&wc(a,Math.max(0,Math.min(f.scrollTop+d*jc,f.scrollHeight-f.clientHeight))),Sc(a,Math.max(0,Math.min(f.scrollLeft+c*jc,f.scrollWidth-f.clientWidth))),y(b),e.wheelStartX=null)}}function Fb(a,b,c){if("string"==typeof b&&(b=vf[b],!b))return!1;a.display.pollingFast&&Zb(a)&&(a.display.pollingFast=!1);var d=a.display.shift,e=!1;try{ib(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=
!1),e=b(a)!=Me}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Gd(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function te(a,b){var c=Sd(a.options.keyMap),d=c.auto;clearTimeout(Xf);d&&!jh(b)&&(Xf=setTimeout(function(){Sd(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,g(a))},50));var e=kh(b,!0),f=!1;if(!e)return!1;f=Gd(a);if(f=b.shiftKey?wf("Shift-"+e,f,function(b){return Fb(a,b,!0)})||wf(e,
f,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Fb(a,b)}):wf(e,f,function(b){return Fb(a,b)}))y(b),ab(a),zb(a,"keyHandled",a,e,b);return f}function Nd(a,b,c){var d=wf("'"+c+"'",Gd(a),function(b){return Fb(a,b,!0)});d&&(y(b),ab(a),zb(a,"keyHandled",a,"'"+c+"'",b));return d}function ge(a){$b(this);if(!mc(this,a)){Fa&&11>Ua&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=te(this,a);hc&&(tf=c?b:null,!c&&88==b&&!Ac&&(ic?a.metaKey:a.ctrlKey)&&
this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Ye(this)}}function Ye(a){function b(a){18!=a.keyCode&&a.altKey||(gf(c,"CodeMirror-crosshair"),Pb(document,"keyup",b),Pb(document,"mouseover",b))}var c=a.display.lineDiv;hf(c,"CodeMirror-crosshair");na(document,"keyup",b);na(document,"mouseover",b)}function ue(a){16==a.keyCode&&(this.doc.sel.shift=!1);mc(this,a)}function Ze(a){if(!(mc(this,a)||a.ctrlKey&&!a.altKey||ic&&a.metaKey)){var b=a.keyCode,
c=a.charCode;hc&&b==tf?(tf=null,y(a)):(hc&&(!a.which||10>a.which)||nf)&&te(this,a)||(b=String.fromCharCode(null==c?b:c),Nd(this,a,b)||(Fa&&9<=Ua&&(this.display.inputHasSelection=null),Ka(this)))}}function zc(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Ha(a,"focus",a),a.state.focused=!0,hf(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(Ea(a),Jb&&setTimeout(xc(Ea,a,!0),0))),ra(a),ab(a))}function ac(a){a.state.focused&&(Ha(a,"blur",a),a.state.focused=
!1,gf(a.display.wrapper,"CodeMirror-focused"));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function ve(a,b){function c(){if(null!=e.input.selectionStart){var b=a.somethingSelected(),d=e.input.value="\u200b"+(b?e.input.value:"");e.prevInput=b?"":"\u200b";e.input.selectionStart=1;e.input.selectionEnd=d.length;e.selForContextMenu=a.doc.sel}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=h;Fa&&9>Ua&&(e.scrollbarV.scrollTop=
e.scroller.scrollTop=g);ra(a);if(null!=e.input.selectionStart){(!Fa||Fa&&9>Ua)&&c();var b=0,f=function(){e.selForContextMenu==a.doc.sel&&0==e.input.selectionStart?ma(a,vf.selectAll)(a):10>b++?e.detectingSelectAll=setTimeout(f,500):Ea(a)};e.detectingSelectAll=setTimeout(f,200)}}if(!mc(a,b,"contextmenu")){var e=a.display;if(!Ob(e,b)&&!$e(a,b)){var f=yc(a,b),g=e.scroller.scrollTop;if(f&&!hc){a.options.resetSelectionOnContextMenu&&-1==a.doc.sel.contains(f)&&ma(a,Ra)(a.doc,cb(f),md);var h=e.input.style.cssText;
e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(Fa?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(Jb)var l=window.scrollY;ob(a);Jb&&window.scrollTo(null,l);Ea(a);a.somethingSelected()||(e.input.value=e.prevInput=" ");e.selForContextMenu=a.doc.sel;clearTimeout(e.detectingSelectAll);
Fa&&9<=Ua&&c();if(Hc){Bc(b);var m=function(){Pb(window,"mouseup",m);setTimeout(d,20)};na(window,"mouseup",m)}else setTimeout(d,50)}}}}function $e(a,b){return nc(a,"gutterContextMenu")?vc(a,b,"gutterContextMenu",!1,Ha):!1}function Od(a,b){if(0>Aa(a,b.from))return a;if(0>=Aa(a,b.to))return sb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=sb(b).ch-b.to.ch);return W(c,d)}function Pd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new qa(Od(e.anchor,
b),Od(e.head,b)))}return Da(c,a.sel.primIndex)}function we(a,b,c){return a.line==b.line?W(c.line,a.ch-b.ch+c.ch):W(c.line+(a.line-b.line),a.ch)}function af(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=ca(a,b));c&&(this.to=ca(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});Ha(a,"beforeChange",a,b);a.cm&&Ha(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,
origin:b.origin}}function Tc(a,b,c){if(a.cm){if(!a.cm.curOp)return ma(a.cm,Tc)(a,b,c);if(a.cm.state.suppressEdits)return}if(nc(a,"beforeChange")||a.cm&&nc(a.cm,"beforeChange"))if(b=af(a,b,!0),!b)return;if(c=pf&&!c&&fg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)qc(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else qc(a,b)}function qc(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Aa(b.from,b.to)){var c=Pd(a,b);ng(a,b,c,a.cm?a.cm.curOp.id:NaN);fd(a,b,c,Cf(a,b));var d=[];cd(a,function(a,c){c||-1!=
Hb(d,a.history)||(ig(a.history,b),d.push(a.history));fd(a,b,null,Cf(a,b))})}}function ed(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,l=0;l<g.length&&(e=g[l],c?!e.ranges||e.equals(a.sel):e.ranges);l++);if(l!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){re(e,h);if(c&&!e.equals(a.sel)){Ra(a,e,{clearRedo:!1});return}f=e}else break;c=[];re(f,h);h.push({changes:c,generation:d.generation});d.generation=
e.generation||++d.maxGeneration;d=nc(a,"beforeChange")||a.cm&&nc(a.cm,"beforeChange");for(l=e.changes.length-1;0<=l;--l){var m=e.changes[l];m.origin=b;if(d&&!af(a,m,!1)){g.length=0;break}c.push(Nc(a,m));f=l?Pd(a,m):Ya(g);fd(a,m,f,Df(a,m));!l&&a.cm&&a.cm.scrollIntoView({from:m.from,to:sb(m)});var n=[];cd(a,function(a,b){b||-1!=Hb(n,a.history)||(ig(a.history,m),n.push(a.history));fd(a,m,null,Df(a,m))})}}}}function od(a,b){if(0!=b&&(a.first+=b,a.sel=new Ga(me(a.sel.ranges,function(a){return new qa(W(a.anchor.line+
b,a.anchor.ch),W(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){B(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)K(a.cm,d,"gutter")}}function fd(a,b,c,d){if(a.cm&&!a.cm.curOp)return ma(a.cm,fd)(a,b,c,d);if(b.to.line<a.first)od(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);od(a,e);b={from:W(a.first,0),to:W(b.to.line+e,b.to.ch),text:[Ya(b.text)],origin:b.origin}}e=
a.lastLine();b.to.line>e&&(b={from:b.from,to:W(e,la(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=pe(a,b.from,b.to);c||(c=Pd(a,b));a.cm?bf(a.cm,b,d):Kd(a,b,d);vb(a,c,md)}}function bf(a,b,c){var d=a.doc,f=a.display,g=b.from,h=b.to,l=!1,m=g.line;a.options.lineWrapping||(m=Za(lc(la(d,g.line))),d.iter(m,h.line+1,function(a){if(a==f.maxLine)return l=!0}));-1<d.sel.contains(b.from,b.to)&&Ff(a);Kd(d,b,c,e(a));a.options.lineWrapping||(d.iter(m,g.line+b.text.length,function(a){var b=q(a);
b>f.maxLineLength&&(f.maxLine=a,f.maxLineLength=b,f.maxLineChanged=!0,l=!1)}),l&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,g.line);fb(a,400);c=b.text.length-(h.line-g.line)-1;g.line!=h.line||1!=b.text.length||Ue(a.doc,b)?B(a,g.line,h.line+1,c):K(a,g.line,"text");c=nc(a,"changes");if((d=nc(a,"change"))||c)b={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin},d&&zb(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Qd(a,
b,c,d,e){d||(d=c);if(0>Aa(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=za(b));Tc(a,{from:c,to:d,text:b,origin:e})}function ud(a,b,c,d,e){var f=a.display,g=Db(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,l=f.scroller.clientHeight-Lc,m={};e-c>l&&(e=c+l);var n=a.doc.height+Ba(f),p=c<g,g=e>n-g;c<h?m.scrollTop=p?0:c:e>h+l&&(e=Math.min(c,(g?n:e)-l),e!=h&&(m.scrollTop=e));a=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;f=
f.scroller.clientWidth-Lc-f.gutters.offsetWidth;(h=d-b>f)&&(d=c+l);10>b?m.scrollLeft=0:b<a?m.scrollLeft=Math.max(0,b-(h?0:10)):d>f+a-3&&(m.scrollLeft=d+(h?0:10)-f);return m}function vd(a,b,c){null==b&&null==c||bc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function ec(a){bc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?W(b.line,b.ch-1):b,
d=W(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function bc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=kb(a,b.from),d=kb(a,b.to),b=ud(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function Wb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=fa(a,b):c="prev");var g=a.options.tabSize,h=la(e,
b),l=uc(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var m=h.text.match(/^\s*/)[0],n;if(!d&&!/\S/.test(h.text))n=0,c="not";else if("smart"==c&&(n=e.mode.indent(f,h.text.slice(m.length),h.text),n==Me||150<n)){if(!d)return;c="prev"}"prev"==c?n=b>e.first?uc(la(e,b-1).text,null,g):0:"add"==c?n=l+a.options.indentUnit:"subtract"==c?n=l-a.options.indentUnit:"number"==typeof c&&(n=l+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(n/g);a;--a)d+=g,c+="\t";d<n&&(c+=hg(n-d));if(c!=
m)Qd(e,c,W(b,0),W(b,m.length),"+input");else for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<m.length){d=W(b,m.length);Lb(e,a,new qa(d,d));break}h.stateAfter=null}function Uc(a,b,c,d){var e=b,f=b;"number"==typeof b?f=la(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=Za(b);if(null==e)return null;d(f,e)&&a.cm&&K(a.cm,e,c);return f}function fc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=Aa(f.from,Ya(d).to);){var g=d.pop();
if(0>Aa(g.from,f.from)){f.from=g.from;break}}d.push(f)}Sa(a,function(){for(var b=d.length-1;0<=b;b--)Qd(a.doc,"",d[b].from,d[b].to,"+delete");ec(a)})}function Mc(a,b,c,d,e){function f(b){var d=(e?lf:Wf)(m,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=n=!1:(g=b,b=m=la(a,b));if(b)h=e?(0>c?kf:jf)(m):0>c?m.text.length:0;else return n=!1}else h=d;return!0}var g=b.line,h=b.ch,l=c,m=la(a,g),n=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var p=null;d="group"==
d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var q=!0;!(0>c)||f(!q);q=!1){var t=m.text.charAt(h)||"\n",t=Ve(t,b)?"w":d&&"\n"==t?"n":!d||/\s/.test(t)?null:"p";!d||q||t||(t="s");if(p&&p!=t){0>c&&(c=1,f());break}t&&(p=t);if(0<c&&!f(!q))break}}l=xb(a,W(g,h),l,!0);n||(l.hitSide=!0);return l}function Vc(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(g=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(g-(0>c?1.5:.5)*Db(a.display))):"line"==d&&(g=0<c?
b.bottom+3:b.top-3);for(;;){b=Ca(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function Rd(a,b){var c=la(a.doc,b.line).text,d=b.ch,e=b.ch;if(c){var f=a.getHelper(b,"wordChars");(0>b.xRel||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),g=Ve(g,f)?function(a){return Ve(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Ve(a)};0<d&&g(c.charAt(d-1));)--d;for(;e<c.length&&g(c.charAt(e));)++e}return new qa(W(b.line,d),W(b.line,e))}
function ta(b,c,d,e){a.defaults[b]=c;d&&(kd[b]=e?function(a,b,c){c!=He&&d(a,b,c)}:d)}function Sd(a){return"string"==typeof a?Kc[a]:a}function Yb(a,b,c,d,e){if(d&&d.shared)return ad(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ma(a.cm,Yb)(a,b,c,d,e);var f=new tc(a,e);e=Aa(b,c);d&&Rc(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=ia("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.widgetNode.ignoreEvents=!0),d.insertLeft&&(f.widgetNode.insertLeft=
!0));if(f.collapsed){if(Id(a,b.line,b,c,f)||b.line!=c.line&&Id(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");Ic=!0}f.addToHistory&&ng(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,l;a.iter(g,c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&lc(a)==h.display.maxLine&&(l=!0);f.collapsed&&g!=b.line&&pc(a,0);var d=new Fd(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];
d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){bd(a,b)&&pc(b,0)});f.clearOnEnter&&na(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(pf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Zf,f.atomic=!0);if(h){l&&(h.curOp.updateMaxLine=!0);if(f.collapsed)B(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle)for(d=b.line;d<=c.line;d++)K(h,d,"text");f.atomic&&Mb(h.doc);zb(h,"markerAdded",h,f)}return f}
function ad(a,b,c,d,e){d=Rc(d);d.shared=!1;var f=[Yb(a,b,c,d,e)],g=f[0],h=d.widgetNode;cd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(Yb(a,ca(a,b),ca(a,c),d,e));for(var r=0;r<a.linked.length;++r)if(a.linked[r].isParent)return;g=Ya(f)});return new xf(f,g)}function Td(a){return a.findMarks(W(a.first,0),a.clipPos(W(a.lastLine())),function(a){return a.parent})}function eg(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];cd(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=
c.markers[e];-1==Hb(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function Fd(a,b,c){this.marker=a;this.from=b;this.to=c}function nd(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Cf(a,b){var c=qb(a,b.from.line)&&la(a,b.from.line).markedSpans,d=qb(a,b.to.line)&&la(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==Aa(b.from,b.to);if(c)for(var h=0,l;h<c.length;++h){var m=c[h],n=m.marker;if(null==m.from||(n.inclusiveLeft?m.from<=e:
m.from<e)||!(m.from!=e||"bookmark"!=n.type||g&&m.marker.insertLeft)){var p=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push(new Fd(n,m.from,p?null:m.to))}}c=l;if(d)for(var h=0,q;h<d.length;++h)if(l=d[h],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=f:l.to>f)||l.from==f&&"bookmark"==m.type&&(!g||l.marker.insertLeft))n=null==l.from||(m.inclusiveLeft?l.from<=f:l.from<f),(q||(q=[])).push(new Fd(m,n?null:l.from-f,null==l.to?null:l.to-f));d=q;g=1==b.text.length;q=Ya(b.text).length+(g?e:0);
if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(l=nd(d,h.marker),l)?g&&(h.to=null==l.to?null:l.to+q):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],null!=h.to&&(h.to+=q),null==h.from?(l=nd(c,h.marker),l||(h.from=q,g&&(c||(c=[])).push(h))):(h.from+=q,g&&(c||(c=[])).push(h));c&&(c=$c(c));d&&d!=c&&(d=$c(d));e=[c];if(!g){var g=b.text.length-2,t;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(t||(t=[])).push(new Fd(c[f].marker,null,null));for(f=0;f<g;++f)e.push(t);e.push(d)}return e}function $c(a){for(var b=
0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Df(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(bh(c[d]));c=e}else c=null;d=Cf(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var l=g[h],m=0;m<f.length;++m)if(f[m].marker==l.marker)continue a;f.push(l)}}else g&&(c[e]=g)}return c}function fg(a,b,c){var d=null;
a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Hb(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>Aa(g.to,e.from)||0<Aa(g.from,e.to))){var h=[f,1],l=Aa(g.from,e.from),m=Aa(g.to,e.to);(0>l||!c.inclusiveLeft&&!l)&&h.push({from:g.from,to:e.from});(0<m||!c.inclusiveRight&&!m)&&h.push({from:e.to,to:g.to});
a.splice.apply(a,h);f+=h.length-1}}}return a}function he(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Ef(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Pe(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=Aa(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=Aa(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}
function dc(a,b){var c=Ic&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>Pe(d,e.marker))&&(d=e.marker);return d}function Id(a,b,c,d,e){a=la(a,b);if(a=Ic&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=Aa(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),l=Aa(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=l||0>=h&&0<=l)&&(0>=h&&(0<Aa(g.to,c)||f.marker.inclusiveRight&&
e.inclusiveLeft)||0<=h&&(0>Aa(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function lc(a){for(var b;b=dc(a,!0);)a=b.find(-1,!0).line;return a}function ie(a,b){var c=la(a,b),d=lc(c);return c==d?b:Za(d)}function Qe(a,b){if(b>a.lastLine())return b;var c=la(a,b),d;if(!bd(a,c))return b;for(;d=dc(c,!1);)c=d.find(1,!0).line;return Za(c)+1}function bd(a,b){var c=Ic&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&
d.marker.inclusiveLeft&&Re(a,b,d)))return!0}function Re(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Re(a,b.line,nd(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Re(a,b,d))return!0}function je(a){if(null!=a.height)return a.height;var b;a:{b=document.body;var c=
a.node;if(b.contains)b=b.contains(c);else{for(;c=c.parentNode;)if(c==b){b=!0;break a}b=void 0}}b||(b="position: relative;",a.coverGutter&&(b+="margin-left: -"+a.cm.getGutterElement().offsetWidth+"px;"),sc(a.cm.display.measure,ia("div",[a.node],null,b)));return a.height=a.node.offsetHeight}function jg(a,b,c,d){var e=new Dd(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);Uc(a.doc,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,
e.insertAt)),0,e);e.line=b;bd(a.doc,b)||(c=oc(b)<a.doc.scrollTop,pc(b,b.height+je(e)),c&&vd(a,null,e.height),a.curOp.forceUpdate=!0);return!0});return e}function We(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function If(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=
a.innerMode(b,c);if(d.mode.blankLine)return d.mode.blankLine(d.state)}}function Se(a,b,c){for(var d=0;10>d;d++){var e=a.token(b,c);if(b.pos>b.start)return e}throw Error("Mode "+a.name+" failed to advance stream.");}function Nf(b,c,d,e,f,g,h){var l=d.flattenSpans;null==l&&(l=b.options.flattenSpans);var m=0,n=null,p=new Ke(c,b.options.tabSize),q;for(""==c&&We(If(d,e),g);!p.eol();){p.pos>b.options.maxHighlightLength?(l=!1,h&&dd(b,c,e,p.pos),p.pos=c.length,q=null):q=We(Se(d,p,e),g);if(b.options.addModeClass){var t=
a.innerMode(d,e).mode.name;t&&(q="m-"+(q?t+" "+q:t))}l&&n==q||(m<p.start&&f(p.start,n),m=p.start,n=q);p.start=p.pos}for(;m<p.pos;)b=Math.min(p.pos,m+5E4),f(b,n),m=b}function lg(a,b,c,d){var e=[a.state.modeGen],f={};Nf(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,l=0;Nf(a,b.text,g.mode,!0,function(a,b){for(var c=h;l<a;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;l=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+
b),h=c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function qd(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen){var c=lg(a,b,b.stateAfter=fa(a,Za(b)));b.styles=c.styles;c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}function dd(a,b,c,d){var e=a.doc.mode,f=new Ke(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&If(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)Se(e,f,c),
f.start=f.pos}function mg(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?$f:Kg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Kf(a,b){var c=ia("span",null,null,Jb?"padding-right: .1px":null),c={pre:ia("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=ke;(Fa||Jb)&&a.getOption("lineWrapping")&&(c.addToken=ah(c.addToken));var g;if(null!=cf)g=cf;else{g=sc(a.display.measure,document.createTextNode("A\u062eA"));
var h=fe(g,0,1).getBoundingClientRect();g=h.left==h.right?!1:cf=3>fe(g,1,2).getBoundingClientRect().right-h.right}g&&(f=Cb(e))&&(c.addToken=Xe(c.addToken,f));c.map=[];a:{g=c;var h=qd(a,e),l=e.markedSpans,m=e.text,n=0;if(l)for(var p=m.length,q=0,t=1,v="",z=void 0,C=0,w=void 0,A=void 0,y=void 0,D=void 0,F=void 0;;){if(C==q){for(var w=A=y=D="",F=null,C=Infinity,B=[],aa=0;aa<l.length;++aa){var E=l[aa],I=E.marker;E.from<=q&&(null==E.to||E.to>q)?(null!=E.to&&C>E.to&&(C=E.to,A=""),I.className&&(w+=" "+I.className),
I.startStyle&&E.from==q&&(y+=" "+I.startStyle),I.endStyle&&E.to==C&&(A+=" "+I.endStyle),I.title&&!D&&(D=I.title),I.collapsed&&(!F||0>Pe(F.marker,I))&&(F=E)):E.from>q&&C>E.from&&(C=E.from);"bookmark"==I.type&&E.from==q&&I.widgetNode&&B.push(I)}if(F&&(F.from||0)==q&&(le(g,(null==F.to?p+1:F.to)-q,F.marker,null==F.from),null==F.to))break a;if(!F&&B.length)for(aa=0;aa<B.length;++aa)le(g,0,B[aa])}if(q>=p)break;for(B=Math.min(p,C);;){if(v){aa=q+v.length;F||(E=aa>B?v.slice(0,B-q):v,g.addToken(g,E,z?z+w:w,
y,q+E.length==C?A:"",D));if(aa>=B){v=v.slice(B-q);q=B;break}q=aa;y=""}v=m.slice(n,n=h[t++]);z=mg(h[t++],g.cm.options)}}else for(var t=1;t<h.length;t+=2)g.addToken(g,m.slice(n,n=h[t]),mg(h[t+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Tf(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Tf(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(Cg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache=
{}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Ha(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=Tf(c.pre.className,c.textClass||""));return c}function ke(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars,h=!1;if(g.test(b))for(var l=document.createDocumentFragment(),m=0;;){g.lastIndex=m;var n=g.exec(b),p=n?n.index-m:b.length-m;if(p){var q=document.createTextNode(b.slice(m,m+p));Fa&&9>Ua?l.appendChild(ia("span",[q])):l.appendChild(q);
a.map.push(a.pos,a.pos+p,q);a.col+=p;a.pos+=p}if(!n)break;m+=p+1;"\t"==n[0]?(q=a.cm.options.tabSize,n=q-a.col%q,q=l.appendChild(ia("span",hg(n),"cm-tab")),a.col+=n):(q=a.cm.options.specialCharPlaceholder(n[0]),Fa&&9>Ua?l.appendChild(ia("span",[q])):l.appendChild(q),a.col+=1);a.map.push(a.pos,a.pos+1,q);a.pos++}else{a.col+=b.length;var l=document.createTextNode(b);a.map.push(a.pos,a.pos+b.length,l);Fa&&9>Ua&&(h=!0);a.pos+=b.length}if(c||d||e||h)return b=c||"",d&&(b+=d),e&&(b+=e),d=ia("span",[l],b),
f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(l)}}function ah(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,f,g,h){a(c,d.replace(/ {3,}/g,b),e,f,g,h)}}function Xe(a,b){return function(c,d,e,f,g,h){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var n=0;n<b.length;n++){var p=b[n];if(p.to>l&&p.from<=l)break}if(p.to>=m)return a(c,d,e,f,g,h);a(c,d.slice(0,p.to-l),e,f,null,h);f=null;d=d.slice(p.to-
l);l=p.to}}}function le(a,b,c,d){if(c=!d&&c.widgetNode)a.map.push(a.pos,a.pos+b,c),a.content.appendChild(c);a.pos+=b}function Ue(a,b){return 0==b.from.ch&&0==b.to.ch&&""==Ya(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Kd(a,b,c,d){function e(a,c,f){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);he(a);Ef(a,f);c=d?d(a):1;c!=a.height&&pc(a,c);zb(a,"change",a,b)}var f=b.from,g=b.to,h=b.text,l=la(a,f.line),m=la(a,g.line),n=Ya(h),p=c?
c[h.length-1]:null,q=g.line-f.line;if(Ue(a,b)){for(var t=0,v=[];t<h.length-1;++t)v.push(new ld(h[t],c?c[t]:null,d));e(m,m.text,p);q&&a.remove(f.line,q);v.length&&a.insert(f.line,v)}else if(l==m)if(1==h.length)e(l,l.text.slice(0,f.ch)+n+l.text.slice(g.ch),p);else{v=[];for(t=1;t<h.length-1;++t)v.push(new ld(h[t],c?c[t]:null,d));v.push(new ld(n+l.text.slice(g.ch),p,d));e(l,l.text.slice(0,f.ch)+h[0],c?c[0]:null);a.insert(f.line+1,v)}else if(1==h.length)e(l,l.text.slice(0,f.ch)+h[0]+m.text.slice(g.ch),
c?c[0]:null),a.remove(f.line+1,q);else{e(l,l.text.slice(0,f.ch)+h[0],c?c[0]:null);e(m,n+m.text.slice(g.ch),p);t=1;for(v=[];t<h.length-1;++t)v.push(new ld(h[t],c?c[t]:null,d));1<q&&a.remove(f.line+1,q-1);a.insert(f.line+1,v)}zb(a,"change",a,b)}function Oc(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Pc(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=
c;this.parent=null}function cd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var l=f&&h.sharedHist;if(!c||l)b(h.doc,l),d(h.doc,a,l)}}}d(a,null,!0)}function Te(a,c){if(c.cm)throw Error("This document is already in use.");a.doc=c;c.cm=a;f(a);b(a);a.options.lineWrapping||v(a);a.options.mode=c.modeOption;B(a)}function la(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=
0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function pe(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Jf(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function pc(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function Za(a){if(null==a.parent)return null;var b=a.parent;a=Hb(b.lines,a);for(var c=b.parent;c;b=
c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Qc(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function oc(a){a=lc(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=
0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function Cb(a){var b=a.order;null==b&&(b=a.order=dh(a.text));return b}function qe(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Nc(a,b){var c={from:da(b.from),to:sb(b),text:pe(a,b.from,b.to)};Mf(a,c,b.from.line,b.to.line+1);cd(a,function(a){Mf(a,c,b.from.line,b.to.line+
1)},!0);return c}function oe(a){for(;a.length;)if(Ya(a).ranges)a.pop();else break}function ng(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,h;if(h=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(oe(e.done),g=Ya(e.done)):e.done.length&&!Ya(e.done).ranges?g=Ya(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),g=Ya(e.done)):g=void 0,h=g;if(h){var l=
Ya(g.changes);0==Aa(b.from,b.to)&&0==Aa(b.from,l.to)?l.to=sb(b):g.changes.push(Nc(a,b))}else for((g=Ya(e.done))&&g.ranges||re(a.sel,e.done),g={changes:[Nc(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;l||Ha(a,"historyAdded")}function re(a,b){var c=Ya(b);c&&c.ranges&&c.equals(a)||b.push(a)}
function Mf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function bh(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Ld(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?Ga.prototype.deepCopy.call(f):f);else{var f=f.changes,g=[];e.push({changes:g});
for(var h=0;h<f.length;++h){var l=f[h],m;g.push({from:l.from,to:l.to,text:l.text});if(b)for(var n in l)(m=n.match(/^spans_(\d+)$/))&&-1<Hb(b,Number(m[1]))&&(Ya(g)[n]=l[n],delete l[n])}}}return e}function og(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function pg(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)og(f.ranges[h].anchor,b,c,d),og(f.ranges[h].head,b,c,d)}else{for(h=0;h<f.changes.length;++h){var l=
f.changes[h];if(c<l.from.line)l.from=W(l.from.line+d,l.from.ch),l.to=W(l.to.line+d,l.to.ch);else if(b<=l.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function ig(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;pg(a.done,c,d,e);pg(a.undone,c,d,e)}function Of(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function qg(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));ic&&a.ctrlKey&&1==b&&(b=3);return b}function zb(a,b){function c(a){return function(){a.apply(null,
e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2),f;Cd?f=Cd.delayedCallbacks:yf?f=yf:(f=yf=[],setTimeout(gg,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function gg(){var a=yf;yf=null;for(var b=0;b<a.length;++b)a[b]()}function mc(a,b,c){Ha(a,c||b.type,a,b);return Of(b)||b.codemirrorIgnore}function Ff(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==
Hb(a,b[c])&&a.push(b[c])}}function nc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function Jd(a){a.prototype.on=function(a,b){na(this,a,b)};a.prototype.off=function(a,b){Pb(this,a,b)}}function Gf(){this.id=null}function Hf(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function hg(a){for(;Ne.length<=a;)Ne.push(Ya(Ne)+" ");return Ne[a]}function Ya(a){return a[a.length-
1]}function Hb(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function me(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Lf(a,b){var c;Object.create?c=Object.create(a):(c=function(){},c.prototype=a,c=new c);b&&Rc(b,c);return c}function Rc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function xc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Ve(a,b){return b?
-1<b.source.indexOf("\\w")&&xe(a)?!0:b.test(a):xe(a)}function kg(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function ne(a){return 768<=a.charCodeAt(0)&&rg.test(a)}function ia(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function pd(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function sc(a,
b){return pd(a).appendChild(b)}function Fc(){return document.activeElement}function Be(a){return new RegExp("\\b"+a+"\\b\\s*")}function gf(a,b){var c=Be(b);c.test(a.className)&&(a.className=a.className.replace(c,""))}function hf(a,b){Be(b).test(a.className)||(a.className+=" "+b)}function Tf(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Be(c[d]).test(b)&&(b+=" "+c[d]);return b}function Ag(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),
c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Bg(){var a;na(window,"resize",function(){null==a&&(a=setTimeout(function(){yd=a=null;Ag(kc)},100))});na(window,"blur",function(){Ag(ac)})}function fh(a){if(null!=yd)return yd;var b=ia("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");sc(a,b);b.offsetWidth&&(yd=b.offsetHeight-b.clientHeight);return yd||0}function Cg(a){if(null==cg){var b=ia("span","\u200b");sc(a,ia("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&
(cg=1>=b.offsetWidth&&2<b.offsetHeight&&!(Fa&&8>Ua))}return cg?ia("span","\u200b"):ia("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Uf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Ce(a){return a.level%2?a.to:a.from}function Yd(a){return a.level%2?a.from:a.to}function jf(a){return(a=Cb(a))?Ce(a[0]):
0}function kf(a){var b=Cb(a);return b?Yd(Ya(b)):a.text.length}function Dg(a,b){var c=la(a.doc,b),d=lc(c);d!=c&&(b=Za(d));d=(c=Cb(d))?c[0].level%2?kf(d):jf(d):0;return W(b,d)}function Gc(a,b){var c=Dg(a,b.line),d=la(a.doc,c.line),e=Cb(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),W(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function Vf(a,b){Wc=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=
a[d].level,h=a[0].level;f=f==h?!0:g==h?!1:f<g;if(f)return e.from!=e.to&&(Wc=d),c;e.from!=e.to&&(Wc=c);break}}return d}function De(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&ne(a.text.charAt(b)));return b}function lf(a,b,c,d){var e=Cb(a);if(!e)return Wf(a,b,c,d);var f=Vf(e,b),g=e[f];for(b=De(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Vf(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?De(a,g.to,-1,d):De(a,
g.from,1,d)}}function Wf(a,b,c,d){b+=c;if(d)for(;0<b&&ne(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Zd=/gecko\/\d/i.test(navigator.userAgent),Eg=/MSIE \d/.test(navigator.userAgent),Fg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Fa=Eg||Fg,Ua=Fa&&(Eg?document.documentMode||6:Fg[1]),Jb=/WebKit\//.test(navigator.userAgent),gh=Jb&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Gg=/Chrome\//.test(navigator.userAgent),hc=/Opera\//.test(navigator.userAgent),mf=/Apple Computer/.test(navigator.vendor),
nf=/KHTML\//.test(navigator.userAgent),$d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),of=/PhantomJS/.test(navigator.userAgent),Ee=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ae=Ee||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),ic=Ee||/Mac/.test(navigator.platform),hh=/win/i.test(navigator.platform),id=hc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);id&&(id=Number(id[1]));id&&15<=id&&(hc=!1,Jb=!0);var qf=
ic&&(gh||hc&&(null==id||12.11>id)),Hc=Zd||Fa&&9<=Ua,pf=!1,Ic=!1,W=a.Pos=function(a,b){if(!(this instanceof W))return new W(a,b);this.line=a;this.ch=b},Aa=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};Ga.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=Aa(c.anchor,d.anchor)||0!=Aa(c.head,
d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new qa(da(this.ranges[b].anchor),da(this.ranges[b].head));return new Ga(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=Aa(b,d.from())&&0>=Aa(a,d.to()))return c}return-1}};qa.prototype={from:function(){return jb(this.anchor,this.head)},
to:function(){return pb(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var rf={left:0,right:0,top:0,bottom:0},Jc,Cd=null,Hg=0,jd=null,Fe,Ge,Ig=0,sf=0,jc=null;Fa?jc=-.53:Zd?jc=15:Gg?jc=-.7:mf&&(jc=-1/3);var Xf,tf=null,sb=a.changeEnd=function(a){return a.text?W(a.from.line+a.text.length-1,Ya(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus();ob(this);Ka(this)},setOption:function(a,
b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,kd.hasOwnProperty(a)&&ma(this,kd[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:ya(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");
this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;B(this)}),removeOverlay:ya(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;B(this);break}}}),indentLine:ya(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");qb(this.doc,a)&&Wb(this,a,b,c)}),indentSelection:ya(function(a){for(var b=
this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Wb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&ec(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=g;e<c;++e)Wb(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&Lb(this.doc,d,new qa(f,e[d].to()),md)}}}),getTokenAt:function(a,b){var c=this.doc;a=ca(c,a);for(var d=fa(this,a.line,b),e=this.doc.mode,c=la(c,
a.line),c=new Ke(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var f=Se(e,c,d)}return{start:c.start,end:c.pos,string:c.current(),type:f||null,state:d}},getTokenTypeAt:function(a){a=ca(this.doc,a);var b=qd(this,la(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;
return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Zc.hasOwnProperty(b))return Zc;var d=Zc[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==
Hb(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return fa(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?ca(this.doc,a):a?c.from():c.to();return aa(this,c,b||"page")},charCoords:function(a,b){return Pa(this,ca(this.doc,a),b||"page")},coordsChar:function(a,b){a=Z(this,a,b||"page");return Ca(this,a.left,a.top)},lineAtHeight:function(a,
b){a=Z(this,{top:a,left:0},b||"page").top;return Qc(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=la(this.doc,a);return db(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-oc(d):0)},defaultTextHeight:function(){return Db(this.display)},defaultCharWidth:function(){return Vb(this.display)},setGutterMarker:ya(function(a,b,c){return Uc(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||
(a.gutterMarkers={});d[b]=c;!c&&kg(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:ya(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,K(b,d,"gutter"),kg(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineWidget:ya(function(a,b,c){return jg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!qb(this.doc,a))return null;var b=a;a=la(this.doc,a);if(!a)return null}else if(b=
Za(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=aa(this,ca(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var l=Math.max(f.wrapper.clientHeight,this.doc.height),
m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=l&&(g=a.bottom);h+b.offsetWidth>m&&(h=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=ud(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&
wc(this,a.scrollTop),null!=a.scrollLeft&&Sc(this,a.scrollLeft))},triggerOnKeyDown:ya(ge),triggerOnKeyPress:ya(Ze),triggerOnKeyUp:ue,execCommand:function(a){if(vf.hasOwnProperty(a))return vf[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ca(this.doc,a);f<b&&(a=Mc(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:ya(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Mc(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>
a?d.from():d.to()},ee)}),deleteH:ya(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):fc(this,function(d){var e=Mc(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ca(this.doc,a);f<b&&(a=aa(this,a,"div"),null==d?d=a.left:a.left=d,a=Vc(this,a,e,c),!a.hitSide);++f);return a},moveV:ya(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();
d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=aa(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn);e.push(h.left);var l=Vc(c,h,a,b);"page"==b&&g==d.sel.primary()&&vd(c,null,Pa(c,l,"div").top-h.top);return l},ee);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?hf(this.display.cursorDiv,"CodeMirror-overwrite"):gf(this.display.cursorDiv,
"CodeMirror-overwrite"),Ha(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return Fc()==this.display.input},scrollTo:ya(function(a,b){null==a&&null==b||bc(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=Lc;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:ya(function(a,b){null==a?(a=
{from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:W(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)bc(this),this.curOp.scrollToPos=a;else{var c=ud(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:ya(function(a,b){function c(a){return"number"==
typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&Xa(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){K(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;Ha(d,"refresh",this)}),operation:function(a){return Sa(this,a)},refresh:ya(function(){var a=this.display.cachedTextHeight;B(this);
this.curOp.forceUpdate=!0;bb(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);n(this);(null==a||.5<Math.abs(a-Db(this.display)))&&f(this);Ha(this,"refresh",this)}),swapDoc:ya(function(a){var b=this.doc;b.cm=null;Te(this,a);bb(this);Ea(this);this.scrollTo(a.scrollLeft,a.scrollTop);zb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
Jd(a);var Yf=a.defaults={},kd=a.optionHandlers={},He=a.Init={toString:function(){return"CodeMirror.Init"}};ta("value","",function(a,b){a.setValue(b)},!0);ta("mode",null,function(a,c){a.doc.modeOption=c;b(a)},!0);ta("indentUnit",2,b,!0);ta("indentWithTabs",!1);ta("smartIndent",!0);ta("tabSize",4,function(a){d(a);bb(a);B(a)},!0);ta("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},
!0);ta("specialCharPlaceholder",function(a){var b=ia("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);return b},function(a){a.refresh()},!0);ta("electricChars",!0);ta("rtlMoveVisually",!hh);ta("wholeLineUpdateBefore",!0);ta("theme","default",function(a){h(a);l(a)},!0);ta("keyMap","default",g);ta("extraKeys",null);ta("lineWrapping",!1,function(a){a.options.lineWrapping?(hf(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(gf(a.display.wrapper,"CodeMirror-wrap"),
v(a));f(a);B(a);bb(a);setTimeout(function(){E(a)},100)},!0);ta("gutters",[],function(a){A(a.options);l(a)},!0);ta("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?t(a.display)+"px":"0";a.refresh()},!0);ta("coverGutterNextToScrollbar",!1,E,!0);ta("lineNumbers",!1,function(a){A(a.options);l(a)},!0);ta("firstLineNumber",1,l,!0);ta("lineNumberFormatter",function(a){return a},l,!0);ta("showCursorWhenSelecting",!1,$a,!0);ta("resetSelectionOnContextMenu",!0);ta("readOnly",!1,function(a,b){"nocursor"==
b?(ac(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||Ea(a))});ta("disableInput",!1,function(a,b){b||Ea(a)},!0);ta("dragDrop",!0);ta("cursorBlinkRate",530);ta("cursorScrollMargin",0);ta("cursorHeight",1,$a,!0);ta("singleCursorHeightPerLine",!0,$a,!0);ta("workTime",100);ta("workDelay",100);ta("flattenSpans",!0,d,!0);ta("addModeClass",!1,d,!0);ta("pollInterval",100);ta("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});ta("historyEventDelay",1250);ta("viewportMargin",
10,function(a){a.refresh()},!0);ta("maxHighlightLength",1E4,d,!0);ta("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});ta("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});ta("autofocus",null);var uf=a.modes={},be=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b);if(2<arguments.length){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}uf[b]=c};a.defineMIME=
function(a,b){be[a]=b};a.resolveMode=function(b){if("string"==typeof b&&be.hasOwnProperty(b))b=be[b];else if(b&&"string"==typeof b.name&&be.hasOwnProperty(b.name)){var c=be[b.name];"string"==typeof c&&(c={name:c});b=Lf(c,b);b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};a.getMode=function(b,c){c=a.resolveMode(c);var d=uf[c.name];if(!d)return a.getMode(b,"text/plain");d=d(b,c);if(Qb.hasOwnProperty(c.name)){var e=
Qb[c.name],f;for(f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}d.name=c.name;c.helperType&&(d.helperType=c.helperType);if(c.modeProps)for(f in c.modeProps)d[f]=c.modeProps[f];return d};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var Qb=a.modeExtensions={};a.extendMode=function(a,b){var c=Qb.hasOwnProperty(a)?Qb[a]:Qb[a]={};Rc(b,c)};a.defineExtension=function(b,c){a.prototype[b]=c};a.defineDocExtension=function(a,
b){tb.prototype[a]=b};a.defineOption=ta;var Ie=[];a.defineInitHook=function(a){Ie.push(a)};var Zc=a.helpers={};a.registerHelper=function(b,c,d){Zc.hasOwnProperty(b)||(Zc[b]=a[b]={_global:[]});Zc[b][c]=d};a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e);Zc[b]._global.push({pred:d,val:e})};var de=a.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},Jg=a.startState=function(a,
b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var vf=a.commands={selectAll:function(a){a.setSelection(W(a.firstLine(),0),W(a.lastLine()),md)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),md)},killLine:function(a){fc(a,function(b){if(b.empty()){var c=la(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?
{from:b.head,to:W(b.head.line+1,0)}:{from:b.head,to:W(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){fc(a,function(b){return{from:W(b.from().line,0),to:ca(a.doc,W(b.to().line+1,0))}})},delLineLeft:function(a){fc(a,function(a){return{from:W(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){fc(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){fc(a,function(b){var c=
a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(W(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(W(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Dg(a,b.head.line)},{origin:"+move",bias:1})},
goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return Gc(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=la(a.doc,b);c=dc(d,!1);)d=c.find(1,!0).line,b=null;c=(c=Cb(d))?c[0].level%2?jf(d):kf(d):d.text.length;return W(null==b?Za(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},
"div")},ee)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},ee)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Gc(a,b.head):c},ee)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=uc(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Sa(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=la(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new W(e.line,e.ch-1)),0<e.ch)e=new W(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),W(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=la(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+
"\n"+g.charAt(g.length-1),W(e.line-1,g.length-1),W(e.line,1),"+transpose")}c.push(new qa(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Sa(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);ec(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Kc=a.keyMap={};Kc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",
PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Kc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart",
"Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Kc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart",
"Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection",
"Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};Kc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};Kc["default"]=ic?Kc.macDefault:Kc.pcDefault;var wf=a.lookupKey=
function(a,b,c){function d(b){b=Sd(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(e=0;e<b.length;++e){var f=d(b[e]);if(f)return f}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}},jh=a.isModifierKey=function(a){a=Cc[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},kh=a.keyName=function(a,b){if(hc&&34==a.keyCode&&
a["char"])return!1;var c=Cc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(qf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(qf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c};a.fromTextArea=function(b,c){function d(){b.value=m.getValue()}c||(c={});c.value=b.value;!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder);if(null==c.autofocus){var e=Fc();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==
document.body}if(b.form&&(na(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d();f.submit=g;f.submit();f.submit=h}}catch(l){}}b.style.display="none";var m=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);m.save=d;m.getTextArea=function(){return b};m.toTextArea=function(){d();b.parentNode.removeChild(m.getWrapperElement());b.style.display="";b.form&&(Pb(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))};return m};
var Ke=a.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Ke.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):
a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=uc(this.string,this.start,this.tabSize,this.lastColumnPos,
this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?uc(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return uc(this.string,null,this.tabSize)-(this.lineStart?uc(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&
0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var tc=a.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a};Jd(tc);tc.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Q(a);if(nc(this,"clear")){var c=this.find();c&&zb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=
this.lines[e],g=nd(f.markedSpans,this);a&&!this.collapsed?K(a,Za(f),"text"):a&&(null!=g.to&&(d=Za(f)),null!=g.from&&(c=Za(f)));for(var h=f,l=f.markedSpans,m=g,n=void 0,p=0;p<l.length;++p)l[p]!=m&&(n||(n=[])).push(l[p]);h.markedSpans=n;null==g.from&&this.collapsed&&!bd(this.doc,f)&&a&&pc(f,Db(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=lc(this.lines[e]),g=q(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=
!0);null!=c&&a&&this.collapsed&&B(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Mb(a.doc));a&&zb(a,"markerCleared",a,this);b&&P(a);this.parent&&this.parent.clear()}};tc.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=nd(f.markedSpans,this);if(null!=g.from&&(c=W(b?f:Za(f),g.from),-1==a))return c;if(null!=g.to&&(d=W(b?f:Za(f),g.to),1==a))return d}return c&&
{from:c,to:d}};tc.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Sa(c,function(){var d=a.line,e=Za(a.line);if(e=yb(c,e))Tb(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;bd(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=je(b)-e)&&pc(d,d.height+e))})};tc.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Hb(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=
[])).push(this)}this.lines.push(a)};tc.prototype.detachLine=function(a){this.lines.splice(Hb(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var Zf=0,xf=a.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Jd(xf);xf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();zb(this,
"clear")}};xf.prototype.find=function(a,b){return this.primary.find(a,b)};var Dd=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};Jd(Dd);Dd.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=Za(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=je(this);Sa(a,function(){var b=-f;oc(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&vd(a,null,b);K(a,d,"widget");pc(c,
Math.max(0,c.height-f))})}};Dd.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=je(this)-a;d&&Sa(b,function(){b.curOp.forceUpdate=!0;oc(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&vd(b,null,d);pc(c,c.height+d)})};var ld=a.Line=function(a,b,c){this.text=a;Ef(this,b);this.height=c?c(this):1};Jd(ld);ld.prototype.lineNo=function(){return Za(this)};var Kg={},$f={};Oc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=
a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;he(f);zb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Pc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=
0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Oc))&&(c=[],this.collapse(c),this.children=[new Oc(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,
b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Oc(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Pc(b);if(a.parent){a.size-=b.size;
a.height-=b.height;var c=Hb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Pc(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var ag=0,tb=a.Doc=function(a,b,c){if(!(this instanceof tb))return new tb(a,b,c);null==c&&(c=0);Pc.call(this,
[new Oc([new ld("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=W(c,0);this.sel=cb(c);this.history=new qe(null);this.id=++ag;this.modeOption=b;"string"==typeof a&&(a=za(a));Kd(this,{from:c,to:c,text:a});Ra(this,cb(c),md)};tb.prototype=Lf(Pc.prototype,{constructor:tb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;
this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Jf(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:Ma(function(a){var b=W(this.first,0),c=this.first+this.size-1;Tc(this,{from:b,to:W(c,la(this,c).text.length),text:za(a),origin:"setValue"},!0);Ra(this,cb(b))}),replaceRange:function(a,b,c,d){b=ca(this,b);c=c?ca(this,c):b;Qd(this,a,b,c,d)},getRange:function(a,b,c){a=pe(this,ca(this,a),ca(this,b));return!1===
c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(qb(this,a))return la(this,a)},getLineNumber:function(a){return Za(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=la(this,a));return lc(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return ca(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==
a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ma(function(a,b,c){a=ca(this,"number"==typeof a?W(a,b||0):a);Ra(this,cb(a,null),c)}),setSelection:Ma(function(a,b,c){var d=ca(this,a);a=ca(this,b||a);Ra(this,cb(d,a),c)}),extendSelection:Ma(function(a,b,c){p(this,ca(this,a),b&&ca(this,b),c)}),extendSelections:Ma(function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=
ca(this,a[d]);nb(this,c)}),extendSelectionsBy:Ma(function(a,b){nb(this,me(this.sel.ranges,a),b)}),setSelections:Ma(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new qa(ca(this,a[d].anchor),ca(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Ra(this,Da(e,b),c)}}),addSelection:Ma(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new qa(ca(this,a),ca(this,b||a)));Ra(this,Da(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=
pe(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=pe(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||"\n"));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Ma(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),
text:za(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=W(this.first,0);for(e=0;e<d.length;e++){var h=d[e],g=we(h.from,a,c),l=we(sb(h),a,c);a=h.to;c=l;"around"==b?(h=this.sel.ranges[e],h=0>Aa(h.head,h.anchor),f[e]=new qa(h?l:g,h?g:l)):f[e]=new qa(g,g)}f=new Ga(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)Tc(this,d[f]);b?Gb(this,b):this.cm&&ec(this.cm)}),undo:Ma(function(){ed(this,"undo")}),redo:Ma(function(){ed(this,"redo")}),undoSelection:Ma(function(){ed(this,"undo",!0)}),redoSelection:Ma(function(){ed(this,
"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new qe(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=
null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Ld(this.history.done),undone:Ld(this.history.undone)}},setHistory:function(a){var b=this.history=new qe(this.history.maxGeneration);b.done=Ld(a.done.slice(0),null,!0);b.undone=Ld(a.undone.slice(0),null,!0)},addLineClass:Ma(function(a,b,c){return Uc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if((new RegExp("(?:^|\\s)"+
c+"(?:$|\\s)")).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Ma(function(a,b,c){return Uc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),markText:function(a,b,c){return Yb(this,ca(this,a),ca(this,
b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};a=ca(this,a);return Yb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=ca(this,a);var b=[],c=la(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=ca(this,a);b=ca(this,b);var d=[],e=a.line;this.iter(a.line,
b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return ca(this,W(c,
b))},indexFromPos:function(a){a=ca(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new tb(Jf(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;
null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new tb(Jf(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Td(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);Aa(f,e)&&(f=Yb(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(b){b instanceof a&&(b=
b.doc);if(this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);eg(Td(this));break}if(b.history==this.history){var d=[b.id];cd(b,function(a){d.push(a.id)},!0);b.history=new qe(null);b.history.done=Ld(this.history.done,d);b.history.undone=Ld(this.history.undone,d)}},iterLinkedDocs:function(a){cd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});tb.prototype.eachLine=tb.prototype.iter;var lh=["iter","insert",
"remove","copy","getEditor"],Le;for(Le in tb.prototype)tb.prototype.hasOwnProperty(Le)&&0>Hb(lh,Le)&&(a.prototype[Le]=function(a){return function(){return a.apply(this.doc,arguments)}}(tb.prototype[Le]));Jd(tb);var y=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Mg=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Bc=a.e_stop=function(a){y(a);Mg(a)},na=a.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?
a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},Pb=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},Ha=a.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},yf=null,Lc=30,Me=a.Pass={toString:function(){return"CodeMirror.Pass"}},
md={scroll:!1},bg={origin:"*mouse"},ee={origin:"+move"};Gf.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var uc=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},Ne=[""],ja=function(a){a.select()};Ee?ja=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:Fa&&(ja=function(a){try{a.select()}catch(b){}});[].indexOf&&(Hb=function(a,
b){return a.indexOf(b)});[].map&&(me=function(a,b){return a.map(b)});var wd=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,xe=a.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||wd.test(a))},rg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
fe;fe=document.createRange?function(a,b,c){var d=document.createRange();d.setEnd(a,c);d.setStart(a,b);return d}:function(a,b,c){var d=document.body.createTextRange();d.moveToElementText(a.parentNode);d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};Fa&&11>Ua&&(Fc=function(){try{return document.activeElement}catch(a){return document.body}});var ye=!1,Qf=function(){if(Fa&&9>Ua)return!1;var a=ia("div");return"draggable"in a||"dragDrop"in a}(),yd,cg,cf,za=a.splitLines=3!="\n\nb".split(/\n/).length?
function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},dg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Ac=
function(){var a=ia("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),zf=null,Cc={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",
192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=Cc;(function(){for(var a=0;10>a;a++)Cc[a+48]=Cc[a+96]=String(a);for(a=65;90>=a;a++)Cc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Cc[a+111]=Cc[a+63235]="F"+a})();var Wc,dh=function(){function a(b){return 247>=b?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(b):
1424<=b&&1524>=b?"R":1536<=b&&1773>=b?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var l=h.length,m=[],n=0,p;n<l;++n)m.push(a(h.charCodeAt(n)));for(var n=0,q="L";n<l;++n)p=m[n],"m"==p?m[n]=q:q=p;n=0;for(q="L";n<l;++n)p=m[n],"1"==p&&"r"==q?m[n]="n":e.test(p)&&(q=p,"r"==p&&(m[n]="R"));n=1;for(q=m[0];n<l-1;++n)p=m[n],"+"==p&&"1"==q&&"1"==m[n+1]?m[n]="1":","!=p||q!=m[n+1]||"1"!=q&&"n"!=q||(m[n]=q),q=p;for(n=0;n<l;++n)if(p=m[n],","==p)m[n]="N";else if("%"==p){for(q=n+1;q<l&&"%"==m[q];++q);var t=n&&"!"==m[n-1]||q<l&&"1"==m[q]?"1":"N";for(p=n;p<q;++p)m[p]=t;n=q-1}n=0;for(q="L";n<l;++n)p=
m[n],"L"==q&&"1"==p?m[n]="L":e.test(p)&&(q=p);for(n=0;n<l;++n)if(d.test(m[n])){for(q=n+1;q<l&&d.test(m[q]);++q);p="L"==(q<l?m[q]:"L");t="L"==(n?m[n-1]:"L")||p?"L":"R";for(p=n;p<q;++p)m[p]=t;n=q-1}for(var q=[],v,n=0;n<l;)if(f.test(m[n])){p=n;for(++n;n<l&&f.test(m[n]);++n);q.push(new b(0,p,n))}else{var z=n,t=q.length;for(++n;n<l&&"L"!=m[n];++n);for(p=z;p<n;)if(g.test(m[p])){z<p&&q.splice(t,0,new b(1,z,p));z=p;for(++p;p<n&&g.test(m[p]);++p);q.splice(t,0,new b(2,z,p));z=p}else++p;z<n&&q.splice(t,0,new b(1,
z,n))}1==q[0].level&&(v=h.match(/^\s+/))&&(q[0].from=v[0].length,q.unshift(new b(0,0,v[0].length)));1==Ya(q).level&&(v=h.match(/\s+$/))&&(Ya(q).to-=v[0].length,q.push(new b(0,l-v[0].length,l)));q[0].level!=Ya(q).level&&q.push(new b(q[0].level,l,l));return q}}();a.version="4.5.0";return a});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function c(a,c,d,e){var f=a.getLineHandle(c.line),l=c.ch-1,f=0<=l&&h[f.text.charAt(l)]||h[f.text.charAt(++l)];if(!f)return null;var E=">"==f.charAt(1)?1:-1;if(d&&0<E!=(l==c.ch))return null;d=a.getTokenTypeAt(g(c.line,l+1));a=b(a,g(c.line,l+(0<E?1:0)),E,d||null,e);return null==a?null:{from:g(c.line,l),
to:a&&a.pos,match:a&&a.ch==f.charAt(0),forward:0<E}}function b(a,b,c,d,e){var f=e&&e.maxScanLineLength||1E4,l=e&&e.maxScanLines||1E3,D=[];e=e&&e.bracketRegex?e.bracketRegex:/[(){}[\]]/;for(var l=0<c?Math.min(b.line+l,a.lastLine()+1):Math.max(a.firstLine()-1,b.line-l),J=b.line;J!=l;J+=c){var I=a.getLine(J);if(I){var C=0<c?0:I.length-1,t=0<c?I.length:-1;if(!(I.length>f))for(J==b.line&&(C=b.ch-(0>c?1:0));C!=t;C+=c){var z=I.charAt(C);if(e.test(z)&&(void 0===d||a.getTokenTypeAt(g(J,C+1))==d))if(">"==h[z].charAt(1)==
0<c)D.push(z);else if(D.length)D.pop();else return{pos:g(J,C),ch:z}}}}return J-c==(0<c?a.lastLine():a.firstLine())?!1:null}function d(a,b,d){for(var e=a.state.matchBrackets.maxHighlightLineLength||1E3,h=[],l=a.listSelections(),E=0;E<l.length;E++){var D=l[E].empty()&&c(a,l[E].head,!1,d);if(D&&a.getLine(D.from.line).length<=e){var J=D.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";h.push(a.markText(D.from,g(D.from.line,D.from.ch+1),{className:J}));D.to&&a.getLine(D.to.line).length<=
e&&h.push(a.markText(D.to,g(D.to.line,D.to.ch+1),{className:J}))}}if(h.length)if(f&&a.state.focused&&a.display.input.focus(),d=function(){a.operation(function(){for(var a=0;a<h.length;a++)h[a].clear()})},b)setTimeout(d,800);else return d}function e(a){a.operation(function(){l&&(l(),l=null);l=d(a,!1,a.state.matchBrackets)})}var f=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),g=a.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;a.defineOption("matchBrackets",
!1,function(b,c,d){d&&d!=a.Init&&b.off("cursorActivity",e);c&&(b.state.matchBrackets="object"==typeof c?c:{},b.on("cursorActivity",e))});a.defineExtension("matchBrackets",function(){d(this,!0)});a.defineExtension("findMatchingBracket",function(a,b,d){return c(this,a,b,d)});a.defineExtension("scanForBracket",function(a,c,d,e){return b(this,a,c,d,e)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function c(c){if(c.getOption("disableInput"))return a.Pass;for(var d=c.listSelections(),e,l=[],m=0;m<d.length;m++){var n=d[m].head,q=c.getTokenAt(n);if("comment"!=q.type)return a.Pass;var v=a.innerMode(c.getMode(),q.state).mode;if(!e)e=v;else if(e!=v)return a.Pass;v=null;if(e.blockCommentStart&&e.blockCommentContinue){var A=
q.string.indexOf(e.blockCommentEnd),w=c.getRange(a.Pos(n.line,0),a.Pos(n.line,q.end)),E;if(!(-1!=A&&A==q.string.length-e.blockCommentEnd.length&&n.ch>=A))if(0==q.string.indexOf(e.blockCommentStart)){if(v=w.slice(0,q.start),!/^\s*$/.test(v))for(v="",A=0;A<q.start;++A)v+=" "}else-1!=(E=w.indexOf(e.blockCommentContinue))&&E+e.blockCommentContinue.length>q.start&&/^\s*$/.test(w.slice(0,E))&&(v=w.slice(0,E));null!=v&&(v+=e.blockCommentContinue)}null==v&&e.lineComment&&b(c)&&(n=c.getLine(n.line),E=n.indexOf(e.lineComment),
-1<E&&(v=n.slice(0,E),v=/\S/.test(v)?null:v+(e.lineComment+n.slice(E+e.lineComment.length).match(/^\s*/)[0])));if(null==v)return a.Pass;l[m]="\n"+v}c.operation(function(){for(var a=d.length-1;0<=a;a--)c.replaceRange(l[a],d[a].from(),d[a].to(),"+insert")})}function b(a){return(a=a.getOption("continueComments"))&&"object"==typeof a?!1!==a.continueLineComment:!0}for(var d=["clike","css","javascript"],e=0;e<d.length;++e)a.extendMode(d[e],{blockCommentContinue:" * "});a.defineOption("continueComments",
null,function(b,d,e){e&&e!=a.Init&&b.removeKeyMap("continueComment");d&&(e="Enter","string"==typeof d?e=d:"object"==typeof d&&d.key&&(e=d.key),d={name:"continueComment"},d[e]=c,b.addKeyMap(d))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function c(a){a=a.search(d);return-1==a?0:a}var b={},d=/[^\s\u00a0]/,e=a.Pos;a.commands.toggleComment=function(a){for(var b=Infinity,c=a.listSelections(),d=null,m=c.length-1;0<=m;m--){var n=c[m].from(),q=c[m].to();n.line>=b||(q.line>=b&&(q=e(b,0)),b=n.line,null==d?a.uncomment(n,q)?d="un":(a.lineComment(n,
q),d="line"):"un"==d?a.uncomment(n,q):a.lineComment(n,q))}};a.defineExtension("lineComment",function(a,g,h){h||(h=b);var l=this,m=l.getModeAt(a),n=h.lineComment||m.lineComment;if(n){var q=l.getLine(a.line);if(null!=q){var v=Math.min(0!=g.ch||g.line==a.line?g.line+1:g.line,l.lastLine()+1),A=null==h.padding?" ":h.padding,w=h.commentBlankLines||a.line==g.line;l.operation(function(){if(h.indent)for(var b=q.slice(0,c(q)),g=a.line;g<v;++g){var m=l.getLine(g),I=b.length;if(w||d.test(m))m.slice(0,I)!=b&&
(I=c(m)),l.replaceRange(b+n+A,e(g,0),e(g,I))}else for(g=a.line;g<v;++g)(w||d.test(l.getLine(g)))&&l.replaceRange(n+A,e(g,0))})}}else if(h.blockCommentStart||m.blockCommentStart)h.fullLines=!0,l.blockComment(a,g,h)});a.defineExtension("blockComment",function(a,c,h){h||(h=b);var l=this,m=l.getModeAt(a),n=h.blockCommentStart||m.blockCommentStart,q=h.blockCommentEnd||m.blockCommentEnd;if(n&&q){var v=Math.min(c.line,l.lastLine());v!=a.line&&0==c.ch&&d.test(l.getLine(v))&&--v;var A=null==h.padding?" ":
h.padding;a.line>v||l.operation(function(){if(0!=h.fullLines){var b=d.test(l.getLine(v));l.replaceRange(A+q,e(v));l.replaceRange(n+A,e(a.line,0));var E=h.blockCommentLead||m.blockCommentLead;if(null!=E)for(var D=a.line+1;D<=v;++D)(D!=v||b)&&l.replaceRange(E+A,e(D,0))}else l.replaceRange(q,c),l.replaceRange(n,a)})}else(h.lineComment||m.lineComment)&&0!=h.fullLines&&l.lineComment(a,c,h)});a.defineExtension("uncomment",function(a,c,h){h||(h=b);var l=this,m=l.getModeAt(a),n=Math.min(c.line,l.lastLine()),
q=Math.min(a.line,n),v=h.lineComment||m.lineComment,A=[],w=null==h.padding?" ":h.padding,E;a:if(v){for(var D=q;D<=n;++D){var J=l.getLine(D),I=J.indexOf(v);-1<I&&!/comment/.test(l.getTokenTypeAt(e(D,I+1)))&&(I=-1);if(-1==I&&(D!=n||D==q)&&d.test(J))break a;if(-1<I&&d.test(J.slice(0,I)))break a;A.push(J)}l.operation(function(){for(var a=q;a<=n;++a){var b=A[a-q],c=b.indexOf(v),d=c+v.length;0>c||(b.slice(d,d+w.length)==w&&(d+=w.length),E=!0,l.replaceRange("",e(a,c),e(a,d)))}});if(E)return!0}var C=h.blockCommentStart||
m.blockCommentStart,t=h.blockCommentEnd||m.blockCommentEnd;if(!C||!t)return!1;var z=h.blockCommentLead||m.blockCommentLead,F=l.getLine(q),O=n==q?F:l.getLine(n),S=F.indexOf(C),V=O.lastIndexOf(t);-1==V&&q!=n&&(O=l.getLine(--n),V=O.lastIndexOf(t));if(-1==S||-1==V||!/comment/.test(l.getTokenTypeAt(e(q,S+1)))||!/comment/.test(l.getTokenTypeAt(e(n,V+1))))return!1;m=F.lastIndexOf(C,a.ch);h=-1==m?-1:F.slice(0,a.ch).indexOf(t,m+C.length);if(-1!=m&&-1!=h&&h+t.length!=a.ch)return!1;h=O.indexOf(t,c.ch);a=O.slice(c.ch).lastIndexOf(C,
h-c.ch);m=-1==h||-1==a?-1:c.ch+a;if(-1!=h&&-1!=m&&m!=c.ch)return!1;l.operation(function(){l.replaceRange("",e(n,V-(w&&O.slice(V-w.length,V)==w?w.length:0)),e(n,V+t.length));var a=S+C.length;w&&F.slice(a,a+w.length)==w&&(a+=w.length);l.replaceRange("",e(q,S),e(q,a));if(z)for(a=q+1;a<=n;++a){var b=l.getLine(a),c=b.indexOf(z);if(-1!=c&&!d.test(b.slice(0,c))){var f=c+z.length;w&&b.slice(f,f+w.length)==w&&(f+=w.length);l.replaceRange("",e(a,c),e(a,f))}}});return!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("javascript",function(c,b){function d(a,b,c){Xa=a;bb=c;return b}function e(a,b){var c=a.next();if('"'==c||"'"==c)return b.tokenize=f(c),b.tokenize(a,b);if("."==c&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return d("number","number");if("."==c&&a.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(c))return d(c);
if("="==c&&a.eat(">"))return d("=>","operator");if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),d("number","number");if(/\d/.test(c))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),d("number","number");if("/"==c){if(a.eat("*"))return b.tokenize=g,g(a,b);if(a.eat("/"))return a.skipToEnd(),d("comment","comment");if("operator"==b.lastType||"keyword c"==b.lastType||"sof"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)){a:for(var c=!1,e,l=!1;null!=(e=a.next());){if(!c){if("/"==e&&!l)break a;"["==
e?l=!0:l&&"]"==e&&(l=!1)}c=!c&&"\\"==e}a.eatWhile(/[gimy]/);return d("regexp","string-2")}a.eatWhile(ea);return d("operator","operator",a.current())}if("`"==c)return b.tokenize=h,h(a,b);if("#"==c)return a.skipToEnd(),d("error","error");if(ea.test(c))return a.eatWhile(ea),d("operator","operator",a.current());if(yb.test(c))return a.eatWhile(yb),c=a.current(),(e=Sb.propertyIsEnumerable(c)&&Sb[c])&&"."!=b.lastType?d(e.type,e.style,c):d("variable","variable",c)}function f(a){return function(b,c){var f=
!1,g;if(fa&&"@"==b.peek()&&b.match(Tb))return c.tokenize=e,d("jsonld-keyword","meta");for(;null!=(g=b.next())&&(g!=a||f);)f=!f&&"\\"==g;f||(c.tokenize=e);return d("string","string")}}function g(a,b){for(var c=!1,f;f=a.next();){if("/"==f&&c){b.tokenize=e;break}c="*"==f}return d("comment","comment")}function h(a,b){for(var c=!1,f;null!=(f=a.next());){if(!c&&("`"==f||"$"==f&&a.eat("{"))){b.tokenize=e;break}c=!c&&"\\"==f}return d("quasi","string-2",a.current())}function l(a,b){b.fatArrowAt&&(b.fatArrowAt=
null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var f=a.string.charAt(c),g="([{}])".indexOf(f);if(0<=g&&3>g){if(!d){++c;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(yb.test(f))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function m(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function n(){for(var a=arguments.length-1;0<=a;a--)Z.cc.push(arguments[a])}function q(){n.apply(null,arguments);
return!0}function v(a){function c(b){for(;b;b=b.next)if(b.name==a)return!0;return!1}var d=Z.state;d.context?(Z.marked="def",c(d.localVars)||(d.localVars={name:a,next:d.localVars})):!c(d.globalVars)&&b.globalVars&&(d.globalVars={name:a,next:d.globalVars})}function A(){Z.state.context={prev:Z.state.context,vars:Z.state.localVars};Z.state.localVars=Pa}function w(){Z.state.localVars=Z.state.context.vars;Z.state.context=Z.state.context.prev}function E(a,b){var c=function(){var c=Z.state,d=c.indented;if("stat"==
c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new m(d,Z.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function D(){var a=Z.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function J(a){function b(c){return c==a?q():";"==a?n():q(b)}return b}function I(a,b){return"var"==a?q(E("vardef",b.length),jb,J(";"),D):"keyword a"==a?q(E("form"),C,I,D):"keyword b"==a?q(E("form"),
I,D):"{"==a?q(E("}"),N,D):";"==a?q():"if"==a?("else"==Z.state.lexical.info&&Z.state.cc[Z.state.cc.length-1]==D&&Z.state.cc.pop()(),q(E("form"),C,I,D,ca)):"function"==a?q(Oa):"for"==a?q(E("form"),qb,I,D):"variable"==a?q(E("stat"),va):"switch"==a?q(E("form"),C,E("}","switch"),J("{"),N,D,D):"case"==a?q(C,J(":")):"default"==a?q(J(":")):"catch"==a?q(E("form"),A,J("("),Gb,J(")"),I,D,w):"module"==a?q(E("form"),A,Bb,w,D):"class"==a?q(E("form"),Ra,D):"export"==a?q(E("form"),xb,D):"import"==a?q(E("form"),Ia,
D):n(E("stat"),C,J(";"),D)}function C(a){return z(a,!1)}function t(a){return z(a,!0)}function z(a,b){if(Z.state.fatArrowAt==Z.stream.start){var c=b?Wa:La;if("("==a)return q(A,E(")"),oa(Ga,")"),D,J("=>"),c,w);if("variable"==a)return n(A,Ga,J("=>"),c,w)}c=b?V:S;return db.hasOwnProperty(a)?q(c):"function"==a?q(Oa,c):"keyword c"==a?q(b?O:F):"("==a?q(E(")"),F,fb,J(")"),D,c):"operator"==a||"spread"==a?q(b?t:C):"["==a?q(E("]"),Rb,D,c):"{"==a?sa(wa,"}",null,c):"quasi"==a?n(T,c):q()}function F(a){return a.match(/[;\}\)\],]/)?
n():n(C)}function O(a){return a.match(/[;\}\)\],]/)?n():n(t)}function S(a,b){return","==a?q(C):V(a,b,!1)}function V(a,b,c){var d=0==c?S:V,e=0==c?C:t;if("=>"==b)return q(A,c?Wa:La,w);if("operator"==a)return/\+\+|--/.test(b)?q(d):"?"==b?q(C,J(":"),e):q(e);if("quasi"==a)return n(T,d);if(";"!=a){if("("==a)return sa(t,")","call",d);if("."==a)return q(ha,d);if("["==a)return q(E("]"),F,J("]"),D,d)}}function T(a,b){return"quasi"!=a?n():"${"!=b.slice(b.length-2)?q(T):q(C,pa)}function pa(a){if("}"==a)return Z.marked=
"string-2",Z.state.tokenize=h,q(T)}function La(a){l(Z.stream,Z.state);return"{"==a?n(I):n(C)}function Wa(a){l(Z.stream,Z.state);return"{"==a?n(I):n(t)}function va(a){return":"==a?q(D,I):n(S,J(";"),D)}function ha(a){if("variable"==a)return Z.marked="property",q()}function wa(a,b){if("variable"==a||"keyword"==Z.style)return Z.marked="property","get"==b||"set"==b?q(ua):q(ka);if("number"==a||"string"==a)return Z.marked=fa?"property":Z.style+" property",q(ka);if("jsonld-keyword"==a)return q(ka);if("["==
a)return q(C,J("]"),ka)}function ua(a){if("variable"!=a)return n(ka);Z.marked="property";return q(Oa)}function ka(a){if(":"==a)return q(t);if("("==a)return n(Oa)}function oa(a,b){function c(d){return","==d?(d=Z.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),q(a,c)):d==b?q():q(J(b))}return function(d){return d==b?q():n(a,c)}}function sa(a,b,c){for(var d=3;d<arguments.length;d++)Z.cc.push(arguments[d]);return q(E(b,c),oa(a,b),D)}function N(a){return"}"==a?q():n(I,N)}function da(a){if(rb&&":"==a)return q(pb)}
function pb(a){if("variable"==a)return Z.marked="variable-3",q()}function jb(){return n(Ga,da,Da,cb)}function Ga(a,b){if("variable"==a)return v(b),q();if("["==a)return sa(Ga,"]");if("{"==a)return sa(qa,"}")}function qa(a,b){if("variable"==a&&!Z.stream.match(/^\s*:/,!1))return v(b),q(Da);"variable"==a&&(Z.marked="property");return q(J(":"),Ga,Da)}function Da(a,b){if("="==b)return q(t)}function cb(a){if(","==a)return q(jb)}function ca(a,b){if("keyword b"==a&&"else"==b)return q(E("form","else"),I,D)}
function qb(a){if("("==a)return q(E(")"),ub,J(")"),D)}function ub(a){return"var"==a?q(jb,J(";"),nb):";"==a?q(nb):"variable"==a?q(p):n(C,J(";"),nb)}function p(a,b){return"in"==b||"of"==b?(Z.marked="keyword",q(C)):q(S,nb)}function nb(a,b){return";"==a?q(Lb):"in"==b||"of"==b?(Z.marked="keyword",q(C)):n(C,J(";"),Lb)}function Lb(a){")"!=a&&q(C)}function Oa(a,b){if("*"==b)return Z.marked="keyword",q(Oa);if("variable"==a)return v(b),q(Oa);if("("==a)return q(A,E(")"),oa(Gb,")"),D,I,w)}function Gb(a){return"spread"==
a?q(Gb):n(Ga,da)}function Ra(a,b){if("variable"==a)return v(b),q(vb)}function vb(a,b){if("extends"==b)return q(C,vb);if("{"==a)return q(E("}"),wb,D)}function wb(a,b){if("variable"==a||"keyword"==Z.style)return Z.marked="property","get"==b||"set"==b?q(Mb,Oa,wb):q(Oa,wb);if("*"==b)return Z.marked="keyword",q(wb);if(";"==a)return q(wb);if("}"==a)return q()}function Mb(a){if("variable"!=a)return n();Z.marked="property";return q()}function Bb(a,b){if("string"==a)return q(I);if("variable"==a)return v(b),
q($a)}function xb(a,b){return"*"==b?(Z.marked="keyword",q($a,J(";"))):"default"==b?(Z.marked="keyword",q(C,J(";"))):n(I)}function Ia(a){return"string"==a?q():n(Nb,$a)}function Nb(a,b){if("{"==a)return sa(Nb,"}");"variable"==a&&v(b);return q()}function $a(a,b){if("from"==b)return Z.marked="keyword",q(C)}function Rb(a){return"]"==a?q():n(t,ab)}function ab(a){return"for"==a?n(fb,J("]")):","==a?q(oa(t,"]")):n(oa(t,"]"))}function fb(a){if("for"==a)return q(qb,fb);if("if"==a)return q(C,fb)}var hb=c.indentUnit,
gb=b.statementIndent,fa=b.jsonld,Ba=b.json||fa,rb=b.typescript,yb=b.wordCharacters||/[\w$]/,Sb=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),
"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(rb){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),
string:c,number:c,bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),ea=/[+\-*&%=<>!?|~^]/,Tb=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Xa,bb,db={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Z={state:null,column:null,marked:null,cc:null},Pa={name:"this",next:{name:"arguments"}};D.lex=!0;return{startState:function(a){a={tokenize:e,lastType:"sof",cc:[],lexical:new m((a||0)-hb,0,"block",!1),localVars:b.localVars,context:b.localVars&&
{vars:b.localVars},indented:0};b.globalVars&&"object"==typeof b.globalVars&&(a.globalVars=b.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),l(a,b));if(b.tokenize!=g&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==Xa)return c;b.lastType="operator"!=Xa||"++"!=bb&&"--"!=bb?Xa:"incdec";a:{var d=Xa,e=bb,f=b.cc;Z.state=b;Z.stream=a;Z.marked=null;Z.cc=f;Z.style=c;b.lexical.hasOwnProperty("align")||(b.lexical.align=
!0);for(;;)if((f.length?f.pop():Ba?C:I)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(Z.marked){c=Z.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}for(f=b.context;f;f=f.prev)for(d=f.vars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";break a}break a}}return c},indent:function(c,d){if(c.tokenize==g)return a.Pass;if(c.tokenize!=e)return 0;var f=d&&d.charAt(0),h=c.lexical;if(!/^\s*else\b/.test(d))for(var l=c.cc.length-1;0<=l;--l){var m=
c.cc[l];if(m==D)h=h.prev;else if(m!=ca)break}"stat"==h.type&&"}"==f&&(h=h.prev);gb&&")"==h.type&&"stat"==h.prev.type&&(h=h.prev);l=h.type;m=f==l;return"vardef"==l?h.indented+("operator"==c.lastType||","==c.lastType?h.info+1:0):"form"==l&&"{"==f?h.indented:"form"==l?h.indented+hb:"stat"==l?h.indented+("operator"==c.lastType||","==c.lastType?gb||hb:0):"switch"!=h.info||m||0==b.doubleIndentSwitch?h.align?h.column+(m?0:1):h.indented+(m?0:hb):h.indented+(/^(?:case|default)\b/.test(d)?hb:2*hb)},electricChars:":{}",
blockCommentStart:Ba?null:"/*",blockCommentEnd:Ba?null:"*/",lineComment:Ba?null:"//",fold:"brace",helperType:Ba?"json":"javascript",jsonldMode:fa,jsonMode:Ba}});a.registerHelper("wordChars","javascript",/[\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/x-javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",
json:!0});a.defineMIME("application/x-json",{name:"javascript",json:!0});a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});a.defineMIME("text/typescript",{name:"javascript",typescript:!0});a.defineMIME("application/typescript",{name:"javascript",typescript:!0})});var COMPILED=!0,goog=goog||{};goog.global=this;
goog.exportPath_=function(a,c,b){a=a.split(".");b=b||goog.global;a[0]in b||!b.execScript||b.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===c?b=b[d]?b[d]:b[d]={}:b[d]=c};goog.define=function(a,c){var b=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(b=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,b)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,c){for(var b=a.split("."),d=c||goog.global,e;e=b.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,c){var b=c||goog.global,d;for(d in a)b[d]=a[d]};
goog.addDependency=function(a,c,b){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=c[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;c=b[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.global.CLOSURE_NO_DEPS=!0;goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var b=a[c].src,d=b.lastIndexOf("?"),d=-1==d?b.length:
d;if("base.js"==b.substr(d-7,7)){goog.basePath=b.substr(0,d-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}c.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in b||(b[e]=!0,c.push(e))}}var c=[],b={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<c.length;e++)if(c[e])goog.importScript_(goog.basePath+c[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},b;for(b in a)c[b]=goog.cloneObject(a[b]);return c}return a};goog.bindNative_=function(a,c,b){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,b){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.slice();c.push.apply(c,arguments);return a.apply(this,c)}};goog.mixin=function(a,c){for(var b in c)a[b]=c[b]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,b=c.createElement("script");b.type="text/javascript";b.defer=!1;b.appendChild(c.createTextNode(a));c.body.appendChild(b);
c.body.removeChild(b)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var b=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?b:d:function(a){return a};return c?a+"-"+d(c):d(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){var b=c||{},d;for(d in b){var e=(""+b[d]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,b){goog.exportPath_(a,c,b)};goog.exportProperty=function(a,c,b){a[c]=b};
goog.inherits=function(a,c){function b(){}b.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new b;a.prototype.constructor=a};
goog.base=function(a,c,b){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[c]===d)f=!0;else if(f)return g.prototype[c].apply(a,
e);if(a[c]===d)return a.constructor.prototype[c].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};goog.structs={};goog.structs.Collection=function(){};var epiviz={utils:{}};epiviz.utils.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};epiviz.utils.stringContains=function(a,c){return-1!=a.indexOf(c)};epiviz.utils.stringStartsWith=function(a,c){return 0==a.indexOf(c)};
epiviz.utils.stringEndsWith=function(a,c){return a.lastIndexOf(c)==a.length-c.length};epiviz.utils.fillArray=function(a,c){a=a||0;for(var b=Array(a),d=0;d<a;++d)b[d]=c;return b};epiviz.utils.indexOf=function(a,c){for(var b=0;b<a.length;++b)if(c(a[b]))return b;return-1};epiviz.utils.arraysEqual=function(a,c){return a==c?!0:a&&c&&a.length==c.length?!(a<c||c<a):!1};
epiviz.utils.elementsEqual=function(a,c){if(a==c)return!0;if(!a||!c||a.length!=c.length)return!1;var b={},d;for(d=0;d<a.length;++d)a[d]in b||(b[a[d]]=0),++b[a[d]];for(d=0;d<c.length;++d){if(!b[c[d]])return!1;--b[c[d]]}return!0};epiviz.utils.range=function(a,c){c=c||0;a=a||0;for(var b=Array(a),d=0;d<a;++d)b[d]=d+c;return b};epiviz.utils.arrayAppend=function(a,c){a.push.apply(a,c)};epiviz.utils.arrayFlip=function(a){for(var c={},b=0;b<a.length;++b)c[a[b]]=b;return c};
epiviz.utils.indexOfMin=function(a,c){for(var b=null,d=null,e=0;e<a.length;++e)for(var f=c?e+1:0;f<a[e].length;++f)if(null==d||a[e][f]<d)d=a[e][f],b=[e,f];return{min:d,index:b}};epiviz.utils.mapCopy=function(a){var c={},b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};epiviz.utils.mapEquals=function(a,c){if(a==c)return!0;if(!a||!c)return!1;for(var b in a)if(a.hasOwnProperty(b)&&(!c.hasOwnProperty(b)||a[b]!=c[b]))return!1;for(b in c)if(c.hasOwnProperty(b)&&!a.hasOwnProperty(b))return!1;return!0};
epiviz.utils.mapCombine=function(a,c){var b={},d;if(c)for(d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);if(a)for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b};epiviz.utils.mapJoin=function(a,c,b){c||""===c||(c=":");b||""===b||(b=",");var d="",e;for(e in a)a.hasOwnProperty(e)&&(d&&(d+=b),d+=e+c+a[e]);return d};epiviz.utils.mapKeyIntersection=function(a,c){var b=[];if(!a||!c)return b;for(var d in a)a.hasOwnProperty(d)&&d in c&&b.push(d);return b};
epiviz.utils.evaluateFullyQualifiedTypeName=function(a){try{for(var c=a.split("."),b=c.pop(),d=window,e=0;e<c.length;++e)d=d[c[e]];var f=d[b];return"function"!==typeof f?null:f}catch(g){return console.error("Unknown type name: "+a),null}};epiviz.utils.applyConstructor=function(a,c){var b;b=function(){};b.prototype=a.prototype;b=new b;b.constructor=a;a.apply(b,c);return b};
epiviz.utils.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var c=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);null!=c&&(a=parseFloat(c[1]))}return a};epiviz.utils.generatePseudoGUID=function(a){for(var c="",b=0;b<a;++b)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return c};epiviz.utils.colorize=function(a,c,b,d,e,f){return d3.scale.linear().domain([a,b,c]).range([d,f,e])};
epiviz.utils.colorizeBinary=function(a,c,b,d){return d3.scale.linear().domain([a,c]).range([b,d])};Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
epiviz.utils.ExpressionParser=function(a){function c(a){function b(){}b.prototype=a;return new b}function b(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function d(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function e(a){return"string"===typeof a?(J.lastIndex=0,J.test(a)?
"'"+a.replace(J,function(a){var b=I[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function g(a,b){return a-b}function h(a,b){return a*b}function l(a,b){return a/b}function m(a,b){return a%b}function n(a,b){return""+a+b}function q(a){return-a}function v(a){return Math.random()*(a||1)}function A(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function w(a,b){return Math.sqrt(a*a+b*b)}function E(a,
b){if("[object Array]"!=Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function D(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":q,exp:Math.exp};this.ops2={"+":f,"-":g,"*":h,"/":l,"%":m,"^":Math.pow,",":E,"||":n};
this.functions={random:v,fac:A,min:Math.min,max:Math.max,pyt:w,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var J=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,I={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};d.prototype={simplify:function(a){a=a||{};for(var e=[],f=[],g,h,l,m=this.tokens.length,n=0,n=0;n<m;n++)if(l=this.tokens[n],g=l.type_,0===g)e.push(l);else if(3===g&&
l.index_ in a)l=new b(0,0,0,a[l.index_]),e.push(l);else if(2===g&&1<e.length)h=e.pop(),g=e.pop(),l=this.ops2[l.index_],l=new b(0,0,0,l(g.number_,h.number_)),e.push(l);else if(1===g&&0<e.length)g=e.pop(),l=this.ops1[l.index_],l=new b(0,0,0,l(g.number_)),e.push(l);else{for(;0<e.length;)f.push(e.shift());f.push(l)}for(;0<e.length;)f.push(e.shift());return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},substitute:function(a,e){e instanceof d||(e=(new D).parse(String(e)));for(var f=[],g=this.tokens.length,
h,l=0,l=0;l<g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<e.tokens.length;h++){var m=e.tokens[h],m=new b(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);
else if(e.index_ in this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},evaluateArr:function(a){for(var b=
[],c=!1;!c;){var d={},e;for(e in a)if(a.hasOwnProperty(e)){if(b.length>=a[e].length){c=!0;break}d[e]=a[e][b.length]}c||b.push(this.evaluate(d))}return b},toString:function(a){for(var b=[],c,d,f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(e(f.number_));else if(2===c)d=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+d+")"):b.push("("+c+f+d+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+
c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};D.parse=function(a){return(new D).parse(a)};D.evaluate=function(a,
b){return D.parse(a).evaluate(b)};D.Expression=d;D.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:v,fac:A,exp:Math.exp,min:Math.min,max:Math.max,pyt:w,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};D.prototype={parse:function(a){this.errormsg="";this.success=!0;var e=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?
this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,e,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,"unexpected operator"),h+=2,this.addfunc(f,e,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===
(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,e,4)),g=333):this.isRightParenth()?(g&256?(a=new b(0,0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,e,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===
(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new b(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,
'unmatched "()"');0<e.length;)a=e.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a,b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,c,d){for(d=new b(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<c.length;)if(d.prio_<=c[c.length-1].prio_)a.push(c.pop());else break;c.push(d)},
isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;
case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),
this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=
0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-
1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a=
"",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=
a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}b=this.pos;c=this.expression.indexOf("}",this.pos);"{"==this.expression.charAt(b)&&c>b&&(a=this.expression.substring(b,c+1));return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-
1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=D}("undefined"===typeof exports?{}:exports);epiviz.utils.fn={};epiviz.utils.fn.farbtastic=function(a){epiviz.utils.farbtastic(this,a);return this};epiviz.utils.farbtastic=function(a,c){a=$(a).get(0);return a.farbtastic||(a.farbtastic=new epiviz.utils._farbtastic(a,c))};
epiviz.utils._farbtastic=function(a,c){var b=this;$(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var d=$(".farbtastic",a);b.wheel=$(".wheel",a).get(0);b.radius=84;b.square=100;b.width=194;navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",d).each(function(){if("none"!=this.currentStyle.backgroundImage){var a=this.currentStyle.backgroundImage,a=this.currentStyle.backgroundImage.substring(5,
a.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+a+"')"})}});b.linkTo=function(a){"object"==typeof b.callback&&$(b.callback).unbind("keyup",b.updateValue);b.color=null;if("function"==typeof a)b.callback=a;else if("object"==typeof a||"string"==typeof a)b.callback=$(a),b.callback.bind("keyup",b.updateValue),b.callback.get(0).value&&b.setColor(b.callback.get(0).value);return this};b.updateValue=function(a){this.value&&
this.value!=b.color&&b.setColor(this.value)};b.setColor=function(a){var c=b.unpack(a);b.color!=a&&c&&(b.color=a,b.rgb=c,b.hsl=b.RGBToHSL(b.rgb),b.updateDisplay());return this};b.setHSL=function(a){b.hsl=a;b.rgb=b.HSLToRGB(a);b.color=b.pack(b.rgb);b.updateDisplay();return this};b.widgetCoords=function(a){var c,d,h=a.target||a.srcElement,l=b.wheel;if("undefined"!=typeof a.offsetX){var m={x:a.offsetX,y:a.offsetY};for(a=h;a;)a.mouseX=m.x,a.mouseY=m.y,m.x+=a.offsetLeft,m.y+=a.offsetTop,a=a.offsetParent;
a=l;for(m=l=0;a;){if("undefined"!=typeof a.mouseX){c=a.mouseX-l;d=a.mouseY-m;break}l+=a.offsetLeft;m+=a.offsetTop;a=a.offsetParent}for(a=h;a;)a.mouseX=void 0,a.mouseY=void 0,a=a.offsetParent}else m=b.absolutePosition(l),c=(a.pageX||0*(a.clientX+$("html").get(0).scrollLeft))-m.x,d=(a.pageY||0*(a.clientY+$("html").get(0).scrollTop))-m.y;return{x:c-b.width/2,y:d-b.width/2}};b.mousedown=function(a){document.dragging||($(document).bind("mousemove",b.mousemove).bind("mouseup",b.mouseup),document.dragging=
!0);var c=b.widgetCoords(a);b.circleDrag=2*Math.max(Math.abs(c.x),Math.abs(c.y))>b.square;b.mousemove(a);return!1};b.mousemove=function(a){var c=b.widgetCoords(a);b.circleDrag?(a=Math.atan2(c.x,-c.y)/6.28,0>a&&(a+=1),b.setHSL([a,b.hsl[1],b.hsl[2]])):(a=Math.max(0,Math.min(1,-(c.x/b.square)+.5)),c=Math.max(0,Math.min(1,-(c.y/b.square)+.5)),b.setHSL([b.hsl[0],a,c]));return!1};b.mouseup=function(){$(document).unbind("mousemove",b.mousemove);$(document).unbind("mouseup",b.mouseup);document.dragging=!1};
b.updateDisplay=function(){var a=6.28*b.hsl[0];$(".h-marker",d).css({left:Math.round(Math.sin(a)*b.radius+b.width/2)+"px",top:Math.round(-Math.cos(a)*b.radius+b.width/2)+"px"});$(".sl-marker",d).css({left:Math.round(b.square*(.5-b.hsl[1])+b.width/2)+"px",top:Math.round(b.square*(.5-b.hsl[2])+b.width/2)+"px"});$(".color",d).css("backgroundColor",b.pack(b.HSLToRGB([b.hsl[0],1,.5])));"object"==typeof b.callback?($(b.callback).css({backgroundColor:b.color,color:.5<b.hsl[2]?"#000":"#fff"}),$(b.callback).each(function(){this.value&&
this.value!=b.color&&(this.value=b.color)})):"function"==typeof b.callback&&b.callback.call(b,b.color)};b.absolutePosition=function(a){var c={x:a.offsetLeft,y:a.offsetTop};a.offsetParent&&(a=b.absolutePosition(a.offsetParent),c.x+=a.x,c.y+=a.y);return c};b.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]);a=Math.round(255*a[2]);return"#"+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)+(16>a?"0":"")+a.toString(16)};b.unpack=function(a){if(7==a.length)return[parseInt("0x"+
a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]};b.HSLToRGB=function(a){var b,c=a[0];b=a[1];a=a[2];b=.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[this.hueToRGB(a,b,c+.33333),this.hueToRGB(a,b,c),this.hueToRGB(a,b,c-.33333)]};b.hueToRGB=function(a,b,c){c=0>c?c+1:1<c?c-1:c;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a};
b.RGBToHSL=function(a){var b,c,d,l,m=a[0],n=a[1],q=a[2];b=Math.min(m,Math.min(n,q));a=Math.max(m,Math.max(n,q));c=a-b;l=(b+a)/2;d=0;0<l&&1>l&&(d=c/(.5>l?2*l:2-2*l));b=0;0<c&&(a==m&&a!=n&&(b+=(n-q)/c),a==n&&a!=q&&(b+=2+(q-m)/c),a==q&&a!=m&&(b+=4+(m-n)/c),b/=6);return[b,d,l]};$("*",d).mousedown(b.mousedown);b.setColor("#000000");c&&b.linkTo(c)};epiviz.utils.Iterable=function(){};epiviz.utils.Iterable.prototype.foreach=function(a){};epiviz.utils.IterableArray=function(a){this._array=a};
epiviz.utils.IterableArray.prototype.foreach=function(a){for(var c=0;c<this._array.length&&!a(this._array[c]);++c);};
epiviz.Config=function(a){this.chartSaverLocation=this.dataServerLocation="";this.zoominRatio=.8;this.zoomoutRatio=1.2;this.navigationStepRatio=.2;this.navigationDelay=100;this.defaultWorkspaceSettings={name:epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME,content:{range:{seqName:"chr11",start:998E5,width:3583180},measurements:[],charts:{track:[],plot:[]}}};this.dataProviders=[sprintf("epiviz.data.WebServerDataProvider,%s,%s",epiviz.data.WebServerDataProvider.DEFAULT_ID,epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT)];
this.workspacesDataProvider=sprintf("epiviz.data.WebServerDataProvider,%s,%s","workspaces_provider",epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT);this.cacheUpdateIntervalMilliseconds=3E4;this.maxSearchResults=12;this.chartTypes=[];this.chartSettings={plot:{width:600,height:400,margins:new epiviz.ui.charts.Margins(10,5,5,5),colors:new epiviz.ui.charts.ColorPalette(epiviz.Config.COLORS_BRIGHT)},track:{width:"100%",height:120,margins:new epiviz.ui.charts.Margins(10,5,5,5),colors:new epiviz.ui.charts.ColorPalette(epiviz.Config.COLORS_BRIGHT)}};
this.chartCustomSettings={};this.clustering={algorithms:["epiviz.ui.charts.transform.clustering.NoneClustering","epiviz.ui.charts.transform.clustering.AgglomerativeClustering"],metrics:["epiviz.ui.charts.transform.clustering.EuclideanMetric"],linkages:["epiviz.ui.charts.transform.clustering.CompleteLinkage"]};if(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);if((a=epiviz.ui.WebArgsManager.WEB_ARGS["websocket-host"])&&a.length)for(c=0;c<a.length;++c)this.dataProviders.push(sprintf("epiviz.data.WebsocketDataProvider,%s,%s",
epiviz.data.WebsocketDataProvider.DEFAULT_ID+"-"+c,a[c]))}};epiviz.Config.EPIVIZ_V1_COLORS="#025167 #e7003e #ffcd00 #057d9f #970026 #ffe373 #ff8100".split(" ");epiviz.Config.COLORS_BRIGHT="#1859a9 #ed2d2e #008c47 #010101 #f37d22 #662c91 #a11d20 #b33893".split(" ");epiviz.Config.COLORS_LIGHT="#b8d2eb #f2aeac #d8e4aa #cccccc #f2d1b0 #d4b2d3 #ddb8a9 #ebbfd9".split(" ");epiviz.Config.COLORS_MEDIUM="#599ad3 #f1595f #79c36a #727272 #f9a65a #9e66ab #cd7058 #d77fb3".split(" ");
epiviz.Config.ChartPropertySettings={WIDTH:"width",HEIGHT:"height",MARGINS:"margins",COLORS:"colors"};goog.structs.IntervalTree=function(){this.comparator_=goog.structs.IntervalTree.Interval.compare};goog.structs.IntervalTree.prototype.root_=null;goog.structs.IntervalTree.prototype.comparator_=null;goog.structs.IntervalTree.prototype.minNode_=null;goog.structs.IntervalTree.prototype.maxNode_=null;
goog.structs.IntervalTree.prototype.add=function(a){if(null==this.root_)return this.maxNode_=this.minNode_=this.root_=new goog.structs.IntervalTree.Node(a,a.end()),!0;var c=null;this.traverse_(function(b){var d=null;0<this.comparator_(b.value,a)?(d=b.left,null==b.left&&(c=new goog.structs.IntervalTree.Node(a,a.end(),b),b.left=c,b==this.minNode_&&(this.minNode_=c))):0>this.comparator_(b.value,a)&&(d=b.right,null==b.right&&(c=new goog.structs.IntervalTree.Node(a,a.end(),b),b.right=c,b==this.maxNode_&&
(this.maxNode_=c)));return d});c&&(this.traverse_(function(a){a.count++;a.updateMaxEndpoint();return a.parent},c.parent),this.balance_(c.parent));return!!c};goog.structs.IntervalTree.prototype.remove=function(a){var c=null;this.traverse_(function(b){var d=null;0<this.comparator_(b.value,a)?d=b.left:0>this.comparator_(b.value,a)?d=b.right:(c=b.value,this.removeNode_(b));return d});return c};goog.structs.IntervalTree.prototype.clear=function(){this.maxNode_=this.minNode_=this.root_=null};
goog.structs.IntervalTree.prototype.contains=function(a){var c=!1;this.traverse_(function(b){var d=null,e=this.comparator_(b.value,a);0<e?d=b.left:0>e?d=b.right:c=!0;return d});return c};goog.structs.IntervalTree.prototype.getCount=function(){return this.root_?this.root_.count:0};goog.structs.IntervalTree.prototype.overlaps=function(a){return this.overlaps_(this.root_,a)};goog.structs.IntervalTree.prototype.mergeWith=function(a){var c=this;a.inOrderTraverse(function(a){c.contains(a)||c.add(a)});return this};
goog.structs.IntervalTree.prototype.overlaps_=function(a,c){if(null==a||c.start()>a.maxEndpoint)return[];var b=[];null!=a.left&&(b=b.concat(this.overlaps_(a.left,c)));a.value.overlapsWith(c)&&b.push(a.value);if(c.end()<a.value.start())return b;null!=a.right&&(b=b.concat(this.overlaps_(a.right,c)));return b};goog.structs.IntervalTree.prototype.getKthValue=function(a){return 0>a||a>=this.getCount()?null:this.getKthNode_(a).value};goog.structs.IntervalTree.prototype.getMinimum=function(){return this.getMinNode_().value};
goog.structs.IntervalTree.prototype.getMaximum=function(){return this.getMaxNode_().value};goog.structs.IntervalTree.prototype.getHeight=function(){return this.root_?this.root_.height:0};goog.structs.IntervalTree.prototype.getValues=function(){var a=[];this.inOrderTraverse(function(c){a.push(c)});return a};
goog.structs.IntervalTree.prototype.inOrderTraverse=function(a,c){if(this.root_){var b;c?this.traverse_(function(a){var d=null;0<this.comparator_(a.value,c)?(d=a.left,b=a):0>this.comparator_(a.value,c)?d=a.right:b=a;return d}):b=this.getMinNode_();for(var d=b,e=b.left?b.left:b;null!=d;)if(null!=d.left&&d.left!=e&&d.right!=e)d=d.left;else{if(d.right!=e&&a(d))break;var f=d,d=null!=d.right&&d.right!=e?d.right:d.parent,e=f}}};
goog.structs.IntervalTree.prototype.reverseOrderTraverse=function(a,c){if(this.root_){var b;c?this.traverse_(goog.bind(function(a){var d=null;0<this.comparator_(a.value,c)?d=a.left:(0>this.comparator_(a.value,c)&&(d=a.right),b=a);return d},this)):b=this.getMaxNode_();for(var d=b,e=b.right?b.right:b;null!=d;)if(null!=d.right&&d.right!=e&&d.left!=e)d=d.right;else{if(d.left!=e&&a(d.value))break;var f=d,d=null!=d.left&&d.left!=e?d.left:d.parent,e=f}}};
goog.structs.IntervalTree.prototype.traverse_=function(a,c,b){c=c?c:this.root_;for(b=b?b:null;c&&c!=b;)c=a.call(this,c)};
goog.structs.IntervalTree.prototype.balance_=function(a){this.traverse_(function(a){var b=a.left?a.left.height:0,d=a.right?a.right.height:0;1<b-d?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&this.leftRotate_(a.left),this.rightRotate_(a)):1<d-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&this.rightRotate_(a.right),this.leftRotate_(a));b=a.left?a.left.height:0;d=a.right?a.right.height:0;a.height=Math.max(b,d)+1;return a.parent},a)};
goog.structs.IntervalTree.prototype.leftRotate_=function(a){a.isLeftChild()?(a.parent.left=a.right,a.right.parent=a.parent):a.isRightChild()?(a.parent.right=a.right,a.right.parent=a.parent):(this.root_=a.right,this.root_.parent=null);var c=a.right;a.right=a.right.left;null!=a.right&&(a.right.parent=a);c.left=a;a.parent=c;c.count=a.count;a.count-=(c.right?c.right.count:0)+1;a.updateMaxEndpoint();c.updateMaxEndpoint()};
goog.structs.IntervalTree.prototype.rightRotate_=function(a){a.isLeftChild()?(a.parent.left=a.left,a.left.parent=a.parent):a.isRightChild()?(a.parent.right=a.left,a.left.parent=a.parent):(this.root_=a.left,this.root_.parent=null);var c=a.left;a.left=a.left.right;null!=a.left&&(a.left.parent=a);c.right=a;a.parent=c;c.count=a.count;a.count-=(c.left?c.left.count:0)+1;a.updateMaxEndpoint();c.updateMaxEndpoint()};
goog.structs.IntervalTree.prototype.removeNode_=function(a){if(null!=a.left||null!=a.right){var c=null,b,d;if(null!=a.left){b=this.getMaxNode_(a.left);d=b.parent;this.traverse_(function(a){a.count--;return a.parent},b);if(b!=a.left){if(b.parent.right=b.left)b.left.parent=b.parent;b.left=a.left;b.left.parent=b;c=b.parent}b.parent=a.parent;b.right=a.right;b.right&&(b.right.parent=b);a==this.maxNode_&&(this.maxNode_=b)}else{b=this.getMinNode_(a.right);d=b.parent;this.traverse_(function(a){a.count--;
return a.parent},b);if(b!=a.right){if(b.parent.left=b.right)b.right.parent=b.parent;b.right=a.right;b.right.parent=b;c=b.parent}b.parent=a.parent;b.left=a.left;b.left&&(b.left.parent=b);a==this.minNode_&&(this.minNode_=b)}b.count=a.count;a.isLeftChild()?a.parent.left=b:a.isRightChild()?a.parent.right=b:this.root_=b;null!=d&&this.traverse_(function(a){a.updateMaxEndpoint();return a.parent},d);this.balance_(c?c:b)}else this.traverse_(function(a){a.count--;return a.parent},a.parent),c=a.parent,a.isLeftChild()?
(this.special=1,a.parent.left=null,a==this.minNode_&&(this.minNode_=a.parent),this.balance_(a.parent)):a.isRightChild()?(a.parent.right=null,a==this.maxNode_&&(this.maxNode_=a.parent),this.balance_(a.parent)):this.clear(),null!=c&&this.traverse_(function(a){a.updateMaxEndpoint();return a.parent},c)};goog.structs.IntervalTree.prototype.getKthNode_=function(a,c){var b=c||this.root_,d=b.left?b.left.count:0;return a<d?this.getKthNode_(a,b.left):a==d?b:this.getKthNode_(a-d-1,b.right)};
goog.structs.IntervalTree.prototype.getMinNode_=function(a){if(!a)return this.minNode_;var c=a;this.traverse_(function(a){var d=null;a.left&&(d=c=a.left);return d},a);return c};goog.structs.IntervalTree.prototype.getMaxNode_=function(a){if(!a)return this.maxNode_;var c=a;this.traverse_(function(a){var d=null;a.right&&(d=c=a.right);return d},a);return c};goog.structs.IntervalTree.Node=function(a,c,b){this.value=a;this.parent=b?b:null;this.count=1;this.maxEndpoint=c};
goog.structs.IntervalTree.Node.prototype.left=null;goog.structs.IntervalTree.Node.prototype.right=null;goog.structs.IntervalTree.Node.prototype.height=1;goog.structs.IntervalTree.Node.prototype.isRightChild=function(){return!!this.parent&&this.parent.right==this};
goog.structs.IntervalTree.Node.prototype.updateMaxEndpoint=function(){this.maxEndpoint=this.value.end();this.right&&this.right.maxEndpoint>this.maxEndpoint&&(this.maxEndpoint=this.right.maxEndpoint);this.left&&this.left.maxEndpoint>this.maxEndpoint&&(this.maxEndpoint=this.left.maxEndpoint)};goog.structs.IntervalTree.Node.prototype.isLeftChild=function(){return!!this.parent&&this.parent.left==this};goog.structs.IntervalTree.Interval=function(){};
goog.structs.IntervalTree.Interval.prototype.overlapsWith=function(a){return!(this.start()>a.end()||this.end()<a.start())};goog.structs.IntervalTree.Interval.prototype.compareTo=function(a){return this.start()<a.start()?-1:this.start()>a.start()?1:this.end()>a.end()?-1:this.end()<a.end()?1:0};goog.structs.IntervalTree.Interval.compare=function(a,c){return a.compareTo(c)};epiviz.events={};epiviz.events.EventListener=function(a){this._id=epiviz.events.EventListener._nextId++;this._updateCallback=a};
epiviz.events.EventListener._nextId=0;epiviz.events.EventListener.prototype.update=function(a){this._updateCallback(a)};epiviz.events.EventListener.prototype.id=function(){return this._id};epiviz.events.Event=function(){this._count=0;this._listeners={};this._firing=!1};epiviz.events.Event.prototype.addListener=function(a){this._listeners[a.id()]||++this._count;this._listeners[a.id()]=a};
epiviz.events.Event.prototype.removeListener=function(a){this._listeners[a.id()]&&(delete this._listeners[a.id()],--this._count)};epiviz.events.Event.prototype.notify=function(a){if(!this._firing&&0!=this._count){this._firing=!0;for(var c in this._listeners)this._listeners.hasOwnProperty(c)&&this._listeners[c].update(a);this._firing=!1}};epiviz.events.Event.prototype.isFiring=function(){return this._firing};epiviz.events.EventResult=function(){this.value=this.errorMessage=this.success=null};
epiviz.data={};epiviz.data.MessageType={REQUEST:"request",RESPONSE:"response"};epiviz.data.Request=function(a,c,b){this._id=a;this._args=c;this._method=b};epiviz.data.Request.Method={GET:"get",POST:"post"};
epiviz.data.Request.Action={GET_ROWS:"getRows",GET_VALUES:"getValues",GET_MEASUREMENTS:"getMeasurements",SEARCH:"search",GET_SEQINFOS:"getSeqInfos",SAVE_WORKSPACE:"saveWorkspace",DELETE_WORKSPACE:"deleteWorkspace",GET_WORKSPACES:"getWorkspaces",ADD_MEASUREMENTS:"addMeasurements",REMOVE_MEASUREMENTS:"removeMeasurements",ADD_SEQINFOS:"addSeqInfos",REMOVE_SEQNAMES:"removeSeqNames",ADD_CHART:"addChart",REMOVE_CHART:"removeChart",CLEAR_DATASOURCE_GROUP_CACHE:"clearDatasourceGroupCache",FLUSH_CACHE:"flushCache",
NAVIGATE:"navigate",REDRAW:"redraw",GET_CURRENT_LOCATION:"getCurrentLocation",WRITE_DEBUG_MSG:"writeMsg"};epiviz.data.Request.createRequest=function(a,c){return new epiviz.data.Request(epiviz.data.Request._nextId++,a,c||epiviz.data.Request.Method.GET)};epiviz.data.Request.fromRawObject=function(a){return new epiviz.data.Request(a.requestId,a.data)};epiviz.data.Request._nextId=0;epiviz.data.Request.prototype.id=function(){return this._id};epiviz.data.Request.prototype.type=function(){return epiviz.data.MessageType.REQUEST};
epiviz.data.Request.prototype.method=function(){return this._method};epiviz.data.Request.prototype.joinArgs=function(a,c){a=a||"=";c=c||"&";var b=sprintf("requestId%s%s",a,this._id),d;for(d in this._args)if(this._args.hasOwnProperty(d))if(Array.isArray(this._args[d]))for(var e=0;e<this._args[d].length;++e)b+=sprintf("%s%s[]%s%s",c,d,a,this._args[d][e]);else b+=sprintf("%s%s%s%s",c,d,a,this._args[d]||"");return b};
epiviz.data.Request.prototype.isEmpty=function(){for(var a in this._args)if(this._args.hasOwnProperty(a))return!1;return!0};epiviz.data.Request.prototype.get=function(a){return a in this._args?this._args[a]:null};epiviz.data.Request.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:epiviz.utils.mapCopy(this._args)}};epiviz.data.Request.emptyRequest=function(){return epiviz.data.Request.createRequest({})};
epiviz.data.Request.getRows=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_ROWS,datasource:a.id(),seqName:c.seqName(),start:c.start(),end:c.end(),metadata:a.metadata()})};epiviz.data.Request.getValues=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_VALUES,datasource:a.datasource().id(),measurement:a.id(),seqName:c.seqName(),start:c.start(),end:c.end()})};
epiviz.data.Request.getMeasurements=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_MEASUREMENTS})};epiviz.data.Request.search=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SEARCH,q:a||"",maxResults:c})};epiviz.data.Request.getSeqInfos=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_SEQINFOS})};
epiviz.data.Request.saveWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SAVE_WORKSPACE,id:a.id(),name:a.name(),content:encodeURIComponent(JSON.stringify(a.raw().content))},epiviz.data.Request.Method.POST)};epiviz.data.Request.deleteWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.DELETE_WORKSPACE,id:a.id()},epiviz.data.Request.Method.POST)};
epiviz.data.Request.getWorkspaces=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_WORKSPACES,q:a||"",ws:c})};epiviz.data.RequestStack=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.RequestStack.prototype.pushRequest=function(a,c){this._requests.push(a);this._callbacks[a.id()]=c};
epiviz.data.RequestStack.prototype.serveData=function(a){if(this._callbacks[a.id()])if(0<this._requests.length&&this._requests[0].id()==a.id()){var c=this._callbacks[a.id()];delete this._callbacks[a.id()];this._requests=this._requests.slice(1);for(c(a.data());0<this._requests.length&&this._requests[0].id()in this._dataMap;)c=this._callbacks[this._requests[0].id()],a=this._dataMap[this._requests[0].id()],delete this._callbacks[this._requests[0].id()],delete this._dataMap[this._requests[0].id()],this._requests=
this._requests.slice(1),c(a)}else this._dataMap[a.id()]=a.data()};epiviz.data.RequestStack.prototype.clear=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.Response=function(a,c){this._id=a;this._data=c};epiviz.data.Response.prototype.id=function(){return this._id};epiviz.data.Response.prototype.data=function(){return this._data};epiviz.data.Response.prototype.type=function(){return epiviz.data.MessageType.RESPONSE};
epiviz.data.Response.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:this._data}};epiviz.data.Response.fromRawObject=function(a){return new epiviz.data.Response(a.requestId,a.data)};epiviz.measurements={};
epiviz.measurements.Measurement=function(a,c,b,d,e,f,g,h,l,m,n,q){var v=epiviz.measurements.Measurement.Type;this._id=a;this._name=c;this._type=b;this._datasource=b==v.RANGE?this:new epiviz.measurements.Measurement(d,d,v.RANGE,d,e,f,null,"Blocks Track",null,null,null,q);this._datasourceGroup=e;this._dataprovider=f;this._formula=g||null;this._defaultChartType=h||null;this._annotation=l||null;this._minValue=m||0===m?m:null;this._maxValue=n||0===n?n:null;this._metadata=q||null};
epiviz.measurements.Measurement.Type={FEATURE:"feature",RANGE:"range"};epiviz.measurements.Measurement.prototype.id=function(){return this._id};epiviz.measurements.Measurement.prototype.name=function(){return this._name};epiviz.measurements.Measurement.prototype.type=function(){return this._type};epiviz.measurements.Measurement.prototype.datasource=function(){return this._datasource};epiviz.measurements.Measurement.prototype.datasourceId=function(){return this._datasource.id()};
epiviz.measurements.Measurement.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.measurements.Measurement.prototype.dataprovider=function(){return this._dataprovider};epiviz.measurements.Measurement.prototype.formula=function(){return this._formula};
epiviz.measurements.Measurement.prototype.formulaStr=function(){if(!this._formula)return"";var a=this._formula.referredMeasurements,c=this._formula.expression.toString(),b;for(b in a)a.hasOwnProperty(b)&&(c=c.replace(new RegExp("\\{"+b+"\\}","g")," {"+a[b].name()+"} "));return c};
epiviz.measurements.Measurement.prototype.evaluate=function(a){var c={},b;for(b in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(b)){var d=this._formula.referredMeasurements[b];c["{"+b+"}"]=d.isComputed()?d.evaluate(a):a.get(d)}return this._formula.expression.evaluate(c)};
epiviz.measurements.Measurement.prototype.evaluateArr=function(a){var c={},b;for(b in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(b)){var d=this._formula.referredMeasurements[b];c["{"+b+"}"]=d.isComputed()?d.evaluateArr(a):a.get(d)}return this._formula.expression.evaluateArr(c)};epiviz.measurements.Measurement.prototype.defaultChartType=function(){return this._defaultChartType};epiviz.measurements.Measurement.prototype.annotation=function(){return this._annotation};
epiviz.measurements.Measurement.prototype.minValue=function(){return this._minValue};epiviz.measurements.Measurement.prototype.maxValue=function(){return this._maxValue};epiviz.measurements.Measurement.prototype.metadata=function(){return this._metadata};
epiviz.measurements.Measurement.prototype.componentMeasurements=function(){var a=new epiviz.measurements.MeasurementSet;if(!this._formula)return a.add(this),a;for(var c in this._formula.referredMeasurements)this._formula.referredMeasurements.hasOwnProperty(c)&&a.addAll(this._formula.referredMeasurements[c].componentMeasurements());return a};epiviz.measurements.Measurement.prototype.isComputed=function(){return this._formula?!0:!1};
epiviz.measurements.Measurement.prototype.raw=function(a){if(this._formula){var c=this._formula.referredMeasurements,b={},d;for(d in c)c.hasOwnProperty(d)&&(b[d]=a.get(c[d]))}return{id:this._id,name:this._name,type:this._type,datasourceId:this._datasource._id,datasourceGroup:this._datasourceGroup,dataprovider:this._dataprovider,formula:this._formula?{expression:this._formula.expression.toString(),referredMeasurements:b}:null,defaultChartType:this._defaultChartType,annotation:this._annotation,minValue:this._minValue,
maxValue:this._maxValue,metadata:this._metadata}};epiviz.measurements.Measurement.prototype.toString=function(){return this.name()};
epiviz.measurements.Measurement.fromRawObject=function(a,c){var b=null;if(a.formula){for(var b=epiviz.utils.ExpressionParser.parse(a.formula.expression),d={},e=b.variables(),f=0;f<e.length;++f)if(epiviz.utils.stringStartsWith(e[f],"{")&&epiviz.utils.stringEndsWith(e[f],"}")){var g=parseInt(e[f].substring(1,e[f].length-1));d[g]=c[a.formula.referredMeasurements[g]]}b={expression:b,referredMeasurements:d}}return new epiviz.measurements.Measurement(a.id,a.name,a.type,a.datasourceId,a.datasourceGroup,
a.dataprovider,b,a.defaultChartType,a.annotation,a.minValue,a.maxValue,a.metadata)};epiviz.measurements.MeasurementSet=function(a){this._measurementTree={};this._size=0;this._order=[];a&&this.addAll(a)};
epiviz.measurements.MeasurementSet.prototype.add=function(a){a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={});a.type()in this._measurementTree[a.dataprovider()]||(this._measurementTree[a.dataprovider()][a.type()]={});a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={});a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]=
{});if(a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()])return!1;this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={measurement:a,index:this._order.length};this._order.push({measurement:a,contained:!0});++this._size;return!0};
epiviz.measurements.MeasurementSet.prototype.remove=function(a){if(!(a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]&&a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]))return!1;this._order[this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].index].contained=
!1;delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];--this._size;return!0};epiviz.measurements.MeasurementSet.prototype.addAll=function(a){if(!a||!a.size())return!1;var c=!1,b=this;a.foreach(function(a){b.add(a)&&(c=!0);return!1});return c};epiviz.measurements.MeasurementSet.prototype.removeAll=function(a){var c=!1,b=this;a.foreach(function(a){b.remove(a)&&(c=!0);return!1});return c};
epiviz.measurements.MeasurementSet.prototype.foreach=function(a,c){for(var b=this.iterator(),d=b.first(),e=0;null!==d&&(c&&!c(d)||!a(d,e));d=b.next(),++e);};epiviz.measurements.MeasurementSet.prototype.iterator=function(){return new epiviz.measurements.MeasurementSet.Iterator(this)};epiviz.measurements.MeasurementSet.prototype.subset=function(a){var c=new epiviz.measurements.MeasurementSet;this.foreach(function(a){c.add(a)},a);return c};epiviz.measurements.MeasurementSet.prototype.size=function(){return this._size};
epiviz.measurements.MeasurementSet.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};epiviz.measurements.MeasurementSet.prototype.first=function(){return this.iterator().first()};
epiviz.measurements.MeasurementSet.prototype.get=function(a){if(a>=this._size||0>a)return null;if(this._size==this._order.length)return this._order[a].measurement;var c=null;this.foreach(function(b,d){return d==a?(c=b,!0):!1});return c};epiviz.measurements.MeasurementSet.prototype.toArray=function(){var a=Array(this._size);this.foreach(function(c,b){a[b]=c});return a};epiviz.measurements.MeasurementSet.prototype.raw=function(){var a=Array(this._size);this.foreach(function(c,b){a[b]=c.raw()});return a};
epiviz.measurements.MeasurementSet.Iterator=function(a){this._parent=a;this._lastIndex=null};epiviz.measurements.MeasurementSet.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;throw Error("Inconsistent MeasurementSet with size() > 0 and no first element");};
epiviz.measurements.MeasurementSet.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;this._lastIndex=this._parent._order.length;return null};epiviz.measurements.MeasurementHashtable=function(){this._size=0;this._measurementTree={};this._order=[]};
epiviz.measurements.MeasurementHashtable.prototype.put=function(a,c){if(this.contains(a)){var b=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,value:c,index:b.index};this._order[b.index]={key:a,value:c,contained:!0}}else a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={}),a.type()in this._measurementTree[a.dataprovider()]||
(this._measurementTree[a.dataprovider()][a.type()]={}),a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={}),a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]={}),this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,
value:c,index:this._order.length},this._order.push({key:a,value:c,contained:!0}),++this._size};epiviz.measurements.MeasurementHashtable.prototype.get=function(a){return this.contains(a)?this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].value:null};
epiviz.measurements.MeasurementHashtable.prototype.remove=function(a){if(!this.contains(a))return!1;var c=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._order[c.index].contained=!1;--this._size;return!0};
epiviz.measurements.MeasurementHashtable.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};
epiviz.measurements.MeasurementHashtable.prototype.clear=function(){this._size=0;this._measurementTree={};this._order=[]};epiviz.measurements.MeasurementHashtable.prototype.isEmpty=function(){return 0==this._size};epiviz.measurements.MeasurementHashtable.prototype.size=function(){return this._size};epiviz.measurements.MeasurementHashtable.prototype.foreach=function(a,c){for(var b=this.iterator(),d=b.first(),e=0;null!==d&&(c&&!c(d.key)||!a(d.key,d.value,e));d=b.next(),++e);};
epiviz.measurements.MeasurementHashtable.prototype.first=function(){return this.iterator().first()};epiviz.measurements.MeasurementHashtable.prototype.iterator=function(){return new epiviz.measurements.MeasurementHashtable.Iterator(this)};epiviz.measurements.MeasurementHashtable.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};throw Error("Inconsistent MeasurementHashtable with size() > 0 and no first element");};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};this._lastIndex=this._parent._order.length;return null};
epiviz.measurements.MeasurementsManager=function(){this._requestMeasurements=new epiviz.events.Event;this._measurementsAdded=new epiviz.events.Event;this._measurementsRemoved=new epiviz.events.Event;this._computedMeasurementsAdded=new epiviz.events.Event;this._computedMeasurementsRemoved=new epiviz.events.Event;this._measurements=new epiviz.measurements.MeasurementSet;this._computedMeasurements=new epiviz.measurements.MeasurementSet};epiviz.measurements.MeasurementsManager.prototype.initialize=function(){this._requestMeasurements.notify()};
epiviz.measurements.MeasurementsManager.prototype.onRequestMeasurements=function(){return this._requestMeasurements};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsAdded=function(){return this._measurementsAdded};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsRemoved=function(){return this._measurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsAdded=function(){return this._computedMeasurementsAdded};
epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsRemoved=function(){return this._computedMeasurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.measurements=function(){return this._measurements};epiviz.measurements.MeasurementsManager.prototype.computedMeasurements=function(){return this._computedMeasurements};
epiviz.measurements.MeasurementsManager.prototype.addMeasurements=function(a){if(a&&a.size()){var c=this;this._measurements.addAll(a);var b=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(b.add(a),c._computedMeasurements.add(a))});this._measurementsAdded.notify(a);0<b.size()&&this._computedMeasurementsAdded.notify(b)}};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurements=function(a){var c=this;this._measurements.removeAll(a);var b=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(b.add(a),c._computedMeasurements.remove(a))});this._measurementsRemoved.notify(a);0<b.size()&&this._computedMeasurementsRemoved.notify(b)};epiviz.measurements.MeasurementsManager.prototype.addMeasurement=function(a){var c=new epiviz.measurements.MeasurementSet;c.add(a);this.addMeasurements(c)};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurement=function(a){var c=new epiviz.measurements.MeasurementSet;c.add(a);this.removeMeasurements(c)};
epiviz.data.DataProvider=function(a){this._id=a;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestFlushCache=new epiviz.events.Event;this._requestClearDatasourceGroupCache=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;
this._requestRedraw=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event};epiviz.data.DataProvider.prototype.id=function(){return this._id};epiviz.data.DataProvider.prototype.getData=function(a,c){c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:null}))};epiviz.data.DataProvider.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataProvider.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};
epiviz.data.DataProvider.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataProvider.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataProvider.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataProvider.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataProvider.prototype.onRequestFlushCache=function(){return this._requestFlushCache};
epiviz.data.DataProvider.prototype.onRequestClearDatasourceGroupCache=function(){return this._requestClearDatasourceGroupCache};epiviz.data.DataProvider.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataProvider.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataProvider.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataProviderFactory=function(a){this._config=a;this._providers={};for(var c=this._size=0;c<this._config.dataProviders.length;++c){a=this._config.dataProviders[c].split(",");var b=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);b&&(a=epiviz.utils.applyConstructor(b,a.slice(1)),this._providers[a.id()]=a,++this._size)}a=new epiviz.data.EmptyResponseDataProvider;this._providers[a.id()]=a;++this._size;a=this._config.workspacesDataProvider.split(",");c=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);
this._workspacesDataProvider=epiviz.utils.applyConstructor(c,a.slice(1))};epiviz.data.DataProviderFactory.prototype.foreach=function(a){for(var c in this._providers)if(this._providers.hasOwnProperty(c)&&a(this._providers[c]))break};epiviz.data.DataProviderFactory.prototype.isEmpty=function(){return!this._size};epiviz.data.DataProviderFactory.prototype.size=function(){return this._size};epiviz.data.DataProviderFactory.prototype.get=function(a){return a in this._providers?this._providers[a]:null};
epiviz.data.DataProviderFactory.prototype.workspacesDataProvider=function(){return this._workspacesDataProvider};
epiviz.data.Cache=function(a,c){this._config=a;this._dataProviderFactory=c;this._data={};this._measurementRequestStackMap=new epiviz.measurements.MeasurementHashtable;this._measurementPendingRequestsMap=new epiviz.measurements.MeasurementHashtable;this._lastRequest=null;if(0<this._config.cacheUpdateIntervalMilliseconds){var b=this;this._intervalId=window.setTimeout(function(){b._clearUnneededData()},a.cacheUpdateIntervalMilliseconds)}};
epiviz.data.Cache.prototype.getData=function(a,c,b){var d=epiviz.measurements.Measurement.Type,e=this;this._lastRequest=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),a.start()-a.width(),a.end()+a.width());0<this._config.cacheUpdateIntervalMilliseconds&&(window.clearInterval(this._intervalId),this._intervalId=window.setTimeout(function(){e._clearUnneededData()},this._config.cacheUpdateIntervalMilliseconds));var f=this._extractComputedMeasurements(c);this._updateComputedMeasurementsData(f);
this._serveAvailableData(a,c,b);f=[a,epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.max(a.start()-a.width(),0),a.start()),new epiviz.datatypes.GenomicRange(a.seqName(),a.end(),a.width())];this._calcMeasurementNeededRanges(f,c).foreach(function(f,h){var l=e._measurementRequestStackMap.get(f);l||(l=new epiviz.data.RequestStack,e._measurementRequestStackMap.put(f,l));var m;if(0==h.length)m=epiviz.data.Request.emptyRequest(),l.pushRequest(m,function(){e._handleResponse(b,a,c,m,null,f,null)}),
l.serveData(new epiviz.data.Response(m.id(),{}));else for(var n=0;n<h.length;++n){m=f.type()==d.RANGE?epiviz.data.Request.getRows(f,h[n]):epiviz.data.Request.getValues(f,h[n]);(function(d,h){l.pushRequest(h,function(l){e._handleResponse(b,a,c,h,d,f,l)})})(h[n],m);var q=e._measurementPendingRequestsMap.get(f);q||(q={},e._measurementPendingRequestsMap.put(f,q));q[m.id()]=h[n];(e._dataProviderFactory.get(f.dataprovider())||e._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(m,
function(a){l.serveData(a)})}})};
epiviz.data.Cache.prototype._handleResponse=function(a,c,b,d,e,f,g){e&&(e=f.type()==epiviz.measurements.Measurement.Type.RANGE?new epiviz.datatypes.GenomicRangeArray(f,e,g.globalStartIndex,g.values,g.useOffset):new epiviz.datatypes.FeatureValueArray(f,e,g.globalStartIndex,g.values),this._mergeData(f,e));e=this._extractComputedMeasurements(b);this._updateComputedMeasurementsData(e);delete this._measurementPendingRequestsMap.get(f)[d.id()];this._serveAvailableData(c,b,a)};
epiviz.data.Cache.prototype._serveAvailableData=function(a,c,b){var d=epiviz.measurements.Measurement.Type,e=this,f=[],g;for(g in c)if(c.hasOwnProperty(g)){var h=c[g],l=!0,m=new epiviz.measurements.MeasurementHashtable;(function(b){h.foreach(function(c){var f=e._data[c.datasourceGroup()];if(!f||!f.rowData()||c.type()==d.FEATURE&&!f.values(c))return l=!1,!0;var g=f.rowData(),f=c.type()==d.FEATURE?f.values(c):null,g=a.subtract(g.boundaries());if(g.length||f&&(g=a.subtract(f.boundaries()),g.length))return l=
!1,!0;b.put(c,new epiviz.datatypes.GenomicDataMeasurementWrapper(c,e._data[c.datasourceGroup()]));return!1})})(m);l&&(b(g,m),f.push(g))}for(b=0;b<f.length;++b)delete c[f[b]]};
epiviz.data.Cache.prototype._calcMeasurementNeededRanges=function(a,c){var b=epiviz.measurements.Measurement.Type,d=this,e=new epiviz.measurements.MeasurementHashtable,f;for(f in c)if(c.hasOwnProperty(f)){var g=new epiviz.measurements.MeasurementSet;(function(a){c[f].foreach(function(b){b.componentMeasurements().foreach(function(b){a.add(b);a.add(b.datasource())});b.isComputed()||a.add(b.datasource())})})(g);g.foreach(function(c){var f=null,f=d._data[c.datasourceGroup()];if(!f||c.type()==b.FEATURE&&
!f.values(c))f=a.slice(0);else{var g=c.type()==b.FEATURE?f.values(c):f.rowData();if(g)for(var f=[],g=g.boundaries(),n=0;n<a.length;++n)f=f.concat(a[n].subtract(g));else f=a.slice(0)}if(g=d._measurementPendingRequestsMap.get(c))for(n=0;n<f.length;++n)for(var q in g)if(g.hasOwnProperty(q)){var v=f[n].subtract(g[q]);Array.prototype.splice.apply(f,[n,1].concat(v));if(n>=f.length)break}e.put(c,f)})}return e};
epiviz.data.Cache.prototype._extractComputedMeasurements=function(a){var c=new epiviz.measurements.MeasurementSet,b;for(b in a)a.hasOwnProperty(b)&&a[b].foreach(function(a){a.isComputed()&&c.add(a)});return c};epiviz.data.Cache.prototype._mergeData=function(a,c){var b=epiviz.measurements.Measurement.Type,d=this._data[a.datasourceGroup()];d||(d=new epiviz.datatypes.PartialSummarizedExperiment,this._data[a.datasourceGroup()]=d);a.type()==b.RANGE?d.addRowData(c):d.addValues(c)};
epiviz.data.Cache.prototype._clearUnneededData=function(){if(this._lastRequest){console.log(sprintf("Clearing data outside of range [%7s%10s%10s]",this._lastRequest.seqName(),this._lastRequest.start(),this._lastRequest.end()));var a={},c;for(c in this._data)this._data.hasOwnProperty(c)&&(a[c]=this._data[c].trim(this._lastRequest));this._data=a}};
epiviz.data.Cache.prototype._updateComputedMeasurementsData=function(a){var c=this,b=epiviz.datatypes.GenomicRange;a.foreach(function(a){var e=c._data[a.datasourceGroup()];if(!e)return!1;var f=a.componentMeasurements(),g=null,h=null,l=null;f.foreach(function(a){a=e.values(a);if(!a||!a.boundaries())return l=h=g=null,!0;if(null===l)return g=a.globalStartIndex(),h=a.size(),l=a.boundaries(),null===g;if(a.boundaries().seqName()!=l.seqName())return h=0,!0;if(g<a.globalStartIndex()){h-=a.globalStartIndex()-
g;if(0>h)return h=0,!0;g=a.globalStartIndex();var c=a.boundaries().start(),d=l.end();h>a.size()&&(h=a.size(),d=a.boundaries().end());l=b.fromStartEnd(l.seqName(),c,d)}else if(c=a.size()-g+a.globalStartIndex(),h>c){h=c;if(0>=h)return h=0,!0;l=b.fromStartEnd(l.seqName(),l.start(),a.boundaries().end())}return 0==h?!0:!1});if(null===l)return!1;var m=e.values(a);if(m&&(null===g||m.globalStartIndex()<g&&m.globalStartIndex()+m.size()>g+h))return!1;var n=new epiviz.measurements.MeasurementHashtable,q=null;
if(m&&m.size())return f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=g;d<m.globalStartIndex();++d)c.push(b.getByGlobalIndex(d));n.put(a,c)}),q=new epiviz.datatypes.FeatureValueArray(a,b.fromStartEnd(l.seqName(),l.start(),m.boundaries().start()),g,a.evaluateArr(n)),c._mergeData(a,q),n=new epiviz.measurements.MeasurementHashtable,f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=m.globalStartIndex()+m.size();d<g+h;++d)c.push(b.getByGlobalIndex(d));n.put(a,c)}),q=
new epiviz.datatypes.FeatureValueArray(a,b.fromStartEnd(l.seqName(),m.boundaries().end(),l.end()),m.globalStartIndex()+m.size(),a.evaluateArr(n)),c._mergeData(a,q),!1;n=new epiviz.measurements.MeasurementHashtable;f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=g;d<g+h;++d)c.push(b.getByGlobalIndex(d));n.put(a,c)});q=new epiviz.datatypes.FeatureValueArray(a,l,g,a.evaluateArr(n));c._mergeData(a,q);return!1})};
epiviz.data.Cache.prototype.flush=function(){this._data={};this._measurementRequestStackMap.foreach(function(a,c){c.clear()});this._measurementPendingRequestsMap.clear()};
epiviz.data.Cache.prototype.clearDatasourceGroupCache=function(a){delete this._data[a];this._measurementRequestStackMap.foreach(function(b,c){b.datasourceGroup()==a&&c.clear()});var c=[];this._measurementPendingRequestsMap.foreach(function(b,e){b.datasourceGroup()==a&&c.push(b)});for(var b=0;b<c.length;++b)this._measurementPendingRequestsMap.put(c[b],{})};
epiviz.data.DataManager=function(a,c){this._config=a;this._measurements=new epiviz.measurements.MeasurementSet;this._dataProviderFactory=c;this._cache=new epiviz.data.Cache(a,c);this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestNavigate=
new epiviz.events.Event;this._requestRedraw=new epiviz.events.Event;this._flushCache=new epiviz.events.Event;this._clearDatasourceGroupCache=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._registerProviderAddMeasurements();this._registerProviderRemoveMeasurements();this._registerProviderAddChart();this._registerProviderRemoveChart();this._registerProviderAddSeqInfos();this._registerProviderRemoveSeqNames();this._registerProviderNavigate();this._registerProviderRedraw();
this._registerProviderFlushCache();this._registerProviderClearDatasourceGroupCache();this._registerProviderGetCurrentLocation()};epiviz.data.DataManager.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataManager.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataManager.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataManager.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};
epiviz.data.DataManager.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataManager.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};epiviz.data.DataManager.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataManager.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataManager.prototype.onClearDatasourceGroupCache=function(){return this._clearDatasourceGroupCache};
epiviz.data.DataManager.prototype.onFlushCache=function(){return this._flushCache};epiviz.data.DataManager.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataManager.prototype.getSeqInfos=function(a){var c=this,b=0,d={},e=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.getSeqInfos(),function(f){if(f=f.data())for(var h=0;h<f.length;++h)f[h][0]in d||(e.push(epiviz.datatypes.SeqInfo.fromRawObject(f[h])),d[f[h][0]]=!0);++b<c._dataProviderFactory.size()||a(e.sort(epiviz.datatypes.SeqInfo.compare))})})};
epiviz.data.DataManager.prototype.getMeasurements=function(a){var c=this,b=new epiviz.measurements.MeasurementSet,d=0;this._dataProviderFactory.foreach(function(e){e.getData(epiviz.data.Request.getMeasurements(),function(f){if(f=f.data())for(var g=f.id?f.id.length||0:0,h=0;h<g;++h)b.add(new epiviz.measurements.Measurement(f.id[h],f.name[h],f.type[h],f.datasourceId[h],f.datasourceGroup[h],e.id(),null,f.defaultChartType[h],f.annotation[h],f.minValue[h],f.maxValue[h],f.metadata[h]));++d<c._dataProviderFactory.size()||
a(b)})})};epiviz.data.DataManager.prototype.getData=function(a,c,b){this._cache.getData(a,c,b)};
epiviz.data.DataManager.prototype.getWorkspaces=function(a,c,b){var d=this._dataProviderFactory.workspacesDataProvider();if(!d)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");d.getData(epiviz.data.Request.getWorkspaces(c,b),function(b){b=b.data();var c=[];if(b&&b.length)for(var d=0;d<b.length;++d)c.push({id:b[d].id,name:b[d].name,content:JSON.parse(b[d].content)});a(c)})};
epiviz.data.DataManager.prototype.saveWorkspace=function(a,c){var b=this._dataProviderFactory.workspacesDataProvider();if(!b)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");b.getData(epiviz.data.Request.saveWorkspace(a),function(a){a=a.data();c(a)})};
epiviz.data.DataManager.prototype.deleteWorkspace=function(a){var c=this._dataProviderFactory.workspacesDataProvider();if(!c)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");c.getData(epiviz.data.Request.deleteWorkspace(a),function(a){a.data()})};
epiviz.data.DataManager.prototype.search=function(a,c){var b=this,d=this._dataProviderFactory.size(),e=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.search(c,b._config.maxSearchResults),function(b){(b=b.data())&&epiviz.utils.arrayAppend(e,b);--d;d||a(e)})})};epiviz.data.DataManager.prototype.flushCache=function(){this._cache.flush();this._flushCache.notify()};
epiviz.data.DataManager.prototype.clearDatasourceGroupCache=function(a){this._cache.clearDatasourceGroupCache(a);this._clearDatasourceGroupCache.notify({datasourceGroup:a})};epiviz.data.DataManager.prototype._registerProviderAddMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestAddMeasurements.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveMeasurements.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderAddChart=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){a._requestAddChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveChart=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderAddSeqInfos=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){for(var c=[],e=0;e<b.seqInfos.length;++e)c.push(epiviz.datatypes.SeqInfo.fromRawObject(b.seqInfos[e]));a._requestAddSeqInfos.notify({seqInfos:c,result:b.result})}))})};epiviz.data.DataManager.prototype._registerProviderRemoveSeqNames=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveSeqNames.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderNavigate=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){a._requestNavigate.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderRedraw=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){a._requestRedraw.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderClearDatasourceGroupCache=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestClearDatasourceGroupCache().addListener(new epiviz.events.EventListener(function(b){a.clearDatasourceGroupCache(b.datasourceGroup);b.result.success=!0}))})};
epiviz.data.DataManager.prototype._registerProviderFlushCache=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestFlushCache().addListener(new epiviz.events.EventListener(function(b){a.flushCache();b.result.success=!0}))})};epiviz.data.DataManager.prototype._registerProviderGetCurrentLocation=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){a._requestCurrentLocation.notify(b)}))})};
epiviz.data.EmptyResponseDataProvider=function(){epiviz.data.DataProvider.call(this,epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)};epiviz.data.EmptyResponseDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.EmptyResponseDataProvider.constructor=epiviz.data.EmptyResponseDataProvider;epiviz.data.EmptyResponseDataProvider.DEFAULT_ID="empty";
epiviz.data.EmptyResponseDataProvider.prototype.getData=function(a,c){var b=a.id();switch(a.get("action")){case epiviz.data.Request.Action.GET_ROWS:c(epiviz.data.Response.fromRawObject({data:{values:{id:null,start:[],end:[],strand:[],metadata:{my_metadata:[]}},globalStartIndex:null,useOffset:!1},requestId:b}));break;case epiviz.data.Request.Action.GET_VALUES:c(epiviz.data.Response.fromRawObject({data:{values:[],globalStartIndex:null},requestId:b}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:{id:[],name:[],type:[],datasourceId:[],datasourceGroup:[],defaultChartType:[],annotation:[],minValue:[],maxValue:[],metadata:[]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SEARCH:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SAVE_WORKSPACE:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.DELETE_WORKSPACE:c(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:[]}));break;case epiviz.data.Request.Action.GET_WORKSPACES:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,a,c)}};
epiviz.data.WebsocketDataProvider=function(a,c){epiviz.data.DataProvider.call(this,a||epiviz.data.WebsocketDataProvider.DEFAULT_ID);this._websocketHost=c;this._socket=null;this._useUI="true"!=epiviz.ui.WebArgsManager.WEB_ARGS.websocketNoUI;this._debug="true"==epiviz.ui.WebArgsManager.WEB_ARGS.debug;this._callbacks={};this._requestsStack=[];this._initialize()};epiviz.data.WebsocketDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.WebsocketDataProvider.constructor=epiviz.data.WebsocketDataProvider;epiviz.data.WebsocketDataProvider.DEFAULT_ID="websocket";
epiviz.data.WebsocketDataProvider.prototype._initialize=function(){if(this._websocketHost&&"None"!=this._websocketHost)try{this._socket=new WebSocket(this._websocketHost);this._log("WebSocket - status "+this._socket.readyState);var a=this;this._socket.onopen=function(){a._onSocketOpen()};this._socket.onmessage=function(b){a._onSocketMessage(b)};this._socket.onclose=function(){a._onSocketClose()}}catch(c){this._log(c.toString())}};
epiviz.data.WebsocketDataProvider.prototype._onSocketOpen=function(){for(var a=0;a<this._requestsStack.length;++a)this._socket.send(this._requestsStack[a]);this._requestsStack=[]};epiviz.data.WebsocketDataProvider.prototype._onSocketClose=function(){this._socket=null};epiviz.data.WebsocketDataProvider.prototype._sendMessage=function(a){this.connected()&&this._socket.readyState?this._socket.send(a):this._requestsStack.push(a)};
epiviz.data.WebsocketDataProvider.prototype._onSocketMessage=function(a){this._log("Local Controller Received: "+a.data);var c=JSON.parse(a.data);if(c.type==epiviz.data.MessageType.RESPONSE)a=epiviz.data.Response.fromRawObject(c),c=this._callbacks[a.id()],delete this._callbacks[a.id()],c(a);else if(c.type==epiviz.data.MessageType.REQUEST)switch(a=epiviz.data.Request.Action,c=epiviz.data.Request.fromRawObject(c),c.get("action")){case a.ADD_MEASUREMENTS:this._addMeasurements(c);break;case a.REMOVE_MEASUREMENTS:this._removeMeasurements(c);
break;case a.ADD_SEQINFOS:this._addSeqInfos(c);break;case a.REMOVE_SEQNAMES:this._removeSeqNames(c);break;case a.ADD_CHART:this._addChart(c);break;case a.REMOVE_CHART:this._removeChart(c);break;case a.CLEAR_DATASOURCE_GROUP_CACHE:this._clearDatasourceGroupCache(c);break;case a.FLUSH_CACHE:this._flushCache(c);break;case a.NAVIGATE:this._navigate(c);break;case a.REDRAW:this._redraw(c);break;case a.GET_CURRENT_LOCATION:this._getCurrentLocation(c);break;case a.WRITE_DEBUG_MSG:this._writeDebugMsg(c)}};
epiviz.data.WebsocketDataProvider.prototype._log=function(a){this._debug&&console.log(a)};epiviz.data.WebsocketDataProvider.prototype._fireEvent=function(a,c){this._useUI?a.notify(c):c.result.success=!0};epiviz.data.WebsocketDataProvider.prototype.connected=function(){return null!=this._socket};epiviz.data.WebsocketDataProvider.prototype.getData=function(a,c){var b=JSON.stringify(a.raw());this._callbacks[a.id()]=c;this._sendMessage(b)};
epiviz.data.WebsocketDataProvider.prototype._addMeasurements=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestAddMeasurements(),{measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeMeasurements=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestRemoveMeasurements(),{measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._addSeqInfos=function(a){var c=new epiviz.events.EventResult,b=JSON.parse(a.get("seqInfos"));this._fireEvent(this.onRequestAddSeqInfos(),{seqInfos:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeSeqNames=function(a){var c=new epiviz.events.EventResult,b=JSON.parse(a.get("seqNames"));this._fireEvent(this.onRequestRemoveSeqNames(),{seqNames:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._addChart=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestAddChart(),{type:a.get("type"),measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._removeChart=function(a){var c=a.get("chartId"),b=new epiviz.events.EventResult;this._fireEvent(this.onRequestRemoveChart(),{id:c,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._clearDatasourceGroupCache=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestClearDatasourceGroupCache(),{datasourceGroup:a.get("datasourceGroup"),result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._flushCache=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestFlushCache(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._navigate=function(a){var c=JSON.parse(a.get("range")),b=new epiviz.events.EventResult;this._fireEvent(this.onRequestNavigate(),{range:epiviz.datatypes.GenomicRange.fromStartEnd(c.seqName,c.start,c.end),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._redraw=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestRedraw(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getCurrentLocation=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestCurrentLocation(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._writeDebugMsg=function(a){var c=a.get("msg"),b=document.createElement("pre");b.innerHTML=c.replace(/&/g,"&amp;").replace(/\\</g,"&lt;");a=new epiviz.data.Response(a.id(),{msg:"that msg"});document.getElementById("chart-container").appendChild(b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebServerDataProvider=function(a,c){epiviz.data.DataProvider.call(this,a||epiviz.data.WebServerDataProvider.DEFAULT_ID);this._serverEndpoint=c||epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT};
epiviz.data.WebServerDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.WebServerDataProvider.constructor=epiviz.data.WebServerDataProvider;epiviz.data.WebServerDataProvider.DEFAULT_ID="umd";epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT="data/main.php";
epiviz.data.WebServerDataProvider.prototype.getData=function(a,c){if(!a.isEmpty())if(a.method()==epiviz.data.Request.Method.GET){var b=sprintf("%s?%s",this._serverEndpoint,a.joinArgs());epiviz.data.WebServerDataProvider.makeGetRequest(b,function(a){c(epiviz.data.Response.fromRawObject(a))})}else epiviz.data.WebServerDataProvider.makePostRequest(this._serverEndpoint,a.joinArgs(),function(a){c(epiviz.data.Response.fromRawObject(a))})};
epiviz.data.WebServerDataProvider.makeGetRequest=function(a,c){var b=$.ajax({type:"get",url:a,dataType:"json",async:!0,cache:!1,processData:!0});b.done(function(a){c(a)});b.fail(function(a,b,c){});b.always(function(){})};
epiviz.data.WebServerDataProvider.makePostRequest=function(a,c,b){a=$.ajax({type:"post",url:a,data:c,dataType:"json",async:!0,cache:!1,processData:!0});a.done(function(a,c,f){b(a)});a.fail(function(a,b,c){console.error("The following error occured: "+b,c);$("#php-response").append(a.responseText)});a.always(function(){})};
epiviz.data.MockDataProvider=function(a){epiviz.data.DataProvider.call(this,a||epiviz.data.MockDataProvider.DEFAULT_ID);this._measurements=new epiviz.measurements.MeasurementSet;this._m2=this._m1=null;this._values=new epiviz.measurements.MeasurementHashtable;this._coveredRegions=[epiviz.datatypes.GenomicRange.fromStartEnd("chr6",103839409,107422589),epiviz.datatypes.GenomicRange.fromStartEnd("myChr",103839409,107422589)];this._addSeqnamesButton=$("#button-mock-add-seqnames");this._removeSeqnamesButton=
$("#button-mock-remove-seqnames");this._addMeasurementsButton=$("#button-mock-add-measurements");this._removeMeasurementsButton=$("#button-mock-remove-measurements");this._addChartButton=$("#button-mock-add-chart");this._removeChartButton=$("#button-mock-remove-chart");this._clearCacheButton=$("#button-mock-clear-cache");this._navigateButton=$("#button-mock-navigate");this._initialize();this._initializeButtonHandlers()};epiviz.data.MockDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.MockDataProvider.constructor=epiviz.data.MockDataProvider;epiviz.data.MockDataProvider.DEFAULT_ID="mock-provider";
epiviz.data.MockDataProvider.prototype._initialize=function(){var a=new epiviz.measurements.Measurement("column_1_feature","Mock Feature Measurement 1",epiviz.measurements.Measurement.Type.FEATURE,"mock_gene_expression","affymetrix_probeset",this.id(),null,"Scatter Plot",null,-5,25,["probe"]),c=new epiviz.measurements.Measurement("table_2_range","Mock Range Measurement 2",epiviz.measurements.Measurement.Type.RANGE,"table_2_range","some_datasource_group",this.id(),null,"Blocks Track",null,null,null,
null);this._m1=a;this._m2=c;this._measurements.add(a);this._values.put(a,{chr6:{values:[-1.8223838498414,-.61258676716977,-.47866833545712,-.054737753101232,-.17442192545694,-.40962816952573,3.1485057281967,3.4216926668387,1.2040975523491,6.1801932225364,6.2102197272821,2.884041505725,4.5749627572691,12.327818860502,2.1696605100473,1.6726685919334,1.3730964627525,2.572793075785,.66402453937773,.29669898727439,3.1745684364685,2.0365248658682],globalStartIndex:25879}});this._values.put(a.datasource(),
{chr6:{values:{id:[25879,25880,25881,25882,25883,25884,25885,25886,25887,25888,25889,25890,25891,25892,25893,25894,25895,25896,25897,25898,25899,25900],start:[105175968,105404923,105544697,105544697,105585562,105606155,105725440,105725440,106534195,106534195,106632351,106632351,106632351,106959730,107019846,107019846,107077453,107077453,107077453,107077489,107349417,107386386],end:[105307794,105531207,105585049,105585049,105617820,105627735,105850959,105850959,106557813,106557813,106773666,106773666,
106773666,107018326,107077362,107077362,107116292,107116292,107116292,107101698,107372546,107436473],strand:"*",metadata:{probe:"227471_at 229349_at 223853_at 228783_at 232492_at 219926_at 204117_at 37950_at 217192_s_at 228964_at 202511_s_at 202512_s_at 210639_s_at 212543_at 1555679_a_at 224509_s_at 218948_at 218949_s_at 241933_at 233089_at 223576_at 227920_at".split(" ")}},globalStartIndex:25879}});this._values.put(c,{chr6:{values:{id:[10693,10694,10695,10696,10697,10698,10699,10700,10701,10702],
start:[101857270,105250651,105309133,105411671,105596427,105627861,105856970,105962958,106046989,106105087],end:[105211359,105271461,105383016,105571044,105627384,105719343,105932269,105994851,106071935,106148917],strand:"*"},globalStartIndex:10693},myChr:{values:{id:[10703,10704,10705,10706,10707,10708,10709,10710,10711],start:[106196924,106299261,106341705,106458601,106568336,106773852,107067335,107303124,107374709],end:[106234848,106319337,106416368,106529963,106596204,106803274,107077437,107342199,
107384388],strand:"*"},globalStartIndex:10703}})};
epiviz.data.MockDataProvider.prototype._initializeButtonHandlers=function(){var a=this;this._addSeqnamesButton.button().click(function(){var b=new epiviz.events.EventResult;a.onRequestAddSeqInfos().notify({seqInfos:[["otherChr",1,1E9],["andYetAnotherChr",1,1E9]],result:b});alert("Adding seqnames was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))});this._removeSeqnamesButton.button().click(function(){var b=new epiviz.events.EventResult;a.onRequestRemoveSeqNames().notify({seqNames:["chr1",
"andYetAnotherChr"],result:b});alert("Removing seqnames was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))});this._addMeasurementsButton.button().click(function(){var b=new epiviz.events.EventResult,c=new epiviz.measurements.MeasurementSet;c.add(a._m2);a._measurements.add(a._m2);a.onRequestAddMeasurements().notify({measurements:c,result:b});alert("Adding measurements was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))});this._removeMeasurementsButton.button().click(function(){var b=
new epiviz.events.EventResult,c=new epiviz.measurements.MeasurementSet;c.add(a._m2);a._measurements.remove(a._m2);a.onRequestRemoveMeasurements().notify({measurements:c,result:b});alert("Removing measurements was "+b.success?"successful!":"unsuccessful. Error: "+b.errorMessage)});var c=[];this._addChartButton.button().click(function(){var b=new epiviz.events.EventResult,d=new epiviz.measurements.MeasurementSet;d.add(a._m2);a.onRequestAddChart().notify({type:"epiviz.plugins.charts.BlocksTrack",measurements:d,
result:b});alert("Adding chart was "+(b.success?"successful! Chart id is: "+b.value.id:"unsuccessful. Error: "+b.errorMessage));b.success&&c.push(b.value.id)});this._removeChartButton.button().click(function(){if(c.length){var b=c.pop(),d=new epiviz.events.EventResult;a.onRequestRemoveChart().notify({id:b,result:d});alert("Removing chart was "+(d.success?"successful!":"unsuccessful. Error: "+d.errorMessage))}});this._clearCacheButton.button().click(function(){});this._navigateButton.button().click(function(){var b=
new epiviz.events.EventResult;a.onRequestNavigate().notify({range:epiviz.datatypes.GenomicRange.fromStartEnd("chr6",103839409,107422589),result:b});alert("Navigate was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))})};epiviz.data.MockDataProvider.prototype.connected=function(){return!0};
epiviz.data.MockDataProvider.prototype.getData=function(a,c){var b=a.id(),d=a.get("action"),e=a.get("chr"),f=a.get("start"),g=a.get("end"),h=a.get("datasource");switch(d){case epiviz.data.Request.Action.GET_ROWS:d=this._measurements.subset(function(a){return a.datasource().datasourceId()==h}).first();if(!d)break;d=d.datasource();d=this._values.get(d)[e];if(!d||e!=this._coveredRegions[0].seqName()&&e!=this._coveredRegions[1].seqName()||f>this._coveredRegions[0].end()||g<this._coveredRegions[0].start()){c(epiviz.data.Response.fromRawObject({data:{values:{id:[],
start:[],end:[],strand:"*",metadata:{probe:[]}},globalStartIndex:null},requestId:b}));break}c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:d}));break;case epiviz.data.Request.Action.GET_VALUES:d=this._measurements.subset(function(a){return a.datasource().datasourceId()==h}).first();if(!d)break;d=this._values.get(d)[e];if(!d||e!=this._coveredRegions[0].seqName()&&e!=this._coveredRegions[1].seqName()||f>this._coveredRegions[0].end()||g<this._coveredRegions[0].start()){c(epiviz.data.Response.fromRawObject({data:{values:[],
globalStartIndex:null},requestId:b}));break}d.requestId=b;c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:d}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),type:epiviz.data.MessageType.RESPONSE,data:{id:[this._m1.id(),this._m2.id()],name:[this._m1.name(),this._m2.name()],type:[this._m1.type(),this._m2.type()],datasourceId:[this._m1.datasourceId(),this._m2.datasourceId()],datasourceGroup:[this._m1.datasourceGroup(),this._m2.datasourceGroup()],
defaultChartType:[this._m1.defaultChartType(),this._m2.defaultChartType()],annotation:[this._m1.annotation(),this._m2.annotation()],minValue:[this._m1.minValue(),this._m2.minValue()],maxValue:[this._m1.maxValue(),this._m2.maxValue()],metadata:[this._m1.metadata(),this._m2.metadata()]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[["chr1",1,248956422],["chr11",1,135086622],["myChr",1,1E9]]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,
a,c)}};epiviz.datatypes={};epiviz.datatypes.SeqInfo=function(a,c,b){this.seqName=a;this.min=c;this.max=b};epiviz.datatypes.SeqInfo.prototype.raw=function(){return[this.seqName,this.min,this.max]};epiviz.datatypes.SeqInfo.fromRawObject=function(a){return new epiviz.datatypes.SeqInfo(a[0],a[1],a[2])};
epiviz.datatypes.SeqInfo.compare=function(a,c){var b=a.seqName.replace(/\D/g,""),d=c.seqName.replace(/\D/g,"");return""==b||""==d||!epiviz.utils.stringStartsWith(a.seqName,b)&&!epiviz.utils.stringEndsWith(a.seqName,b)||!epiviz.utils.stringStartsWith(c.seqName,d)&&!epiviz.utils.stringEndsWith(c.seqName,d)?a.seqName<c.seqName?-1:a.seqName>c.seqName?1:0:parseInt(b)-parseInt(d)};
epiviz.datatypes.GenomicArray=function(a,c,b,d){this._measurement=a;this._boundaries=c;this._globalStartIndex=b;this._values=d};epiviz.datatypes.GenomicArray.prototype.boundaries=function(){return this._boundaries};epiviz.datatypes.GenomicArray.prototype.globalStartIndex=function(){return this._globalStartIndex};epiviz.datatypes.GenomicArray.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicArray.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.getByGlobalIndex=function(a){return this.get(a-this._globalStartIndex)};epiviz.datatypes.GenomicArray.prototype.concatValues=function(a,c){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.createNew=function(a,c,b,d){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.merge=function(a){if(!a||void 0==a.boundaries())return this;if(this.boundaries().seqName()!=a.boundaries().seqName()||this.boundaries().start()>a.boundaries().end()||a.boundaries().start()>this.boundaries().end())throw Error("Two genomic arrays can only be merged if they overlap or are in continuation to one another");var c=this.boundaries().start()<a.boundaries().start()?this:a,b=c==this?a:this;if(c.boundaries().end()>=b.boundaries().end())return c;var d=void 0!=
c.globalStartIndex()&&void 0!=b.globalStartIndex()?c.globalStartIndex()+c.size()-b.globalStartIndex():0;a=c.measurement();var e=void 0!=c.globalStartIndex()?c.globalStartIndex():b.globalStartIndex(),f=epiviz.datatypes.GenomicRange.fromStartEnd(c.boundaries().seqName(),c.boundaries().start(),b.boundaries().end()),c=c.concatValues(b,d);return this.createNew(a,f,e,c)};
epiviz.datatypes.GenomicRangeArray=function(a,c,b,d,e){epiviz.datatypes.GenomicArray.call(this,a,c,b,d);this._id=d.id;this._start=d.start;this._end=d.end;this._strand=d.strand||null;this._metadata=d.metadata;if(e)for(a=1;a<this._start.length;++a)this._start[a]+=this._start[a-1],this._end&&(this._end[a]+=this._end[a-1])};epiviz.datatypes.GenomicRangeArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.GenomicRangeArray.constructor=epiviz.datatypes.GenomicRangeArray;
epiviz.datatypes.GenomicRangeArray.prototype.createNew=function(a,c,b,d){return new epiviz.datatypes.GenomicRangeArray(a,c,b,d)};epiviz.datatypes.GenomicRangeArray.prototype.get=function(a){return 0>a||a>=this.size()?null:new epiviz.datatypes.GenomicRangeArray.Item(this,a)};epiviz.datatypes.GenomicRangeArray.prototype.size=function(){return this._start?this._start.length:0};
epiviz.datatypes.GenomicRangeArray.prototype.concatValues=function(a,c){var b=null;if(Array.isArray(this._strand)||Array.isArray(a._strand)||this._strand!=a._strand)var b=Array.isArray(this._strand)?this._strand:epiviz.utils.fillArray(this.size(),this._strand),d=Array.isArray(a._strand)?a._strand:epiviz.utils.fillArray(a.size(),a._strand),b=b.concat(d.slice(c));else b=this._strand;var d=this._id?this._id.concat(a._id.slice(c)):null,e=this._start.concat(a._start.slice(c)),f=this._end?this._end.concat(a._end.slice(c)):
null,g={},h;for(h in this._metadata)this._metadata.hasOwnProperty(h)&&(g[h]=this._metadata[h].concat(a._metadata[h].slice(c)));return{id:d,start:e,end:f,strand:b,metadata:g}};
epiviz.datatypes.GenomicRangeArray.prototype.trim=function(a){if(void 0==this.globalStartIndex()||!this.size()||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var c=Math.max(this.boundaries().start(),a.start()),b=Math.min(this.boundaries().end(),a.end());if(b<=c)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),c,b);for(var b=c=-1,d=0;d<this.size();++d)0>c&&this.end(d)>=a.start()&&(c=d),this._start[d]<a.end()&&(b=d+1);if(b<=c)return null;var e;if(0<=
c&&b>=c){d={id:this._id?this._id.slice(c,b):null,start:this._start.slice(c,b),end:this._end?this._end.slice(c,b):null,strand:Array.isArray(this._strand)?this._strand.slice(c,b):this._strand,metadata:{}};for(e in this._metadata)this._metadata.hasOwnProperty(e)&&(d.metadata[e]=this._metadata[e].slice(c,b));e=this.globalStartIndex()+c}else{d={id:this._id?[]:null,start:[],end:this._end?[]:null,strand:Array.isArray(this._strand)?[]:this._strand,metadata:{}};for(e in this._metadata)this._metadata.hasOwnProperty(e)&&
(d.metadata[e]=[]);e=null}return new epiviz.datatypes.GenomicRangeArray(this.measurement(),a,e,d)};epiviz.datatypes.GenomicRangeArray.prototype.ranges=function(){return this};epiviz.datatypes.GenomicRangeArray.prototype.foreach=function(a){for(var c=this.size(),b=0;b<c&&!a(this.get(b));++b);};epiviz.datatypes.GenomicRangeArray.prototype.metadataColumns=function(){return this._metadata?Object.keys(this._metadata):[]};
epiviz.datatypes.GenomicRangeArray.prototype.id=function(a){return this._id?this._id[a]:this.globalStartIndex()+a};epiviz.datatypes.GenomicRangeArray.prototype.start=function(a){return this._start[a]};epiviz.datatypes.GenomicRangeArray.prototype.end=function(a){return this._end?this._end[a]:this._start[a]};epiviz.datatypes.GenomicRangeArray.prototype.strand=function(a){return Array.isArray(this._strand)?this._strand[a]:this._strand};
epiviz.datatypes.GenomicRangeArray.prototype.metadata=function(a,c){return this._metadata&&this._metadata[a]?this._metadata[a][c]:null};epiviz.datatypes.GenomicRangeArray.prototype.rowMetadata=function(a){var c={},b;for(b in this._metadata)this._metadata.hasOwnProperty(b)&&(c[b]=this._metadata[b][a]);return c};
epiviz.datatypes.GenomicRangeArray.prototype.toString=function(){var a,c,b;this.boundaries()?(a=this.boundaries().seqName(),c=this.boundaries().start(),b=this.boundaries().end()):a=c=b="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,c,b);c=sprintf("%10s:","id");b=sprintf("%10s:","idx");var d=sprintf("%10s:","chr"),e=sprintf("%10s:","start"),f=sprintf("%10s:","end");if(void 0!=this.globalStartIndex())for(var g=this.globalStartIndex();g<this.globalStartIndex()+
this.size();++g){var h=this.getByGlobalIndex(g);c+=sprintf("%10s",h.id());b+=sprintf("%10s",g);d+=sprintf("%10s",h.seqName());e+=sprintf("%10s",h.start());f+=sprintf("%10s",h.end())}return[a,c,b,d,e,f].join("\n")};epiviz.datatypes.GenomicRangeArray.Item=function(a,c){this._index=c;this._parent=a};epiviz.datatypes.GenomicRangeArray.Item.prototype.parent=function(){return this._parent};epiviz.datatypes.GenomicRangeArray.Item.prototype.id=function(){return this._parent.id(this._index)};
epiviz.datatypes.GenomicRangeArray.Item.prototype.seqName=function(){return this._parent.boundaries().seqName()};epiviz.datatypes.GenomicRangeArray.Item.prototype.start=function(){return this._parent.start(this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.end=function(){return this._parent.end(this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.index=function(){return this._index};
epiviz.datatypes.GenomicRangeArray.Item.prototype.globalIndex=function(){return this._index+this._parent.globalStartIndex()};epiviz.datatypes.GenomicRangeArray.Item.prototype.equals=function(a){return a?this==a?!0:a.seqName()==this.seqName()&&a.start()==this.start()&&a.end()==this.end():!1};epiviz.datatypes.GenomicRangeArray.Item.prototype.strand=function(){return this._parent.strand(this._index)};
epiviz.datatypes.GenomicRangeArray.Item.prototype.metadata=function(a){return this._parent.metadata(a,this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.rowMetadata=function(){return this._parent.rowMetadata(this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.FeatureValueArray=function(a,c,b,d){epiviz.datatypes.GenomicArray.call(this,a,c,b,d)};epiviz.datatypes.FeatureValueArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.FeatureValueArray.constructor=epiviz.datatypes.FeatureValueArray;epiviz.datatypes.FeatureValueArray.prototype.createNew=function(a,c,b,d){return new epiviz.datatypes.FeatureValueArray(a,c,b,d)};epiviz.datatypes.FeatureValueArray.prototype.get=function(a){return this._values[a]};
epiviz.datatypes.FeatureValueArray.prototype.size=function(){return this._values?this._values.length:0};epiviz.datatypes.FeatureValueArray.prototype.concatValues=function(a,c){if(!a||!a.size())return this._values;this._values||(this._values=[]);return this._values.concat(a._values.slice(c))};
epiviz.datatypes.FeatureValueArray.prototype.trim=function(a,c,b){if(void 0==this.globalStartIndex()||!this.size()||void 0==c||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var d=Math.max(this.boundaries().start(),a.start()),e=Math.min(this.boundaries().end(),a.end());if(e<=d)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),d,e);d=Math.max(c,this.globalStartIndex())-this.globalStartIndex();c=Math.min(c+b,this.globalStartIndex()+this.size())-this.globalStartIndex();
if(c<=d)return null;c=this._values.slice(d,c);return new epiviz.datatypes.FeatureValueArray(this.measurement(),a,d+this.globalStartIndex(),c)};
epiviz.datatypes.FeatureValueArray.prototype.toString=function(){var a,c,b;this.boundaries()?(a=this.boundaries().seqName(),c=this.boundaries().start(),b=this.boundaries().end()):a=c=b="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,c,b);c=sprintf("%10s:","idx");b=sprintf("%10s:","val");if(void 0!=this.globalStartIndex())for(var d=this.globalStartIndex();d<this.globalStartIndex()+this.size();++d){var e=this.getByGlobalIndex(d);c+=sprintf("%10s",d);b+=sprintf("%10s",
e)}return[a,c,b].join("\n")};epiviz.datatypes.PartialSummarizedExperiment=function(){this._rowData=null;this._values=new epiviz.measurements.MeasurementHashtable};epiviz.datatypes.PartialSummarizedExperiment.prototype.ranges=function(){return this.rowData()};epiviz.datatypes.PartialSummarizedExperiment.prototype.rowData=function(){return this._rowData};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addRowData=function(a){a&&(!this._rowData||this._rowData.boundaries().seqName()!=a.boundaries().seqName()||this._rowData.boundaries().start()>a.boundaries().end()||this._rowData.boundaries().end()<a.boundaries().start()?this._rowData=a:this._rowData=this._rowData.merge(a))};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addValues=function(a){if(a){var c=this._values.get(a.measurement());!c||c.boundaries().seqName()!=a.boundaries().seqName()||c.boundaries().start()>a.boundaries().end()||c.boundaries().end()<a.boundaries().start()?this._values.put(a.measurement(),a):this._values.put(a.measurement(),c.merge(a))}};
epiviz.datatypes.PartialSummarizedExperiment.prototype.trim=function(a){var c=new epiviz.datatypes.PartialSummarizedExperiment;this._rowData&&c.addRowData(this._rowData.trim(a));c.rowData()&&this._values.foreach(function(b,d){c.addValues(d.trim(a,c.rowData().globalStartIndex(),c.rowData().size()))});return c};epiviz.datatypes.PartialSummarizedExperiment.prototype.values=function(a){return this._values.get(a)};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMinGlobalIndex=function(){var a=this._rowData?this._rowData.globalStartIndex():null;this._values&&this._values.foreach(function(c,b){b&&void 0!=b.globalStartIndex()&&(void 0==a||a>b.globalStartIndex())&&(a=b.globalStartIndex())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMaxGlobalIndex=function(){var a=this._rowData&&void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex()+this._rowData.size():null;this._values&&this._values.foreach(function(c,b){b&&void 0!=b.globalStartIndex()&&(void 0==a||a<b.globalStartIndex()+b.size())&&(a=b.globalStartIndex()+b.size())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.toString=function(){var a="",c=this.calcMinGlobalIndex(),b=this.calcMaxGlobalIndex(),a=a+sprintf("%25s",this._rowData&&this._rowData.measurement()?this._rowData.measurement().name().substr(0,22):"[undefined datasource]"),d,e,f,g,h;this._rowData&&this._rowData.boundaries()?(d=this._rowData.boundaries().seqName(),e=this._rowData.boundaries().start(),f=this._rowData.boundaries().end(),g=void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex():
"*",h=this._rowData.size()):(d=e=f=g="*",h=0);var a=a+sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",d,e,f,g,h),l=sprintf("%15s%15s%15s%15s%15s","id","idx","chr","start","end");this._values&&this._values.foreach(function(b,c){a+=sprintf("%25s",b.name().substr(0,22));c&&c.boundaries()?(d=c.boundaries().seqName(),e=c.boundaries().start(),f=c.boundaries().end()):d=e=f="*";a+=sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",d,e,f,void 0!=c.globalStartIndex()?c.globalStartIndex():
"*",c.size());l+=sprintf("%25s",b.name().substr(0,22))});for(var a=a+(l+"\n"),m=c;m<b;++m)this._rowData&&void 0!=this._rowData.globalStartIndex()&&this._rowData.globalStartIndex()<=m&&this._rowData.globalStartIndex()+this._rowData.size()>m?(g=this._rowData.getByGlobalIndex(m),c=g.id(),d=g.seqName(),e=g.start(),f=g.end()):c=d=e=f="*",a+=sprintf("%15s%15s%15s%15s%15s",c,m,d,e,f),this._values&&this._values.foreach(function(b,c){a=c&&void 0!=c.globalStartIndex()&&c.globalStartIndex()<=m&&c.globalStartIndex()+
c.size()>m?a+sprintf("%25s",c.getByGlobalIndex(m)):a+sprintf("%25s","*")}),a+="\n";return a};epiviz.datatypes.GenomicDataMeasurementWrapper=function(a,c){this._measurement=a;this._container=c;this._globalStartIndex=this._size=null};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.get=function(a){var c=this._container.rowData(),b=null,d=this.globalStartIndex(),e=null,f=b=null,g=this.size();if(!g||a>=g||0>a)return new epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem(f,e,b);void 0!=d&&(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE&&(b=this._container.values(this._measurement),e=d-b.globalStartIndex()+a,b=b.get(e)),e=d-c.globalStartIndex()+a,e=c.get(e),f=d+a);return new epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem(f,
e,b)};epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.globalStartIndex=function(){if(null!==this._globalStartIndex)return this._globalStartIndex;var a=null,c=this._container.rowData().globalStartIndex();if(null===c)return c;if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE){a=this._container.values(this._measurement);if(!a.globalStartIndex())return a.globalStartIndex();c=Math.max(c,a.globalStartIndex())}return this._globalStartIndex=c};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.size=function(){if(null!==this._size)return this._size;var a=this.globalStartIndex();if(void 0==a)return 0;var c=this._container.rowData(),b=this._container.values(this._measurement),c=c.size()-a+c.globalStartIndex();this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE&&(c=Math.min(c,b.size()-a+b.globalStartIndex()));return this._size=Math.max(0,c)};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.getByGlobalIndex=function(a){var c=this.globalStartIndex();return c?this.get(a-c):new epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem(null,null,null)};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.binarySearchStarts=function(a){var c=this._container.rowData();if(0==this.size()||!c||0==c.size()||c.start(0)>=a.end()||c.start(c.size()-1)<=a.start())return{index:null,length:0};for(var b=0,d=c.size()-1,e,f=null;b<=d;)e=Math.floor(.5*(b+d)),c.start(e)==a.start()?(f=e,d=e-1):c.start(e)<a.start()?b=e+1:d=e-1;null===f&&(f=b);for(var b=0,d=c.size()-1,g=null;b<=d;)e=Math.floor(.5*(b+d)),c.start(e)==a.end()?(g=e,b=e+1):c.start(e)<a.end()?b=e+1:d=
e-1;null===g&&(g=b-1);a=Math.max(f+c.globalStartIndex(),this.globalStartIndex());c=Math.min(g+c.globalStartIndex(),this.globalStartIndex()+this.size()-1);return{index:a-this.globalStartIndex(),length:c-a+1}};epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem=function(a,c,b){this.globalIndex=a;this.rowItem=c;this.value=0===b||b?b:null};epiviz.ui={};epiviz.ui.controls={};epiviz.ui.controls.Control=function(a){this._container=a};epiviz.ui.controls.Control.prototype.initialize=function(){};
epiviz.ui.controls.Dialog=function(a,c){this._container=$("#dialogs");this._title=a;this._id=epiviz.ui.controls.Dialog.generateId();this._handlers=c;this._container.append(sprintf('<div id="%s" title="%s" style="display: none;"></div>',this._id,this._title));this._dialog=null};epiviz.ui.controls.Dialog._nextIdIndex=0;epiviz.ui.controls.Dialog.generateId=function(){return sprintf("dialog-%s",epiviz.utils.generatePseudoGUID(5))};epiviz.ui.controls.Dialog.prototype.show=function(){};
epiviz.ui.charts={};epiviz.ui.charts.transform={};epiviz.ui.charts.transform.clustering={};epiviz.ui.charts.transform.clustering.ClusterNode=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.weight=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.children=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.data=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sort=function(a){};
epiviz.ui.charts.transform.clustering.ClusterNode.prototype.copy=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.distance=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sorted=function(){};epiviz.ui.charts.transform.clustering.ClusterSubtree=function(a,c){this._children=a;this._weight=null;this._distance=c;this._sorted=!1};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.weight=function(){if(void 0==this._weight){for(var a=0,c=0;c<this._children.length;++c)a+=this._children[c].weight();this._weight=a}return this._weight};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.children=function(){return this._children};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.data=function(){for(var a=[],c=0;c<this._children.length;++c)a=a.concat(this._children[c].data());return a};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sort=function(a){if(!this.sorted()&&(this._children.sort(function(a,c){return a.weight()-c.weight()}),a)){for(var c=0;c<this._children.length;++c)this._children[c].sort(a);this._sorted=!0}};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.copy=function(){for(var a=[],c=0;c<this._children.length;++c)a.push(this._children[c].copy());return new epiviz.ui.charts.transform.clustering.ClusterSubtree(a)};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.distance=function(){return this._distance};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sorted=function(){return this._sorted};epiviz.ui.charts.transform.clustering.ClusterLeaf=function(a){this._dataIndex=a};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.weight=function(){return 1};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.children=function(){return[]};
epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.data=function(){return[this._dataIndex]};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sort=function(){};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.copy=function(){return new epiviz.ui.charts.transform.clustering.ClusterLeaf(this._dataIndex)};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.distance=function(){return 0};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sorted=function(){return!0};
epiviz.ui.charts.transform.clustering.ClusterTree=function(a,c){this._root=a;this._data=c};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.root=function(){return this._root};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.orderedData=function(){this._root.sorted()||this._root.sort(!0);for(var a=this._root.data(),c=[],b=0;b<a.length;++b)c.push(this._data[a[b]]);return c};epiviz.ui.charts.transform.clustering.ClusteringMetric=function(){};
epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.distance=function(a,c){};epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.id=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.link=function(a,c){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.id=function(){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm=function(){};
epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.cluster=function(a,c,b){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.id=function(){};epiviz.ui.charts.transform.clustering.EuclideanMetric=function(){};
epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.distance=function(a,c){if(void 0==a||void 0==c)return null;var b=a.length,d=0,e=0,f=0,g;for(g=0;g<b;++g)if(void 0!=a[g]&&void 0!=c[g]){++d;var h=a[g]-c[g],e=e+h,f=f+h*h}0<d&&(e/=d);return f+(b-d)*e*e};epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.id=function(){return"euclidean"};epiviz.ui.charts.transform.clustering.CompleteLinkage=function(){};
epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.link=function(a,c){var b=Array(a.length-1);if(c[0]<c[1]){var d=c[0];c[0]=c[1];c[1]=d}for(var e=d=0;d<a.length;++d,++e)if(d==c[0]||d==c[1])--e;else{b[e]=a[d].slice(0);b[e].splice(c[0],1);b[e].splice(c[1],1);var f=[d<c[0]?a[d][c[0]]:a[c[0]][d],d<c[1]?a[d][c[1]]:a[c[1]][d]];b[e].push(Math.max(f[0],f[1]))}b[b.length-1]=Array(b.length);return b};epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.id=function(){return"complete"};
epiviz.ui.charts.transform.clustering.NoneClustering=function(){};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.cluster=function(a,c,b){c=[];for(b=0;b<a.length;++b)c.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(b));c=new epiviz.ui.charts.transform.clustering.ClusterSubtree(c,0);return new epiviz.ui.charts.transform.clustering.ClusterTree(c,a)};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.id=function(){return"none"};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering=function(){};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.cluster=function(a,c,b){var d,e,f=Array(a.length);for(d=0;d<a.length;++d)for(f[d]=Array(a.length),e=d+1;e<a.length;++e)f[d][e]=c.distance(a[d],a[e]);c=[];for(d=0;d<a.length;++d)c.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(d));for(;1<c.length;){e=epiviz.utils.indexOfMin(f,!0);d=e.index;e=new epiviz.ui.charts.transform.clustering.ClusterSubtree([c[d[0]],c[d[1]]],e.min);if(d[0]<d[1]){var g=d[0];d[0]=d[1];d[1]=g}c.splice(d[0],
1);c.splice(d[1],1);c.push(e);f=b.link(f,d)}return new epiviz.ui.charts.transform.clustering.ClusterTree(c[0],a)};epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.id=function(){return"agglomerative"};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory=function(a){this._config=a;this._algorithms={};this._metrics={};this._linkages={};var c;for(c=0;c<a.clustering.algorithms.length;++c){var b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.algorithms[c]),b=epiviz.utils.applyConstructor(b);this._algorithms[b.id()]=b}for(c=0;c<a.clustering.metrics.length;++c)b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.metrics[c]),b=epiviz.utils.applyConstructor(b),this._metrics[b.id()]=
b;for(c=0;c<a.clustering.linkages.length;++c)b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.linkages[c]),b=epiviz.utils.applyConstructor(b),this._linkages[b.id()]=b};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=null;epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance=function(){return epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize=function(a){epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=new epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory(a)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithm=function(a){return this._algorithms[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metric=function(a){return this._metrics[a]};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkage=function(a){return this._linkages[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithms=function(){return Object.keys(this._algorithms)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metrics=function(){return Object.keys(this._metrics)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkages=function(){return Object.keys(this._linkages)};
epiviz.ui.charts.Margins=function(a,c,b,d){this._top=a;this._left=c;this._bottom=b;this._right=d};epiviz.ui.charts.Margins.ZERO_MARGIN=new epiviz.ui.charts.Margins(0,0,0,0);epiviz.ui.charts.Margins.prototype.top=function(){return this._top};epiviz.ui.charts.Margins.prototype.left=function(){return this._left};epiviz.ui.charts.Margins.prototype.bottom=function(){return this._bottom};epiviz.ui.charts.Margins.prototype.right=function(){return this._right};
epiviz.ui.charts.Margins.prototype.sumAxis=function(a){switch(a){case epiviz.ui.charts.Axis.X:return this._left+this._right;case epiviz.ui.charts.Axis.Y:return this._top+this._bottom;default:throw Error("Invalid argument: "+a);}};epiviz.ui.charts.Margins.prototype.raw=function(){return{top:this._top,left:this._left,bottom:this._bottom,right:this._right}};epiviz.ui.charts.Margins.fromRawObject=function(a){return new epiviz.ui.charts.Margins(a.top,a.left,a.bottom,a.right)};
epiviz.ui.charts.Margins.prototype.copy=function(){return new epiviz.ui.charts.Margins(this._top,this._left,this._bottom,this._right)};epiviz.ui.charts.Margins.prototype.equals=function(a){return a?this==a?!0:this._top==a._top&&this._left==a._left&&this._bottom==a._bottom&&this._right==a._right:!1};epiviz.ui.charts.ColorPalette=function(a){this._colors=a};epiviz.ui.charts.ColorPalette.prototype.get=function(a){return this._colors[a%this._colors.length]};
epiviz.ui.charts.ColorPalette.prototype.size=function(){return this._colors.length};epiviz.ui.charts.ColorPalette.prototype.equals=function(a){return this==a?!0:a?epiviz.utils.arraysEqual(this._colors,a._colors):!1};epiviz.ui.charts.ColorPalette.prototype.copy=function(){return new epiviz.ui.charts.ColorPalette(this._colors.slice(0))};epiviz.ui.charts.ColorPalette.prototype.raw=function(){return this._colors};epiviz.ui.charts.ColorPalette.fromRawObject=function(a){return new epiviz.ui.charts.ColorPalette(a)};
epiviz.ui.charts.Axis={X:"x",Y:"y"};epiviz.ui.charts.ChartProperties=function(a,c,b,d,e,f,g,h){this.width=a;this.height=c;this.margins=b;this.measurements=d;this.colors=e;this.modifiedMethods=f;this.customSettingsValues=g||{};this.customSettingsDefs=h||[]};
epiviz.ui.charts.ChartProperties.prototype.copy=function(){return new epiviz.ui.charts.ChartProperties(this.width,this.height,this.margins?this.margins.copy():this.margins,this.measurements?new epiviz.measurements.MeasurementSet(this.measurements):this.measurements,this.colors?this.colors.copy():this.colors,this.modifiedMethods?epiviz.utils.mapCopy(this.modifiedMethods):this.modifiedMethods,this.customSettingsValues?epiviz.utils.mapCopy(this.customSettingsValues):this.customSettingsValues,this.customSettingsDefs?
this.customSettingsDefs.slice(0):this.customSettingsDefs)};epiviz.ui.charts.UiObject=function(a,c,b,d,e,f,g,h){this.id=a;this.start=c;this.end=b;this.values=d;this.seriesIndex=e;this.valueItems=f;this.measurements=g;this.cssClasses=h};
epiviz.ui.charts.UiObject.prototype.overlapsWith=function(a){if(!a)return!1;if(this===a)return!0;var c,b,d,e,f;if(!this.measurements||!this.measurements.length){if(!a.measurements||!a.measurements.length)return this.start<a.end&&this.end>a.start;for(b=0;b<a.valueItems[0].length;++b)if(f=a.valueItems[0][b].rowItem,this.start<f.end()&&this.end>f.start())return!0;return!1}var g=epiviz.utils.mapKeyIntersection(this.valueItems[0][0].rowItem.rowMetadata(),a.valueItems[0][0].rowItem.rowMetadata());if(g.length){for(c=
0;c<this.valueItems[0].length;++c)for(b=0;b<a.valueItems[0].length;++b){e=this.valueItems[0][c].rowItem;f=a.valueItems[0][b].rowItem;var h=!0;for(d=0;d<g.length;++d)if(e.metadata(g[d])!=f.metadata(g[d])){h=!1;break}if(h)return!0}return!1}for(c=0;c<this.valueItems[0].length;++c)for(b=0;b<a.valueItems[0].length;++b)if(e=this.valueItems[0][c].rowItem,f=a.valueItems[0][b].rowItem,e.overlapsWith(f))return!0;return!1};
epiviz.ui.charts.CustomSetting=function(a,c,b,d,e){this.id=a;this.type=c;this.defaultValue=b;this.label=d||a;this.possibleValues=e||null};epiviz.ui.charts.CustomSetting.Type={NUMBER:"number",STRING:"string",ARRAY:"array",BOOLEAN:"boolean",CATEGORICAL:"categorical"};epiviz.ui.charts.CustomSetting.DEFAULT="default";
epiviz.ui.charts.Chart=function(a,c,b){this._id=a;this._container=c;this._properties=b;if(b.modifiedMethods){a=b.modifiedMethods;for(var d in a)if(a.hasOwnProperty(d)&&"_setModifiedMethods"!=d)try{this[d]=eval("("+a[d]+")")}catch(e){}}this._customSettingsValues={};for(d=0;d<b.customSettingsDefs.length;++d)switch(a=b.customSettingsDefs[d],c=b.customSettingsValues[a.id],a.type){case epiviz.ui.charts.CustomSetting.Type.BOOLEAN:this._customSettingsValues[a.id]=!1===c||c?c:a.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.NUMBER:this._customSettingsValues[a.id]=
0===c||c?c:a.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.STRING:this._customSettingsValues[a.id]=""===c||c?c:a.defaultValue;break;default:this._customSettingsValues[a.id]=c||a.defaultValue}this._svgId=sprintf("%s-svg",this._id);this._svg=null;this._loaderTimeout=0;this._lastData=this._lastRange=null;this._nBins=100;this._binSize=null;this._showTooltip=!0;this._hover=new epiviz.events.Event;this._unhover=new epiviz.events.Event;this._select=new epiviz.events.Event;this._deselect=new epiviz.events.Event;
this._save=new epiviz.events.Event;this._remove=new epiviz.events.Event;this._colorsChanged=new epiviz.events.Event;this._methodsModified=new epiviz.events.Event;this._customSettingsChanged=new epiviz.events.Event;this._sizeChanged=new epiviz.events.Event;this._marginsChanged=new epiviz.events.Event};epiviz.ui.charts.Chart.SVG_MARGIN=20;
epiviz.ui.charts.Chart.prototype._initialize=function(){"100%"==this._properties.height&&(this._properties.height=this._container.height()-epiviz.ui.charts.Chart.SVG_MARGIN);"100%"==this._properties.width&&(this._properties.width=this._container.width()-epiviz.ui.charts.Chart.SVG_MARGIN);var a=this.width(),c=this.height();this._addChartButtons();this._container.append(sprintf('<svg id="%s" class="base-chart" width="%s" height="%s"></svg>',this._svgId,a,c));this._svg=d3.select("#"+this._svgId);this._addStyles();
this._addFilters();this._addResizable();this._addTooltip();this._widthDif=$("#"+this._svgId).width()-(this._container.width()-epiviz.ui.charts.Chart.SVG_MARGIN);this._heightDif=c-(this._container.height()-epiviz.ui.charts.Chart.SVG_MARGIN);this._properties.width=a;this._properties.height=c;var b=this;this._container.click(function(){b._deselect.notify()})};epiviz.ui.charts.Chart.prototype._addResizable=function(){var a=this;this._container.resizable({stop:function(c,b){a.containerResize()}})};
epiviz.ui.charts.Chart.prototype._addTooltip=function(){var a=this;this._container.tooltip({items:".item",content:function(){if(!a._showTooltip)return!1;for(var c=d3.select(this).data()[0],b=c.measurements[0].metadata(),d=sprintf("<th><b>Start</b></th><th><b>End</b></th>%s%s",b?"<th><b>"+b.join("</b></th><th><b>")+"</b></th>":"",c.values?"<th><b>"+c.measurements.join("</b></th><th><b>")+"</b></th>":""),e="",f=0;f<c.valueItems[0].length&&10>f;++f){var g="",h=c.valueItems[0][f].rowItem,g=g+sprintf("<td>%s</td><td>%s</td>",
Globalize.format(h.start(),"n0"),Globalize.format(h.end(),"n0")),h=h.rowMetadata();if(b&&h)for(var l=0;l<b.length;++l)var m=h[b[l]]||"",g=g+sprintf("<td>%s</td>",15>=m.length?m:m.substr(0,15)+"...");if(c.values)for(h=0;h<c.measurements.length;++h)g+=sprintf("<td>%s</td>",Globalize.format(c.valueItems[h][f].value,"n3"));e+=sprintf("<tr>%s</tr>",g)}f<c.valueItems[0].length&&(e+=sprintf('<tr><td colspan="%s" style="text-align: center;">...</td></tr>',2+(b?b.length:0)+(c.values?c.measurements.length:
0)));return sprintf('<table class="tooltip-table"><thead><tr>%s</tr></thead><tbody>%s</tbody></table>',d,e)},track:!0,show:!1})};
epiviz.ui.charts.Chart.prototype._addChartButtons=function(){var a=this,c=sprintf("%s-save",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 35px">Save</button>',c));var b=$("#"+c);b.button({icons:{primary:"ui-icon ui-icon-disk"},text:!1}).click(function(){a._save.notify(a._id);return!1});c=sprintf("%s-remove",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 5px">Remove</button>',c));var d=$("#"+
c);d.button({icons:{primary:"ui-icon ui-icon-cancel"},text:!1}).click(function(){a._remove.notify(a._id);return!1});c=sprintf("%s-color-picker",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 65px">Colors</button>',c));var e=$("#"+c);e.button({icons:{primary:"ui-icon ui-icon-colorpicker"},text:!1}).click(function(){var b=a.colorMap();(new epiviz.ui.controls.ColorPickerDialog({ok:function(b){a.setColorMap(b)},cancel:function(){},reset:function(){}},
b)).show();return!1});c=sprintf("%s-custom-settings",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 95px">Custom settings</button>',c));var f=$("#"+c);f.button({icons:{primary:"ui-icon ui-icon-gear"},text:!1}).click(function(){var b=epiviz.ui.charts.ChartType.CustomSettings;(new epiviz.ui.controls.CustomSettingsDialog("Edit custom settings",{ok:function(c){a._customSettingsValues=c;b.MARGIN_TOP in c&&b.MARGIN_BOTTOM in c&&b.MARGIN_LEFT in c&&
b.MARGIN_RIGHT in c&&(a._properties.margins=new epiviz.ui.charts.Margins(c[b.MARGIN_TOP],c[b.MARGIN_LEFT],c[b.MARGIN_BOTTOM],c[b.MARGIN_RIGHT]),a._marginsChanged.notify({id:a._id,margins:a._properties.margins}));a.draw();a._customSettingsChanged.notify({id:a._id,customSettingsValues:c})},cancel:function(){}},a.properties().customSettingsDefs,a._customSettingsValues)).show();return!1});c=sprintf("%s-tooltip-button",this._id);this._container.append(sprintf('<div id="%1$s-container" style="position: absolute; top: 5px; right: 125px"><input type="checkbox" id="%1$s" checked="checked" /><label for="%1$s" >Toggle Tooltip</label></div>',
c));var g=$("#"+c),h=$("#"+c+"-container");g.button({text:!1,icons:{primary:"ui-icon-comment"}}).click(function(){a._showTooltip=g.is(":checked")});c=sprintf("%s-edit-code",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 155px">Edit code</button>',c));var l=$("#"+c),m=new epiviz.ui.controls.CodeEditDialog("Edit Chart Code",{save:function(b){a._setModifiedMethods(b)},cancel:function(){}},a,"draw");l.button({icons:{primary:"ui-icon ui-icon-pencil"},
text:!1}).click(function(){m.show()});this._container.mousemove(function(){b.show();d.show();e.show();f.show();l.show();h.show()}).mouseleave(function(){b.hide();d.hide();e.hide();f.hide();l.hide();h.hide()})};epiviz.ui.charts.Chart.prototype._addStyles=function(){this._container.find("svg").append('<style type="text/css"></style>')};
epiviz.ui.charts.Chart.prototype._addFilters=function(){var a=this._svg.append("defs"),c=a.append("filter").attr("id",this._id+"-glow");c.append("feGaussianBlur").attr("id","gaussianBlur").attr("stdDeviation","2").attr("result","blurResult");c.append("feComposite").attr("id","composite").attr("in","SourceGraphic").attr("in2","blurResult").attr("operator","over");c=a.append("filter").attr("id",this._id+"-contour");c.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1").attr("result",
"blur");c.append("feColorMatrix").attr("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 10 -1 ").attr("result","colorMatrix");c.append("feFlood").attr("result","fillColor").attr("flood-color","#800000").attr("in","blur");c.append("feComposite").attr("result","composite").attr("in","fillColor").attr("in2","colorMatrix").attr("operator","atop");c.append("feComposite").attr("in","SourceGraphic").attr("in2","composite").attr("operator","atop");a=a.append("filter").attr("id",this._id+"-dropshadow").attr("filterUnits",
"userSpaceOnUse").attr("color-interpolation-filters","sRGB");c=a.append("feComponentTransfer").attr("in","SourceAlpha");c.append("feFuncR").attr("type","discrete").attr("tableValues","1");c.append("feFuncG").attr("type","discrete").attr("tableValues",198/255);c.append("feFuncB").attr("type","discrete").attr("tableValues","0");a.append("feGaussianBlur").attr("stdDeviation","2");a.append("feOffset").attr("dx","0").attr("dy","0").attr("result","shadow");a.append("feComposite").attr("in","SourceGraphic").attr("in2",
"shadow").attr("operator","over")};
epiviz.ui.charts.Chart.prototype.addLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);var a=this;this._loaderTimeout=setTimeout(function(){a._container.find(".chart-loader").remove();a._container.find(".chart-loader-background").remove();a._container.append(sprintf('<div class="loader-icon %s" style="top: %spx; left: %spx;"></div>',"chart-loader",Math.floor(.5*a.height()),Math.floor(.5*a.width())));a._container.find(".chart-loader").activity({segments:8,steps:5,opacity:.3,
width:4,space:0,length:10,color:"#0b0b0b",speed:1});a._svg.append("rect").attr("class","chart-loader-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("opacity",.7)},500)};epiviz.ui.charts.Chart.prototype.removeLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);this._container.find(".chart-loader").remove();this._container.find(".chart-loader-background").remove()};
epiviz.ui.charts.Chart.prototype._clearAxes=function(a){a=a||this._svg;a.selectAll(".xAxis").remove();a.selectAll(".yAxis").remove()};
epiviz.ui.charts.Chart.prototype._drawAxes=function(a,c,b,d,e,f,g,h){e=e||this._svg;h=h||this.margins();g=g||this.height();f=f||this.width();var l=e.select(".axes"),m=l.select(".xAxis-grid"),n=l.select(".yAxis-grid"),q=l.select(".xAxis-line"),v=l.select(".yAxis-line");l.empty()&&(l=e.append("g").attr("class","axes"));m.empty()&&(m=l.append("g").attr("class","xAxis xAxis-grid"));n.empty()&&(n=l.append("g").attr("class","yAxis yAxis-grid"));q.empty()&&(q=l.append("g").attr("class","xAxis xAxis-line"));
v.empty()&&(v=l.append("g").attr("class","yAxis yAxis-line"));a&&(m.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.x").data(a.ticks(b)).enter().append("line").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",g-h.top()-h.bottom()).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),a=d3.svg.axis().scale(a).orient("bottom").tickFormat(d3.format("s")),q.attr("transform","translate("+h.left()+", "+(g-h.bottom())+")").call(a));c&&(n.attr("transform","translate("+h.left()+
", "+h.top()+")").selectAll("line.y").data(c.ticks(d)).enter().append("line").attr("x1",0).attr("x2",f-h.left()-h.right()).attr("y1",c).attr("y2",c).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),c=d3.svg.axis().scale(c).orient("left"),v.attr("transform","translate("+h.left()+", "+h.top()+")").call(c))};
epiviz.ui.charts.Chart.prototype.resize=function(a,c){a&&(this._properties.width=a);c&&(this._properties.height=c);this.draw();this._sizeChanged.notify({id:this._id,width:this._properties.width,height:this._properties.height})};epiviz.ui.charts.Chart.prototype.containerResize=function(){this.resize(this._widthDif+this._container.width()-epiviz.ui.charts.Chart.SVG_MARGIN,this._heightDif+this._container.height()-epiviz.ui.charts.Chart.SVG_MARGIN)};
epiviz.ui.charts.Chart.prototype.draw=function(a,c){this.removeLoaderAnimation();a&&(this._binSize=Math.ceil((a.end()-a.start())/this._nBins));c&&a&&(this._lastData=c,this._lastRange=a);this._svg.attr("width",this.width()).attr("height",this.height());return[]};epiviz.ui.charts.Chart.prototype.id=function(){return this._id};epiviz.ui.charts.Chart.prototype.properties=function(){return this._properties};epiviz.ui.charts.Chart.prototype.height=function(){return this._properties.height};
epiviz.ui.charts.Chart.prototype.width=function(){return this._properties.width};epiviz.ui.charts.Chart.prototype.margins=function(){return this._properties.margins};epiviz.ui.charts.Chart.prototype.measurements=function(){return this._properties.measurements};epiviz.ui.charts.Chart.prototype.colors=function(){return this._properties.colors};epiviz.ui.charts.Chart.prototype.displayType=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.Chart.prototype.chartTypeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.Chart.prototype.onHover=function(){return this._hover};epiviz.ui.charts.Chart.prototype.onUnhover=function(){return this._unhover};epiviz.ui.charts.Chart.prototype.onSelect=function(){return this._select};epiviz.ui.charts.Chart.prototype.onDeselect=function(){return this._deselect};
epiviz.ui.charts.Chart.prototype._changeObjectSelection=function(a,c,b){var d=this._filterClassSelection(a);if(null==d){var d="",e=Math.floor(a.end/this._binSize);for(a=Math.floor(a.start/this._binSize);a<=e;++a)d+=sprintf("> .bin-%s,",a)}c=c.find(d);b.append(c);return c};
epiviz.ui.charts.Chart.prototype.doHover=function(a){var c=this._container.find(".items"),b=c.find("> .hovered"),d=c.find("> .selected"),e=d.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},c=c.find("> .item").filter(f);b.append(c);c=d.find("> .item").filter(f);e.append(c)};epiviz.ui.charts.Chart.prototype.doUnhover=function(){var a=this._container.find(".items"),c=a.find("> .hovered"),b=a.find("> .selected"),d=b.find("> .hovered");a.prepend(c.children());b.prepend(d.children())};
epiviz.ui.charts.Chart.prototype.doSelect=function(a){var c=this._container.find(".items"),b=c.find("> .hovered"),d=c.find("> .selected"),e=d.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},c=c.find("> .item").filter(f);d.append(c);c=b.find("> .item").filter(f);e.append(c)};epiviz.ui.charts.Chart.prototype.doDeselect=function(){var a=this._container.find(".items"),c=a.find("> .hovered"),b=a.find("> .selected"),d=b.find("> .hovered");a.prepend(b.find("> .item"));c.prepend(d.children())};
epiviz.ui.charts.Chart.prototype.colorMap=function(){var a=this,c=Array(this._properties.measurements.size());this._properties.measurements.foreach(function(b,d){c[d]={name:b.name(),color:a._properties.colors.get(d)}});return c};
epiviz.ui.charts.Chart.prototype.setColorMap=function(a){for(var c=[],b=0;b<a.length;++b)c.push(a[b].color);for(;b<this._properties.colors.size();++b)c.push(this._properties.colors.get(b));this._properties.colors=new epiviz.ui.charts.ColorPalette(c);this.draw();this._colorsChanged.notify({id:this._id,colors:this._properties.colors})};
epiviz.ui.charts.Chart.prototype._setModifiedMethods=function(a){if(a){for(var c in a)if(a.hasOwnProperty(c)&&"_setModifiedMethods"!=c)try{this[c]=eval("("+a[c]+")")}catch(b){(new epiviz.ui.controls.MessageDialog("Error evaluating code",{Ok:function(){}},"Could not evaluate the code for method "+c+". Error details:<br/>"+b.message,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show()}this.draw();this._methodsModified.notify({id:this._id,modifiedMethods:a})}};
epiviz.ui.charts.Chart.prototype.onSave=function(){return this._save};epiviz.ui.charts.Chart.prototype.onRemove=function(){return this._remove};epiviz.ui.charts.Chart.prototype.onColorsChanged=function(){return this._colorsChanged};epiviz.ui.charts.Chart.prototype.onMethodsModified=function(){return this._methodsModified};epiviz.ui.charts.Chart.prototype.onCustomSettingsChanged=function(){return this._customSettingsChanged};epiviz.ui.charts.Chart.prototype.onSizeChanged=function(){return this._sizeChanged};
epiviz.ui.charts.Chart.prototype.onMarginsChanged=function(){return this._marginsChanged};epiviz.ui.charts.Track=function(a,c,b){epiviz.ui.charts.Chart.call(this,a,c,b);this._highlightGroup=this._background=null};epiviz.ui.charts.Track.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Track.constructor=epiviz.ui.charts.Track;
epiviz.ui.charts.Track.prototype._initialize=function(){this._properties.width="100%";epiviz.ui.charts.Chart.prototype._initialize.call(this);var a=this;this._highlightGroup=this._svg.append("g").attr("class","track-highlight");this._background=this._svg.append("rect").attr("class","chart-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("fill-opacity","0");this._background.on("mouseover",function(){a._captureMouseHover()}).on("mousemove",
function(){a._captureMouseHover()}).on("mouseout",function(){a._unhover.notify()})};epiviz.ui.charts.Track.prototype.draw=function(a,c,b,d){a=epiviz.ui.charts.Chart.prototype.draw.call(this,a,c);this._drawTitle();return a};epiviz.ui.charts.Track.prototype.displayType=function(){return epiviz.ui.charts.ChartType.DisplayType.TRACK};
epiviz.ui.charts.Track.prototype.doHover=function(a){epiviz.ui.charts.Chart.prototype.doHover.call(this,a);if(this._lastRange){this._highlightGroup.selectAll("rect").remove();this._highlightGroup.attr("transform","translate("+this.margins().left()+", 0)");var c=epiviz.ui.charts.Axis,b=d3.scale.linear().domain([this._lastRange.start(),this._lastRange.end()]).range([0,this.width()-this.margins().sumAxis(c.X)]),c=[];if(a.measurements&&a.measurements.length)for(var d=0;d<a.valueItems[0].length;++d){var e=
a.valueItems[0][d].rowItem;c.push({start:e.start(),end:e.end()})}else c.push({start:a.start,end:a.end});this._highlightGroup.selectAll("rect").data(c,function(a){return sprintf("%s-%s",a.start,a.end)}).enter().append("rect").style("fill",this.colors().get(0)).style("fill-opacity","0.1").attr("x",function(a){var c=b(a.end+1)-b(a.start),d=Math.max(5,c);return b(a.start)+.5*c-.5*d}).attr("width",function(a){return Math.max(5,b(a.end+1)-b(a.start))}).attr("y",0).attr("height",this.height())}};
epiviz.ui.charts.Track.prototype.doUnhover=function(){epiviz.ui.charts.Chart.prototype.doUnhover.call(this);this._highlightGroup.selectAll("rect").remove()};
epiviz.ui.charts.Track.prototype._captureMouseHover=function(){if(this._lastRange){this._unhover.notify();var a=d3.scale.linear().domain([0,this.width()]).range([this._lastRange.start(),this._lastRange.end()])(d3.mouse(this._background[0][0])[0])-this._binSize/2,c=a+this._binSize,a=new epiviz.ui.charts.UiObject(sprintf("%s-highlight",this._id),a,c,null,null,null,null,null);this._hover.notify(a)}};
epiviz.ui.charts.Track.prototype._drawTitle=function(){var a=this.measurements().toArray();epiviz.utils.arrayFlip(a);var c=this;this._svg.selectAll(".chart-title").remove();var a=this._svg.selectAll(".chart-title").data(a).enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("fill",function(a,b){return c.colors().get(b)}).attr("y",c.margins().top()-5).text(function(a,b){return a.name()}),b=0,d=[];$("#"+this.id()+" .chart-title").each(function(a){d.push(b);b+=this.getBBox().width+
3});a.attr("x",function(a,b){return c.margins().left()+3+d[b]})};epiviz.ui.charts.Plot=function(a,c,b){epiviz.ui.charts.Chart.call(this,a,c,b)};epiviz.ui.charts.Plot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Plot.constructor=epiviz.ui.charts.Plot;epiviz.ui.charts.Plot.prototype.displayType=function(){return epiviz.ui.charts.ChartType.DisplayType.PLOT};
epiviz.ui.charts.ChartType=function(a){var c=epiviz.Config.ChartPropertySettings;this._config=a;this._defaultSettings=epiviz.utils.mapCombine(a.chartSettings[this.typeName()],a.chartSettings[this.chartDisplayType()]);this._defaultWidth=this._defaultSettings[c.WIDTH];this._defaultHeight=this._defaultSettings[c.HEIGHT];this._defaultMargins=this._defaultSettings[c.MARGINS];this._defaultColors=this._defaultSettings[c.COLORS];this._customSettingsValues=a.chartCustomSettings[this.typeName()]||null};
epiviz.ui.charts.ChartType.DisplayType={PLOT:"plot",TRACK:"track"};epiviz.ui.charts.ChartType.prototype.createNew=function(a,c,b){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.typeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.chartName=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.ChartType.prototype.chartHtmlAttributeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.chartDisplayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.chartContentType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.isRestrictedToSameDatasourceGroup=function(){return!1};epiviz.ui.charts.ChartType.prototype.minSelectedMeasurements=function(){return 1};
epiviz.ui.charts.ChartType.prototype.chartContainer=function(){return epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[this.chartDisplayType()]};epiviz.ui.charts.ChartType.prototype.cssClass=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.defaultWidth=function(){return this._defaultWidth};epiviz.ui.charts.ChartType.prototype.defaultHeight=function(){return this._defaultHeight};epiviz.ui.charts.ChartType.prototype.defaultMargins=function(){return this._defaultMargins};
epiviz.ui.charts.ChartType.prototype.defaultColors=function(){return this._defaultColors};epiviz.ui.charts.ChartType.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.ChartType.prototype.customSettingsDefs=function(){return[new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_TOP,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.top(),"Top margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_BOTTOM,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.bottom(),"Bottom margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_LEFT,
epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.left(),"Left margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_RIGHT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.right(),"Right margin")]};epiviz.ui.charts.ChartType.prototype.constructTitle=function(a){var c=[];a.foreach(function(a){c.push(a.name())});return c.join(", ")};
epiviz.ui.charts.ChartType.CustomSettings={MARGIN_LEFT:"marginLeft",MARGIN_RIGHT:"marginRight",MARGIN_TOP:"marginTop",MARGIN_BOTTOM:"marginBottom",X_MIN:"xMin",X_MAX:"xMax",Y_MIN:"yMin",Y_MAX:"yMax",LABEL:"label"};epiviz.ui.charts.TrackType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.TrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.TrackType.constructor=epiviz.ui.charts.TrackType;
epiviz.ui.charts.TrackType.prototype.chartDisplayType=function(){return epiviz.ui.charts.ChartType.DisplayType.TRACK};epiviz.ui.charts.TrackType.prototype.cssClass=function(){return"track-container ui-widget-content"};epiviz.ui.charts.PlotType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.PlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.PlotType.constructor=epiviz.ui.charts.PlotType;
epiviz.ui.charts.PlotType.prototype.chartDisplayType=function(){return epiviz.ui.charts.ChartType.DisplayType.PLOT};epiviz.ui.charts.PlotType.prototype.cssClass=function(){return"plot-container ui-widget-content"};epiviz.ui.charts.ChartFactory=function(a){this._config=a;this._types={};for(var c=this._size=0;c<a.chartTypes.length;++c)this.register(a.chartTypes[c])};epiviz.ui.charts.ChartFactory.prototype.size=function(){return this._size};
epiviz.ui.charts.ChartFactory.prototype.registerType=function(a){a.typeName()in this._types||++this._size;this._types[a.typeName()]=a};epiviz.ui.charts.ChartFactory.prototype.unregisterType=function(a){if(!(a.typeName()in this._types))return!1;--this._size;delete this._types[a.typeName()];return!0};epiviz.ui.charts.ChartFactory.prototype.register=function(a){a=epiviz.utils.evaluateFullyQualifiedTypeName(a);if(!a)return!1;this.registerType(new a(this._config));return!0};
epiviz.ui.charts.ChartFactory.prototype.unregister=function(a){return(a=epiviz.utils.evaluateFullyQualifiedTypeName(a))?this.unregisterType(new a(this._config)):!1};epiviz.ui.charts.ChartFactory.prototype.get=function(a){return a&&a in this._types?this._types[a]:null};epiviz.ui.charts.ChartFactory.prototype.foreach=function(a){for(var c in this._types)if(this._types.hasOwnProperty(c)&&a(c,this._types[c]))break};
epiviz.ui.charts.ChartManager=function(a){this._config=a;this._charts={};this._chartsOrder={};this._resizeInterval=null;this._chartAdded=new epiviz.events.Event;this._chartRemoved=new epiviz.events.Event;this._chartsCleared=new epiviz.events.Event;this._chartColorsChanged=new epiviz.events.Event;this._chartMethodsModified=new epiviz.events.Event;this._chartCustomSettingsChanged=new epiviz.events.Event;this._chartSizeChanged=new epiviz.events.Event;this._chartMarginsChanged=new epiviz.events.Event;
this._registerWindowResize()};
epiviz.ui.charts.ChartManager.prototype.addChart=function(a,c,b,d){b=b||sprintf("%s-%s-%s",a.chartDisplayType(),a.chartHtmlAttributeName(),epiviz.utils.generatePseudoGUID(5));var e=a.cssClass(),f=$("#"+a.chartContainer());f.append(sprintf('<div id="%s" class="%s"></div>',b,e));e=f.find("#"+b);d=d||new epiviz.ui.charts.ChartProperties(a.defaultWidth(),a.defaultHeight(),a.defaultMargins(),c,a.defaultColors(),null,a.customSettingsValues(),a.customSettingsDefs());c=a.createNew(b,e,d);this._charts[b]=
c;this._registerChartHover(c);this._registerChartUnhover(c);this._registerChartSelect(c);this._registerChartDeselect(c);this._registerChartColorsChanged(c);this._registerChartMethodsModified(c);this._registerChartCustomSettingsChanged(c);this._registerChartSizeChanged(c);this._registerChartMarginsChanged(c);this._registerChartRemove(c);this._registerChartSave(c);a.chartDisplayType()in this._chartsOrder||(this._chartsOrder[a.chartDisplayType()]=[]);this._chartsOrder[a.chartDisplayType()].push(b);this._chartAdded.notify({id:b,
type:a,properties:d,chartsOrder:this._chartsOrder});return b};epiviz.ui.charts.ChartManager.prototype.removeChart=function(a){$("#"+a).remove();var c=this._charts[a];delete this._charts[a];this._chartsOrder[c.displayType()].splice(this._chartsOrder[c.displayType()].indexOf(a),1);this._chartRemoved.notify({id:a,chartsOrder:this._chartsOrder})};
epiviz.ui.charts.ChartManager.prototype.chartsMeasurements=function(){var a={},c;for(c in this._charts)this._charts.hasOwnProperty(c)&&(a[c]=this._charts[c].measurements());return a};epiviz.ui.charts.ChartManager.prototype.updateCharts=function(a,c,b){b=b||Object.keys(this._charts);for(var d=0;d<b.length;++d)if(this._charts.hasOwnProperty(b[d])){var e=this._charts[b[d]];e&&e.draw(a,c)}};
epiviz.ui.charts.ChartManager.prototype.clear=function(){this._charts={};this._chartsOrder={};var a=epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS,c;for(c in a)a.hasOwnProperty(c)&&$("#"+a[c]).empty();this._chartsCleared.notify()};epiviz.ui.charts.ChartManager.prototype.addChartsLoaderAnimation=function(a){if(a&&this._charts[a])this._charts[a].addLoaderAnimation();else for(var c in this._charts)this._charts.hasOwnProperty(a)&&this._charts[a].addLoaderAnimation()};
epiviz.ui.charts.ChartManager.prototype.onChartAdded=function(){return this._chartAdded};epiviz.ui.charts.ChartManager.prototype.onChartRemoved=function(){return this._chartRemoved};epiviz.ui.charts.ChartManager.prototype.onChartsCleared=function(){return this._chartsCleared};epiviz.ui.charts.ChartManager.prototype.onChartColorsChanged=function(){return this._chartColorsChanged};epiviz.ui.charts.ChartManager.prototype.onChartMethodsModified=function(){return this._chartMethodsModified};
epiviz.ui.charts.ChartManager.prototype.onChartCustomSettingsChanged=function(){return this._chartCustomSettingsChanged};epiviz.ui.charts.ChartManager.prototype.onChartSizeChanged=function(){return this._chartSizeChanged};epiviz.ui.charts.ChartManager.prototype.onChartMarginsChanged=function(){return this._chartMarginsChanged};
epiviz.ui.charts.ChartManager.prototype._registerWindowResize=function(){var a=this;$(window).resize(function(c){null!==a._resizeInterval&&window.clearTimeout(a._resizeInterval);a._resizeInterval=window.setTimeout(function(){for(var b in a._charts)a._charts.hasOwnProperty(b)&&a._charts[b].containerResize();a._resizeInterval=null},500)})};
epiviz.ui.charts.ChartManager.prototype._registerChartHover=function(a){var c=this;a.onHover().addListener(new epiviz.events.EventListener(function(a){for(var d in c._charts)c._charts.hasOwnProperty(d)&&c._charts[d].doHover(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartUnhover=function(a){var c=this;a.onUnhover().addListener(new epiviz.events.EventListener(function(){for(var a in c._charts)c._charts.hasOwnProperty(a)&&c._charts[a].doUnhover()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSelect=function(a){var c=this;a.onSelect().addListener(new epiviz.events.EventListener(function(a){for(var d in c._charts)c._charts.hasOwnProperty(d)&&c._charts[d].doSelect(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartDeselect=function(a){var c=this;a.onDeselect().addListener(new epiviz.events.EventListener(function(){for(var a in c._charts)c._charts.hasOwnProperty(a)&&c._charts[a].doDeselect()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartRemove=function(a){var c=this;a.onRemove().addListener(new epiviz.events.EventListener(function(){c.removeChart(a.id())}))};epiviz.ui.charts.ChartManager.prototype._registerChartSave=function(a){var c=this;a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.controls.SaveSvgAsImageDialog({ok:function(){},cancel:function(){}},a,c._config.dataServerLocation+c._config.chartSaverLocation)).show()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartColorsChanged=function(a){var c=this;a.onColorsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartColorsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMethodsModified=function(a){var c=this;a.onMethodsModified().addListener(new epiviz.events.EventListener(function(a){c._chartMethodsModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartCustomSettingsChanged=function(a){var c=this;a.onCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartCustomSettingsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartSizeChanged=function(a){var c=this;a.onSizeChanged().addListener(new epiviz.events.EventListener(function(a){c._chartSizeChanged.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMarginsChanged=function(a){var c=this;a.onMarginsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartMarginsChanged.notify(a)}))};epiviz.workspaces={};epiviz.workspaces.UserManager=function(a){this._config=a};epiviz.workspaces.UserManager.USER_STATUS=epiviz.workspaces.UserManager.USER_STATUS||{loggedIn:!1,userData:null,oauthProvider:null};
epiviz.workspaces.UserManager.prototype.toggleLogin=function(){epiviz.workspaces.UserManager.USER_STATUS.loggedIn?this._logout():this._login()};epiviz.workspaces.UserManager.prototype._login=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"login.php?location="+a};
epiviz.workspaces.UserManager.prototype._logout=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"logout.php?logout&location="+a};
epiviz.workspaces.Workspace=function(a,c,b){this._id=a;this._name=c;this._range=b.range;this._chartsOrder={};this._chartsById={};for(var d in b.charts)if(b.charts.hasOwnProperty(d))for(this._chartsOrder[d]=[],a=0;a<b.charts[d].length;++a)this._chartsById[b.charts[d][a].id]=b.charts[d][a],this._chartsOrder[d].push(b.charts[d][a].id);this._computedMeasurements=b.computedMeasurements||new epiviz.measurements.MeasurementSet;this._changed=!1};epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME="Default Workspace";
epiviz.workspaces.Workspace.prototype.id=function(){return this._id};epiviz.workspaces.Workspace.prototype.name=function(){return this._name};epiviz.workspaces.Workspace.prototype.range=function(){return this._range};epiviz.workspaces.Workspace.prototype.charts=function(){var a={},c;for(c in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(c)){a[c]=[];for(var b=0;b<this._chartsOrder[c].length;++b)a[c].push(this._chartsById[this._chartsOrder[c][b]])}return a};
epiviz.workspaces.Workspace.prototype.chartsOrder=function(){return this._chartsOrder};epiviz.workspaces.Workspace.prototype.computedMeasurements=function(){return this._computedMeasurements};epiviz.workspaces.Workspace.prototype.chartAdded=function(a,c,b,d){this._chartsById[a]={id:a,type:c,properties:b.copy()};this._chartsOrder=d;this._setChanged()};epiviz.workspaces.Workspace.prototype.chartRemoved=function(a,c){this._chartsById[a]&&(delete this._chartsById[a],this._chartsOrder=c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartSizeChanged=function(a,c,b){if(this._chartsById[a].properties.width!=c||this._chartsById[a].properties.height!=b)this._chartsById[a].properties.width=c,this._chartsById[a].properties.height=b,this._setChanged()};epiviz.workspaces.Workspace.prototype.chartMarginsChanged=function(a,c){this._chartsById[a].properties.margins.equals(c)||(this._chartsById[a].properties.margins=c?c.copy():c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartColorsChanged=function(a,c){this._chartsById[a].properties.colors.equals(c)||(this._chartsById[a].properties.colors=c,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMethodsModified=function(a,c){epiviz.utils.mapEquals(this._chartsById[a].properties.modifiedMethods,c)||(this._chartsById[a].properties.modifiedMethods=epiviz.utils.mapCopy(c),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartCustomSettingsChanged=function(a,c){epiviz.utils.mapEquals(this._chartsById[a].properties.customSettingsValues,c)||(this._chartsById[a].properties.customSettingsValues=c?epiviz.utils.mapCopy(c):c,this._setChanged())};epiviz.workspaces.Workspace.prototype.locationChanged=function(a){this._range.equals(a)||(this._range=a,this._setChanged())};
epiviz.workspaces.Workspace.prototype.computedMeasurementsAdded=function(a){var c=this._computedMeasurements.size();this._computedMeasurements.addAll(a);c!=this._computedMeasurements.size()&&this._setChanged()};epiviz.workspaces.Workspace.prototype.computedMeasurementsRemoved=function(a){var c=this._computedMeasurements.size();this._computedMeasurements.removeAll(a);c!=this._computedMeasurements.size()&&this._setChanged()};epiviz.workspaces.Workspace.prototype.changed=function(){return this._changed};
epiviz.workspaces.Workspace.prototype.resetChanged=function(){this._changed=!1};epiviz.workspaces.Workspace.prototype._setChanged=function(){this._changed=!0};epiviz.workspaces.Workspace.prototype.copy=function(a,c){var b=this.charts();return new epiviz.workspaces.Workspace(c||null,a,{range:this._range,computedMeasurements:new epiviz.measurements.MeasurementSet(this._computedMeasurements),charts:b})};
epiviz.workspaces.Workspace.prototype.raw=function(){var a=new epiviz.measurements.MeasurementHashtable,c={};this._computedMeasurements.foreach(function(b){var c;b.componentMeasurements().foreach(function(b){var c=a.get(b);null===c&&(c=a.size(),a.put(b,c))});var d=b.formula().referredMeasurements,e;for(e in d)d.hasOwnProperty(e)&&(c=a.get(d[e]),null===c&&(c=a.size(),a.put(d[e],c)));c=a.get(b);null===c&&(c=a.size(),a.put(b,c))});for(var b in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(b)){c[b]=
[];for(var d=0;d<this._chartsOrder[b].length;++d){var e=this._chartsById[this._chartsOrder[b][d]],f=e.properties,g=[];(function(b){f.measurements.foreach(function(c){var d=a.get(c);null===d&&(d=a.size(),a.put(c,d));b.push(d)})})(g);c[b].push({id:e.id,type:e.type.typeName(),properties:{width:f.width,height:f.height,margins:f.margins.raw(),measurements:g,colors:f.colors.raw(),modifiedMethods:epiviz.utils.mapCopy(f.modifiedMethods),customSettings:f.customSettingsValues||null}})}}var h=Array(a.size());
a.foreach(function(b,c){h[c]=b.raw(a)});return{id:this._id,name:this._name,content:{range:this._range.raw(),measurements:h,charts:c}}};
epiviz.workspaces.Workspace.fromRawObject=function(a,c){var b,d=Array(a.content.measurements.length),e=new epiviz.measurements.MeasurementSet;for(b=0;b<a.content.measurements.length;++b)a.content.measurements[b].formula||(d[b]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[b]));for(b=0;b<a.content.measurements.length;++b)a.content.measurements[b].formula&&(d[b]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[b],d),e.add(d[b]));var f={},g;for(g in a.content.charts)if(a.content.charts.hasOwnProperty(g))for(f[g]=
[],b=0;b<a.content.charts[g].length;++b){for(var h=a.content.charts[g][b],l=new epiviz.measurements.MeasurementSet,m=0;m<h.properties.measurements.length;++m)l.add(d[h.properties.measurements[m]]);(m=c.get(h.type))&&f[g].push({id:h.id,type:m,properties:new epiviz.ui.charts.ChartProperties(h.properties.width,h.properties.height,epiviz.ui.charts.Margins.fromRawObject(h.properties.margins),l,epiviz.ui.charts.ColorPalette.fromRawObject(h.properties.colors),h.properties.modifiedMethods,h.properties.customSettings,
m.customSettingsDefs())})}return new epiviz.workspaces.Workspace(a.id,a.name,{range:epiviz.datatypes.GenomicRange.fromRawObject(a.content.range),computedMeasurements:e,charts:f})};
epiviz.workspaces.WorkspaceManager=function(a,c,b,d,e){this._config=a;this._locationManager=c;this._measurementsManager=b;this._chartManager=d;this._chartFactory=e;this._workspacesByName=this._workspaces=this._activeWorkspace=null;this._workspacesLoaded=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._activeWorkspaceChanging=!1;this._requestWorkspaces=new epiviz.events.Event;this._registerLocationChanged();this._registerComputedMeasurementAdded();this._registerComputedMeasurementRemoved();
this._registerChartAdded();this._registerChartRemoved();this._registerChartColorsChanged();this._registerChartMethodsModified();this._registerChartSizeChanged();this._registerChartMarginsChanged();this._registerChartCustomSettingsChanged()};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspace=function(){return this._activeWorkspace||null};epiviz.workspaces.WorkspaceManager.prototype.get=function(a){return a&&this._workspaces?this._workspaces[a]||null:null};
epiviz.workspaces.WorkspaceManager.prototype.getByName=function(a){return a&&this._workspacesByName?this._workspacesByName[a]||null:null};epiviz.workspaces.WorkspaceManager.prototype.initialize=function(){this._requestWorkspaces.notify({activeWorkspaceId:epiviz.ui.WebArgsManager.WEB_ARGS.ws||epiviz.ui.WebArgsManager.WEB_ARGS.workspace||null})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspaces=function(a,c,b){if(a){this._workspaces={};this._workspacesByName={};for(var d=0;d<a.length;++d)null!==a[d].id()&&(this._workspaces[a[d].id()]=a[d],this._workspacesByName[a[d].name()]=a[d])}c||(c=a&&a.length?a[0]:epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory));d=this._activeWorkspace;this._activeWorkspace=c;var e=epiviz.ui.WebArgsManager.WEB_ARGS;c=e.seqName||this._activeWorkspace.range().seqName();
var f=parseInt(e.start)||this._activeWorkspace.range().start(),e=parseInt(e.end)||this._activeWorkspace.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,f,e));this._workspacesLoaded.notify({activeWorkspace:this._activeWorkspace,workspaces:a});this._activeWorkspaceChanged.notify({oldValue:d,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()||b})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspace=function(a){this._workspaces[a.id()]=a;this._workspacesByName[a.name()]=a};
epiviz.workspaces.WorkspaceManager.prototype.deleteActiveWorkspace=function(){var a=this._activeWorkspace;if(a&&a.id()){delete this._workspaces[a.id()];delete this._workspacesByName[a.name()];var c=null,b;for(b in this._workspaces)if(this._workspaces.hasOwnProperty(b)){c=this._workspaces[b];break}c||(c=epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory));this._activeWorkspace=c;c=a.range().seqName();b=a.range().start();var d=a.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,
b,d));this._activeWorkspaceChanged.notify({oldValue:a,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()})}};epiviz.workspaces.WorkspaceManager.prototype.onWorkspacesLoaded=function(){return this._workspacesLoaded};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.workspaces.WorkspaceManager.prototype.startChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!0};
epiviz.workspaces.WorkspaceManager.prototype.endChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!1};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspaceChanging=function(){return this._activeWorkspaceChanging};epiviz.workspaces.WorkspaceManager.prototype.onRequestWorkspaces=function(){return this._requestWorkspaces};
epiviz.workspaces.WorkspaceManager.prototype.changeActiveWorkspace=function(a,c){if((c=c||this._workspaces[a])&&c!==this._activeWorkspace){var b=this._activeWorkspace;this._activeWorkspace=c;this._activeWorkspaceChanged.notify({oldValue:b,newValue:this._activeWorkspace,workspaceId:a})}};
epiviz.workspaces.WorkspaceManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.locationChanged(c.newValue)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartAdded=function(){var a=this;this._chartManager.onChartAdded().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartAdded(c.id,c.type,c.properties,c.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartRemoved=function(){var a=this;this._chartManager.onChartRemoved().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartRemoved(c.id,c.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartColorsChanged=function(){var a=this;this._chartManager.onChartColorsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartColorsChanged(c.id,c.colors)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsModified=function(){var a=this;this._chartManager.onChartMethodsModified().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsModified(c.id,c.modifiedMethods)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartCustomSettingsChanged=function(){var a=this;this._chartManager.onChartCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartCustomSettingsChanged(c.id,c.customSettingsValues)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartSizeChanged=function(){var a=this;this._chartManager.onChartSizeChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartSizeChanged(c.id,c.width,c.height)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarginsChanged=function(){var a=this;this._chartManager.onChartMarginsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarginsChanged(c.id,c.margins)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementAdded=function(){var a=this;this._measurementsManager.onComputedMeasurementsAdded().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsAdded(c)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementRemoved=function(){var a=this;this._measurementsManager.onComputedMeasurementsRemoved().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsRemoved(c)}))};epiviz.datatypes.GenomicRange=function(a,c,b){this._seqname=a;this._start=c;this._width=b};
epiviz.datatypes.GenomicRange.fromStartEnd=function(a,c,b){return new epiviz.datatypes.GenomicRange(a,c,b-c)};epiviz.datatypes.GenomicRange.prototype.seqName=function(){return this._seqname};epiviz.datatypes.GenomicRange.prototype.start=function(){return this._start};epiviz.datatypes.GenomicRange.prototype.width=function(){return this._width};epiviz.datatypes.GenomicRange.prototype.end=function(){return this._start+this._width};
epiviz.datatypes.GenomicRange.prototype.isEmpty=function(){return 0>=this._width};
epiviz.datatypes.GenomicRange.prototype.subtract=function(a){return!a||a.seqName()!=this._seqname||a.isEmpty()||a.start()>=this.end()||this._start>=a.end()?[this]:a.start()<=this._start&&a.end()>=this.end()?[]:a.start()>this._start&&a.end()<this.end()?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,a.start()),epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]:a.start()>this._start?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,
a.start())]:[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]};epiviz.datatypes.GenomicRange.prototype.equals=function(a){return a?a==this?!0:this._seqname==a._seqname&&this._start==a._start&&this._width==a._width:!1};epiviz.datatypes.GenomicRange.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.GenomicRange.prototype.raw=function(){return{seqName:this._seqname,start:this._start,width:this._width}};epiviz.datatypes.GenomicRange.fromRawObject=function(a){return new epiviz.datatypes.GenomicRange(a.seqName,a.start,a.width)};
epiviz.ui.LocationManager=function(a){this._seqInfos={};this._timeout=this._lastUnfilledRequest=this._currentLocation=null;this._navigationDelay=a.navigationDelay;this._currentLocationChanged=new epiviz.events.Event;this._seqInfosUpdated=new epiviz.events.Event;this._requestSeqInfos=new epiviz.events.Event};epiviz.ui.LocationManager.prototype.initialize=function(){this._requestSeqInfos.notify()};
epiviz.ui.LocationManager.prototype.changeCurrentLocation=function(a){if(!this._currentLocationChanged.isFiring()){this._lastUnfilledRequest=a;null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null);var c=this;a=function(){var a=c._lastUnfilledRequest;null!==a&&c._doChangeCurrentLocation(a)};this._navigationDelay?this._timeout=window.setTimeout(a,this._navigationDelay):a()}};
epiviz.ui.LocationManager.prototype._doChangeCurrentLocation=function(a){var c=this._currentLocation,b=a.seqName();if(!(a.seqName()in this._seqInfos)){if(!c)return;b=c.seqName()}var d=a.start()>=this._seqInfos[b].min?a.start():this._seqInfos[b].min,e=d+a.width();e>this._seqInfos[b].max&&(e=this._seqInfos[b].max,d=Math.max(this._seqInfos[b].min,e-a.width()));this._lastUnfilledRequest=null;this._currentLocation=epiviz.datatypes.GenomicRange.fromStartEnd(b,d,e);this._currentLocationChanged.notify({oldValue:c,
newValue:this._currentLocation})};epiviz.ui.LocationManager.prototype.currentLocation=function(){return this._currentLocation};epiviz.ui.LocationManager.prototype.lastUnfilledLocationChangeRequest=function(){return this._lastUnfilledRequest};epiviz.ui.LocationManager.prototype.updateSeqInfos=function(a){this._seqInfos={};for(var c=0;c<a.length;++c)this._seqInfos[a[c].seqName]=a[c];this._seqInfosUpdated.notify(a);null!==this._lastUnfilledRequest&&this._doChangeCurrentLocation(this._lastUnfilledRequest)};
epiviz.ui.LocationManager.prototype.addSeqInfos=function(a){for(var c=0;c<a.length;++c)this._seqInfos[a[c].seqName]||(this._seqInfos[a[c].seqName]=a[c]);a=[];for(var b in this._seqInfos)this._seqInfos.hasOwnProperty(b)&&a.push(this._seqInfos[b]);this._seqInfosUpdated.notify(a)};
epiviz.ui.LocationManager.prototype.removeSeqNames=function(a){for(var c=0;c<a.length;++c)delete this._seqInfos[a[c]];a=[];for(var b in this._seqInfos)this._seqInfos.hasOwnProperty(b)&&a.push(this._seqInfos[b]);this._seqInfosUpdated.notify(a);this._currentLocation.seqName()in this._seqInfos||this.changeCurrentLocation(new epiviz.datatypes.GenomicRange(a[0].seqName,this._currentLocation.start(),this._currentLocation.width()))};epiviz.ui.LocationManager.prototype.seqInfos=function(){return this._seqInfos};
epiviz.ui.LocationManager.prototype.onCurrentLocationChanged=function(){return this._currentLocationChanged};epiviz.ui.LocationManager.prototype.onSeqInfosUpdated=function(){return this._seqInfosUpdated};epiviz.ui.LocationManager.prototype.onRequestSeqInfos=function(){return this._requestSeqInfos};
epiviz.ui.ControlManager=function(a,c,b,d,e){this._config=a;this._chartFactory=c;this._chartManager=b;this._measurementsManager=d;this._locationManager=e;this._addChart=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._saveWorkspace=new epiviz.events.Event;this._deleteActiveWorkspace=new epiviz.events.Event;this._loginLinkClicked=new epiviz.events.Event;this._searchWorkspaces=new epiviz.events.Event;this._search=new epiviz.events.Event;this._activeWorkspaceInfo=null;
this._stepRatio=a.navigationStepRatio;this._zoominRatio=a.zoominRatio;this._zoomoutRatio=a.zoomoutRatio};epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS={plot:"chart-container",track:"track-container"};
epiviz.ui.ControlManager.prototype.initialize=function(){this._initializeAccordions();this._initializeChromosomeSelector();this._initializeLocationTextbox();this._initializeNavigationButtons();this._initializeZoomButtons();this._initializeLocationSettingsDialog();this._initializeChartMenus();this._initializeComputedMeasurementsMenu();this._initializeHelpButton();this._initializeSearchBox();this._initializeWorkspaceSaving();this._initializeLoginLink();this._initializeLayout();this._checkBrowserCompatibility();
this._registerLocationChanged();this._registerSeqInfosUpdated()};epiviz.ui.ControlManager.prototype.onAddChart=function(){return this._addChart};epiviz.ui.ControlManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.ui.ControlManager.prototype.onSaveWorkspace=function(){return this._saveWorkspace};epiviz.ui.ControlManager.prototype.onDeleteActiveWorkspace=function(){return this._deleteActiveWorkspace};
epiviz.ui.ControlManager.prototype.onLoginLinkClicked=function(){return this._loginLinkClicked};epiviz.ui.ControlManager.prototype.onSearchWorkspaces=function(){return this._searchWorkspaces};epiviz.ui.ControlManager.prototype.onSearch=function(){return this._search};
epiviz.ui.ControlManager.prototype._updateSeqNames=function(a){var c=$("#chromosome-selector");c.empty();for(var b=0;b<a.length;++b){var d=sprintf('<option value="%s"%s>%s</option>',a[b].seqName,this._locationManager.currentLocation()&&a[b].seqName==this._locationManager.currentLocation().seqName()?'selected="selected"':"",a[b].seqName);c.append(d)}c.selectmenu()};
epiviz.ui.ControlManager.prototype._updateSelectedLocation=function(a){if(a){this._locationManager.changeCurrentLocation(a);a=this._locationManager.currentLocation();$("#text-location").val(Globalize.format(a.start(),"n0")+" - "+Globalize.format(a.end(),"n0"));var c=$("#chromosome-selector");c.val(a.seqName());c.selectmenu()}};
epiviz.ui.ControlManager.prototype.updateSelectedWorkspace=function(a){var c=this,b=$("#save-workspace-text"),d=this._activeWorkspaceInfo;b.val(a.name);this._activeWorkspaceInfo=a;this._activeWorkspaceChanged.notify({oldValue:d,newValue:a,cancel:function(){b.val(d.name);c._activeWorkspaceInfo=d}})};
epiviz.ui.ControlManager.prototype._initializeAccordions=function(){var a=$("#top-accordion");a.multiAccordion();a.multiAccordion("option","active","all");a=$("#bottom-accordion");a.multiAccordion();a.multiAccordion("option","active","all")};
epiviz.ui.ControlManager.prototype._initializeChromosomeSelector=function(){var a=$("#chromosome-selector");a.selectmenu({style:"popup",width:"90",maxHeight:"100",menuWidth:"90"});var c=this;a.change(function(){var a=c._locationManager.lastUnfilledLocationChangeRequest()||c._locationManager.currentLocation(),d=$(this).val();c._updateSelectedLocation(new epiviz.datatypes.GenomicRange(d,a.start(),a.width()))})};
epiviz.ui.ControlManager.prototype._initializeLocationTextbox=function(){var a=this;$("#text-location").keypress(function(c){if(13!=c.which)return!0;try{var b=$(this).val().split("-"),d=Globalize.parseInt(b[0]),e=Globalize.parseInt(b[1]),f=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();a._updateSelectedLocation(epiviz.datatypes.GenomicRange.fromStartEnd(f.seqName(),d,e));return!0}catch(g){return!1}})};
epiviz.ui.ControlManager.prototype._initializeNavigationButtons=function(){var a=this;$("#moveright").button({icons:{primary:"ui-icon ui-icon-seek-next"},text:!1}).click(function(){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),b=c.start()+Math.round(c.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),b,c.width()))});$("#moveleft").button({icons:{primary:"ui-icon ui-icon-seek-prev"},text:!1}).click(function(){var c=
a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),b=c.start()-Math.round(c.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),b,c.width()))})};
epiviz.ui.ControlManager.prototype._initializeZoomButtons=function(){var a=this,c=$("#zoomin");c.button({icons:{primary:"ui-icon ui-icon-zoomin"},text:!1});var b=$("#zoomout");b.button({icons:{primary:"ui-icon ui-icon-zoomout"},text:!1});var d=function(b){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),d=c.start()+.5*c.width();b=Math.round(c.width()*b);d=Math.round(d-.5*b);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),d,
b))};c.click(function(){d(a._zoominRatio)});b.click(function(){d(a._zoomoutRatio)})};
epiviz.ui.ControlManager.prototype._initializeLocationSettingsDialog=function(){var a=this;$("#location-settings").button({text:!1,icons:{primary:"ui-icon ui-icon-gear"}}).click(function(){$("#location-settings-dialog").dialog("open")});$("#location-settings-dialog").dialog({autoOpen:!1,resizable:!1,width:"300",buttons:{Ok:function(){a._zoominRatio=$("#zoomin-ratio-text").val();a._zoomoutRatio=$("#zoomout-ratio-text").val();a._stepRatio=$("#navigation-step-ratio-text").val();$(this).dialog("close")},
Cancel:function(){$("#zoomin-ratio-text").val(Globalize.format(a._zoominRatio,"n3"));$("#zoomout-ratio-text").val(Globalize.format(a._zoomoutRatio,"n3"));$("#navigation-step-ratio-text").val(Globalize.format(a._stepRatio,"n6"));$(this).dialog("close")}},modal:!0});$("#zoomout-ratio-text").spinner({min:1.001,max:1E3,step:.001,start:1.2,numberFormat:"n3"}).val(a._zoomoutRatio);$("#zoomin-ratio-text").spinner({min:.001,max:.999,step:.01,start:.8,numberFormat:"n3"}).val(a._zoominRatio);$("#navigation-step-ratio-text").spinner({min:1E-6,
max:1,step:1E-6,start:.2,numberFormat:"n6"}).val(a._stepRatio)};
epiviz.ui.ControlManager.prototype._initializeChartMenus=function(){var a=this,c=$("#plot-menu"),b=$("#track-menu");$("#plot-button").button({text:!1,icons:{primary:"ui-icon ui-icon-scatterplot",secondary:"ui-icon-triangle-1-s"}}).click(function(){var a=c.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a||c.show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){c.hide()});return!1});$("#track-button").button({text:!1,icons:{primary:"ui-icon ui-icon-track",
secondary:"ui-icon-triangle-1-s"}}).click(function(){var a=b.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a||b.show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){b.hide()});return!1});this._chartFactory.foreach(function(d,e){var f=sprintf("%s-menu-add-%s",e.chartDisplayType(),e.chartHtmlAttributeName());(e.chartDisplayType()==epiviz.ui.charts.ChartType.DisplayType.PLOT?c:b).append(sprintf('<li><a href="javascript:void(0)" id="%s">Add New %s</a></li>',
f,e.chartName()));$("#"+f).click(function(){(new epiviz.ui.controls.Wizard(sprintf("Add new %s",e.chartName()),{finish:function(b){a._addChart.notify({type:e,measurements:b.measurements})}},e.isRestrictedToSameDatasourceGroup()?[new epiviz.ui.controls.DatasourceGroupWizardStep,new epiviz.ui.controls.MeaurementsWizardStep]:[new epiviz.ui.controls.MeaurementsWizardStep],new epiviz.ui.controls.MeasurementsDialogData(a._measurementsManager.measurements(),e.chartContentType(),void 0,void 0,void 0,void 0,
e.chartName(),e.minSelectedMeasurements()),"750",void 0,e.isRestrictedToSameDatasourceGroup())).show()})});c.hide().menu();b.hide().menu()};
epiviz.ui.ControlManager.prototype._initializeComputedMeasurementsMenu=function(){var a=this;$("#computed-measurements-button").button({text:!1,icons:{primary:"ui-icon ui-icon-calculator"}}).click(function(){(new epiviz.ui.controls.ComputedMeasurementsDialog("Computed Measurements",{add:function(c){a._measurementsManager.addMeasurement(c)},remove:function(c){a._measurementsManager.removeMeasurement(c)},close:function(){}},a._measurementsManager.measurements(),a._chartManager.chartsMeasurements())).show()})};
epiviz.ui.ControlManager.prototype._initializeHelpButton=function(){$("#help-button").button({text:!1,icons:{primary:"ui-icon ui-icon-help"}}).click(function(){window.open("http://epiviz.github.io/","_blank").focus()})};
epiviz.ui.ControlManager.prototype._initializeSearchBox=function(){var a=this,c=$("#search-box");c.watermark("Find Gene/Probe");c.autocomplete({source:function(b,c){a._search.notify({searchTerm:b.term,callback:function(a){for(var b=[],g=0;g<a.length;++g)b.push({value:a[g].probe||a[g].gene,label:a[g].probe||a[g].gene,html:a[g].probe?sprintf("<b>%s</b>, %s, [%s: %s - %s]",a[g].probe,a[g].gene,a[g].seqName,Globalize.format(a[g].start,"n0"),Globalize.format(a[g].end,"n0")):sprintf("<b>%s</b>, [%s: %s - %s]",
a[g].gene,a[g].seqName,Globalize.format(a[g].start,"n0"),Globalize.format(a[g].end,"n0")),range:epiviz.datatypes.GenomicRange.fromStartEnd(a[g].seqName,a[g].start,a[g].end)});c(b)}})},minLength:1,select:function(b,c){var e=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),f=c.item.range.seqName(),g=Math.round(c.item.range.start()+.5*c.item.range.width()-.5*e.width()),e=e.width();a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(f,g,e))},focus:function(a){a.preventDefault()},
open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,c){return $("<li></li>").data("item.autocomplete",c).append(sprintf("<a>%s</a>",c.html)).appendTo(a)}};
epiviz.ui.ControlManager.prototype._initializeWorkspaceSaving=function(){var a=this,c=$("#save-workspace-text"),b=$("#save-workspace-button"),d=$("#delete-workspace-button");b.button({text:!1,icons:{primary:"ui-icon-disk"}}).click(function(){var b=null;try{var d=c.val();/[a-zA-Z0-9_\s]+/g.exec(d)==d?epiviz.workspaces.UserManager.USER_STATUS.loggedIn?a._saveWorkspace.notify({name:d,id:d==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null}):(b=new epiviz.ui.controls.MessageDialog("User not logged in",
{Yes:function(){a._loginLinkClicked.notify()},No:function(){}},"You need to log in in order to save the workspace. Do you wish to log in now?",epiviz.ui.controls.MessageDialog.Icon.QUESTION),b.show()):(b=new epiviz.ui.controls.MessageDialog("Invalid workspace name",{Ok:function(){$(this).remove()}},"Invalid workspace name: "+d,epiviz.ui.controls.MessageDialog.Icon.ERROR),b.show())}catch(g){b=new epiviz.ui.controls.MessageDialog("Error",{ok:function(){$(this).remove()}},"An error occurred while trying to save workspace: "+
g.message,epiviz.ui.controls.MessageDialog.Icon.ERROR),b.show()}});d.button({text:!1,icons:{primary:"ui-icon-trash"}}).click(function(b){epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&(new epiviz.ui.controls.MessageDialog("Delete active workspace",{Yes:function(){a._deleteActiveWorkspace.notify()},No:function(){}},"Are you sure you want to delete the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});c.watermark("Save Workspace Name");c.autocomplete({source:function(b,
c){a._searchWorkspaces.notify({searchTerm:b.term,callback:function(a){for(var b=[],d=0;d<a.length;++d)b.push({value:a[d].id,label:a[d].name,html:sprintf("<b>%s</b> %s",a[d].name,a[d].id||"")});c(b)}})},minLength:0,select:function(b,d){b.preventDefault();a.updateSelectedWorkspace({id:d.item.value||c.val(),name:d.item.label})},focus:function(a){a.preventDefault()},open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",
b.html)).appendTo(a)};c.click(function(){c.autocomplete("search","")})};epiviz.ui.ControlManager.prototype._initializeLoginLink=function(){var a=this;$("#login-link").live({click:function(){a._loginLinkClicked.notify()}})};epiviz.ui.ControlManager.prototype._initializeLayout=function(){$("body").layout({applyDefaultStyles:!0,east__size:390,east__minSize:390,east__initHidden:!0,north__resizable:!1,north__initHidden:!1,south__initHidden:!0,east__initClosed:!0})};
epiviz.ui.ControlManager.prototype._checkBrowserCompatibility=function(){0<epiviz.utils.getInternetExplorerVersion()&&(new epiviz.ui.controls.MessageDialog("Browser compatibility warning",{Ok:function(){}},"EpiViz works best on Google Chrome, Apple Safari or Mozilla Firefox. Please open it using one of those browsers.",epiviz.ui.controls.MessageDialog.Icon.ERROR)).show()};epiviz.ui.ControlManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._updateSelectedLocation(c.newValue)}))};
epiviz.ui.ControlManager.prototype._registerSeqInfosUpdated=function(){var a=this;this._locationManager.onSeqInfosUpdated().addListener(new epiviz.events.EventListener(function(c){a._updateSeqNames(c)}))};epiviz.ui.WebArgsManager=function(a,c){this._locationManager=a;this._workspaceManager=c;this._registerLocationChanged();this._registerActiveWorkspaceChanged()};epiviz.ui.WebArgsManager.WEB_ARGS=epiviz.ui.WebArgsManager.WEB_ARGS||{};
epiviz.ui.WebArgsManager.prototype._updateUrl=function(){var a="?",c=epiviz.ui.WebArgsManager.WEB_ARGS;!("ws"in c)&&"workspace"in c&&(c.ws=c.workspace,delete c.workspace);for(var b in c)if(c.hasOwnProperty(b))if(Array.isArray(c[b]))for(var d=0;d<c[b].length;++d)a+=sprintf("%s[]=%s&",b,c[b][d]);else a+=sprintf("%s=%s&",b,c[b]);c=epiviz.utils.getInternetExplorerVersion();if(0>c||10<=c)switch(window.location.protocol){case "http:":case "https:":history.replaceState(null,"",a)}};
epiviz.ui.WebArgsManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){epiviz.ui.WebArgsManager.WEB_ARGS.seqName=c.newValue.seqName();epiviz.ui.WebArgsManager.WEB_ARGS.start=c.newValue.start();epiviz.ui.WebArgsManager.WEB_ARGS.end=c.newValue.end();a._updateUrl()}))};
epiviz.ui.WebArgsManager.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){epiviz.ui.WebArgsManager.WEB_ARGS.ws=c.workspaceId||"";delete epiviz.ui.WebArgsManager.WEB_ARGS.workspace;a._updateUrl()}))};
epiviz.EpiViz=function(a,c,b,d,e,f,g,h,l,m){this._config=a;this._locationManager=c;this._measurementsManager=b;this._controlManager=d;this._dataManager=e;this._chartFactory=f;this._chartManager=g;this._workspaceManager=h;this._userManager=l;this._webArgsManager=m;this._registerRequestSeqInfos();this._registerRequestMeasurements();this._registerUiAddChart();this._registerUiSaveWorkspace();this._registerUiDeleteActiveWorkspace();this._registerUiLoginLinkClicked();this._registerUiSearchWorkspaces();
this._registerUiActiveWorkspaceChanged();this._registerUiSearch();this._registerDataAddMeasurements();this._registerDataRemoveMeasurements();this._registerDataAddChart();this._registerDataRemoveChart();this._registerDataAddSeqInfos();this._registerDataRemoveSeqNames();this._registerDataNavigate();this._registerDataRedraw();this._registerDataGetCurrentLocation();this._registerRequestWorkspaces();this._registerWorkspacesLoaded();this._registerActiveWorkspaceChanged();this._registerLocationChanged();
var n=this;window.onbeforeunload=function(){if(epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&n._workspaceManager.activeWorkspace().changed())return"There are unsaved changes in the current workspace. Do you wish to discard them?"}};epiviz.EpiViz.SETTINGS={};epiviz.EpiViz.VERSION="2";epiviz.EpiViz.prototype.start=function(){this._controlManager.initialize();this._workspaceManager.initialize();this._measurementsManager.initialize();this._locationManager.initialize()};
epiviz.EpiViz.prototype.config=function(){return this._config};epiviz.EpiViz.prototype._addChart=function(a,c,b,d){b=this._chartManager.addChart(a,c,b,d);var e=this._workspaceManager.activeWorkspace().range();this._chartManager.addChartsLoaderAnimation(b);a={};a[b]=c;var f=this;this._dataManager.getData(e,a,function(a,b){f._chartManager.updateCharts(e,b,[a])});return b};epiviz.EpiViz.prototype._registerRequestSeqInfos=function(){var a=this;this._locationManager.onRequestSeqInfos().addListener(new epiviz.events.EventListener(function(){a._dataManager.getSeqInfos(function(c){a._locationManager.updateSeqInfos(c)})}))};
epiviz.EpiViz.prototype._registerRequestMeasurements=function(){var a=this;this._measurementsManager.onRequestMeasurements().addListener(new epiviz.events.EventListener(function(){a._dataManager.getMeasurements(function(c){a._measurementsManager.addMeasurements(c)})}))};
epiviz.EpiViz.prototype._registerRequestWorkspaces=function(){var a=this;this._workspaceManager.onRequestWorkspaces().addListener(new epiviz.events.EventListener(function(c){a._dataManager.getWorkspaces(function(b){for(var d=[],e=null,f=0;f<b.length;++f){var g=epiviz.workspaces.Workspace.fromRawObject(b[f],a._chartFactory);null===g.id()?e=g:(g.id()==c.activeWorkspaceId&&(e=g),d.push(g))}a._workspaceManager.updateWorkspaces(d,e,c.activeWorkspaceId);a._workspaceManager.activeWorkspace().resetChanged()},
"",c.activeWorkspaceId)}))};epiviz.EpiViz.prototype._registerUiAddChart=function(){var a=this;this._controlManager.onAddChart().addListener(new epiviz.events.EventListener(function(c){a._addChart(c.type,c.measurements)}))};
epiviz.EpiViz.prototype._registerUiSaveWorkspace=function(){var a=this;this._controlManager.onSaveWorkspace().addListener(new epiviz.events.EventListener(function(c){var b=a._workspaceManager.getByName(c.name),b=b?a._workspaceManager.activeWorkspace().copy(c.name,b.id()):a._workspaceManager.activeWorkspace().copy(c.name);a._dataManager.saveWorkspace(b,function(c){b=b.copy(b.name(),c);b.resetChanged();a._workspaceManager.updateWorkspace(b);a._workspaceManager.changeActiveWorkspace(c)})}))};
epiviz.EpiViz.prototype._registerUiDeleteActiveWorkspace=function(){var a=this;this._controlManager.onDeleteActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._dataManager.deleteWorkspace(a._workspaceManager.activeWorkspace());a._workspaceManager.deleteActiveWorkspace()}))};epiviz.EpiViz.prototype._registerUiLoginLinkClicked=function(){var a=this;this._controlManager.onLoginLinkClicked().addListener(new epiviz.events.EventListener(function(){a._userManager.toggleLogin()}))};
epiviz.EpiViz.prototype._registerUiSearchWorkspaces=function(){var a=this;this._controlManager.onSearchWorkspaces().addListener(new epiviz.events.EventListener(function(c){a._dataManager.getWorkspaces(function(a){c.callback(a)},c.searchTerm,c.searchTerm)}))};
epiviz.EpiViz.prototype._registerUiActiveWorkspaceChanged=function(){var a=this;this._controlManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){var b=function(){a._workspaceManager.get(c.newValue.id)?a._workspaceManager.changeActiveWorkspace(c.newValue.id):a._dataManager.getWorkspaces(function(b){for(var e=null,f=0;f<b.length;++f){var g=epiviz.workspaces.Workspace.fromRawObject(b[f],a._chartFactory);if(null===g.id()){e=g;break}}e&&a._workspaceManager.changeActiveWorkspace(c.newValue.id,
e)},c.newValue.name,c.newValue.id)};epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&!a._workspaceManager.activeWorkspaceChanging()&&a._workspaceManager.activeWorkspace().changed()?(new epiviz.ui.controls.MessageDialog("Discard workspace changes",{Yes:function(){b()},No:function(){c.cancel()}},"There are unsaved changes in the current workspace. Do you wish to discard them?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show():b()}))};
epiviz.EpiViz.prototype._registerUiSearch=function(){var a=this;this._controlManager.onSearch().addListener(new epiviz.events.EventListener(function(c){a._dataManager.search(function(a){c.callback(a)},c.searchTerm)}))};
epiviz.EpiViz.prototype._registerDataAddMeasurements=function(){var a=this;this._dataManager.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(c){try{a._measurementsManager.addMeasurements(c.measurements),c.result.success=!0}catch(b){c.result.success=!1,c.result.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveMeasurements=function(){var a=this;this._dataManager.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(c){try{a._measurementsManager.removeMeasurements(c.measurements),c.result.success=!0}catch(b){c.result.success=!1,c.result.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddChart=function(){var a=this;this._dataManager.onRequestAddChart().addListener(new epiviz.events.EventListener(function(c){try{var b=a._chartFactory.get(c.type),d=a._addChart(b,c.measurements);c.result.success=!0;c.result.value={id:d}}catch(e){c.result.success=!1,c.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveChart=function(){var a=this;this._dataManager.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(c){try{a._chartManager.removeChart(c.id),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddSeqInfos=function(){var a=this;this._dataManager.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.addSeqInfos(c.seqInfos),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveSeqNames=function(){var a=this;this._dataManager.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.removeSeqNames(c.seqNames),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataNavigate=function(){var a=this;this._dataManager.onRequestNavigate().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.changeCurrentLocation(c.range),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRedraw=function(){var a=this;this._dataManager.onRequestRedraw().addListener(new epiviz.events.EventListener(function(c){try{var b=a._locationManager.currentLocation();a._locationManager.changeCurrentLocation(b);c.result.success=!0}catch(d){c.result.success=!1,c.errorMessage=d.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetCurrentLocation=function(){var a=this;this._dataManager.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(c){try{var b=a._locationManager.currentLocation();c.result.value={seqName:b.seqName(),start:b.start(),end:b.end()};c.result.success=!0}catch(d){c.result.success=!1,c.errorMessage=d.toString()}}))};epiviz.EpiViz.prototype._registerWorkspacesLoaded=function(){this._workspaceManager.onWorkspacesLoaded().addListener(new epiviz.events.EventListener(function(a){}))};
epiviz.EpiViz.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){a._workspaceManager.startChangingActiveWorkspace();a._controlManager.updateSelectedWorkspace({id:c.newValue.id(),name:c.newValue.name()});a._locationManager.changeCurrentLocation(c.newValue.range());a._measurementsManager.removeMeasurements(a._measurementsManager.computedMeasurements());a._measurementsManager.addMeasurements(c.newValue.computedMeasurements());
a._chartManager.clear();c=c.newValue.charts();for(var b in c)if(c.hasOwnProperty(b))for(var d=0;d<c[b].length;++d)a._addChart(c[b][d].type,c[b][d].properties.measurements,c[b][d].id,c[b][d].properties.copy());a._workspaceManager.endChangingActiveWorkspace()}))};
epiviz.EpiViz.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._chartManager.addChartsLoaderAnimation();var b=a._chartManager.chartsMeasurements();a._dataManager.getData(c.newValue,b,function(b,e){a._chartManager.updateCharts(c.newValue,e,[b])})}))};
epiviz.ui.controls.MeasurementsDialogData=function(a,c,b,d,e,f,g,h){this.measurements=a;this.type=c;this.datasource=b;this.datasourceGroup=d;this.dataprovider=e;this.annotation=f;this.defaultChartType=g;this.minSelectedMeasurements=h||1};
epiviz.ui.controls.DataTable=function(a,c,b,d,e,f){epiviz.ui.controls.Control.call(this,a);this._columns=c;this._rows=b;this._rowsArray=[];var g=this;this._rows.foreach(function(a){g._rowsArray.push(a)});this._rowParser=d;this._multiselect=e||!1;this._showColumnSelector=f||!1;this._columnSelector=this._table=null;this._selectedIndices=[];this._selectedIndicesMap={};this._lastSelection=this._deselectList=this._selectList=null};epiviz.ui.controls.DataTable.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);
epiviz.ui.controls.DataTable.constructor=epiviz.ui.controls.DataTable;epiviz.ui.controls.DataTable.ColumnType={STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};
epiviz.ui.controls.DataTable.prototype.initialize=function(){this._container.append('<div class="epiviz-data-table"><table style="width: 100%!important;"><thead></thead><tbody></tbody><tfoot></tfoot></table></div>');this._table=this._container.find("table");var a=this._table.find("thead"),c=this._table.find("tfoot"),b=this._table.find("tbody"),d=sprintf("<tr><th>%s</th></tr>",this._columns.join("</th><th>"));a.append(d);c.append(d);var e=this;this._rows.foreach(function(a){for(var c="",d=0;d<e._columns.length;++d)c+=
sprintf("<td>%s</td>",e._rowParser(a,e._columns[d]));b.append(sprintf("<tr>%s</tr>",c))});c=Array(this._columns.length);for(a=0;a<this._columns.length;++a)c[a]={type:"text",bRegex:!0,bSmart:!0};this._table.dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:this._multiselect?"multi":"single",aButtons:[],fnPreRowSelect:function(a,b,c){return e._preRowSelect(this,a,b,c)},fnRowSelected:function(a){return e._select(this,a)},fnRowDeselected:function(a){return e._select(this,a)}}}).columnFilter({aoColumns:c});
c=-1;for(a=0;a<this._columns.length;++a)this._columns[a].isVisible&&++c,this._table.fnSetColumnVis(a,this._columns[a].isVisible),this._columns[a].defaultFilter&&(this._table.fnFilter(sprintf("(%s)|any",this._columns[a].defaultFilter),a,!0,!0),this._table.find("tfoot").find(sprintf("th:eq(%s)",c)).find("input").removeClass("search_init").val(sprintf("(%s)|any",this._columns[a].defaultFilter)));this._container.find(".ui-buttonset").first().attr("style","position: absolute!important;");if(this._showColumnSelector){this._container.find(".fg-toolbar").first().append(sprintf('<div style="float: right; margin-right: 5px;"><label>Selected Columns: </label><select class="%s" multiple="multiple" style=""><option value="-1">All</option></select></div>',
"epiviz-data-table-column-selector"));this._columnSelector=this._container.find(".epiviz-data-table-column-selector");for(a=0;a<this._columns.length;++a)c=sprintf('<option value="%s"%s%s>%s</option>',a,this._columns[a].isVisible?' selected="selected"':"",this._columns[a].isFixed?' disabled="disabled"':"",this._columns[a].name),this._columnSelector.append(c);this._columnSelector.dropdownchecklist({width:"80px",firstItemChecksAll:!0,onComplete:function(a){e._selectColumns(a)}})}};
epiviz.ui.controls.DataTable.prototype.selectedIndices=function(){return this._selectedIndices||[]};epiviz.ui.controls.DataTable.prototype.selectedRows=function(){if(!this._selectedIndices)return[];for(var a=Array(this._selectedIndices.length),c=0;c<this._selectedIndices.length;++c)a[c]=this._rowsArray[this._selectedIndices[c]];return a};
epiviz.ui.controls.DataTable.prototype._preRowSelect=function(a,c,b,d){c&&(this._selectList=this._deselectList=null,c.shiftKey&&1==b.length?(this._deselectList=a.fnGetSelected(),this._lastSelection||(this._lastSelection=b[0]),this._selectList=this._getRangeOfRows(this._lastSelection,b[0])):(this._lastSelection=b[0],c.ctrlKey||c.metaKey||(this._deselectList=a.fnGetSelected(),d||(this._selectList=b))));return!0};
epiviz.ui.controls.DataTable.prototype._getRangeOfRows=function(a,c){var b=this._table.fnGetPosition(a),d=this._table.fnGetPosition(c),e=this._table.fnSettings(),b=$.inArray(b,e.aiDisplay),d=$.inArray(d,e.aiDisplay),f=[];if(0<=b&&0<=d)for(var g=Math.min(b,d);g<=Math.max(b,d);++g)f.push(e.aoData[e.aiDisplay[g]].nTr);return 0<f.length?f:null};
epiviz.ui.controls.DataTable.prototype._select=function(a,c){var b;this._deselectList&&(b=this._deselectList,this._deselectList=null,a.fnDeselect(b));this._selectList&&(b=this._selectList,!this._multiselect&&0<b.length&&(b=[b[b.length-1]]),this._selectList=null,a.fnSelect(b));b=a.fnGetSelected();var d=Array(b.length),e={},f;for(f=0;f<b.length;++f)d[f]=this._table.fnGetPosition(b[f]),e[d[f]]=!0;for(f=0;f<this._selectedIndices.length;++f)e[this._selectedIndices[f]]||(delete this._selectedIndicesMap[this._selectedIndices[f]],
this._selectedIndices.splice(f,1),--f);for(f=0;f<d.length;++f)this._selectedIndicesMap[d[f]]||(this._selectedIndicesMap[d[f]]=!0,this._selectedIndices.push(d[f]));return!0};epiviz.ui.controls.DataTable.prototype._selectColumns=function(a){var c={},b;for(b=0;b<a.options.length;++b)a.options[b].selected&&a.options[b].value&&(c[parseInt(a.options[b].value)]=!0);for(b=0;b<this._columns.length;++b)this._table.fnSetColumnVis(b,c[b]||this._columns[b].isFixed)};
epiviz.ui.controls.DataTable.Column=function(a,c,b,d,e,f){this.id=a;this.name=c;this.type=b;this.isVisible=!d;this.isFixed=e||!1;this.defaultFilter=f||""};epiviz.ui.controls.DataTable.Column.prototype.toString=function(){return this.name};epiviz.ui.controls.Wizard=function(a,c,b,d,e,f,g){epiviz.ui.controls.Dialog.call(this,a,c);this._steps=b;this._initialData=d;this._width=e;this._height=f;this._showTabs=g||!1;this._tabs=null;this._initialize()};epiviz.ui.controls.Wizard.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.Wizard.constructor=epiviz.ui.controls.Wizard;
epiviz.ui.controls.Wizard.prototype._initialize=function(){var a=this;this._dialog=$("#"+this._id);this._dialog.append('<div class="wizard-dialog"><div class="wizard-tabs"><ul class="wizard-tabs-title-list"></ul></div></div>');this._tabs=this._dialog.find(".wizard-tabs");for(var c=this._tabs.find(".wizard-tabs-title-list"),b=0;b<this._steps.length;++b)c.append(sprintf('<li><a href="#%s-tab-%s">%s</a></li>',this._id,b,this._steps[b].title())),this._tabs.append(sprintf('<div id="%s-tab-%s"></div>',
this._id,b));this._showTabs||(c.css("visibility","hidden"),c.css("position","absolute"));this._tabs.tabs({activate:function(b,c){a._tabActivate(c)},disabled:epiviz.utils.range(this._steps.length-1,1)});this._dialog.dialog({autoOpen:!1,resizable:!0,width:this._width||void 0,height:this._height||void 0,buttons:{Back:function(){var b=a._tabs.tabs("option","active");0!=b&&(a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b,b)),a._tabs.tabs("option","active",b-1))},Next:function(){var b=
a._tabs.tabs("option","active"),c=a._steps[b].next();c.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},c.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._steps[b+1].initialize($(sprintf("#%s-tab-%s",a._id,b+1)),c.data),a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b-2,b+2)),a._tabs.tabs("option","active",b+1))},Finish:function(){var b=a._steps[a._steps.length-1].next();b.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},
b.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._handlers.finish&&a._handlers.finish(b.data),$(this).dialog("close"))},Cancel:function(){a._handlers.close&&a._handlers.close();$(this).dialog("close")}},modal:!0});1<this._steps.length?(this._dialog.parent().find('button:contains("Finish")').button("disable"),this._dialog.parent().find('button:contains("Next")').button("enable")):(this._dialog.parent().find('button:contains("Finish")').button("enable"),this._dialog.parent().find('button:contains("Next")').button("disable"));
this._steps[0].initialize($(sprintf("#%s-tab-0",a._id)),this._initialData)};epiviz.ui.controls.Wizard.prototype._tabActivate=function(a){a=this._tabs.tabs("option","active");var c=this._dialog.parent().find('button:contains("Finish")'),b=this._dialog.parent().find('button:contains("Next")');a==this._steps.length-1?(b.button("disable"),c.button("enable")):(b.button("enable"),c.button("disable"));this._tabs.tabs("option","disabled",epiviz.utils.range(this._steps.length-a-1,a+1))};
epiviz.ui.controls.Wizard.prototype.show=function(){var a=this;this._dialog.dialog("open");this._dialog.dialog("option","position","center");this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}})};epiviz.ui.controls.Wizard.Step=function(){};epiviz.ui.controls.Wizard.Step.prototype.initialize=function(a,c){};epiviz.ui.controls.Wizard.Step.prototype.next=function(){};epiviz.ui.controls.Wizard.Step.prototype.title=function(){};
epiviz.ui.controls.DatasourceGroupWizardStep=function(){this._data=this._dataTable=null};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.initialize=function(a,c){this._data=c;a.find(".epiviz-data-table").remove();var b=[new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",epiviz.ui.controls.DataTable.ColumnType.STRING)],d={};c.measurements.foreach(function(a){if(!c.type||c.type==a.type())if(!c.dataprovider||c.dataprovider==a.dataprovider()){if(c.annotation)for(var b in c.annotation)if(c.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=
c.annotation[b]))return;d[a.datasourceGroup()]=!0}});this._dataTable=new epiviz.ui.controls.DataTable(a,b,new epiviz.utils.IterableArray(Object.keys(d)),function(a){return a});this._dataTable.initialize()};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(0==a.length)return{error:"No rows selected"};this._data.datasourceGroup=a[0];return{data:this._data}};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.title=function(){return"Select Datasource Group"};
epiviz.ui.controls.MeaurementsWizardStep=function(){this._measurements=this._data=this._dataTable=null};
epiviz.ui.controls.MeaurementsWizardStep.prototype.initialize=function(a,c){this._data=c;a.find(".epiviz-data-table").remove();var b=epiviz.ui.controls.DataTable.ColumnType,b=[new epiviz.ui.controls.DataTable.Column("id","Id",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("name","Name",b.STRING,!1,!0),new epiviz.ui.controls.DataTable.Column("defaultChartType","Default Chart Type",b.STRING,!1,!0,c.defaultChartType||""),new epiviz.ui.controls.DataTable.Column("type","Type",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceId",
"Data Source",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("dataprovider","Data Provider",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("formulaStr","Formula",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("annotation","Annotation",b.STRING)];this._measurements=c.measurements.subset(function(a){if(c.type&&c.type!=a.type()||c.datasource&&c.datasource!=a.datasourceId()||c.datasourceGroup&&
c.datasourceGroup!=a.datasourceGroup()||c.dataprovider&&c.dataprovider!=a.dataprovider())return!1;if(c.annotation)for(var b in c.annotation)if(c.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=c.annotation[b]))return!1;return!0});if(c.type&&c.type==epiviz.measurements.Measurement.Type.RANGE){var d=this,e={};c.measurements.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.RANGE||a.datasourceGroup()in e||a.isComputed()||(d._measurements.add(a.datasource()),e[a.datasourceGroup()]=
!0)})}this._dataTable=new epiviz.ui.controls.DataTable(a,b,this._measurements,function(a,b){var c=null;switch(b.id){case "annotation":c=epiviz.utils.mapJoin(a.annotation(),": ","<br />");break;default:c=a[b.id]()}return 0===c||""===c||c?c:""},!0,!0);this._dataTable.initialize()};
epiviz.ui.controls.MeaurementsWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(a.length<this._data.minSelectedMeasurements)return{error:"Minimum selected rows required is "+this._data.minSelectedMeasurements};for(var c=new epiviz.measurements.MeasurementSet,b=0;b<a.length;++b)c.add(a[b]);this._data.measurements=c;return{data:this._data}};epiviz.ui.controls.MeaurementsWizardStep.prototype.title=function(){return"Select Measurements"};
epiviz.ui.controls.MessageDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._message=b;this._icon=d||epiviz.ui.controls.MessageDialog.Icon.INFO};epiviz.ui.controls.MessageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.MessageDialog.constructor=epiviz.ui.controls.MessageDialog;epiviz.ui.controls.MessageDialog.Icon={INFO:"info",ERROR:"error",QUESTION:"question"};
epiviz.ui.controls.MessageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.controls.MessageDialog.Icon;if(!this._dialog){var c=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");this._dialog.append(sprintf('<div class="ui-state-%s ui-corner-all" style="margin: 5px; padding: 5px; height: auto;"><div class="ui-icon ui-icon-%s" style="float: left; margin-right: 5px;"></div><div class="dialog-text">%s</div></div>',this._icon==a.ERROR?
"error":"highlight",this._icon==a.ERROR?"alert":"info",this._message));var b={},d;for(d in this._handlers)this._handlers.hasOwnProperty(d)&&function(a){b[a]=function(){c._handlers[a]();$(this).dialog("close")}}(d);this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:b,modal:!0});this._dialog.dialog({close:function(a,b){$(this).remove();c._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};
epiviz.ui.controls.ColorPickerDialog=function(a,c){epiviz.ui.controls.Dialog.call(this,"Pick Colors",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="color-picker-form" action="" style="width: 420px;"><div class="chart-picker" style="float: right;"></div></div>');this._colors=this._initialColors=c;for(var b=this._dialog.find(".color-picker-form"),d="",e=0;e<this._colors.length;++e)var f=sprintf("color-%s",e),d=d+sprintf('<tr><td><label>%s:&nbsp;</label></td><td><input type="text" name="%s" class="colorwell %s" value="%s" /></td></tr>',
c[e].name,f,f,this._colors[e].color);b.append(sprintf('<table class="color-picker-table">%s</table>',d));var g=epiviz.utils.farbtastic(sprintf("#%s .chart-picker",this._id)),h=$(sprintf("#%s .chart-picker",this._id)).css("opacity",.25),l;$(sprintf("#%s .colorwell",this._id)).each(function(){g.linkTo(this);$(this).css("opacity",.75)}).focus(function(){l&&$(l).css("opacity",.75).removeClass("colorwell-selected");g.linkTo(this);h.css("opacity",1);$(l=this).css("opacity",1).addClass("colorwell-selected")});
var m=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"440",buttons:{Ok:function(){for(var a=b.find(".colorwell"),c=0;c<a.length;++c)m._colors[c].color=a[c].value;m._handlers.ok(m._colors);$(this).dialog("close")},Cancel:function(){m._handlers.cancel();$(this).dialog("close")},Reset:function(){m._colors=m._initialColors;for(var a=0;a<m._colors.length;++a){var b=sprintf(".color-%s",a);g.linkTo($(sprintf("#%s %s",m._id,b)));g.setColor(m._colors[a].color);++a}l&&g.linkTo(l);m._handlers.reset()}},
modal:!0})};epiviz.ui.controls.ColorPickerDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ColorPickerDialog.constructor=epiviz.ui.controls.ColorPickerDialog;epiviz.ui.controls.ColorPickerDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.SaveSvgAsImageDialog=function(a,c,b){epiviz.ui.controls.Dialog.call(this,"Save Chart SVG as Image",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="save-svg-dialog"><label class="dialog-label">Choose file format:</label><br/><br/><div style="position:absolute; right:15px;"><select class="svg-file-format"><option value="pdf" selected="selected">PDF</option><option value="ps" >PS</option><option value="png" >PNG</option><option value="svg">SVG</option><option value="eps">EPS</option></select></div>'+
sprintf('<form name="%s-svg-save-form" method="POST">',this._id)+'<div><input type="hidden" name="svg" /><input type="hidden" name="format" /><br/><br/></div></form></div>');this._chartId=c;this._chartSaverLocation=b;var d=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"200",buttons:{Ok:function(){var a=$("#"+d._chartId).find("svg").clone();a.attr("xmlns","http://www.w3.org/2000/svg");a.attr("version","1.1");var b=d._dialog.find(".svg-file-format"),c=document.forms[sprintf("%s-svg-save-form",
d._id)];c.action=d._chartSaverLocation;c.svg.value=$("<div>").append(a).html();c.format.value=b.val();c.submit();d._handlers.ok();$(this).dialog("close")},Cancel:function(){d._handlers.cancel();$(this).dialog("close")}},modal:!0})};epiviz.ui.controls.SaveSvgAsImageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.SaveSvgAsImageDialog.constructor=epiviz.ui.controls.SaveSvgAsImageDialog;
epiviz.ui.controls.SaveSvgAsImageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.ComputedMeasurementsDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._measurements=b;this._chartsMeasurements=d;this._measurementsList=this._maxTextBox=this._minTextBox=this._nameTextBox=this._idTextBox=this._expressionTextBox=null;this._addButtonProperties={text:!1,icons:{primary:"ui-icon ui-icon-plus"}};this._deleteButtonsProperties={text:!1,icons:{primary:"ui-icon ui-icon-trash"}};this._datasourceGroupMeasurements=this._selectedDatasourceGroup=this._tabs=
null;this._addTabs();this._addDialogContents();this._addDatasourceGroupTable(b)};epiviz.ui.controls.ComputedMeasurementsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ComputedMeasurementsDialog.constructor=epiviz.ui.controls.ComputedMeasurementsDialog;
epiviz.ui.controls.ComputedMeasurementsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null;a._handlers.close()}}))};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDatasourceGroupTable=function(a){var c=this,b=$(sprintf("#datasource-group-tab-%s",this._id)),d="",e={};a.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.FEATURE&&(a.datasourceGroup()in e||(e[a.datasourceGroup()]=[]),e[a.datasourceGroup()].push(a))});for(var f in e)e.hasOwnProperty(f)&&(d+=sprintf('<tr><td class="center">%s</td></tr>',f));b.append(sprintf('<table style="border-spacing:0; border-collapse:collapse; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: moz-none; -ms-user-select: none; user-select: none; width: 100%%;" class="computed-measurements-dialog-raw-table">%s</table>',
"<thead><tr><th>Data Source Group</th></tr></thead>"+d+"<tfoot><tr><th>Data Source Group</th></tr></tfoot>"));var g=b.find(".computed-measurements-dialog-raw-table").dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:"single",aButtons:[],fnPreRowSelect:function(a,b,c){return!0},fnRowSelected:function(a){a=g.fnGetData(a[0]);c._selectedDatasourceGroup=a[0];c._datasourceGroupMeasurements=e[c._selectedDatasourceGroup]},fnRowDeselected:function(a){g.fnGetData(a[0])==c._selectedDatasourceGroup&&
(c._selectedDatasourceGroup=null,c._datasourceGroupMeasurements=null)}}});b.find(".DTTT_container").css("position","absolute")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addTabs=function(){var a=this;this._selectDialog().append('<div class="computed-measurements-dialog"><div class="computed-measurements-tabs"><ul>'+sprintf('<li><a href="#datasource-group-tab-%s">Data Source Group</a></li>',this._id)+sprintf('<li><a href="#formula-tab-%s">Expression</a></li>',this._id)+"</ul>"+sprintf('<div id="datasource-group-tab-%s"></div>',this._id)+sprintf('<div id="formula-tab-%s"></div>',this._id)+"</div></div>");this._tabs=
this._selectTabs();this._tabs.tabs({activate:function(c,b){a._tabActivate(b)}})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDialogContents=function(){var a=this;this._selectDialog().dialog({autoOpen:!1,resizable:!0,width:"600",height:"550",buttons:{Back:function(){0!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",0)},Next:function(){1!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",1)},Add:function(){for(var c=epiviz.utils.ExpressionParser.parse(a._selectExpressionTextBox().val().trim()),b={},d=c.variables(),e=null,f=null,g=[],
h={},l=0;l<d.length;++l){var m=d[l];if(epiviz.utils.stringStartsWith(m,"{")&&epiviz.utils.stringEndsWith(m,"}")){var n=parseInt(m.substring(1,m.length-1)),m=a._datasourceGroupMeasurements[n];b[n]=m;if(null===e||e>m.minValue())e=m.minValue();if(null===f||f<m.maxValue())f=m.maxValue();if(m.metadata())for(n=0;n<m.metadata().length;++n)h[m.metadata()[n]]||(h[m.metadata()[n]]=!0,g.push(m.metadata()[n]))}}d=a._selectMinTextBox().val().trim();h=a._selectMaxTextBox().val().trim();e=d?parseFloat(d):e;f=h?
parseFloat(h):f;d=a._selectIdTextBox().val().trim()||epiviz.utils.generatePseudoGUID(5);c=new epiviz.measurements.Measurement(d,a._selectNameTextBox().val().trim()||"Unnamed ["+d+"]",epiviz.measurements.Measurement.Type.FEATURE,null,a._selectedDatasourceGroup,null,{referredMeasurements:b,expression:c},"any",null,e,f,g);b=a._datasourceGroupMeasurements.length;$(sprintf("#computed-measurement-measurements-%s",a._id)).append(sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;"><button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete</button><button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
c.name(),b,a._id));$("#measurement-button-"+b+"-"+a._id).button(a._addButtonProperties).click(function(){a._addButtonClick($(this))});$("#delete-button-"+b+"-"+a._id).button(a._deleteButtonsProperties).click(function(){a._deleteButtonClick($(this))});a._datasourceGroupMeasurements.push(c);a._handlers.add(c)},Close:function(){a._handlers.close();$(this).dialog("close")}},modal:!0})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addButtonClick=function(a){a=a.data("measurement");var c=this._selectExpressionTextBox();c.val(c.val().trim()+" {"+a+"}")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._deleteButtonClick=function(a){for(var c=a.data("measurement"),b=this._datasourceGroupMeasurements[c],d=0;d<this._datasourceGroupMeasurements.length;++d){var e=this._datasourceGroupMeasurements[d];if(null!=e&&e!==b&&e.isComputed()&&e.componentMeasurements().contains(b)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are other measurements that depend on the one selected. Please delete those before deleting this.",
epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}}for(var f in this._chartsMeasurements)if(this._chartsMeasurements.hasOwnProperty(f)&&this._chartsMeasurements[f].contains(b)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are charts using the selected measurement. Remove them from the workspace and then try again.",epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}this._datasourceGroupMeasurements[c]=null;a.parent().parent().remove();
this._handlers.remove(b)};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._tabActivate=function(a){if(0!=this._selectTabs().tabs("option","active")&&(a.newPanel.empty(),this._measurementsList=this._maxTextBox=this._minTextBox=this._expressionTextBox=this._nameTextBox=this._idTextBox=null,this._selectedDatasourceGroup)){a.newPanel.append(sprintf('<label for="computed-measurement-key-%1$s"><b>Id:</b></label> <input id="computed-measurement-key-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-name-%1$s"><b>Name:</b></label> <input id="computed-measurement-name-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br /><br /><div id="computed-measurement-measurements-%1$s" style="overflow: auto; max-height: 200px; border-style: solid; border-width: 1px; border-color: #999999;"></div><br/><label for="computed-measurement-min-%1$s"><b>Min:</b></label> <input id="computed-measurement-min-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-max-%1$s"><b>Max:</b></label> <input id="computed-measurement-max-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br/><div style="overflow: hidden; padding: 10px; padding-right: 20px; margin: 0px;"><textarea id="computed-measurement-expr-%1$s" class="ui-widget-content ui-corner-all" style="width: 100%%; height: 55px; padding: 5px; margin: 0; resize: none;"></textarea></div>',this._id));
a=this._selectMeasurementsList();for(var c="",b=0;b<this._datasourceGroupMeasurements.length;++b){var d=this._datasourceGroupMeasurements[b],e="";d.isComputed()&&(e='<button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete %2$s</button>');c+=sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;">'+e+'<button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
d.name(),b,this._id)}a.append(c);for(var f=this,b=0;b<this._datasourceGroupMeasurements.length;++b)d=this._datasourceGroupMeasurements[b],d.isComputed()&&$("#delete-button-"+b+"-"+this._id).button(this._deleteButtonsProperties).click(function(){f._deleteButtonClick($(this))}),$("#measurement-button-"+b+"-"+this._id).button(this._addButtonProperties).click(function(){f._addButtonClick($(this))});this._selectIdTextBox().watermark("[auto]");this._selectNameTextBox().watermark("[auto]");this._selectMinTextBox().watermark("[auto]");
this._selectMaxTextBox().watermark("[auto]");this._selectExpressionTextBox().watermark("[expression; for example: {0} - {1}]")}};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectDialog=function(){this._dialog||(this._dialog=$("#"+this._id));return this._dialog};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectExpressionTextBox=function(){this._expressionTextBox||(this._expressionTextBox=$("#computed-measurement-expr-"+this._id));return this._expressionTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectIdTextBox=function(){this._idTextBox||(this._idTextBox=$("#computed-measurement-key-"+this._id));return this._idTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectNameTextBox=function(){this._nameTextBox||(this._nameTextBox=$("#computed-measurement-name-"+this._id));return this._nameTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMinTextBox=function(){this._minTextBox||(this._minTextBox=$("#computed-measurement-min-"+this._id));return this._minTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMaxTextBox=function(){this._maxTextBox||(this._maxTextBox=$("#computed-measurement-max-"+this._id));return this._maxTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectTabs=function(){this._tabs||(this._tabs=this._dialog.find(".computed-measurements-tabs"));return this._tabs};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMeasurementsList=function(){this._measurementsList||(this._measurementsList=$("#computed-measurement-measurements-"+this._id));return this._measurementsList};
epiviz.ui.controls.CustomSettingsDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._customSettingsDefs=b;this._customSettingsValues=epiviz.utils.mapCopy(d)};epiviz.ui.controls.CustomSettingsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.CustomSettingsDialog.constructor=epiviz.ui.controls.CustomSettingsDialog;
epiviz.ui.controls.CustomSettingsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.charts.CustomSetting.Type;if(!this._dialog){var c=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");var b,d,e,f,g="";for(b=0;b<this._customSettingsDefs.length;++b){d=sprintf("%s-%s",this._id,this._customSettingsDefs[b].id);var h=sprintf('<tr><td><label for="%s">%s</label></td><td style="text-align: right;">%%s</td></tr>',d,this._customSettingsDefs[b].label);
e=null;f=this._customSettingsValues[this._customSettingsDefs[b].id];switch(this._customSettingsDefs[b].type){case a.BOOLEAN:h=sprintf(h,sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',d,f?'checked="checked"':"",f?"":'checked="checked"'));break;case a.ARRAY:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',
d,f.join(",")));break;case a.NUMBER:case a.STRING:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',d,f));break;case a.CATEGORICAL:var l="",m=this._customSettingsDefs[b];if(m.possibleValues)for(var n=0;n<m.possibleValues.length;++n)l+=sprintf('<option value="%1$s"%2$s>%1$s</option>',m.possibleValues[n],m.possibleValues[n]==f?'selected="selected"':"");f=sprintf('<select id="%s">%s</select>',d,l);h=sprintf(h,f)}g+=h}g=
sprintf('<div style="margin: 5px; padding: 5px; height: auto;"><table style="width: 100%%;">%s</table></div>',g);this._dialog.append(g);for(b=0;b<this._customSettingsDefs.length;++b)switch(d=sprintf("%s-%s",this._id,this._customSettingsDefs[b].id),e=$("#"+d),f=this._customSettingsValues[this._customSettingsDefs[b].id],this._customSettingsDefs[b].type){case a.BOOLEAN:e.buttonset();break;case a.NUMBER:case a.ARRAY:case a.STRING:e.watermark(this._customSettingsDefs[b].label);break;case a.CATEGORICAL:e.selectmenu()}this._dialog.dialog({autoOpen:!1,
resizable:!1,buttons:{Ok:function(){for(var b=0;b<c._customSettingsDefs.length;++b){d=sprintf("%s-%s",c._id,c._customSettingsDefs[b].id);e=$("#"+d);var f=null;if(e.val()==epiviz.ui.charts.CustomSetting.DEFAULT)f=c._customSettingsDefs[b].defaultValue;else{var g=null;try{switch(c._customSettingsDefs[b].type){case a.BOOLEAN:var h=$("#"+d+" :radio:checked").attr("id"),f="true"==h.substr(h.lastIndexOf("-")+1);break;case a.NUMBER:f=e.val()==epiviz.ui.charts.CustomSetting.DEFAULT?c._customSettingsDefs[b].defaultValue:
parseFloat(e.val());if(isNaN(f)){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',c._customSettingsDefs[b].label,c._customSettingsDefs[b].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}break;case a.ARRAY:f=e.val().split(/[\s,]+/g);break;case a.STRING:case a.CATEGORICAL:f=e.val()}}catch(l){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',
c._customSettingsDefs[b].label,c._customSettingsDefs[b].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}}c._customSettingsValues[c._customSettingsDefs[b].id]=f}c._handlers.ok(c._customSettingsValues);$(this).dialog("close")},Cancel:function(){c._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog({close:function(a,b){$(this).remove();c._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};
epiviz.ui.controls.CodeEditDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._editor=null;this._dialog=$("#"+this._id);this._text="// TODO: Your code here\n";this._methodsCode={};this._targetObj=b;this._selectedMethod=null;this._dialog.append('<div><select class="obj-methods" style=""></select></div><br /><div style="overflow-y: scroll; max-height: 500px;"><textarea autofocus="autofocus" class="code-edit"></textarea></div>');this._methodsSelector=this._dialog.find(".obj-methods");
var e=this._dialog.find(".code-edit");a=[];for(var f in b)$.isFunction(b[f])&&a.push(f);a.sort();for(c=0;c<a.length;++c){f=a[c];var g=0==c&&!d||d==f;this._methodsSelector.append(sprintf('<option value="%s"%s>%s</option>',f,g?' selected="selected"':"",f));g&&(this._text=b[f].toString(),this._selectedMethod=f)}var h=this;this._methodsSelector.change(function(){h._methodsCode[h._selectedMethod]=h._editor.getValue();var a=$(this).val(),b=h._methodsCode[a];b||(b=h._targetObj[a].toString(),h._methodsCode[a]=
b);h._text=b;h._editor?h._editor.getDoc().setValue(h._text):e.val(h._text);h._selectedMethod=a;h._dialog.dialog("option","position","center")});e.val(this._text);this._methodsSelector.selectmenu({style:"popup",width:"150",maxHeight:"150",menuWidth:"150"});this._dialog.dialog({autoOpen:!1,resizable:!1,width:"800",buttons:{Save:function(){h._methodsCode[h._selectedMethod]=h._editor.getValue();h._text=h._editor.getValue();var a={},b;for(b in h._methodsCode)h._methodsCode.hasOwnProperty(b)&&h._methodsCode[b]!=
h._targetObj[b].toString()&&(a[b]=h._methodsCode[b]);h._handlers.save(a);$(this).dialog("close")},Cancel:function(){h._editor&&h._editor.setOption("value",h._text);$(this).dialog("close")}},modal:!0});this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeEditDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.CodeEditDialog.constructor=epiviz.ui.controls.CodeEditDialog;
epiviz.ui.controls.CodeEditDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);this._dialog.dialog("open");this._editor||(this._editor=CodeMirror.fromTextArea(this._dialog.find(".code-edit")[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0}),this._dialog.dialog("option","position","center"))};epiviz.plugins={};epiviz.plugins.charts={};
epiviz.plugins.charts.BlocksTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.BlocksTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.BlocksTrack.constructor=epiviz.plugins.charts.BlocksTrack;epiviz.plugins.charts.BlocksTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.BlocksTrack.prototype._addStyles=function(){var a="#"+this._svgId,a=sprintf("%s .items { shape-rendering: crispEdges; fill-opacity: 0.6; stroke: #555555; stroke-opacity: 0.5; stroke-width: 1; }\n",a)+sprintf("%s .items .selected { stroke: #ffc600; stroke-width: 5; stroke-opacity: 0.7; fill-opacity: 1; }\n",a)+sprintf("%s .items .hovered { stroke: #ffc600; stroke-width: 5; stroke-opacity: 0.7; fill-opacity: 1; }\n",a);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',
a))};epiviz.plugins.charts.BlocksTrack.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;return c&&a?this._drawBlocks(a,c,b||0,d||1):[]};
epiviz.plugins.charts.BlocksTrack.prototype._drawBlocks=function(a,c,b,d){var e=epiviz.ui.charts.Axis,f=a.start(),g=a.end(),h=this.width(),l=this.height(),m=this.margins(),n=this.measurements(),q=this.colors(),v=this._customSettingsValues[epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE],A=d3.scale.linear().domain([f,g]).range([0,h-m.sumAxis(e.X)]),w=b*(h-m.sumAxis(e.X))/(g-f);this._clearAxes();this._drawAxes(A,null,10,5);var E=this,D=[],J=0;n.foreach(function(b){for(var d=
c.get(b),e=[],f=0;f<d.size();++f){var g=d.get(f);if(!(g.rowItem.start()>a.end()||g.rowItem.end()<a.start())){var h=sprintf("item data-series-%s",J);if(null!==v&&0<e.length){var l=e[e.length-1],m=A(g.rowItem.start()),n=A(l.end);if(m-n<v){l.end=Math.max(l.end,g.rowItem.end());l.valueItems[0].push(g);l.id=sprintf("b-%s-%s-%s",J,l.start,l.end);continue}}e.push(new epiviz.ui.charts.UiObject(sprintf("b-%s-%s-%s",J,g.rowItem.start(),g.rowItem.end()),g.rowItem.start(),g.rowItem.end(),null,J,[[g]],[b],h))}}D=
D.concat(e);++J});b=this._svg.select(".items");f=b.select(".selected");f=this._svg.select("#clip-"+this._id);b.empty()&&(f.empty()&&this._svg.select("defs").append("clipPath").attr("id","clip-"+this._id).append("rect").attr("class","clip-path-rect"),b=this._svg.append("g").attr("class","items").attr("id",this._id+"-gene-content").attr("clip-path","url(#clip-"+this._id+")"),f=b.append("g").attr("class","selected"),b.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));b.attr("transform",
"translate("+m.left()+", "+m.top()+")");this._svg.select(".clip-path-rect").attr("x",0).attr("y",0).attr("width",h-m.sumAxis(e.X)).attr("height",l-m.sumAxis(e.Y));h=b.selectAll(".item").data(D,function(a){return a.id});h.enter().insert("rect",":first-child").attr("class",function(a){return a.cssClasses}).style("fill",function(a){return q.get(a.seriesIndex)}).attr("x",function(a){return A(a.start)/d+w}).attr("width",function(a){return d*(A(a.end+1)-A(a.start))}).on("mouseout",function(a){E._unhover.notify()}).on("mouseover",
function(a){E._hover.notify(a)}).on("click",function(a){E._deselect.notify();E._select.notify(a);d3.event.stopPropagation()});h.attr("class",function(a){return a.cssClasses}).attr("height",l-m.sumAxis(e.Y)).attr("y",0).transition().duration(500).attr("x",function(a){return A(a.start)}).attr("width",function(a){return A(a.end+1)-A(a.start)});h.exit().transition().duration(500).attr("x",function(a){return A(a.start)}).remove();return D};epiviz.plugins.charts.BlocksTrack.prototype.chartTypeName=function(){return"epiviz.plugins.charts.BlocksTrack"};
epiviz.plugins.charts.BlocksTrack.prototype.setColorMap=function(a){this._container.find(".items").remove();epiviz.ui.charts.Chart.prototype.setColorMap.call(this,a)};epiviz.plugins.charts.BlocksTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.BlocksTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.BlocksTrackType.constructor=epiviz.plugins.charts.BlocksTrackType;
epiviz.plugins.charts.BlocksTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.BlocksTrack(a,c,b)};epiviz.plugins.charts.BlocksTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.BlocksTrack"};epiviz.plugins.charts.BlocksTrackType.prototype.chartName=function(){return"Blocks Track"};epiviz.plugins.charts.BlocksTrackType.prototype.chartHtmlAttributeName=function(){return"blocks"};epiviz.plugins.charts.BlocksTrackType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.RANGE};
epiviz.plugins.charts.BlocksTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE,epiviz.ui.charts.CustomSetting.Type.NUMBER,5,"Minimum block distance")])};epiviz.plugins.charts.BlocksTrackType.CustomSettings={MIN_BLOCK_DISTANCE:"minBlockDistance"};
epiviz.plugins.charts.LineTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.LineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.LineTrack.constructor=epiviz.plugins.charts.LineTrack;epiviz.plugins.charts.LineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.LineTrack.prototype.draw=function(a,c,b,d){var e=this._lastRange;epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;e&&a&&e.overlapsWith(a)&&e.width()==a.width()&&(b=a.start()-e.start());if(!c||!a)return[];var e=epiviz.ui.charts.CustomSetting,f=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MIN],g=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MAX];f==e.DEFAULT&&(f=null,this.measurements().foreach(function(a){null!==
a&&(null===f||a.minValue()<f)&&(f=a.minValue())}));g==e.DEFAULT&&(g=null,this.measurements().foreach(function(a){null!==a&&(null===g||a.maxValue()>g)&&(g=a.maxValue())}));null===f&&null===g&&(f=-1,g=1);null===f&&(f=g-1);null===g&&(g=f+1);var h=epiviz.ui.charts.Axis,e=d3.scale.linear().domain([a.start(),a.end()]).range([0,this.width()-this.margins().sumAxis(h.X)]),l=d3.scale.linear().domain([f,g]).range([this.height()-this.margins().sumAxis(h.Y),0]);this._clearAxes();this._drawAxes(e,l,10,5);b=(b||
0)*(this.width()-this.margins().sumAxis(h.X))/a.width();if(this._svg.selectAll(".lines").empty()){var m=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");this.measurements().foreach(function(a,b){m.append("g").attr("class","line-series-index-"+b);m.append("g").attr("class","point-series-index-"+b)})}return this._drawLines(a,c,b,d||1,e,l)};
epiviz.plugins.charts.LineTrack.prototype._drawLines=function(a,c,b,d,e,f){this.margins();var g=this.colors(),h=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.MAX_POINTS],l=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS],m=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES],n=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS],q=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS],
v=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION],A=this;d=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(epiviz.ui.charts.Axis.X)]).range([a.start(),a.end()])(b)-a.start();var w=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+d),Math.max(a.end(),a.end()+d)),E=this._svg.select(".lines"),D=[];this.measurements().foreach(function(a,d){var C=c.get(a),t=C.binarySearchStarts(w);if(0!=t.length){0<t.index&&
(--t.index,++t.length);t.index+t.length<C.size()&&++t.length;var z=null;if(null===h||t.length<=h)z=epiviz.utils.range(t.length,t.index);else for(var F=t.length/h,z=[],O=0;Math.round(O)<t.length;O+=F)z.push(t.index+Math.round(O));for(t=0;t<z.length;++t)F=C.get(z[t]),D.push(new epiviz.ui.charts.UiObject(sprintf("line_%s_%s",d,F.globalIndex),F.rowItem.start(),F.rowItem.end(),[F.value],d,[[F]],[a],sprintf("item data-series-%s",d)));t=function(a){a=C.get(a);return e(a.rowItem.start())};F=function(a){a=
C.get(a);return f(a.value)};if(m){var O=d3.svg.line().x(t).y(F).interpolate(v),S=E.select(".line-series-index-"+d).selectAll("path").data([z]);S.enter().append("path").attr("d",O).style("shape-rendering","auto").style("stroke-opacity","0.7").on("mouseover",function(){A._captureMouseHover()}).on("mousemove",function(){A._captureMouseHover()}).on("mouseout",function(){A._unhover.notify()});S.attr("d",O).style("stroke",g.get(d)).style("stroke-width",q).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform",
"translate(0)")}else E.select(".line-series-index-"+d).selectAll("path").remove();E.select(".point-series-index-"+d).selectAll("circle").remove();l&&(z=E.select(".point-series-index-"+d).selectAll("circle").data(z),z.enter().append("circle").attr("class","point-series-index-"+d).attr("r",n).attr("cx",t).attr("cy",F).attr("fill","none").attr("stroke",g.get(d)).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform","translate(0)"),z.on("mouseover",function(){A._captureMouseHover()}).on("mousemove",
function(){A._captureMouseHover()}).on("mouseout",function(){A._unhover.notify()}),z.exit().transition().duration(500).style("opacity",0).remove())}});return D};epiviz.plugins.charts.LineTrack.prototype.chartTypeName=function(){return"epiviz.plugins.charts.LineTrack"};epiviz.plugins.charts.LineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.LineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);
epiviz.plugins.charts.LineTrackType.constructor=epiviz.plugins.charts.LineTrackType;epiviz.plugins.charts.LineTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.LineTrack(a,c,b)};epiviz.plugins.charts.LineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.LineTrack"};epiviz.plugins.charts.LineTrackType.prototype.chartName=function(){return"Line Track"};epiviz.plugins.charts.LineTrackType.prototype.chartHtmlAttributeName=function(){return"lines"};
epiviz.plugins.charts.LineTrackType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.FEATURE};
epiviz.plugins.charts.LineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.MAX_POINTS,epiviz.ui.charts.CustomSetting.Type.NUMBER,100,"Maximum points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,
epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"linear","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};
epiviz.plugins.charts.LineTrackType.CustomSettings={MAX_POINTS:"maxPoints",SHOW_POINTS:"showPoints",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation"};
epiviz.plugins.charts.ScatterPlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._legend=this._jChartContent=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var d=this;this.measurements().foreach(function(a,b){0==b%2?d._measurementsX.push(a):d._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=this._measurementsX[a].name(),this._yLabel+=
this._measurementsY[a].name();this._initialize()};epiviz.plugins.charts.ScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.ScatterPlot.constructor=epiviz.plugins.charts.ScatterPlot;
epiviz.plugins.charts.ScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._chartContent=this._svg.append("g").attr("class","chart-content");this._jChartContent=this._container.find(".chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.ScatterPlot.prototype._addStyles=function(){for(var a="#"+this._svgId,c=sprintf("%s .items {}\n",a)+sprintf("%s .items .selected { fill: #1a6d00; stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; opacity: 1; }\n",a)+sprintf("%s .items .hovered { fill: #1a6d00; stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; opacity: 1; }\n",a),b=Math.min(this._measurementsX.length,this._measurementsY.length),d=0;d<b;++d)c+=sprintf("%s .data-series-%s { opacity: 1.0; }\n",a,d);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',
c))};epiviz.plugins.charts.ScatterPlot.prototype.draw=function(a,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c);c=this._lastData;a=this._lastRange;return c&&a?this._drawCircles(a,c):[]};
epiviz.plugins.charts.ScatterPlot.prototype._drawCircles=function(a,c){var b=this,d=epiviz.ui.charts.Axis,e=Math.max(1,this._customSettingsValues[epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),f=Math.max(Math.floor(e),1),g=Math.min(this._measurementsX.length,this._measurementsY.length),h=c.first().value.globalStartIndex(),l=c.first().value.size()+h;c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.size()+c;c>h&&(h=c);d<l&&(l=d)});
var m=l-h,n=this.margins(),q=this.width(),v=this.height(),A=epiviz.ui.charts.CustomSetting,w=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MIN],E=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MAX],D=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.X_MIN],J=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.X_MAX];D==A.DEFAULT&&(D=this._measurementsX[0].minValue());w==A.DEFAULT&&(w=this._measurementsY[0].minValue());
J==A.DEFAULT&&(J=this._measurementsX[0].maxValue());E==A.DEFAULT&&(E=this._measurementsY[0].maxValue());var A=d3.scale.linear().domain([D,J]).range([0,q-n.sumAxis(d.X)]),I=d3.scale.linear().domain([w,E]).range([v-n.sumAxis(d.Y),0]);this._clearAxes(this._chartContent);this._drawAxes(A,I,15,15,this._chartContent);var C,t,z=[];for(C=0;C<m;++C){t=C+h;var F=c.get(this._measurementsX[0]).getByGlobalIndex(t).rowItem;if(F.start()<a.end()&&F.end()>a.start())for(F=0;F<g;++F)z.push(F*m+C)}var F={},g=[],O=1;
for(C=0;C<z.length;++C){t=z[C]%m;var S=t+h;t=Math.floor(t/m);var V=b._measurementsX[t],T=b._measurementsY[t],pa=c.get(V).getByGlobalIndex(S),S=c.get(T).getByGlobalIndex(S),La=sprintf("item data-series-%s",t),Wa=A(pa.value),va=I(S.value),Wa=Math.floor(Wa/f)*f,va=Math.floor(va/f)*f,ha=null;F[va]&&F[va][Wa]?(ha=F[va][Wa],ha.id+="_"+pa.globalIndex,ha.start=Math.min(ha.start,pa.rowItem.start()),ha.end=Math.max(ha.end,pa.rowItem.end()),ha.values[0]=(ha.values[0]*ha.valueItems[0].length+pa.value)/(ha.valueItems[0].length+
1),ha.values[1]=(ha.values[1]*ha.valueItems[1].length+S.value)/(ha.valueItems[1].length+1),ha.valueItems[0].push(pa),ha.valueItems[1].push(S),ha.valueItems[0].length>O&&(O=ha.valueItems[0].length)):(ha=new epiviz.ui.charts.UiObject(sprintf("scatter_%s_%s",t,pa.globalIndex),pa.rowItem.start(),pa.rowItem.end(),[pa.value,S.value],t,[[pa],[S]],[V,T],La),F[va]||(F[va]={}),F[va][Wa]=ha,g.push(ha))}f=this._chartContent.select(".items");f.empty()&&(f=this._chartContent.append("g").attr("class","items"),m=
f.append("g").attr("class","selected"),f.append("g").attr("class","hovered"),m.append("g").attr("class","hovered"));f=f.selectAll("circle").data(g,function(a){return a.id});f.enter().insert("circle",":first-child").attr("id",function(a){return sprintf("%s-item-%s-%s",b._id,a.seriesIndex,a.valueItems[0][0].globalIndex)}).style("opacity",0).style("fill-opacity",0).attr("r",0);f.each(function(a){d3.select(this).attr("cx",n.left()+(a.values[0]-D)*(q-n.sumAxis(d.X))/(J-D)).attr("cy",v-n.bottom()-(a.values[1]-
w)*(v-n.sumAxis(d.Y))/(E-w)).attr("class",a.cssClasses).style("fill",b.colors().get(a.seriesIndex))});f.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.3,a.valueItems[0].length/O)}).style("opacity",null).attr("r",e);f.exit().transition().duration(1E3).style("opacity",0).attr("r",0).remove();f.on("mouseover",function(a){b._hover.notify(a)}).on("mouseout",function(a){b._unhover.notify()}).on("click",function(a){b._deselect.notify();b._select.notify(a);d3.event.stopPropagation()});
return g};epiviz.plugins.charts.ScatterPlot.prototype.chartTypeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlot.prototype.colorMap=function(){for(var a=Math.min(this._measurementsX.length,this._measurementsY.length),c=Array(a),b=0;b<a;++b)c[b]={name:sprintf("%s vs %s",this._measurementsX[b].name(),this._measurementsY[b].name()),color:this._properties.colors.get(b)};return c};
epiviz.plugins.charts.ScatterPlot.prototype._drawAxes=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.Plot.prototype._drawAxes.call(this,a,c,b,d,e,f,g,h);this._legend.selectAll("text").remove();a=7*this._xLabel.length;c=7*this._yLabel.length;this._legend.append("text").attr("x",.5*(this.width()-a)).attr("y",this.height()-this.margins().bottom()+35).attr("style","font-weight: regular; font-size: 12;").attr("fill","#000000").attr("stroke","none").style("fill-opacity",1).text(this._xLabel);this._legend.append("text").attr("x",
-this.height()+.5*(this.height()-c)+this.margins().top()).attr("y",this.margins().left()-25).attr("transform","rotate(-90)").attr("style","font-weight: regular; font-size: 12;").attr("fill","#000000").attr("stroke","none").style("fill-opacity",1).text(this._yLabel)};epiviz.plugins.charts.ScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.ScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);
epiviz.plugins.charts.ScatterPlotType.constructor=epiviz.plugins.charts.ScatterPlotType;epiviz.plugins.charts.ScatterPlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.ScatterPlot(a,c,b)};epiviz.plugins.charts.ScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartName=function(){return"Scatter Plot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartHtmlAttributeName=function(){return"scatter"};
epiviz.plugins.charts.ScatterPlotType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.FEATURE};epiviz.plugins.charts.ScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.ScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.ScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Max Y")])};epiviz.plugins.charts.ScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio"};epiviz.plugins.charts.GenesTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.GenesTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.GenesTrack.constructor=epiviz.plugins.charts.GenesTrack;epiviz.plugins.charts.GenesTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.GenesTrack.prototype._addStyles=function(){var a="#"+this._svgId,a=sprintf("%s .items { shape-rendering: auto; /* fill: %s; */ stroke: #555555; fill-opacity: 0.6; }\n",a,this.colors().get(0))+sprintf("%s .exons { /* fill: %s; */ stroke: none; }\n",a,this.colors().get(1))+sprintf("%s .gene-name { font-weight: bold; font-size: 12; fill: #000000; stroke: none; fill-opacity: 0; }\n",a)+sprintf("%s .selected { /*filter: url(#%s-dropshadow);*/ fill-opacity: 1; stroke: #555555; }\n",
a,this._id)+sprintf("%s .selected .gene-body { /* fill: #ffc600; */ stroke: %s; stroke-width: 3; stroke-opacity: 0.7; }\n",a,this.colors().get(1))+sprintf("%s .hovered { /*filter: url(#%s-dropshadow);*/ fill-opacity: 1; stroke: #555555; }\n",a,this._id)+sprintf("%s .hovered .gene-body { /* fill: #ffc600; */ stroke: %s; stroke-width: 3; stroke-opacity: 0.7; }\n",a,this.colors().get(1))+sprintf("%s .hovered .gene-name { fill-opacity: 1; }\n",a)+sprintf("%s .selected .gene-name { fill-opacity: 1; }\n",
a);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',a))};epiviz.plugins.charts.GenesTrack.prototype.draw=function(a,c,b,d){var e=this._lastRange;epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;e&&a&&e.overlapsWith(a)&&e.width()==a.width()&&(b=a.start()-e.start());e&&a&&e.overlapsWith(a)&&e.width()!=a.width()&&(d=e.width()/a.width());return c&&a?this._drawGenes(a,c,b||0,d||1):[]};
epiviz.plugins.charts.GenesTrack.prototype._drawGenes=function(a,c,b,d){var e=epiviz.ui.charts.Axis,f=a.start(),g=a.end();a=this.width();var h=this.height(),l=this.margins();this.measurements();this.colors();var m=d3.scale.linear().domain([f,g]).range([0,a-l.sumAxis(e.X)]),n=b*(a-l.sumAxis(e.X))/(g-f);this._clearAxes();this._drawAxes(m,null,10,5);var q=this,v=c.first().value;c=epiviz.utils.range(v.size()).map(function(a){a=v.get(a);var b=a.rowItem,c=sprintf("item gene-%s",b.metadata("gene"));return new epiviz.ui.charts.UiObject(b.metadata("gene"),
b.start(),b.end(),null,0,[[a]],[v.measurement()],c)});d&&(this._svg.select(".items").remove(),this._svg.select("defs").select("#clip-"+this._id).remove());d=this._svg.select(".items");b=d.select(".selected");d.empty()&&(this._svg.select("defs").append("clipPath").attr("id","clip-"+this._id).append("rect").attr("x",0).attr("y",0).attr("width",a-l.sumAxis(e.X)).attr("height",h-l.sumAxis(e.Y)),d=this._svg.append("g").attr("class","items").attr("transform","translate("+l.left()+", "+l.top()+")").attr("id",
this._id+"-gene-content").attr("clip-path","url(#clip-"+this._id+")"),b=d.append("g").attr("class","selected"),d.append("g").attr("class","hovered"),b.append("g").attr("class","hovered"));e=d.selectAll(".item").data(c,function(a){return a.id});e.enter().insert("g",":first-child").on("mouseout",function(a){q._unhover.notify()}).on("mouseover",function(a){q._hover.notify(a)}).on("click",function(a){q._deselect.notify();q._select.notify(a);d3.event.stopPropagation()}).attr("transform","translate("+n+
", 0) scale(1, 1)").each(function(a){q._drawGene(this,a,m)});n&&e.each(function(a){q._translateGene(this,a,n)});e.exit().transition().duration(500).style("opacity",0).remove();return c};
epiviz.plugins.charts.GenesTrack.prototype._translateGene=function(a,c,b){a=d3.select(a);c=a.attr("transform");var d=RegExp("translate\\([\\d\\.\\-]+[\\,\\s]+[\\d\\.\\-]+\\)","g"),e=RegExp("[\\d\\.\\-]+","g"),f=c.match(d)[0],e=parseFloat(f.match(e)[0]);c=c.replace(d,"translate("+(e-b)+", 0)");a.transition().duration(500).attr("transform",c)};
epiviz.plugins.charts.GenesTrack.prototype._drawGene=function(a,c,b){var d=epiviz.ui.charts.Axis,e=this,f=c.valueItems[0][0].rowItem,g=b(c.start),h=b(c.end),l="+"==f.strand()?1:-1,m=-l*(this.height()-this.margins().sumAxis(d.Y))*.25,n=f.metadata("exon_starts").split(",").map(function(a){return parseInt(a)}),q=f.metadata("exon_ends").split(",").map(function(a){return parseInt(a)}),v=d3.range(0,n.length),A=.08*this.height(),w=.16*this.height(),E=A*Math.sqrt(3)*.5;a=d3.select(a);a.attr("class",c.cssClasses);
a.append("polygon").attr("class","gene-body").style("fill",this.colors().get(0)).attr("points",function(){var a=null,b=null,a=.5*(e.height()-e.margins().sumAxis(d.Y)-A)+m,b=[a,a,a+.5*A,a+A,a+A],a="+"==f.strand()?[g,h,h+E,h,g]:[h,g,g-E,g,h];return sprintf("%s,%s %s,%s %s,%s %s,%s %s,%s",a[0],b[0],a[1],b[1],a[2],b[2],a[3],b[3],a[4],b[4])});a.append("g").attr("class","exons").style("fill",this.colors().get(1)).selectAll("rect").data(v).enter().append("rect").attr("x",function(a){return b(n[a])}).attr("y",
.5*(e.height()-w-e.margins().sumAxis(d.Y))+m).attr("width",function(a){return b(q[a])-b(n[a])}).attr("height",w);a.append("text").attr("class","gene-name").attr("x",g+2).attr("y",.5*(e.height()-e.margins().sumAxis(d.Y))+m-l*(A+2)).style("dominant-baseline","central").text(c.id)};epiviz.plugins.charts.GenesTrack.prototype.chartTypeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrack.prototype.colorMap=function(){return[{name:"Genes",color:this._properties.colors.get(0)},{name:"Exons",color:this._properties.colors.get(1)}]};
epiviz.plugins.charts.GenesTrack.prototype._drawAxes=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.Track.prototype._drawAxes.call(this,a,c,b,d,e,f,g,h);a=epiviz.ui.charts.Axis;this._svg.select(".axes").append("g").attr("class","xAxis").append("line").attr("x1",this.margins().left()).attr("x2",this.width()-this.margins().left()).attr("y1",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).attr("y2",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).style("stroke","#555555").style("shape-rendering",
"crispEdges")};epiviz.plugins.charts.GenesTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.GenesTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.GenesTrackType.constructor=epiviz.plugins.charts.GenesTrackType;epiviz.plugins.charts.GenesTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.GenesTrack(a,c,b)};epiviz.plugins.charts.GenesTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrackType.prototype.chartName=function(){return"Genes Track"};epiviz.plugins.charts.GenesTrackType.prototype.chartHtmlAttributeName=function(){return"genes"};epiviz.plugins.charts.GenesTrackType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.RANGE};
epiviz.plugins.charts.HeatmapPlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._jChartContent=this._chartContent=null;this._min=this.measurements().first().minValue();this._max=this.measurements().first().maxValue();this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,this.colors().get(0),this.colors().get(1));this._initialize()};epiviz.plugins.charts.HeatmapPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.HeatmapPlot.constructor=epiviz.plugins.charts.HeatmapPlot;epiviz.plugins.charts.HeatmapPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._chartContent=this._svg.append("g").attr("class","chart-content");this._jChartContent=this._container.find(".chart-content")};
epiviz.plugins.charts.HeatmapPlot.prototype._addStyles=function(){var a="#"+this._svgId,a=sprintf("%s .items { stroke: #efefef; stroke-opacity: 0.3; shape-rendering: 'crispEdges'; }\n",a)+sprintf("%s .selected .item { stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; fill-opacity: 1; }\n",a)+sprintf("%s .hovered .item { stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; fill-opacity: 1; }\n",a)+sprintf("%s .col-text { text-anchor: start; font-size: 10px; }\n",a)+sprintf("%s .row-text { text-anchor: end; font-size: 9px; }\n",
a)+sprintf("%s .selected .col-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a)+sprintf("%s .hovered .col-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a)+sprintf("%s .selected .row-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a)+sprintf("%s .hovered .row-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',a))};
epiviz.plugins.charts.HeatmapPlot.prototype.draw=function(a,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c);c=this._lastData;a=this._lastRange;if(!c||!a)return[];var b=this._applyClustering(a,c);return this._drawCells(a,b)};
epiviz.plugins.charts.HeatmapPlot.prototype._applyClustering=function(a,c){var b=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance(),d=b.algorithm(this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG]),e=b.metric(this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC]),b=b.linkage(this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE]),f=[];c.foreach(function(b,
c,d){b=[];for(d=0;d<c.size();++d){var e=c.get(d).rowItem;e.start()<a.end()&&e.end()>a.start()&&b.push(c.get(d).value)}f.push(b)});var d=d.cluster(f,e,b),g=d.root().data(),h=[];c.foreach(function(a){h.push(a)});e=[];for(b=0;b<g.length;++b)e[b]=h[g[b]];g=new epiviz.measurements.MeasurementHashtable;for(b=0;b<e.length;++b)g.put(e[b],c.get(e[b]));this._drawDendrogram(d);return g};
epiviz.plugins.charts.HeatmapPlot.prototype._drawCells=function(a,c){var b=this,d=epiviz.ui.charts.Axis,e=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],f=c.first().value.globalStartIndex(),g=c.first().value.size()+f,h=[];c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.size()+c;c>f&&(f=c);d<g&&(g=d);h.push(a.name())});var l=g-f,m=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.LABEL],n=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO],
n=this.width()*(1-n);this.height();var q=[],v={},A,w;for(A=0;A<l;++A){w=A+f;var E=c.get(this.measurements().first()).getByGlobalIndex(w).rowItem;E.start()<a.end()&&E.end()>a.start()&&(E=E.metadata(m)||""+E.id(),v[q.length]=w,q.push(E))}var D=[],J={};c.foreach(function(a,b,c){for(var d=Math.ceil(q.length/e),f=0,g=e,h=0;h<q.length;++h){w=v[h];var d=b.getByGlobalIndex(w),l=null;0==f?(f=sprintf("item data-series-%s",c),l=new epiviz.ui.charts.UiObject(sprintf("heatmap_%s_%s",c,w),d.rowItem.start(),d.rowItem.end(),
[d.value],c,[[d]],[a],f),D.push(l),f=d=Math.ceil((q.length-h)/g),--g):(l=D[D.length-1],l.id+="_"+w,l.start=Math.min(l.start,d.rowItem.start()),l.end=Math.max(l.end,d.rowItem.end()),l.values[0]=(l.values[0]*l.valueItems[0].length+d.value)/(l.valueItems[0].length+1),l.valueItems[0].push(d));0==c&&(J[w]=D.length-1);--f}});var I=(l=Math.min(q.length,e))?(n-this.margins().sumAxis(d.X))/l:0,C=(this.height()-this.margins().sumAxis(d.Y))/this.measurements().size();this._colorScale=epiviz.utils.colorizeBinary(this._min,
this._max,this.colors().get(0),this.colors().get(1));d=this._chartContent.select(".items");d.empty()&&(d=this._chartContent.append("g").attr("class","items"),m=d.append("g").attr("class","selected"),d.append("g").attr("class","hovered"),m.append("g").attr("class","hovered"));d.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");m=d.selectAll("rect").data(D,function(a){return a.id});m.enter().append("rect").attr("id",function(a){return sprintf("%s-item-%s-%s",b._id,a.seriesIndex,
a.valueItems[0][0].globalIndex)}).attr("class",function(a){return a.cssClasses}).style("opacity",0).style("fill-opacity",0).attr("x",function(a,b){return I*J[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return C*a.seriesIndex}).attr("width",I).attr("height",C).style("fill",function(a){return b._colorScale(a.values[0])});m.transition().duration(1E3).style("fill-opacity",null).style("opacity",null).attr("x",function(a,b){return I*J[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return C*
a.seriesIndex}).attr("width",I).attr("height",C).style("fill",function(a){return b._colorScale(a.values[0])});m.exit().transition().duration(1E3).style("opacity",0).remove();m.on("mouseover",function(a){b._hover.notify(a)}).on("mouseout",function(a){b._unhover.notify()}).on("click",function(a){b._deselect.notify();b._select.notify(a);d3.event.stopPropagation()});m=d.selectAll(".col-text");q.length>l?m.transition().duration(500).style("opacity",0).remove():(m=m.data(q,function(a,b){return a+v[b]}),
m.enter().append("text").attr("class","col-text").style("opacity","0").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*I+.5*I)+",-5)rotate(-60)"}).text(function(a){return a}),m.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*I+.5*I)+",-5)rotate(-60)"}).style("opacity",null),m.exit().transition().duration(500).style("opacity",0).remove());d=d.selectAll(".row-text").data(h,String);d.enter().append("text").attr("class",
function(a){return"row-text"}).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*C+.5*C)+")rotate(30)"}).text(function(a){return a});d.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*C+.5*C)+")rotate(30)"});return D};
epiviz.plugins.charts.HeatmapPlot.prototype._drawDendrogram=function(a){this._svg.select(".dendrogram").remove();var c=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO],b=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM_LABELS];if(0<c){this._svg.append("g").attr("class","dendrogram");var c=this.width()*c,d=this.height()-this.margins().sumAxis(epiviz.ui.charts.Axis.Y),e=this.margins().top(),f=this.width()-
c-this.margins().right();this._drawSubDendrogram(this._svg.select(".dendrogram"),a.root(),e,f,c,d,b)}};
epiviz.plugins.charts.HeatmapPlot.prototype._drawSubDendrogram=function(a,c,b,d,e,f,g){var h=c.children();if(0==h.length)return b+.5*f;for(var l=d3.scale.linear().domain([0,c.distance()]).range([0,e]),m=0,n,q,v=0;v<h.length;++v){var A=b+m,w=f/c.weight()*h[v].weight(),E=l(h[v].distance()),A=this._drawSubDendrogram(a,h[v],A,d,E,w,g);a.append("line").attr("x1",d+E).attr("x2",d+e).attr("y1",A).attr("y2",A).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","crispEdges");0==v&&g&&
a.append("text").attr("class","row-text").attr("x",Math.max(d+10,d+.5*(E+e))).attr("y",A-10).style("text-anchor","middle").text(Globalize.format(c.distance(),"n2"));if(void 0==n||n>A)n=A;if(void 0==q||q<A)q=A;m+=f/c.weight()*h[v].weight()}a.append("line").attr("x1",d+e).attr("x2",d+e).attr("y1",n).attr("y2",q).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","crispEdges");return.5*(n+q)};epiviz.plugins.charts.HeatmapPlot.prototype.chartTypeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};
epiviz.plugins.charts.HeatmapPlot.prototype.colorMap=function(){return[{name:"Min",color:this.colors().get(0)},{name:"Max",color:this.colors().get(1)}]};epiviz.plugins.charts.HeatmapPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.HeatmapPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.HeatmapPlotType.constructor=epiviz.plugins.charts.HeatmapPlotType;
epiviz.plugins.charts.HeatmapPlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.HeatmapPlot(a,c,b)};epiviz.plugins.charts.HeatmapPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartName=function(){return"Heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartHtmlAttributeName=function(){return"heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.FEATURE};
epiviz.plugins.charts.HeatmapPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.HeatmapPlotType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance();return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.LABEL,epiviz.ui.charts.CustomSetting.Type.STRING,"probe","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS,epiviz.ui.charts.CustomSetting.Type.NUMBER,
40,"Max columns"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.algorithms()[0],"Clustering Algorithm",a.algorithms()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.metrics()[0],"Clustering Metric",a.metrics()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.linkages()[0],"Clustering Linkage",a.linkages()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,0,"Dendrogram Ratio"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM_LABELS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show Dendrogram Labels")])};
epiviz.plugins.charts.HeatmapPlotType.CustomSettings={MAX_COLUMNS:"maxColumns",CLUSTERING_ALG:"clusteringAlg",CLUSTERING_METRIC:"clusteringMetric",CLUSTERING_LINKAGE:"clusteringLinkage",DENDROGRAM_RATIO:"dendrogramRatio",SHOW_DENDROGRAM_LABELS:"showDendrogramLabels"};
epiviz.main=function(){var a=new epiviz.Config(epiviz.EpiViz.SETTINGS),c=new epiviz.ui.LocationManager(a),b=new epiviz.measurements.MeasurementsManager,d=new epiviz.ui.charts.ChartFactory(a),e=new epiviz.ui.charts.ChartManager(a),f=new epiviz.ui.ControlManager(a,d,e,b,c),g=new epiviz.data.DataProviderFactory(a),g=new epiviz.data.DataManager(a,g),h=new epiviz.workspaces.WorkspaceManager(a,c,b,e,d),l=new epiviz.workspaces.UserManager(a),m=new epiviz.ui.WebArgsManager(c,h),c=new epiviz.EpiViz(a,c,b,
f,g,d,e,h,l,m);epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize(a);c.start()};goog.exportSymbol("epiviz.main",epiviz.main);
